<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>äº‘æ¾ˆã®åšå®¢</title>
  
  <subtitle>ä¸ç»å†é£é›¨ï¼Œæ€èƒ½è§å½©è™¹ï¼</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://liudufu.github.io/"/>
  <updated>2020-12-08T13:33:03.918Z</updated>
  <id>https://liudufu.github.io/</id>
  
  <author>
    <name>äº‘æ¾ˆ</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>servletåŸºç¡€</title>
    <link href="https://liudufu.github.io/Servlet_Basics/"/>
    <id>https://liudufu.github.io/Servlet_Basics/</id>
    <published>2020-12-08T13:30:39.000Z</published>
    <updated>2020-12-08T13:33:03.918Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p> java Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚ä½¿ç”¨ Servletï¼Œæ‚¨å¯ä»¥æ”¶é›†æ¥è‡ªç½‘é¡µè¡¨å•çš„ç”¨æˆ·è¾“å…¥ï¼Œå‘ˆç°æ¥è‡ªæ•°æ®åº“æˆ–è€…å…¶ä»–æºçš„è®°å½•ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºç½‘é¡µã€‚</p></blockquote><a id="more"></a><h2 id="ğŸŒ¸Servlet-ç®€ä»‹"><a href="#ğŸŒ¸Servlet-ç®€ä»‹" class="headerlink" title="ğŸŒ¸Servlet ç®€ä»‹"></a>ğŸŒ¸Servlet ç®€ä»‹</h2><h3 id="ğŸServlet-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸServlet-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸServlet æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸServlet æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>java Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚</p><p>ä½¿ç”¨ Servletï¼Œæ‚¨å¯ä»¥æ”¶é›†æ¥è‡ªç½‘é¡µè¡¨å•çš„ç”¨æˆ·è¾“å…¥ï¼Œå‘ˆç°æ¥è‡ªæ•°æ®åº“æˆ–è€…å…¶ä»–æºçš„è®°å½•ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºç½‘é¡µã€‚</p><p>Java Servlet é€šå¸¸æƒ…å†µä¸‹ä¸ä½¿ç”¨ CGIï¼ˆCommon Gateway Interfaceï¼Œå…¬å…±ç½‘å…³æ¥å£ï¼‰å®ç°çš„ç¨‹åºå¯ä»¥è¾¾åˆ°å¼‚æ›²åŒå·¥çš„æ•ˆæœã€‚ä½†æ˜¯ç›¸æ¯”äº CGIï¼ŒServlet æœ‰ä»¥ä¸‹å‡ ç‚¹ä¼˜åŠ¿ï¼š</p><ul><li>æ€§èƒ½æ˜æ˜¾æ›´å¥½ã€‚</li><li>Servlet åœ¨ Web æœåŠ¡å™¨çš„åœ°å€ç©ºé—´å†…æ‰§è¡Œã€‚è¿™æ ·å®ƒå°±æ²¡æœ‰å¿…è¦å†åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹æ¥å¤„ç†æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ã€‚</li><li>Servlet æ˜¯ç‹¬ç«‹äºå¹³å°çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç”¨ Java ç¼–å†™çš„ã€‚</li><li>æœåŠ¡å™¨ä¸Šçš„ Java å®‰å…¨ç®¡ç†å™¨æ‰§è¡Œäº†ä¸€ç³»åˆ—é™åˆ¶ï¼Œä»¥ä¿æŠ¤æœåŠ¡å™¨è®¡ç®—æœºä¸Šçš„èµ„æºã€‚å› æ­¤ï¼ŒServlet æ˜¯å¯ä¿¡çš„ã€‚</li><li>Java ç±»åº“çš„å…¨éƒ¨åŠŸèƒ½å¯¹ Servlet æ¥è¯´éƒ½æ˜¯å¯ç”¨çš„ã€‚å®ƒå¯ä»¥é€šè¿‡ sockets å’Œ RMI æœºåˆ¶ä¸ appletsã€æ•°æ®åº“æˆ–å…¶ä»–è½¯ä»¶è¿›è¡Œäº¤äº’ã€‚</li></ul><h3 id="ğŸServlet-æ¶æ„"><a href="#ğŸServlet-æ¶æ„" class="headerlink" title="ğŸServlet æ¶æ„"></a>ğŸServlet æ¶æ„</h3><p><a href="https://imgchr.com/i/dX9zf1" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX9zf1.png" alt="dX9zf1.png"></a></p><h3 id="ğŸServletåœ¨åšä»€ä¹ˆ"><a href="#ğŸServletåœ¨åšä»€ä¹ˆ" class="headerlink" title="ğŸServletåœ¨åšä»€ä¹ˆ"></a>ğŸServletåœ¨åšä»€ä¹ˆ</h3><ul><li>è¯»å–å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‘é€çš„æ˜¾å¼çš„æ•°æ®ã€‚è¿™åŒ…æ‹¬ç½‘é¡µä¸Šçš„ HTML è¡¨å•ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æ˜¯æ¥è‡ª applet æˆ–è‡ªå®šä¹‰çš„ HTTP å®¢æˆ·ç«¯ç¨‹åºçš„è¡¨å•ã€‚</li><li>è¯»å–å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‘é€çš„éšå¼çš„ HTTP è¯·æ±‚æ•°æ®ã€‚è¿™åŒ…æ‹¬ cookiesã€åª’ä½“ç±»å‹å’Œæµè§ˆå™¨èƒ½ç†è§£çš„å‹ç¼©æ ¼å¼ç­‰ç­‰ã€‚</li><li>å¤„ç†æ•°æ®å¹¶ç”Ÿæˆç»“æœã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦è®¿é—®æ•°æ®åº“ï¼Œæ‰§è¡Œ RMI æˆ– CORBA è°ƒç”¨ï¼Œè°ƒç”¨ Web æœåŠ¡ï¼Œæˆ–è€…ç›´æ¥è®¡ç®—å¾—å‡ºå¯¹åº”çš„å“åº”ã€‚</li><li>å‘é€æ˜¾å¼çš„æ•°æ®ï¼ˆå³æ–‡æ¡£ï¼‰åˆ°å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚è¯¥æ–‡æ¡£çš„æ ¼å¼å¯ä»¥æ˜¯å¤šç§å¤šæ ·çš„ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ–‡ä»¶ï¼ˆHTML æˆ– XMLï¼‰ã€äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆGIF å›¾åƒï¼‰ã€Excel ç­‰ã€‚</li><li>å‘é€éšå¼çš„ HTTP å“åº”åˆ°å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚è¿™åŒ…æ‹¬å‘Šè¯‰æµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯è¢«è¿”å›çš„æ–‡æ¡£ç±»å‹ï¼ˆä¾‹å¦‚ HTMLï¼‰ï¼Œè®¾ç½® cookies å’Œç¼“å­˜å‚æ•°ï¼Œä»¥åŠå…¶ä»–ç±»ä¼¼çš„ä»»åŠ¡ã€‚</li></ul><hr><h2 id="ğŸŒ¸Servlet-åˆ›å»ºçš„ä¸‰ç§æ–¹å¼"><a href="#ğŸŒ¸Servlet-åˆ›å»ºçš„ä¸‰ç§æ–¹å¼" class="headerlink" title="ğŸŒ¸Servlet åˆ›å»ºçš„ä¸‰ç§æ–¹å¼"></a>ğŸŒ¸Servlet åˆ›å»ºçš„ä¸‰ç§æ–¹å¼</h2><h3 id="ğŸå®ç°-Servlet-æ¥å£"><a href="#ğŸå®ç°-Servlet-æ¥å£" class="headerlink" title="ğŸå®ç° Servlet æ¥å£"></a>ğŸå®ç° Servlet æ¥å£</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Servletçš„ç”Ÿå‘½å‘¨æœŸ:ä»Servletè¢«åˆ›å»ºåˆ°Servletè¢«é”€æ¯çš„è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">//ä¸€æ¬¡åˆ›å»ºï¼Œåˆ°å¤„æœåŠ¡</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªServletåªä¼šæœ‰ä¸€ä¸ªå¯¹è±¡ï¼ŒæœåŠ¡æ‰€æœ‰çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 1.å®ä¾‹åŒ–ï¼ˆä½¿ç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼‰</span></span><br><span class="line"><span class="comment"> * 2.åˆå§‹åŒ–  æ‰§è¡Œinitæ–¹æ³•</span></span><br><span class="line"><span class="comment"> * 3.æœåŠ¡     æ‰§è¡Œserviceæ–¹æ³•</span></span><br><span class="line"><span class="comment"> * 4.é”€æ¯    æ‰§è¡Œdestroyæ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo1</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">//public ServletDemo1(){}</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">//ç”Ÿå‘½å‘¨æœŸæ–¹æ³•:å½“Servletç¬¬ä¸€æ¬¡è¢«åˆ›å»ºå¯¹è±¡æ—¶æ‰§è¡Œè¯¥æ–¹æ³•,è¯¥æ–¹æ³•åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig arg0)</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">                System.out.println(<span class="string">"=======init========="</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿå‘½å‘¨æœŸæ–¹æ³•:å¯¹å®¢æˆ·ç«¯å“åº”çš„æ–¹æ³•,è¯¥æ–¹æ³•ä¼šè¢«æ‰§è¡Œå¤šæ¬¡ï¼Œæ¯æ¬¡è¯·æ±‚è¯¥servletéƒ½ä¼šæ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest arg0, ServletResponse arg1)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        System.out.println(<span class="string">"hehe"</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿå‘½å‘¨æœŸæ–¹æ³•:å½“Servletè¢«é”€æ¯æ—¶æ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"******destroy**********"</span>);</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//å½“åœæ­¢tomcatæ—¶ä¹Ÿå°±é”€æ¯çš„servletã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç»§æ‰¿-GenericServlet-ç±»"><a href="#ğŸç»§æ‰¿-GenericServlet-ç±»" class="headerlink" title="ğŸç»§æ‰¿ GenericServlet ç±»"></a>ğŸç»§æ‰¿ GenericServlet ç±»</h3><p>è¿™ç§æ–¹æ³•æˆ‘ä»¬æå°‘ç”¨</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo2</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest arg0, ServletResponse arg1)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        System.out.println(<span class="string">"heihei"</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç»§æ‰¿-HttpServlet-æ–¹æ³•"><a href="#ğŸç»§æ‰¿-HttpServlet-æ–¹æ³•" class="headerlink" title="ğŸç»§æ‰¿ HttpServlet æ–¹æ³•"></a>ğŸç»§æ‰¿ HttpServlet æ–¹æ³•</h3><p><code>ç»å¸¸ç”¨</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo3</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        System.out.println(<span class="string">"haha"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        System.out.println(<span class="string">"ee"</span>);</span><br><span class="line">        doGet(req,resp);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸HttpServletã€GenericServlet-å’Œ-Servlet-çš„å…³ç³»"><a href="#ğŸŒ¸HttpServletã€GenericServlet-å’Œ-Servlet-çš„å…³ç³»" class="headerlink" title="ğŸŒ¸HttpServletã€GenericServlet å’Œ Servlet çš„å…³ç³»"></a>ğŸŒ¸HttpServletã€GenericServlet å’Œ Servlet çš„å…³ç³»</h2><blockquote><p>å¯¹äºä¸€ä¸ª Servlet ç±»ï¼Œæˆ‘ä»¬æ—¥å¸¸æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ç»§æ‰¿è‡ª HttpServlet ç±»ï¼Œæä¾›äº† Http ç›¸å…³çš„æ–¹æ³•ï¼ŒHttpServlet æ‰©å±•äº† GenericServlet ç±»ï¼Œè€Œ GenericServlet ç±»åˆå®ç°äº† Servlet ç±»å’Œ ServletConfig ç±»ã€‚</p></blockquote><h3 id="ğŸServlet"><a href="#ğŸServlet" class="headerlink" title="ğŸServlet"></a>ğŸServlet</h3><p>Servlet ç±»æä¾›äº†äº”ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œä¸¤ä¸ªæ™®é€šæ–¹æ³•ï¼Œå…³äº Servlet ç±»çš„æ–¹æ³•ï¼Œä¸å†èµ˜è¿°</p><h3 id="ğŸGenericServlet"><a href="#ğŸGenericServlet" class="headerlink" title="ğŸGenericServlet"></a>ğŸGenericServlet</h3><p><code>GenericServlet</code> æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ç°äº† Servlet æ¥å£ï¼Œå¹¶ä¸”å¯¹å…¶ä¸­çš„ <code>init()</code> å’Œ <code>destroy()</code> å’Œ <code>service()</code> æä¾›äº†é»˜è®¤å®ç°ã€‚åœ¨ <code>GenericServlet</code> ä¸­ï¼Œä¸»è¦å®Œæˆäº†ä»¥ä¸‹ä»»åŠ¡ï¼š</p><ul><li>å°† init() ä¸­çš„ ServletConfig èµ‹ç»™ä¸€ä¸ªç±»çº§å˜é‡ï¼Œå¯ä»¥ç”± getServletConfig è·å¾—ï¼›</li><li>ä¸º Servlet æ‰€æœ‰æ–¹æ³•æä¾›é»˜è®¤å®ç°ï¼›</li><li>å¯ä»¥ç›´æ¥è°ƒç”¨ ServletConfig ä¸­çš„æ–¹æ³•ï¼›</li></ul><p>åŸºæœ¬çš„ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span>,<span class="title">ServletConfig</span></span>{</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//GenericServleté€šè¿‡å°†ServletConfigèµ‹ç»™ç±»çº§å˜é‡</span></span><br><span class="line">   <span class="keyword">private</span> trServletConfig servletConfig;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.servletConfig=servletConfig;</span><br><span class="line"></span><br><span class="line">      <span class="comment">/*è‡ªå®šä¹‰init()çš„åŸå› æ˜¯ï¼šå¦‚æœå­ç±»è¦åˆå§‹åŒ–å¿…é¡»è¦†ç›–çˆ¶ç±»çš„init() è€Œä½¿å®ƒæ— æ•ˆ è¿™æ ·</span></span><br><span class="line"><span class="comment">       this.servletConfig=servletConfigä¸èµ·ä½œç”¨ è¿™æ ·å°±ä¼šå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ è¿™æ ·å¦‚æœå­ç±»è¦åˆå§‹åŒ–ï¼Œ</span></span><br><span class="line"><span class="comment">       å¯ä»¥ç›´æ¥è¦†ç›–ä¸å¸¦å‚æ•°çš„init()æ–¹æ³• */</span></span><br><span class="line">      <span class="keyword">this</span>.init();</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//è‡ªå®šä¹‰çš„init()æ–¹æ³•ï¼Œå¯ä»¥ç”±å­ç±»è¦†ç›–  </span></span><br><span class="line">   <span class="comment">//init()ä¸æ˜¯ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>{</span><br><span class="line">  </span><br><span class="line">   }</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//å®ç°service()ç©ºæ–¹æ³•ï¼Œå¹¶ä¸”å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œå¼ºåˆ¶å­ç±»å¿…é¡»å®ç°service()æ–¹æ³• </span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest request,ServletResponse response)</span> </span></span><br><span class="line"><span class="function">     <span class="keyword">throws</span> ServletException,java.io.IOException</span>{</span><br><span class="line">   }</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//å®ç°ç©ºçš„destroyæ–¹æ³•</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>{ }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>å¦‚æœç»§æ‰¿è¿™ä¸ªç±»çš„è¯ï¼Œæˆ‘ä»¬å¿…é¡»é‡å†™ service() æ–¹æ³•æ¥å¯¹å¤„ç†è¯·æ±‚ã€‚</strong></p><h3 id="ğŸHttpServlet"><a href="#ğŸHttpServlet" class="headerlink" title="ğŸHttpServlet"></a>ğŸHttpServlet</h3><p>HttpServlet ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒè¿›ä¸€æ­¥ç»§æ‰¿å¹¶å°è£…äº† GenericServletï¼Œä½¿å¾—ä½¿ç”¨æ›´åŠ ç®€å•æ–¹ä¾¿ï¼Œç”±äºæ˜¯æ‰©å±•äº† Http çš„å†…å®¹ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä½¿ç”¨ <code>HttpServletRequest</code> å’Œ <code>HttpServletResponse</code>ï¼Œè¿™ä¸¤ä¸ªç±»åˆ†åˆ«æ˜¯ ServletRequest å’Œ <code>ServletResponse</code> çš„å­ç±»ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServlet</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span></span>{</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//HttpServletä¸­çš„service()</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest httpServletRequest,</span></span></span><br><span class="line"><span class="function"><span class="params">                       HttpServletResponse httpServletResponse)</span></span>{</span><br><span class="line">        <span class="comment">//è¯¥æ–¹æ³•é€šè¿‡httpServletRequest.getMethod()åˆ¤æ–­è¯·æ±‚ç±»å‹è°ƒç”¨doGet() doPost()</span></span><br><span class="line">   }</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//å¿…é¡»å®ç°çˆ¶ç±»çš„service()æ–¹æ³•</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest,ServletResponse servletResponse)</span></span>{</span><br><span class="line">      HttpServletRequest request;</span><br><span class="line">      HttpServletResponse response;</span><br><span class="line">      <span class="keyword">try</span>{</span><br><span class="line">         request=(HttpServletRequest)servletRequest;</span><br><span class="line">         response=(HttpServletResponse)servletResponse;</span><br><span class="line">      }<span class="keyword">catch</span>(ClassCastException){</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> ServletException(<span class="string">"non-http request or response"</span>);</span><br><span class="line">      }</span><br><span class="line">      <span class="comment">//è°ƒç”¨service()æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">this</span>.service(request,response);</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒHttpServlet ä¸­å¯¹åŸå§‹çš„ Servlet ä¸­çš„æ–¹æ³•éƒ½è¿›è¡Œäº†é»˜è®¤çš„æ“ä½œï¼Œä¸éœ€è¦æ˜¾å¼çš„é”€æ¯åˆå§‹åŒ–ä»¥åŠ <code>service()</code>ï¼Œåœ¨ HttpServlet ä¸­ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªæ–°çš„ <code>service()</code> æ–¹æ³•ï¼Œå…¶ä¸­é€šè¿‡ getMethod() æ–¹æ³•åˆ¤æ–­è¯·æ±‚çš„ç±»å‹ï¼Œä»è€Œè°ƒç”¨ <code>doGet()</code> æˆ–è€… <code>doPost()</code> å¤„ç† <code>get,post</code> è¯·æ±‚ï¼Œä½¿ç”¨è€…åªéœ€è¦ç»§æ‰¿ <code>HttpServlet</code>ï¼Œç„¶åé‡å†™ <code>doPost()</code> æˆ–è€… <code>doGet()</code> æ–¹æ³•å¤„ç†è¯·æ±‚å³å¯ã€‚</p><p><strong>æˆ‘ä»¬ä¸€èˆ¬éƒ½ä½¿ç”¨ç»§æ‰¿ HttpServlet çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ª servletã€‚</strong></p><hr><h2 id="ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰"><a href="#ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰" class="headerlink" title="ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰"></a>ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰</h2><p>ä½¿ç”¨ Eclipse æ¥æ­å»º JSP å¼€å‘ç¯å¢ƒï¼Œé¦–å…ˆæˆ‘ä»¬åˆ†åˆ«ä¸‹è½½ä¸€ä¸‹è½¯ä»¶åŒ…</p><ul><li><strong>Eclipse J2EEï¼š</strong><a href="http://www.eclipse.org/downloads/" target="_blank" rel="noopener">http://www.eclipse.org/downloads/</a></li><li><strong>Tomcatï¼š</strong><a href="http://tomcat.apache.org/download-70.cgi" target="_blank" rel="noopener">http://tomcat.apache.org/download-70.cgi</a></li></ul><h3 id="ğŸTomcat-ä¸‹è½½å®‰è£…"><a href="#ğŸTomcat-ä¸‹è½½å®‰è£…" class="headerlink" title="ğŸTomcat ä¸‹è½½å®‰è£…"></a>ğŸTomcat ä¸‹è½½å®‰è£…</h3><p><a href="https://imgchr.com/i/dXrmcQ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXrmcQ.png" alt="dXrmcQ.png"></a></p><p>ä¸‹è½½ä¹‹åï¼Œå°†å‹ç¼©åŒ…è§£å‹åˆ°ç›˜ï¼ˆä½ å¯ä»¥è‡ªå·±é€‰æ‹©ï¼‰ï¼š</p><p><a href="https://imgchr.com/i/dXrEh8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXrEh8.png" alt="dXrEh8.png"></a></p><p>æ³¨æ„ç›®å½•åä¸èƒ½æœ‰ä¸­æ–‡å’Œç©ºæ ¼ã€‚ç›®å½•ä»‹ç»å¦‚ä¸‹ï¼š</p><ul><li>binï¼šäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ã€‚é‡Œé¢æœ€å¸¸ç”¨çš„æ–‡ä»¶æ˜¯<strong>startup.bat</strong>ï¼Œå¦‚æœæ˜¯ Linux æˆ– Mac ç³»ç»Ÿå¯åŠ¨æ–‡ä»¶ä¸º <strong>startup.sh</strong>ã€‚</li><li>conf:é…ç½®ç›®å½•ã€‚é‡Œé¢æœ€æ ¸å¿ƒçš„æ–‡ä»¶æ˜¯<strong>server.xml</strong>ã€‚å¯ä»¥åœ¨é‡Œé¢æ”¹ç«¯å£å·ç­‰ã€‚é»˜è®¤ç«¯å£å·æ˜¯8080ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤ç«¯å£å·ä¸èƒ½è¢«å…¶ä»–åº”ç”¨ç¨‹åºå ç”¨ã€‚</li><li>libï¼šåº“æ–‡ä»¶ã€‚tomcatè¿è¡Œæ—¶éœ€è¦çš„jaråŒ…æ‰€åœ¨çš„ç›®å½•</li><li>logsï¼šæ—¥å¿—</li><li>tempï¼šä¸´æ—¶äº§ç”Ÿçš„æ–‡ä»¶ï¼Œå³ç¼“å­˜</li><li>webappsï¼šwebçš„åº”ç”¨ç¨‹åºã€‚<strong>webåº”ç”¨æ”¾ç½®åˆ°æ­¤ç›®å½•ä¸‹æµè§ˆå™¨å¯ä»¥ç›´æ¥è®¿é—®</strong></li><li>workï¼šç¼–è¯‘ä»¥åçš„classæ–‡ä»¶ã€‚</li></ul><p>æ¥ç€æˆ‘ä»¬å¯ä»¥åŒå‡» startup.bat å¯åŠ¨ Tomcatï¼Œå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼š</p><p><a href="https://imgchr.com/i/dXrAtf" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXrAtf.png" alt="dXrAtf.png"></a></p><p>è¿™ä¸ªæ—¶å€™ï¼Œæœ¬åœ°çš„æœåŠ¡å™¨å°±å·²ç»æ­å»ºèµ·æ¥äº†ã€‚å¦‚æœæƒ³å…³é—­æœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥å…³é—­ä¸Šé¢çš„çª—å£ï¼Œæˆ–è€…åœ¨é‡Œé¢è¾“å…¥Ctrl+Cç¦æ­¢æœåŠ¡ã€‚</p><p>æ¥ç€æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <strong><a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a></strong>ï¼Œå¦‚æœå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼Œè¡¨ç¤ºtomcatå®‰è£…æˆåŠŸå¹¶ä¸”å¯åŠ¨èµ·æ¥äº†ï¼š</p><p><a href="https://imgchr.com/i/dXre1g" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXre1g.png" alt="dXre1g.png"></a></p><p>é¦–å…ˆåœ¨apache-tomcat-9.0.37\webapps\ROOTç›®å½•ä¸­æ–°å»ºä¸€ä¸ªjspæ–‡ä»¶ï¼š</p><p><a href="https://imgchr.com/i/dXrZ9S" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXrZ9S.png" alt="dXrZ9S.png"></a></p><p>test.jsp æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">out.<span class="keyword">print</span>(<span class="string">"äº‘æ¾ˆ : https://liudufu.github.io"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure><p>æ¥ç€åœ¨æµè§ˆå™¨ä¸­è®¿é—®åœ°å€ <strong><a href="http://localhost:8080/test.jsp" target="_blank" rel="noopener">http://localhost:8080/test.jsp</a></strong>, è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><p><a href="https://imgchr.com/i/dX6yCV" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX6yCV.png" alt="dX6yCV.png"></a></p><h3 id="ğŸTomcat-å’Œ-Eclipse-ç›¸å…³è”"><a href="#ğŸTomcat-å’Œ-Eclipse-ç›¸å…³è”" class="headerlink" title="ğŸTomcat å’Œ Eclipse ç›¸å…³è”"></a>ğŸTomcat å’Œ Eclipse ç›¸å…³è”</h3><p>æ‰“å¼€Java EE ï¼Œé€‰æ‹©èœå•æ Windowsâ€“&gt;preferencesï¼ˆMac ç³»ç»Ÿä¸º Eclipseâ€“&gt;åå¥½è®¾ç½®ï¼‰ï¼Œå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼š</p><p><img src="https://www.runoob.com/wp-content/uploads/2016/01/232111301681549.png" alt=""></p><p>ä¸Šå›¾ä¸­ï¼Œç‚¹å‡»â€addâ€çš„æ·»åŠ æŒ‰é’®ï¼Œå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼š</p><p><a href="https://imgchr.com/i/dXcFKg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXcFKg.png" alt="dXcFKg.png"></a></p><p>ç‚¹å‡» â€œFinishâ€ï¼Œå®Œæˆé…ç½®ã€‚</p><h3 id="ğŸåˆ›å»ºå®ä¾‹"><a href="#ğŸåˆ›å»ºå®ä¾‹" class="headerlink" title="ğŸåˆ›å»ºå®ä¾‹"></a>ğŸåˆ›å»ºå®ä¾‹</h3><p>é€‰æ‹© â€œFileâ€“&gt;Newâ€“&gt;Dynamic Web Projectâ€ï¼Œåˆ›å»º TomcatTest é¡¹ç›®ï¼š</p><p><a href="https://imgchr.com/i/dX2r4I" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2r4I.png" alt="dX2r4I.png"></a></p><p><a href="https://imgchr.com/i/dX2BEd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2BEd.png" alt="dX2BEd.png"></a></p><p>å·¥ç¨‹æ–‡ä»¶ç»“æ„ï¼š</p><p><a href="https://imgchr.com/i/dX2wHH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2wHH.png" alt="dX2wHH.png"></a></p><p>ä¸Šå›¾ä¸­å„ä¸ªç›®å½•è§£æï¼š</p><ul><li>deployment descriptorï¼šéƒ¨ç½²çš„æè¿°ã€‚</li><li>Web App Librariesï¼šè‡ªå·±åŠ çš„åŒ…å¯ä»¥æ”¾åœ¨é‡Œé¢ã€‚</li><li>buildï¼šæ”¾å…¥ç¼–è¯‘ä¹‹åçš„æ–‡ä»¶ã€‚</li><li>WebContent:æ”¾è¿›å†™å…¥çš„é¡µé¢ã€‚</li></ul><p>åœ¨WebContentæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªtest.jspæ–‡ä»¶ã€‚åœ¨ä¸‹å›¾ä¸­å¯ä»¥çœ‹åˆ°å®ƒçš„é»˜è®¤ä»£ç ï¼š</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure><p>æ¥ç€æˆ‘ä»¬ä¿®æ”¹ä¸‹test.jspæ–‡ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"</span><br><span class="line">    pageEncoding="UTF-8"%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;</span><br><span class="line">&lt;title&gt;äº‘æ¾ˆ&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    out.println("Hello World!");</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure><p>è¿è¡Œè¯¥é¡¹ç›®:</p><p><a href="https://imgchr.com/i/dX2DUA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2DUA.png" alt="dX2DUA.png"></a></p><p>æµè§ˆå™¨è®¿é—® <code>http://localhost:8080/TomcatTest/test.jsp</code>, å³å¯è¾“å‡ºæ­£å¸¸ç»“æœï¼š</p><p><a href="https://imgchr.com/i/dX2dDe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2dDe.png" alt="dX2dDe.png"></a></p><h3 id="ğŸServlet-å®ä¾‹åˆ›å»º"><a href="#ğŸServlet-å®ä¾‹åˆ›å»º" class="headerlink" title="ğŸServlet å®ä¾‹åˆ›å»º"></a>ğŸServlet å®ä¾‹åˆ›å»º</h3><p>ä½¿ç”¨ä»¥ä¸Šç¯å¢ƒåˆ›å»º Servlet æ–‡ä»¶ï¼Œé€‰æ‹© â€œFileâ€“&gt;Newâ€“&gt;Servletâ€:</p><p><a href="https://imgchr.com/i/dX268P" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX268P.png" alt="dX268P.png"></a></p><p>HelloServlet.java ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yunche.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class HelloServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/HelloServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloServlet</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ GBK è®¾ç½®ä¸­æ–‡æ­£å¸¸æ˜¾ç¤º</span></span><br><span class="line">        response.setCharacterEncoding(<span class="string">"GBK"</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">"äº‘æ¾ˆï¼šhttps://liudufu.github.io"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>åˆ›å»º /TomcatTest/WebContent/WEB-INF/web.xml æ–‡ä»¶ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">"2.5"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee   </span></span></span><br><span class="line"><span class="tag"><span class="string">    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">     <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.yunche.test.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/HelloServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>æ¥ç€é‡å¯ Tomcatï¼Œæµè§ˆå™¨è®¿é—® <code>http://localhost:8080/TomcatTest/HelloServletï¼š</code></p><p><a href="https://imgchr.com/i/dX2yCt" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2yCt.png" alt="dX2yCt.png"></a></p><hr><h2 id="ğŸŒ¸Servlet-ç”Ÿå‘½å‘¨æœŸ"><a href="#ğŸŒ¸Servlet-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ğŸŒ¸Servlet ç”Ÿå‘½å‘¨æœŸ"></a>ğŸŒ¸Servlet ç”Ÿå‘½å‘¨æœŸ</h2><p>Servlet ç”Ÿå‘½å‘¨æœŸå¯è¢«å®šä¹‰ä¸ºä»åˆ›å»ºç›´åˆ°æ¯ç­çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯ Servlet éµå¾ªçš„è¿‡ç¨‹ï¼š</p><ul><li>Servlet é€šè¿‡è°ƒç”¨ <strong>init ()</strong> æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚</li><li>Servlet è°ƒç”¨ <strong>service()</strong> æ–¹æ³•æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li><li>Servlet é€šè¿‡è°ƒç”¨ <strong>destroy()</strong> æ–¹æ³•ç»ˆæ­¢ï¼ˆç»“æŸï¼‰ã€‚</li><li>æœ€åï¼ŒServlet æ˜¯ç”± JVM çš„åƒåœ¾å›æ”¶å™¨è¿›è¡Œåƒåœ¾å›æ”¶çš„ã€‚</li></ul><p>ç°åœ¨è®©æˆ‘ä»¬è¯¦ç»†è®¨è®ºç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ã€‚</p><h3 id="ğŸinit-æ–¹æ³•"><a href="#ğŸinit-æ–¹æ³•" class="headerlink" title="ğŸinit() æ–¹æ³•"></a>ğŸinit() æ–¹æ³•</h3><p>init æ–¹æ³•è¢«è®¾è®¡æˆåªè°ƒç”¨ä¸€æ¬¡ã€‚å®ƒåœ¨ç¬¬ä¸€æ¬¡åˆ›å»º Servlet æ—¶è¢«è°ƒç”¨ï¼Œåœ¨åç»­æ¯æ¬¡ç”¨æˆ·è¯·æ±‚æ—¶ä¸å†è°ƒç”¨ã€‚å› æ­¤ï¼Œå®ƒæ˜¯ç”¨äºä¸€æ¬¡æ€§åˆå§‹åŒ–ï¼Œå°±åƒ Applet çš„ init æ–¹æ³•ä¸€æ ·ã€‚</p><p>Servlet åˆ›å»ºäºç”¨æˆ·ç¬¬ä¸€æ¬¡è°ƒç”¨å¯¹åº”äºè¯¥ Servlet çš„ URL æ—¶ï¼Œä½†æ˜¯æ‚¨ä¹Ÿå¯ä»¥æŒ‡å®š Servlet åœ¨æœåŠ¡å™¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶è¢«åŠ è½½ã€‚</p><p>å½“ç”¨æˆ·è°ƒç”¨ä¸€ä¸ª Servlet æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª Servlet å®ä¾‹ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œé€‚å½“çš„æ—¶å€™ç§»äº¤ç»™ doGet æˆ– doPost æ–¹æ³•ã€‚init() æ–¹æ³•ç®€å•åœ°åˆ›å»ºæˆ–åŠ è½½ä¸€äº›æ•°æ®ï¼Œè¿™äº›æ•°æ®å°†è¢«ç”¨äº Servlet çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p><p>init æ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–ä»£ç ...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸservice-æ–¹æ³•"><a href="#ğŸservice-æ–¹æ³•" class="headerlink" title="ğŸservice() æ–¹æ³•"></a>ğŸservice() æ–¹æ³•</h3><p>service() æ–¹æ³•æ˜¯æ‰§è¡Œå®é™…ä»»åŠ¡çš„ä¸»è¦æ–¹æ³•ã€‚Servlet å®¹å™¨ï¼ˆå³ Web æœåŠ¡å™¨ï¼‰è°ƒç”¨ service() æ–¹æ³•æ¥å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„è¯·æ±‚ï¼Œå¹¶æŠŠæ ¼å¼åŒ–çš„å“åº”å†™å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>æ¯æ¬¡æœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ª Servlet è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹å¹¶è°ƒç”¨æœåŠ¡ã€‚service() æ–¹æ³•æ£€æŸ¥ HTTP è¯·æ±‚ç±»å‹ï¼ˆGETã€POSTã€PUTã€DELETE ç­‰ï¼‰ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨ doGetã€doPostã€doPutï¼ŒdoDelete ç­‰æ–¹æ³•ã€‚</p><p>ä¸‹é¢æ˜¯è¯¥æ–¹æ³•çš„ç‰¹å¾ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public void service(ServletRequest request, </span><br><span class="line">                    ServletResponse response) </span><br><span class="line">      throws ServletException, IOException{</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>service() æ–¹æ³•ç”±å®¹å™¨è°ƒç”¨ï¼Œservice æ–¹æ³•åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨ doGetã€doPostã€doPutã€doDelete ç­‰æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œæ‚¨ä¸ç”¨å¯¹ service() æ–¹æ³•åšä»»ä½•åŠ¨ä½œï¼Œæ‚¨åªéœ€è¦æ ¹æ®æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ç±»å‹æ¥é‡å†™ doGet() æˆ– doPost() å³å¯ã€‚</p><p>doGet() å’Œ doPost() æ–¹æ³•æ˜¯æ¯æ¬¡æœåŠ¡è¯·æ±‚ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚ä¸‹é¢æ˜¯è¿™ä¸¤ç§æ–¹æ³•çš„ç‰¹</p><h3 id="ğŸdoGet-æ–¹æ³•"><a href="#ğŸdoGet-æ–¹æ³•" class="headerlink" title="ğŸdoGet() æ–¹æ³•"></a>ğŸdoGet() æ–¹æ³•</h3><p>GET è¯·æ±‚æ¥è‡ªäºä¸€ä¸ª URL çš„æ­£å¸¸è¯·æ±‚ï¼Œæˆ–è€…æ¥è‡ªäºä¸€ä¸ªæœªæŒ‡å®š METHOD çš„ HTML è¡¨å•ï¼Œå®ƒç”± doGet() æ–¹æ³•å¤„ç†ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                  HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">    <span class="comment">// Servlet ä»£ç </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸdoPost-æ–¹æ³•"><a href="#ğŸdoPost-æ–¹æ³•" class="headerlink" title="ğŸdoPost() æ–¹æ³•"></a>ğŸdoPost() æ–¹æ³•</h3><p>POST è¯·æ±‚æ¥è‡ªäºä¸€ä¸ªç‰¹åˆ«æŒ‡å®šäº† METHOD ä¸º POST çš„ HTML è¡¨å•ï¼Œå®ƒç”± doPost() æ–¹æ³•å¤„ç†ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                   HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">    <span class="comment">// Servlet ä»£ç </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸdestroy-æ–¹æ³•"><a href="#ğŸdestroy-æ–¹æ³•" class="headerlink" title="ğŸdestroy() æ–¹æ³•"></a>ğŸdestroy() æ–¹æ³•</h3><p>destroy() æ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œåœ¨ Servlet ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è¢«è°ƒç”¨ã€‚destroy() æ–¹æ³•å¯ä»¥è®©æ‚¨çš„ Servlet å…³é—­æ•°æ®åº“è¿æ¥ã€åœæ­¢åå°çº¿ç¨‹ã€æŠŠ Cookie åˆ—è¡¨æˆ–ç‚¹å‡»è®¡æ•°å™¨å†™å…¥åˆ°ç£ç›˜ï¼Œå¹¶æ‰§è¡Œå…¶ä»–ç±»ä¼¼çš„æ¸…ç†æ´»åŠ¨ã€‚</p><p>åœ¨è°ƒç”¨ destroy() æ–¹æ³•ä¹‹åï¼Œservlet å¯¹è±¡è¢«æ ‡è®°ä¸ºåƒåœ¾å›æ”¶ã€‚destroy æ–¹æ³•å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="comment">// ç»ˆæ­¢åŒ–ä»£ç ...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸæ¶æ„å›¾"><a href="#ğŸæ¶æ„å›¾" class="headerlink" title="ğŸæ¶æ„å›¾"></a>ğŸæ¶æ„å›¾</h3><p>ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„ Servlet ç”Ÿå‘½å‘¨æœŸæ–¹æ¡ˆã€‚</p><ul><li>ç¬¬ä¸€ä¸ªåˆ°è¾¾æœåŠ¡å™¨çš„ HTTP è¯·æ±‚è¢«å§”æ´¾åˆ° Servlet å®¹å™¨ã€‚</li><li>Servlet å®¹å™¨åœ¨è°ƒç”¨ service() æ–¹æ³•ä¹‹å‰åŠ è½½ Servletã€‚</li><li>ç„¶å Servlet å®¹å™¨å¤„ç†ç”±å¤šä¸ªçº¿ç¨‹äº§ç”Ÿçš„å¤šä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå•ä¸€çš„ Servlet å®ä¾‹çš„ service() æ–¹æ³•ã€‚</li></ul><p><a href="https://imgchr.com/i/dxHFxg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/01/dxHFxg.png" alt="dxHFxg.png"></a></p><hr><h2 id="ğŸŒ¸Servlet-å®ä¾‹"><a href="#ğŸŒ¸Servlet-å®ä¾‹" class="headerlink" title="ğŸŒ¸Servlet å®ä¾‹"></a>ğŸŒ¸Servlet å®ä¾‹</h2><p>Servlet æ˜¯æœåŠ¡ HTTP è¯·æ±‚å¹¶å®ç° <strong>javax.servlet.Servlet</strong> æ¥å£çš„ Java ç±»ã€‚Web åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜é€šå¸¸ç¼–å†™ Servlet æ¥æ‰©å±• javax.servlet.http.HttpServletï¼Œå¹¶å®ç° Servlet æ¥å£çš„æŠ½è±¡ç±»ä¸“é—¨ç”¨æ¥å¤„ç† HTTP è¯·æ±‚ã€‚</p><h3 id="ğŸHello-World-ç¤ºä¾‹ä»£ç "><a href="#ğŸHello-World-ç¤ºä¾‹ä»£ç " class="headerlink" title="ğŸHello World ç¤ºä¾‹ä»£ç "></a>ğŸHello World ç¤ºä¾‹ä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ‰§è¡Œå¿…éœ€çš„åˆå§‹åŒ–</span></span><br><span class="line">      message = <span class="string">"Hello World"</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å®é™…çš„é€»è¾‘æ˜¯åœ¨è¿™é‡Œ</span></span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line">      out.println(<span class="string">"&lt;h1&gt;"</span> + message + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// ä»€ä¹ˆä¹Ÿä¸åš</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸServletéƒ¨ç½²"><a href="#ğŸServletéƒ¨ç½²" class="headerlink" title="ğŸServletéƒ¨ç½²"></a>ğŸServletéƒ¨ç½²</h3><p>WEB-INF/ çš„ <strong>web.xml</strong> æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/HelloWorld<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å¯åŠ¨ tomcat æœåŠ¡å™¨ï¼Œæœ€ååœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥ <strong><a href="http://localhost:8080/HelloWorld" target="_blank" rel="noopener">http://localhost:8080/HelloWorld</a></strong>ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸‹é¢çš„ç»“æœï¼š</p><p><a href="https://imgchr.com/i/dxO6c8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/01/dxO6c8.png" alt="dxO6c8.png"></a></p><h3 id="ğŸåè®°"><a href="#ğŸåè®°" class="headerlink" title="ğŸåè®°"></a>ğŸåè®°</h3><p>destory æ–¹æ³•è¢«è°ƒç”¨åï¼Œservlet è¢«é”€æ¯ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç«‹å³è¢«å›æ”¶ï¼Œå†æ¬¡è¯·æ±‚æ—¶ï¼Œå¹¶æ²¡æœ‰é‡æ–°åˆå§‹åŒ–ã€‚</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">    message = <span class="string">"Hello World , Nect To Meet You: "</span> + System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"servletåˆå§‹åŒ–â€¦â€¦"</span>);</span><br><span class="line">    <span class="keyword">super</span>.init();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">    response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">    PrintWriter writer = response.getWriter();</span><br><span class="line">    writer.write(<span class="string">"&lt;h1&gt;"</span> + message + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">    destroy();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>{</span><br><span class="line">    System.out.println(<span class="string">"servleté”€æ¯ï¼"</span>);</span><br><span class="line">    <span class="keyword">super</span>.destroy();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æ§åˆ¶å°æ‰“å°ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">servletåˆå§‹åŒ–â€¦â€¦</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">2017-7-6 19:48:52 org.apache.catalina.core.StandardContext reload</span><br><span class="line">ä¿¡æ¯: Reloading Context with name [/myServlet] has started</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">2017-7-6 19:48:52 org.apache.catalina.core.StandardContext reload</span><br><span class="line">ä¿¡æ¯: Reloading Context with name [/myServlet] is completed</span><br><span class="line">servletåˆå§‹åŒ–â€¦â€¦</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br></pre></td></tr></tbody></table></figure><p><strong>servlet æµè§ˆå™¨è®¿é—®è·¯å¾„é…ç½®æœ‰ä¸ªå°é—®é¢˜ï¼š</strong></p><p>1ã€java ç±»é‡Œçš„æ³¨è§£ â€”â€” @WebServlet(â€œ/HelloServletâ€) å¯¹åº”æµè§ˆå™¨è·¯å¾„ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/TomcatTest/HelloServlet</span><br></pre></td></tr></tbody></table></figure><p>2ã€é…ç½®æ–‡ä»¶ï¼ˆweb.xmlï¼‰é‡Œå¯¹åº”çš„æµè§ˆå™¨è®¿é—®è·¯å¾„ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/TomcatTest/TomcatTest/HelloServlet</span><br></pre></td></tr></tbody></table></figure><p>è¿™ä¸¤ç§é…ä¸€ä¸ªå°±å¥½äº†ï¼Œä¸ç„¶è·¯å¾„é‡åçš„è¯åè€Œä¼šè®©tomcatå¯åŠ¨ä¸äº†ã€‚</p><p>ä¾‹å¦‚è¿™æ ·å°±å¯åŠ¨ä¸äº†ï¼š</p><p>ä¿®æ”¹ web.xml :</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;url-pattern&gt;/HelloServlet&lt;/url-pattern&gt;</span><br></pre></td></tr></tbody></table></figure><p>ä¿®æ”¹åï¼Œweb.xml å’Œ java ç±»çš„æ³¨è§£ï¼Œå¯¹åº”è·¯å¾„éƒ½æ˜¯ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/TomcatTest/HelloServlet</span><br></pre></td></tr></tbody></table></figure><p><strong>å¯¼è‡´</strong></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‘½åçš„ servlet[HelloServlet]å’Œ [com.runoob.test.HelloServlet] éƒ½è¢«æ˜ å°„åˆ° URL æ¨¡å¼ [/ HelloServlet] è¿™æ˜¯ä¸å…è®¸çš„ã€‚</span><br></pre></td></tr></tbody></table></figure><p><strong>è§£å†³åŠæ³•ï¼š</strong></p><p>å°†<strong>æ³¨è§£å»æ‰</strong>æˆ–è€…<strong>ä¿ç•™æ³¨è§£è¿›å…¥web.xmlå°†æ˜ å°„åˆ é™¤</strong>æ—¢å¯ä»¥ã€‚</p><hr><h2 id="ğŸŒ¸Servlet-è¡¨å•æ•°æ®"><a href="#ğŸŒ¸Servlet-è¡¨å•æ•°æ®" class="headerlink" title="ğŸŒ¸Servlet è¡¨å•æ•°æ®"></a>ğŸŒ¸Servlet è¡¨å•æ•°æ®</h2><p>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œéœ€è¦ä¼ é€’ä¸€äº›ä¿¡æ¯ï¼Œä»æµè§ˆå™¨åˆ° Web æœåŠ¡å™¨ï¼Œæœ€ç»ˆåˆ°åå°ç¨‹åºã€‚æµè§ˆå™¨ä½¿ç”¨ä¸¤ç§æ–¹æ³•å¯å°†è¿™äº›ä¿¡æ¯ä¼ é€’åˆ° Web æœåŠ¡å™¨ï¼Œåˆ†åˆ«ä¸º GET æ–¹æ³•å’Œ POST æ–¹æ³•ã€‚</p><h3 id="ğŸGET-æ–¹æ³•"><a href="#ğŸGET-æ–¹æ³•" class="headerlink" title="ğŸGET æ–¹æ³•"></a>ğŸGET æ–¹æ³•</h3><p>GET æ–¹æ³•å‘é¡µé¢è¯·æ±‚å‘é€å·²ç¼–ç çš„ç”¨æˆ·ä¿¡æ¯ã€‚é¡µé¢å’Œå·²ç¼–ç çš„ä¿¡æ¯ä¸­é—´ç”¨ ? å­—ç¬¦åˆ†éš”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.test.com/hello?key1=value1&amp;key2=value2</span><br></pre></td></tr></tbody></table></figure><p>GET æ–¹æ³•æ˜¯é»˜è®¤çš„ä»æµè§ˆå™¨å‘ Web æœåŠ¡å™¨ä¼ é€’ä¿¡æ¯çš„æ–¹æ³•ï¼Œå®ƒä¼šäº§ç”Ÿä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œå‡ºç°åœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­ã€‚å¦‚æœæ‚¨è¦å‘æœåŠ¡å™¨ä¼ é€’çš„æ˜¯å¯†ç æˆ–å…¶ä»–çš„æ•æ„Ÿä¿¡æ¯ï¼Œè¯·ä¸è¦ä½¿ç”¨ GET æ–¹æ³•ã€‚GET æ–¹æ³•æœ‰å¤§å°é™åˆ¶ï¼šè¯·æ±‚å­—ç¬¦ä¸²ä¸­æœ€å¤šåªèƒ½æœ‰ 1024 ä¸ªå­—ç¬¦ã€‚</p><p>è¿™äº›ä¿¡æ¯ä½¿ç”¨ QUERY_STRING å¤´ä¼ é€’ï¼Œå¹¶å¯ä»¥é€šè¿‡ QUERY_STRING ç¯å¢ƒå˜é‡è®¿é—®ï¼ŒServlet ä½¿ç”¨ <strong>doGet()</strong> æ–¹æ³•å¤„ç†è¿™ç§ç±»å‹çš„è¯·æ±‚ã€‚</p><h3 id="ğŸPOST-æ–¹æ³•"><a href="#ğŸPOST-æ–¹æ³•" class="headerlink" title="ğŸPOST æ–¹æ³•"></a>ğŸPOST æ–¹æ³•</h3><p>å¦ä¸€ä¸ªå‘åå°ç¨‹åºä¼ é€’ä¿¡æ¯çš„æ¯”è¾ƒå¯é çš„æ–¹æ³•æ˜¯ POST æ–¹æ³•ã€‚POST æ–¹æ³•æ‰“åŒ…ä¿¡æ¯çš„æ–¹å¼ä¸ GET æ–¹æ³•åŸºæœ¬ç›¸åŒï¼Œä½†æ˜¯ POST æ–¹æ³•ä¸æ˜¯æŠŠä¿¡æ¯ä½œä¸º URL ä¸­ ? å­—ç¬¦åçš„æ–‡æœ¬å­—ç¬¦ä¸²è¿›è¡Œå‘é€ï¼Œè€Œæ˜¯æŠŠè¿™äº›ä¿¡æ¯ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯ä»¥æ ‡å‡†è¾“å‡ºçš„å½¢å¼ä¼ åˆ°åå°ç¨‹åºï¼Œæ‚¨å¯ä»¥è§£æå’Œä½¿ç”¨è¿™äº›æ ‡å‡†è¾“å‡ºã€‚Servlet ä½¿ç”¨ doPost() æ–¹æ³•å¤„ç†è¿™ç§ç±»å‹çš„è¯·æ±‚ã€‚</p><h3 id="ğŸä½¿ç”¨-Servlet-è¯»å–è¡¨å•æ•°æ®"><a href="#ğŸä½¿ç”¨-Servlet-è¯»å–è¡¨å•æ•°æ®" class="headerlink" title="ğŸä½¿ç”¨ Servlet è¯»å–è¡¨å•æ•°æ®"></a>ğŸä½¿ç”¨ Servlet è¯»å–è¡¨å•æ•°æ®</h3><p>Servlet å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¼šæ ¹æ®ä¸åŒçš„æƒ…å†µä½¿ç”¨ä¸åŒçš„æ–¹æ³•è‡ªåŠ¨è§£æï¼š</p><ul><li><strong>getParameter()ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ request.getParameter() æ–¹æ³•æ¥è·å–è¡¨å•å‚æ•°çš„å€¼ã€‚</li><li><strong>getParameterValues()ï¼š</strong>å¦‚æœå‚æ•°å‡ºç°ä¸€æ¬¡ä»¥ä¸Šï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¹¶è¿”å›å¤šä¸ªå€¼ï¼Œä¾‹å¦‚å¤é€‰æ¡†ã€‚</li><li><strong>getParameterNames()ï¼š</strong>å¦‚æœæ‚¨æƒ³è¦å¾—åˆ°å½“å‰è¯·æ±‚ä¸­çš„æ‰€æœ‰å‚æ•°çš„å®Œæ•´åˆ—è¡¨ï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•ã€‚</li></ul><h3 id="ğŸä½¿ç”¨-URL-çš„-GET-æ–¹æ³•å®ä¾‹"><a href="#ğŸä½¿ç”¨-URL-çš„-GET-æ–¹æ³•å®ä¾‹" class="headerlink" title="ğŸä½¿ç”¨ URL çš„ GET æ–¹æ³•å®ä¾‹"></a>ğŸä½¿ç”¨ URL çš„ GET æ–¹æ³•å®ä¾‹</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ URLï¼Œå°†ä½¿ç”¨ GET æ–¹æ³•å‘ HelloForm ç¨‹åºä¼ é€’ä¸¤ä¸ªå€¼ã€‚</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/TomcatTest/HelloForm?name=äº‘æ¾ˆ&amp;url=https://liudufu.github.io</span><br></pre></td></tr></tbody></table></figure><p>ä¸‹é¢æ˜¯å¤„ç† Web æµè§ˆå™¨è¾“å…¥çš„ <strong>HelloForm.java</strong> Servlet ç¨‹åºã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <strong>getParameter()</strong> æ–¹æ³•ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è®¿é—®ä¼ é€’çš„ä¿¡æ¯</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class HelloForm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/HelloForm"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloForm</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloForm</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"ä½¿ç”¨ GET æ–¹æ³•è¯»å–è¡¨å•æ•°æ®"</span>;</span><br><span class="line">        <span class="comment">// å¤„ç†ä¸­æ–‡</span></span><br><span class="line">        String name =<span class="keyword">new</span> String(request.getParameter(<span class="string">"name"</span>).getBytes(<span class="string">"UTF-8"</span>),<span class="string">"UTF-8"</span>);</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;ul&gt;\n"</span> +</span><br><span class="line">            <span class="string">"  &lt;li&gt;&lt;b&gt;ç«™ç‚¹å&lt;/b&gt;ï¼š"</span></span><br><span class="line">            + name + <span class="string">"\n"</span> +</span><br><span class="line">            <span class="string">"  &lt;li&gt;&lt;b&gt;ç½‘å€&lt;/b&gt;ï¼š"</span></span><br><span class="line">            + request.getParameter(<span class="string">"url"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/ul&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç„¶åæˆ‘ä»¬åœ¨ <strong>web.xml</strong> æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloForm<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.HelloForm<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloForm<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/HelloForm<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨åœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥<code>http://localhost:8080/TomcatTest/HelloForm?name=äº‘æ¾ˆ&amp;url=https://liudufu.github.io</code>ï¼Œå¹¶åœ¨è§¦å‘ä¸Šè¿°å‘½ä»¤ä¹‹å‰ç¡®ä¿å·²ç»å¯åŠ¨ Tomcat æœåŠ¡å™¨ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æœï¼š</p><p><a href="https://imgchr.com/i/wpxUXt" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxUXt.png" alt="wpxUXt.png"></a></p><h3 id="ğŸä½¿ç”¨è¡¨å•çš„-GET-æ–¹æ³•å®ä¾‹"><a href="#ğŸä½¿ç”¨è¡¨å•çš„-GET-æ–¹æ³•å®ä¾‹" class="headerlink" title="ğŸä½¿ç”¨è¡¨å•çš„ GET æ–¹æ³•å®ä¾‹"></a>ğŸä½¿ç”¨è¡¨å•çš„ GET æ–¹æ³•å®ä¾‹</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å®ä¾‹ï¼Œä½¿ç”¨ HTML è¡¨å•å’Œæäº¤æŒ‰é’®ä¼ é€’ä¸¤ä¸ªå€¼ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ç›¸åŒçš„ Servlet HelloForm æ¥å¤„ç†è¾“å…¥ã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>èœé¸Ÿæ•™ç¨‹(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"HelloForm"</span> <span class="attr">method</span>=<span class="string">"GET"</span>&gt;</span></span><br><span class="line">ç½‘å€åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">ç½‘å€ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"url"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¿å­˜è¿™ä¸ª HTML åˆ° hello.html æ–‡ä»¶ä¸­ï¼Œç›®å½•ç»“æ„åœ¨WebContentä¸‹</p><p>å°è¯•è¾“å…¥ç½‘å€åå’Œç½‘å€ï¼Œç„¶åç‚¹å‡»â€æäº¤â€æŒ‰é’®ï¼Œ</p><p><a href="https://imgchr.com/i/wpxYpd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxYpd.png" alt="wpxYpd.png"></a></p><p><a href="https://imgchr.com/i/wpxt1A" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxt1A.png" alt="wpxt1A.png"></a></p><h3 id="ğŸä½¿ç”¨è¡¨å•çš„-POST-æ–¹æ³•å®ä¾‹"><a href="#ğŸä½¿ç”¨è¡¨å•çš„-POST-æ–¹æ³•å®ä¾‹" class="headerlink" title="ğŸä½¿ç”¨è¡¨å•çš„ POST æ–¹æ³•å®ä¾‹"></a>ğŸä½¿ç”¨è¡¨å•çš„ POST æ–¹æ³•å®ä¾‹</h3><p>è®©æˆ‘ä»¬å¯¹ä¸Šé¢çš„ Servlet åšå°å°çš„ä¿®æ”¹ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å¤„ç† GET å’Œ POST æ–¹æ³•ã€‚ä¸‹é¢çš„ <strong>HelloForm.java</strong> Servlet ç¨‹åºä½¿ç”¨ GET å’Œ POST æ–¹æ³•å¤„ç†ç”± Web æµè§ˆå™¨ç»™å‡ºçš„è¾“å…¥ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœè¡¨å•æäº¤çš„æ•°æ®ä¸­æœ‰ä¸­æ–‡æ•°æ®åˆ™éœ€è¦è½¬ç ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String name =<span class="keyword">new</span> String(request.getParameter(<span class="string">"name"</span>).getBytes(<span class="string">"ISO8859-1"</span>),<span class="string">"UTF-8"</span>);</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class HelloForm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/HelloForm"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloForm</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloForm</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"ä½¿ç”¨ POST æ–¹æ³•è¯»å–è¡¨å•æ•°æ®"</span>;</span><br><span class="line">        <span class="comment">// å¤„ç†ä¸­æ–‡</span></span><br><span class="line">        String name =<span class="keyword">new</span> String(request.getParameter(<span class="string">"name"</span>).getBytes(<span class="string">"ISO8859-1"</span>),<span class="string">"UTF-8"</span>);</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;ul&gt;\n"</span> +</span><br><span class="line">            <span class="string">"  &lt;li&gt;&lt;b&gt;ç«™ç‚¹å&lt;/b&gt;ï¼š"</span></span><br><span class="line">            + name + <span class="string">"\n"</span> +</span><br><span class="line">            <span class="string">"  &lt;li&gt;&lt;b&gt;ç½‘å€&lt;/b&gt;ï¼š"</span></span><br><span class="line">            + request.getParameter(<span class="string">"url"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/ul&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨ï¼Œç¼–è¯‘éƒ¨ç½²ä¸Šè¿°çš„ Servletï¼Œå¹¶ä½¿ç”¨å¸¦æœ‰ POST æ–¹æ³•çš„ hello.html è¿›è¡Œæµ‹è¯•ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‘æ¾ˆ(liudufu.github.io)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"HelloForm"</span> <span class="attr">method</span>=<span class="string">"GET"</span>&gt;</span></span><br><span class="line">ç½‘å€åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">ç½‘å€ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"url"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>è¡¨å•çš„å®é™…è¾“å‡ºä¸getå›¾ç›¸åŒ</p><h3 id="ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ°-Servlet-ç¨‹åº"><a href="#ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ°-Servlet-ç¨‹åº" class="headerlink" title="ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ° Servlet ç¨‹åº"></a>ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ° Servlet ç¨‹åº</h3><p>å½“éœ€è¦é€‰æ‹©ä¸€ä¸ªä»¥ä¸Šçš„é€‰é¡¹æ—¶ï¼Œåˆ™ä½¿ç”¨å¤é€‰æ¡†ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ª HTML ä»£ç å®ä¾‹ checkbox.htmlï¼Œä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå¤é€‰æ¡†çš„è¡¨å•ã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‘æ¾ˆ(liudufu.github.io)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"CheckBox"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"runoob"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span> äº‘æ¾ˆ</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"google"</span>  /&gt;</span> Google</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"taobao"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span> æ·˜å®</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"é€‰æ‹©ç«™ç‚¹"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¸‹é¢æ˜¯ CheckBox.java Servlet ç¨‹åºï¼Œå¤„ç† Web æµè§ˆå™¨ç»™å‡ºçš„å¤é€‰æ¡†è¾“å…¥ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class CheckBox</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/CheckBox"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckBox</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"è¯»å–å¤é€‰æ¡†æ•°æ®"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">            out.println(docType +</span><br><span class="line">                <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;ul&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;äº‘æ¾ˆæ ‡è¯†ï¼š&lt;/b&gt;: "</span></span><br><span class="line">                + request.getParameter(<span class="string">"runoob"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;Google æ ‡è¯†ï¼š&lt;/b&gt;: "</span></span><br><span class="line">                + request.getParameter(<span class="string">"google"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;æ·˜å®æ ‡è¯†ï¼š&lt;/b&gt;: "</span></span><br><span class="line">                + request.getParameter(<span class="string">"taobao"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/ul&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è®¾ç½®å¯¹åº”çš„ web.xmlï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CheckBox<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.CheckBox<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CheckBox<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/CheckBox<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¸Šé¢çš„å®ä¾‹å°†æ˜¾ç¤ºä¸‹é¢çš„ç»“æœï¼š</p><p><a href="https://imgchr.com/i/wpxGfH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxGfH.png" alt="wpxGfH.png"></a></p><p><a href="https://imgchr.com/i/wpxN6I" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxN6I.png" alt="wpxN6I.png"></a></p><h3 id="ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°"><a href="#ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°" class="headerlink" title="ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°"></a>ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°</h3><p>ä»¥ä¸‹æ˜¯é€šç”¨çš„å®ä¾‹ï¼Œä½¿ç”¨ HttpServletRequest çš„ <strong>getParameterNames()</strong> æ–¹æ³•è¯»å–æ‰€æœ‰å¯ç”¨çš„è¡¨å•å‚æ•°ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæšä¸¾ï¼Œå…¶ä¸­åŒ…å«æœªæŒ‡å®šé¡ºåºçš„å‚æ•°åã€‚</p><p>ä¸€æ—¦æˆ‘ä»¬æœ‰ä¸€ä¸ªæšä¸¾ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ ‡å‡†æ–¹å¼å¾ªç¯æšä¸¾ï¼Œä½¿ç”¨ <em>hasMoreElements()</em> æ–¹æ³•æ¥ç¡®å®šä½•æ—¶åœæ­¢ï¼Œä½¿ç”¨ <em>nextElement()</em> æ–¹æ³•æ¥è·å–æ¯ä¸ªå‚æ•°çš„åç§°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class ReadParams</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/ReadParams"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadParams</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReadParams</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"è¯»å–æ‰€æœ‰çš„è¡¨å•æ•°æ®"</span>;</span><br><span class="line">        String docType =</span><br><span class="line">            <span class="string">"&lt;!doctype html public \"-//w3c//dtd html 4.0 "</span> +</span><br><span class="line">            <span class="string">"transitional//en\"&gt;\n"</span>;</span><br><span class="line">            out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;meta charset=\"utf-8\"&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;table width=\"100%\" border=\"1\" align=\"center\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;tr bgcolor=\"#949494\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;th&gt;å‚æ•°åç§°&lt;/th&gt;&lt;th&gt;å‚æ•°å€¼&lt;/th&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;/tr&gt;\n"</span>);</span><br><span class="line"></span><br><span class="line">        Enumeration paramNames = request.getParameterNames();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(paramNames.hasMoreElements()) {</span><br><span class="line">            String paramName = (String)paramNames.nextElement();</span><br><span class="line">            out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">            String[] paramValues =</span><br><span class="line">            request.getParameterValues(paramName);</span><br><span class="line">            <span class="comment">// è¯»å–å•ä¸ªå€¼çš„æ•°æ®</span></span><br><span class="line">            <span class="keyword">if</span> (paramValues.length == <span class="number">1</span>) {</span><br><span class="line">                String paramValue = paramValues[<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">if</span> (paramValue.length() == <span class="number">0</span>)</span><br><span class="line">                    out.println(<span class="string">"&lt;td&gt;&lt;i&gt;æ²¡æœ‰å€¼&lt;/i&gt;&lt;/td&gt;"</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    out.println(<span class="string">"&lt;td&gt;"</span> + paramValue + <span class="string">"&lt;/td&gt;"</span>);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">// è¯»å–å¤šä¸ªå€¼çš„æ•°æ®</span></span><br><span class="line">                out.println(<span class="string">"&lt;td&gt;&lt;ul&gt;"</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i &lt; paramValues.length; i++) {</span><br><span class="line">                out.println(<span class="string">"&lt;li&gt;"</span> + paramValues[i]);</span><br><span class="line">            }</span><br><span class="line">                out.println(<span class="string">"&lt;/ul&gt;&lt;/td&gt;"</span>);</span><br><span class="line">            }</span><br><span class="line">            out.print(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line">        out.println(<span class="string">"\n&lt;/table&gt;\n&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨ï¼Œé€šè¿‡ä¸‹é¢çš„è¡¨å•å°è¯•ä¸Šé¢çš„ Servletï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‘æ¾ˆ(liudufu.github.io)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"ReadParams"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"maths"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span> æ•°å­¦</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"physics"</span>  /&gt;</span> ç‰©ç†</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"chemistry"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span> åŒ–å­¦</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"é€‰æ‹©å­¦ç§‘"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>è®¾ç½®ç›¸åº”çš„ web.xml:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ReadParams<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.ReadParams<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ReadParams<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/ReadParams<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨ä½¿ç”¨ä¸Šé¢çš„è¡¨å•è°ƒç”¨ Servletï¼Œå°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><a href="https://imgchr.com/i/wpxw0f" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxw0f.png" alt="wpxw0f.png"></a><br><a href="https://imgchr.com/i/wpx078" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpx078.png" alt="wpx078.png"></a></p><h2 id="ğŸŒ¸Servlet-å®¢æˆ·ç«¯-HTTP-è¯·æ±‚"><a href="#ğŸŒ¸Servlet-å®¢æˆ·ç«¯-HTTP-è¯·æ±‚" class="headerlink" title="ğŸŒ¸Servlet å®¢æˆ·ç«¯ HTTP è¯·æ±‚"></a>ğŸŒ¸Servlet å®¢æˆ·ç«¯ HTTP è¯·æ±‚</h2><p>å½“æµè§ˆå™¨è¯·æ±‚ç½‘é¡µæ—¶ï¼Œå®ƒä¼šå‘ Web æœåŠ¡å™¨å‘é€ç‰¹å®šä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¸èƒ½è¢«ç›´æ¥è¯»å–ï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯æ˜¯ä½œä¸º HTTP è¯·æ±‚çš„å¤´çš„ä¸€éƒ¨åˆ†è¿›è¡Œä¼ è¾“çš„ã€‚</p><p>ä»¥ä¸‹æ˜¯æ¥è‡ªäºæµè§ˆå™¨ç«¯çš„é‡è¦å¤´ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨ Web ç¼–ç¨‹ä¸­é¢‘ç¹ä½¿ç”¨ï¼š</p><table><thead><tr><th align="left">å¤´ä¿¡æ¯</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">Accept</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯å¯ä»¥å¤„ç†çš„ MIME ç±»å‹ã€‚å€¼ <strong>image/png</strong> æˆ– <strong>image/jpeg</strong> æ˜¯æœ€å¸¸è§çš„ä¸¤ç§å¯èƒ½å€¼ã€‚</td></tr><tr><td align="left">Accept-Charset</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨å¯ä»¥ç”¨æ¥æ˜¾ç¤ºä¿¡æ¯çš„å­—ç¬¦é›†ã€‚ä¾‹å¦‚ ISO-8859-1ã€‚</td></tr><tr><td align="left">Accept-Encoding</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨çŸ¥é“å¦‚ä½•å¤„ç†çš„ç¼–ç ç±»å‹ã€‚å€¼ <strong>gzip</strong> æˆ– <strong>compress</strong> æ˜¯æœ€å¸¸è§çš„ä¸¤ç§å¯èƒ½å€¼ã€‚</td></tr><tr><td align="left">Accept-Language</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šå®¢æˆ·ç«¯çš„é¦–é€‰è¯­è¨€ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒServlet ä¼šäº§ç”Ÿå¤šç§è¯­è¨€çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œenã€en-usã€ru ç­‰ã€‚</td></tr><tr><td align="left">Authorization</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯ç”¨äºå®¢æˆ·ç«¯åœ¨è®¿é—®å—å¯†ç ä¿æŠ¤çš„ç½‘é¡µæ—¶è¯†åˆ«è‡ªå·±çš„èº«ä»½ã€‚</td></tr><tr><td align="left">Connection</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºå®¢æˆ·ç«¯æ˜¯å¦å¯ä»¥å¤„ç†æŒä¹… HTTP è¿æ¥ã€‚æŒä¹…è¿æ¥å…è®¸å®¢æˆ·ç«¯æˆ–å…¶ä»–æµè§ˆå™¨é€šè¿‡å•ä¸ªè¯·æ±‚æ¥æ£€ç´¢å¤šä¸ªæ–‡ä»¶ã€‚å€¼ <strong>Keep-Alive</strong> æ„å‘³ç€ä½¿ç”¨äº†æŒç»­è¿æ¥ã€‚</td></tr><tr><td align="left">Content-Length</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯åªé€‚ç”¨äº POST è¯·æ±‚ï¼Œå¹¶ç»™å‡º POST æ•°æ®çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚</td></tr><tr><td align="left">Cookie</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŠŠä¹‹å‰å‘é€åˆ°æµè§ˆå™¨çš„ cookies è¿”å›åˆ°æœåŠ¡å™¨ã€‚</td></tr><tr><td align="left">Host</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šåŸå§‹çš„ URL ä¸­çš„ä¸»æœºå’Œç«¯å£ã€‚</td></tr><tr><td align="left">If-Modified-Since</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯è¡¨ç¤ºåªæœ‰å½“é¡µé¢åœ¨æŒ‡å®šçš„æ—¥æœŸåå·²æ›´æ”¹æ—¶ï¼Œå®¢æˆ·ç«¯æƒ³è¦çš„é¡µé¢ã€‚å¦‚æœæ²¡æœ‰æ–°çš„ç»“æœå¯ä»¥ä½¿ç”¨ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ª 304 ä»£ç ï¼Œè¡¨ç¤º <strong>Not Modified</strong> å¤´ä¿¡æ¯ã€‚</td></tr><tr><td align="left">If-Unmodified-Since</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æ˜¯ If-Modified-Since çš„å¯¹ç«‹é¢ï¼Œå®ƒæŒ‡å®šåªæœ‰å½“æ–‡æ¡£æ—©äºæŒ‡å®šæ—¥æœŸæ—¶ï¼Œæ“ä½œæ‰ä¼šæˆåŠŸã€‚</td></tr><tr><td align="left">Referer</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºæ‰€æŒ‡å‘çš„ Web é¡µçš„ URLã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åœ¨ç½‘é¡µ 1ï¼Œç‚¹å‡»ä¸€ä¸ªé“¾æ¥åˆ°ç½‘é¡µ 2ï¼Œå½“æµè§ˆå™¨è¯·æ±‚ç½‘é¡µ 2 æ—¶ï¼Œç½‘é¡µ 1 çš„ URL å°±ä¼šåŒ…å«åœ¨ Referer å¤´ä¿¡æ¯ä¸­ã€‚</td></tr><tr><td align="left">User-Agent</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯è¯†åˆ«å‘å‡ºè¯·æ±‚çš„æµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯ï¼Œå¹¶å¯ä»¥å‘ä¸åŒç±»å‹çš„æµè§ˆå™¨è¿”å›ä¸åŒçš„å†…å®¹ã€‚</td></tr></tbody></table><h3 id="ğŸè¯»å–-HTTP-å¤´çš„æ–¹æ³•"><a href="#ğŸè¯»å–-HTTP-å¤´çš„æ–¹æ³•" class="headerlink" title="ğŸè¯»å– HTTP å¤´çš„æ–¹æ³•"></a>ğŸè¯»å– HTTP å¤´çš„æ–¹æ³•</h3><p>ä¸‹é¢çš„æ–¹æ³•å¯ç”¨åœ¨ Servlet ç¨‹åºä¸­è¯»å– HTTP å¤´ã€‚è¿™äº›æ–¹æ³•é€šè¿‡ <em>HttpServletRequest</em> å¯¹è±¡å¯ç”¨ã€‚</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>Cookie[] getCookies()</strong> è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å®¢æˆ·ç«¯å‘é€è¯¥è¯·æ±‚çš„æ‰€æœ‰çš„ Cookie å¯¹è±¡ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>Enumeration getAttributeNames()</strong> è¿”å›ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«æä¾›ç»™è¯¥è¯·æ±‚å¯ç”¨çš„å±æ€§åç§°ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>Enumeration getHeaderNames()</strong> è¿”å›ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«åœ¨è¯¥è¯·æ±‚ä¸­åŒ…å«çš„æ‰€æœ‰çš„å¤´åã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>Enumeration getParameterNames()</strong> è¿”å›ä¸€ä¸ª String å¯¹è±¡çš„æšä¸¾ï¼ŒåŒ…å«åœ¨è¯¥è¯·æ±‚ä¸­åŒ…å«çš„å‚æ•°çš„åç§°ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>HttpSession getSession()</strong> è¿”å›ä¸è¯¥è¯·æ±‚å…³è”çš„å½“å‰ session ä¼šè¯ï¼Œæˆ–è€…å¦‚æœè¯·æ±‚æ²¡æœ‰ session ä¼šè¯ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>HttpSession getSession(boolean create)</strong> è¿”å›ä¸è¯¥è¯·æ±‚å…³è”çš„å½“å‰ HttpSessionï¼Œæˆ–è€…å¦‚æœæ²¡æœ‰å½“å‰ä¼šè¯ï¼Œä¸”åˆ›å»ºæ˜¯çœŸçš„ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°çš„ session ä¼šè¯ã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>Locale getLocale()</strong> åŸºäº Accept-Language å¤´ï¼Œè¿”å›å®¢æˆ·ç«¯æ¥å—å†…å®¹çš„é¦–é€‰çš„åŒºåŸŸè®¾ç½®ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>Object getAttribute(String name)</strong> ä»¥å¯¹è±¡å½¢å¼è¿”å›å·²å‘½åå±æ€§çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šåç§°çš„å±æ€§å­˜åœ¨ï¼Œåˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>ServletInputStream getInputStream()</strong> ä½¿ç”¨ ServletInputStreamï¼Œä»¥äºŒè¿›åˆ¶æ•°æ®å½¢å¼æ£€ç´¢è¯·æ±‚çš„ä¸»ä½“ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>String getAuthType()</strong> è¿”å›ç”¨äºä¿æŠ¤ Servlet çš„èº«ä»½éªŒè¯æ–¹æ¡ˆçš„åç§°ï¼Œä¾‹å¦‚ï¼Œâ€BASICâ€ æˆ– â€œSSLâ€ï¼Œå¦‚æœJSPæ²¡æœ‰å—åˆ°ä¿æŠ¤åˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">11</td><td align="left"><strong>String getCharacterEncoding()</strong> è¿”å›è¯·æ±‚ä¸»ä½“ä¸­ä½¿ç”¨çš„å­—ç¬¦ç¼–ç çš„åç§°ã€‚</td></tr><tr><td align="left">12</td><td align="left"><strong>String getContentType()</strong> è¿”å›è¯·æ±‚ä¸»ä½“çš„ MIME ç±»å‹ï¼Œå¦‚æœä¸çŸ¥é“ç±»å‹åˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">13</td><td align="left"><strong>String getContextPath()</strong> è¿”å›æŒ‡ç¤ºè¯·æ±‚ä¸Šä¸‹æ–‡çš„è¯·æ±‚ URI éƒ¨åˆ†ã€‚</td></tr><tr><td align="left">14</td><td align="left"><strong>String getHeader(String name)</strong> ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›æŒ‡å®šçš„è¯·æ±‚å¤´çš„å€¼ã€‚</td></tr><tr><td align="left">15</td><td align="left"><strong>String getMethod()</strong> è¿”å›è¯·æ±‚çš„ HTTP æ–¹æ³•çš„åç§°ï¼Œä¾‹å¦‚ï¼ŒGETã€POST æˆ– PUTã€‚</td></tr><tr><td align="left">16</td><td align="left"><strong>String getParameter(String name)</strong> ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›è¯·æ±‚å‚æ•°çš„å€¼ï¼Œæˆ–è€…å¦‚æœå‚æ•°ä¸å­˜åœ¨åˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">17</td><td align="left"><strong>String getPathInfo()</strong> å½“è¯·æ±‚å‘å‡ºæ—¶ï¼Œè¿”å›ä¸å®¢æˆ·ç«¯å‘é€çš„ URL ç›¸å…³çš„ä»»ä½•é¢å¤–çš„è·¯å¾„ä¿¡æ¯ã€‚</td></tr><tr><td align="left">18</td><td align="left"><strong>String getProtocol()</strong> è¿”å›è¯·æ±‚åè®®çš„åç§°å’Œç‰ˆæœ¬ã€‚</td></tr><tr><td align="left">19</td><td align="left"><strong>String getQueryString()</strong> è¿”å›åŒ…å«åœ¨è·¯å¾„åçš„è¯·æ±‚ URL ä¸­çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</td></tr><tr><td align="left">20</td><td align="left"><strong>String getRemoteAddr()</strong> è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯çš„äº’è”ç½‘åè®®ï¼ˆIPï¼‰åœ°å€ã€‚</td></tr><tr><td align="left">21</td><td align="left"><strong>String getRemoteHost()</strong> è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯çš„å®Œå…¨é™å®šåç§°ã€‚</td></tr><tr><td align="left">22</td><td align="left"><strong>String getRemoteUser()</strong> å¦‚æœç”¨æˆ·å·²é€šè¿‡èº«ä»½éªŒè¯ï¼Œåˆ™è¿”å›å‘å‡ºè¯·æ±‚çš„ç™»å½•ç”¨æˆ·ï¼Œæˆ–è€…å¦‚æœç”¨æˆ·æœªé€šè¿‡èº«ä»½éªŒè¯ï¼Œåˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">23</td><td align="left"><strong>String getRequestURI()</strong> ä»åè®®åç§°ç›´åˆ° HTTP è¯·æ±‚çš„ç¬¬ä¸€è¡Œçš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ï¼Œè¿”å›è¯¥è¯·æ±‚çš„ URL çš„ä¸€éƒ¨åˆ†ã€‚</td></tr><tr><td align="left">24</td><td align="left"><strong>String getRequestedSessionId()</strong> è¿”å›ç”±å®¢æˆ·ç«¯æŒ‡å®šçš„ session ä¼šè¯ IDã€‚</td></tr><tr><td align="left">25</td><td align="left"><strong>String getServletPath()</strong> è¿”å›è°ƒç”¨ JSP çš„è¯·æ±‚çš„ URL çš„ä¸€éƒ¨åˆ†ã€‚</td></tr><tr><td align="left">26</td><td align="left"><strong>String[] getParameterValues(String name)</strong> è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„æ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰ç»™å®šçš„è¯·æ±‚å‚æ•°çš„å€¼ï¼Œå¦‚æœå‚æ•°ä¸å­˜åœ¨åˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">27</td><td align="left"><strong>boolean isSecure()</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè¯·æ±‚æ˜¯å¦ä½¿ç”¨å®‰å…¨é€šé“ï¼Œå¦‚ HTTPSã€‚</td></tr><tr><td align="left">28</td><td align="left"><strong>int getContentLength()</strong> ä»¥å­—èŠ‚ä¸ºå•ä½è¿”å›è¯·æ±‚ä¸»ä½“çš„é•¿åº¦ï¼Œå¹¶æä¾›è¾“å…¥æµï¼Œæˆ–è€…å¦‚æœé•¿åº¦æœªçŸ¥åˆ™è¿”å› -1ã€‚</td></tr><tr><td align="left">29</td><td align="left"><strong>int getIntHeader(String name)</strong> è¿”å›æŒ‡å®šçš„è¯·æ±‚å¤´çš„å€¼ä¸ºä¸€ä¸ª int å€¼ã€‚</td></tr><tr><td align="left">30</td><td align="left"><strong>int getServerPort()</strong> è¿”å›æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚çš„ç«¯å£å·ã€‚</td></tr><tr><td align="left">31</td><td align="left"><strong>int getParameterMap()</strong> å°†å‚æ•°å°è£…æˆ Map ç±»å‹ã€‚</td></tr></tbody></table><h3 id="ğŸHTTP-Header-è¯·æ±‚å®ä¾‹"><a href="#ğŸHTTP-Header-è¯·æ±‚å®ä¾‹" class="headerlink" title="ğŸHTTP Header è¯·æ±‚å®ä¾‹"></a>ğŸHTTP Header è¯·æ±‚å®ä¾‹</h3><p>ä¸‹é¢çš„å®ä¾‹ä½¿ç”¨ HttpServletRequest çš„ <strong>getHeaderNames()</strong> æ–¹æ³•è¯»å– HTTP å¤´ä¿¡æ¯ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«ä¸å½“å‰çš„ HTTP è¯·æ±‚ç›¸å…³çš„å¤´ä¿¡æ¯ã€‚</p><p>ä¸€æ—¦æˆ‘ä»¬æœ‰ä¸€ä¸ªæšä¸¾ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ ‡å‡†æ–¹å¼å¾ªç¯æšä¸¾ï¼Œä½¿ç”¨ <em>hasMoreElements()</em> æ–¹æ³•æ¥ç¡®å®šä½•æ—¶åœæ­¢ï¼Œä½¿ç”¨ <em>nextElement()</em> æ–¹æ³•æ¥è·å–æ¯ä¸ªå‚æ•°çš„åç§°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/DisplayHeader"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DisplayHeader</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"HTTP Header è¯·æ±‚å®ä¾‹ - äº‘æ¾ˆå®ä¾‹"</span>;</span><br><span class="line">        String docType =</span><br><span class="line">            <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">            out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;meta charset=\"utf-8\"&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;table width=\"100%\" border=\"1\" align=\"center\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;tr bgcolor=\"#949494\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;th&gt;Header åç§°&lt;/th&gt;&lt;th&gt;Header å€¼&lt;/th&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;/tr&gt;\n"</span>);</span><br><span class="line"></span><br><span class="line">        Enumeration headerNames = request.getHeaderNames();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(headerNames.hasMoreElements()) {</span><br><span class="line">            String paramName = (String)headerNames.nextElement();</span><br><span class="line">            out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">            String paramValue = request.getHeader(paramName);</span><br><span class="line">            out.println(<span class="string">"&lt;td&gt; "</span> + paramValue + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span>);</span><br><span class="line">        }</span><br><span class="line">        out.println(<span class="string">"&lt;/table&gt;\n&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸Šæµ‹è¯•å®ä¾‹æ˜¯ä½äº TomcatTest é¡¹ç›®ä¸‹ï¼Œå¯¹åº”çš„ web.xml é…ç½®ä¸ºï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayHeader<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.DisplayHeader<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayHeader<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/DisplayHeader<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨ï¼Œè°ƒç”¨ä¸Šé¢çš„ Servletï¼Œè®¿é—® <strong><a href="http://localhost:8080/TomcatTest/DisplayHeader" target="_blank" rel="noopener">http://localhost:8080/TomcatTest/DisplayHeader</a></strong> ä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><a href="https://imgchr.com/i/wPao0e" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/03/wPao0e.png" alt="wPao0e.png"></a></p><h2 id="ğŸŒ¸Servlet-æœåŠ¡å™¨-HTTP-å“åº”"><a href="#ğŸŒ¸Servlet-æœåŠ¡å™¨-HTTP-å“åº”" class="headerlink" title="ğŸŒ¸Servlet æœåŠ¡å™¨ HTTP å“åº”"></a>ğŸŒ¸Servlet æœåŠ¡å™¨ HTTP å“åº”</h2><p>æ­£å¦‚å‰é¢çš„ç« èŠ‚ä¸­è®¨è®ºçš„é‚£æ ·ï¼Œå½“ä¸€ä¸ª Web æœåŠ¡å™¨å“åº”ä¸€ä¸ª HTTP è¯·æ±‚æ—¶ï¼Œå“åº”é€šå¸¸åŒ…æ‹¬ä¸€ä¸ªçŠ¶æ€è¡Œã€ä¸€äº›å“åº”æŠ¥å¤´ã€ä¸€ä¸ªç©ºè¡Œå’Œæ–‡æ¡£ã€‚ä¸€ä¸ªå…¸å‹çš„å“åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Header2: ...</span><br><span class="line">...</span><br><span class="line">HeaderN: ...</span><br><span class="line">  (Blank Line)</span><br><span class="line"><span class="meta">&lt;!doctype ...&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>...<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>çŠ¶æ€è¡ŒåŒ…æ‹¬ HTTP ç‰ˆæœ¬ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º HTTP/1.1ï¼‰ã€ä¸€ä¸ªçŠ¶æ€ç ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º 200ï¼‰å’Œä¸€ä¸ªå¯¹åº”äºçŠ¶æ€ç çš„çŸ­æ¶ˆæ¯ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º OKï¼‰ã€‚</p><p>ä¸‹è¡¨æ€»ç»“äº†ä» Web æœåŠ¡å™¨ç«¯è¿”å›åˆ°æµè§ˆå™¨çš„æœ€æœ‰ç”¨çš„ HTTP 1.1 å“åº”æŠ¥å¤´ï¼Œæ‚¨ä¼šåœ¨ Web ç¼–ç¨‹ä¸­é¢‘ç¹åœ°ä½¿ç”¨å®ƒä»¬ï¼š</p><table><thead><tr><th align="left">å¤´ä¿¡æ¯</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">Allow</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæœåŠ¡å™¨æ”¯æŒçš„è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚</td></tr><tr><td align="left">Cache-Control</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šå“åº”æ–‡æ¡£åœ¨ä½•ç§æƒ…å†µä¸‹å¯ä»¥å®‰å…¨åœ°ç¼“å­˜ã€‚å¯èƒ½çš„å€¼æœ‰ï¼š<strong>publicã€private</strong> æˆ– <strong>no-cache</strong> ç­‰ã€‚Public æ„å‘³ç€æ–‡æ¡£æ˜¯å¯ç¼“å­˜ï¼ŒPrivate æ„å‘³ç€æ–‡æ¡£æ˜¯å•ä¸ªç”¨æˆ·ç§ç”¨æ–‡æ¡£ï¼Œä¸”åªèƒ½å­˜å‚¨åœ¨ç§æœ‰ï¼ˆéå…±äº«ï¼‰ç¼“å­˜ä¸­ï¼Œno-cache æ„å‘³ç€æ–‡æ¡£ä¸åº”è¢«ç¼“å­˜ã€‚</td></tr><tr><td align="left">Connection</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºæµè§ˆå™¨æ˜¯å¦ä½¿ç”¨æŒä¹… HTTP è¿æ¥ã€‚å€¼ <strong>close</strong> æŒ‡ç¤ºæµè§ˆå™¨ä¸ä½¿ç”¨æŒä¹… HTTP è¿æ¥ï¼Œå€¼ <strong>keep-alive</strong> æ„å‘³ç€ä½¿ç”¨æŒä¹…è¿æ¥ã€‚</td></tr><tr><td align="left">Content-Disposition</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯å¯ä»¥è®©æ‚¨è¯·æ±‚æµè§ˆå™¨è¦æ±‚ç”¨æˆ·ä»¥ç»™å®šåç§°çš„æ–‡ä»¶æŠŠå“åº”ä¿å­˜åˆ°ç£ç›˜ã€‚</td></tr><tr><td align="left">Content-Encoding</td><td align="left">åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šé¡µé¢çš„ç¼–ç æ–¹å¼ã€‚</td></tr><tr><td align="left">Content-Language</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯è¡¨ç¤ºæ–‡æ¡£ç¼–å†™æ‰€ä½¿ç”¨çš„è¯­è¨€ã€‚ä¾‹å¦‚ï¼Œenã€en-usã€ru ç­‰ã€‚</td></tr><tr><td align="left">Content-Length</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºå“åº”ä¸­çš„å­—èŠ‚æ•°ã€‚åªæœ‰å½“æµè§ˆå™¨ä½¿ç”¨æŒä¹…ï¼ˆkeep-aliveï¼‰HTTP è¿æ¥æ—¶æ‰éœ€è¦è¿™äº›ä¿¡æ¯ã€‚</td></tr><tr><td align="left">Content-Type</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æä¾›äº†å“åº”æ–‡æ¡£çš„ MIMEï¼ˆMultipurpose Internet Mail Extensionï¼‰ç±»å‹ã€‚</td></tr><tr><td align="left">Expires</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šå†…å®¹è¿‡æœŸçš„æ—¶é—´ï¼Œåœ¨è¿™ä¹‹åå†…å®¹ä¸å†è¢«ç¼“å­˜ã€‚</td></tr><tr><td align="left">Last-Modified</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºæ–‡æ¡£çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜æ–‡ä»¶ï¼Œå¹¶åœ¨ä»¥åçš„è¯·æ±‚ä¸­é€šè¿‡ <strong>If-Modified-Since</strong> è¯·æ±‚å¤´ä¿¡æ¯æä¾›ä¸€ä¸ªæ—¥æœŸã€‚</td></tr><tr><td align="left">Location</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯åº”è¢«åŒ…å«åœ¨æ‰€æœ‰çš„å¸¦æœ‰çŠ¶æ€ç çš„å“åº”ä¸­ã€‚åœ¨ 300s å†…ï¼Œè¿™ä¼šé€šçŸ¥æµè§ˆå™¨æ–‡æ¡£çš„åœ°å€ã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨é‡æ–°è¿æ¥åˆ°è¿™ä¸ªä½ç½®ï¼Œå¹¶è·å–æ–°çš„æ–‡æ¡£ã€‚</td></tr><tr><td align="left">Refresh</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨åº”è¯¥å¦‚ä½•å°½å¿«è¯·æ±‚æ›´æ–°çš„é¡µé¢ã€‚æ‚¨å¯ä»¥æŒ‡å®šé¡µé¢åˆ·æ–°çš„ç§’æ•°ã€‚</td></tr><tr><td align="left">Retry-After</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯å¯ä»¥ä¸ 503ï¼ˆService Unavailable æœåŠ¡ä¸å¯ç”¨ï¼‰å“åº”é…åˆä½¿ç”¨ï¼Œè¿™ä¼šå‘Šè¯‰å®¢æˆ·ç«¯å¤šä¹…å°±å¯ä»¥é‡å¤å®ƒçš„è¯·æ±‚ã€‚</td></tr><tr><td align="left">Set-Cookie</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šä¸€ä¸ªä¸é¡µé¢å…³è”çš„ cookieã€‚</td></tr></tbody></table><h3 id="ğŸè®¾ç½®-HTTP-å“åº”æŠ¥å¤´çš„æ–¹æ³•"><a href="#ğŸè®¾ç½®-HTTP-å“åº”æŠ¥å¤´çš„æ–¹æ³•" class="headerlink" title="ğŸè®¾ç½® HTTP å“åº”æŠ¥å¤´çš„æ–¹æ³•"></a>ğŸè®¾ç½® HTTP å“åº”æŠ¥å¤´çš„æ–¹æ³•</h3><p>ä¸‹é¢çš„æ–¹æ³•å¯ç”¨äºåœ¨ Servlet ç¨‹åºä¸­è®¾ç½® HTTP å“åº”æŠ¥å¤´ã€‚è¿™äº›æ–¹æ³•é€šè¿‡ <em>HttpServletResponse</em> å¯¹è±¡å¯ç”¨ã€‚</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>String encodeRedirectURL(String url)</strong> ä¸º sendRedirect æ–¹æ³•ä¸­ä½¿ç”¨çš„æŒ‡å®šçš„ URL è¿›è¡Œç¼–ç ï¼Œæˆ–è€…å¦‚æœç¼–ç ä¸æ˜¯å¿…éœ€çš„ï¼Œåˆ™è¿”å› URL æœªæ”¹å˜ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>String encodeURL(String url)</strong> å¯¹åŒ…å« session ä¼šè¯ ID çš„æŒ‡å®š URL è¿›è¡Œç¼–ç ï¼Œæˆ–è€…å¦‚æœç¼–ç ä¸æ˜¯å¿…éœ€çš„ï¼Œåˆ™è¿”å› URL æœªæ”¹å˜ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>boolean containsHeader(String name)</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦å·²ç»è®¾ç½®å·²å‘½åçš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>boolean isCommitted()</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå“åº”æ˜¯å¦å·²ç»æäº¤ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>void addCookie(Cookie cookie)</strong> æŠŠæŒ‡å®šçš„ cookie æ·»åŠ åˆ°å“åº”ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>void addDateHeader(String name, long date)</strong> æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ—¥æœŸå€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>void addHeader(String name, String value)</strong> æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œå€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>void addIntHeader(String name, int value)</strong> æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ•´æ•°å€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>void flushBuffer()</strong> å¼ºåˆ¶ä»»ä½•åœ¨ç¼“å†²åŒºä¸­çš„å†…å®¹è¢«å†™å…¥åˆ°å®¢æˆ·ç«¯ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>void reset()</strong> æ¸…é™¤ç¼“å†²åŒºä¸­å­˜åœ¨çš„ä»»ä½•æ•°æ®ï¼ŒåŒ…æ‹¬çŠ¶æ€ç å’Œå¤´ã€‚</td></tr><tr><td align="left">11</td><td align="left"><strong>void resetBuffer()</strong> æ¸…é™¤å“åº”ä¸­åŸºç¡€ç¼“å†²åŒºçš„å†…å®¹ï¼Œä¸æ¸…é™¤çŠ¶æ€ç å’Œå¤´ã€‚</td></tr><tr><td align="left">12</td><td align="left"><strong>void sendError(int sc)</strong> ä½¿ç”¨æŒ‡å®šçš„çŠ¶æ€ç å‘é€é”™è¯¯å“åº”åˆ°å®¢æˆ·ç«¯ï¼Œå¹¶æ¸…é™¤ç¼“å†²åŒºã€‚</td></tr><tr><td align="left">13</td><td align="left"><strong>void sendError(int sc, String msg)</strong> ä½¿ç”¨æŒ‡å®šçš„çŠ¶æ€å‘é€é”™è¯¯å“åº”åˆ°å®¢æˆ·ç«¯ã€‚</td></tr><tr><td align="left">14</td><td align="left"><strong>void sendRedirect(String location)</strong> ä½¿ç”¨æŒ‡å®šçš„é‡å®šå‘ä½ç½® URL å‘é€ä¸´æ—¶é‡å®šå‘å“åº”åˆ°å®¢æˆ·ç«¯ã€‚</td></tr><tr><td align="left">15</td><td align="left"><strong>void setBufferSize(int size)</strong> ä¸ºå“åº”ä¸»ä½“è®¾ç½®é¦–é€‰çš„ç¼“å†²åŒºå¤§å°ã€‚</td></tr><tr><td align="left">16</td><td align="left"><strong>void setCharacterEncoding(String charset)</strong> è®¾ç½®è¢«å‘é€åˆ°å®¢æˆ·ç«¯çš„å“åº”çš„å­—ç¬¦ç¼–ç ï¼ˆMIME å­—ç¬¦é›†ï¼‰ä¾‹å¦‚ï¼ŒUTF-8ã€‚</td></tr><tr><td align="left">17</td><td align="left"><strong>void setContentLength(int len)</strong> è®¾ç½®åœ¨ HTTP Servlet å“åº”ä¸­çš„å†…å®¹ä¸»ä½“çš„é•¿åº¦ï¼Œè¯¥æ–¹æ³•è®¾ç½® HTTP Content-Length å¤´ã€‚</td></tr><tr><td align="left">18</td><td align="left"><strong>void setContentType(String type)</strong> å¦‚æœå“åº”è¿˜æœªè¢«æäº¤ï¼Œè®¾ç½®è¢«å‘é€åˆ°å®¢æˆ·ç«¯çš„å“åº”çš„å†…å®¹ç±»å‹ã€‚</td></tr><tr><td align="left">19</td><td align="left"><strong>void setDateHeader(String name, long date)</strong> è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ—¥æœŸå€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">20</td><td align="left"><strong>void setHeader(String name, String value)</strong> è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œå€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">21</td><td align="left"><strong>void setIntHeader(String name, int value)</strong> è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ•´æ•°å€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">22</td><td align="left"><strong>void setLocale(Locale loc)</strong> å¦‚æœå“åº”è¿˜æœªè¢«æäº¤ï¼Œè®¾ç½®å“åº”çš„åŒºåŸŸã€‚</td></tr><tr><td align="left">23</td><td align="left"><strong>void setStatus(int sc)</strong> ä¸ºè¯¥å“åº”è®¾ç½®çŠ¶æ€ç ã€‚</td></tr></tbody></table><h3 id="ğŸHTTP-Header-å“åº”å®ä¾‹"><a href="#ğŸHTTP-Header-å“åº”å®ä¾‹" class="headerlink" title="ğŸHTTP Header å“åº”å®ä¾‹"></a>ğŸHTTP Header å“åº”å®ä¾‹</h3><p>æ‚¨å·²ç»åœ¨å‰é¢çš„å®ä¾‹ä¸­çœ‹åˆ° setContentType() æ–¹æ³•ï¼Œä¸‹é¢çš„å®ä¾‹ä¹Ÿä½¿ç”¨äº†åŒæ ·çš„æ–¹æ³•ï¼Œæ­¤å¤–ï¼Œæˆ‘ä»¬ä¼šç”¨ <strong>setIntHeader()</strong> æ–¹æ³•æ¥è®¾ç½® <strong>Refresh</strong> å¤´ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/Refresh"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Refresh</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                        HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">                <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">      </span>{</span><br><span class="line">          <span class="comment">// è®¾ç½®åˆ·æ–°è‡ªåŠ¨åŠ è½½æ—¶é—´ä¸º 5 ç§’</span></span><br><span class="line">          response.setIntHeader(<span class="string">"Refresh"</span>, <span class="number">5</span>);</span><br><span class="line">          <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">          response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">         </span><br><span class="line">          <span class="comment">//ä½¿ç”¨é»˜è®¤æ—¶åŒºå’Œè¯­è¨€ç¯å¢ƒè·å¾—ä¸€ä¸ªæ—¥å†  </span></span><br><span class="line">          Calendar cale = Calendar.getInstance();  </span><br><span class="line">          <span class="comment">//å°†Calendarç±»å‹è½¬æ¢æˆDateç±»å‹  </span></span><br><span class="line">          Date tasktime=cale.getTime();  </span><br><span class="line">          <span class="comment">//è®¾ç½®æ—¥æœŸè¾“å‡ºçš„æ ¼å¼  </span></span><br><span class="line">          SimpleDateFormat df=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);  </span><br><span class="line">          <span class="comment">//æ ¼å¼åŒ–è¾“å‡º  </span></span><br><span class="line">          String nowTime = df.format(tasktime);</span><br><span class="line">          PrintWriter out = response.getWriter();</span><br><span class="line">          String title = <span class="string">"è‡ªåŠ¨åˆ·æ–° Header è®¾ç½® - äº‘æ¾ˆå®ä¾‹"</span>;</span><br><span class="line">          String docType =</span><br><span class="line">          <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">          out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;p&gt;å½“å‰æ—¶é—´æ˜¯ï¼š"</span> + nowTime + <span class="string">"&lt;/p&gt;\n"</span>);</span><br><span class="line">      }</span><br><span class="line">      <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                         HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">          <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">         doGet(request, response);</span><br><span class="line">      }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸Šæµ‹è¯•å®ä¾‹æ˜¯ä½äº TomcatTest é¡¹ç›®ä¸‹ï¼Œå¯¹åº”çš„ web.xml é…ç½®ä¸ºï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">     <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Refresh<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.Refresh<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Refresh<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/Refresh<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨ï¼Œè°ƒç”¨ä¸Šé¢çš„ Servletï¼Œæ¯éš” 5 ç§’ä¼šæ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¶é—´ã€‚åªè¦è¿è¡Œ Servlet å¹¶ç¨ç­‰ç‰‡åˆ»ï¼Œå³å¯çœ‹åˆ°å¦‚ä¸‹çš„ç»“æœï¼š</p><p><a href="https://imgchr.com/i/wPwqQP" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/03/wPwqQP.png" alt="wPwqQP.png"></a></p><h2 id="ğŸŒ¸Servlet-HTTP-çŠ¶æ€ç "><a href="#ğŸŒ¸Servlet-HTTP-çŠ¶æ€ç " class="headerlink" title="ğŸŒ¸Servlet HTTP çŠ¶æ€ç "></a>ğŸŒ¸Servlet HTTP çŠ¶æ€ç </h2><p>HTTP è¯·æ±‚å’Œ HTTP å“åº”æ¶ˆæ¯çš„æ ¼å¼æ˜¯ç±»ä¼¼çš„ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>åˆå§‹çŠ¶æ€è¡Œ + å›è½¦æ¢è¡Œç¬¦ï¼ˆå›è½¦+æ¢è¡Œï¼‰</li><li>é›¶ä¸ªæˆ–å¤šä¸ªæ ‡é¢˜è¡Œ+å›è½¦æ¢è¡Œç¬¦</li><li>ä¸€ä¸ªç©ºç™½è¡Œï¼Œå³å›è½¦æ¢è¡Œç¬¦</li><li>ä¸€ä¸ªå¯é€‰çš„æ¶ˆæ¯ä¸»ä½“ï¼Œæ¯”å¦‚æ–‡ä»¶ã€æŸ¥è¯¢æ•°æ®æˆ–æŸ¥è¯¢è¾“å‡º</li></ul><p>ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨çš„å“åº”å¤´å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Header2: ...</span><br><span class="line">...</span><br><span class="line">HeaderN: ...</span><br><span class="line">  (Blank Line)</span><br><span class="line"><span class="meta">&lt;!doctype ...&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>...<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>çŠ¶æ€è¡ŒåŒ…æ‹¬ HTTP ç‰ˆæœ¬ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º HTTP/1.1ï¼‰ã€ä¸€ä¸ªçŠ¶æ€ç ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º 200ï¼‰å’Œä¸€ä¸ªå¯¹åº”äºçŠ¶æ€ç çš„çŸ­æ¶ˆæ¯ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º OKï¼‰ã€‚</p><p>ä»¥ä¸‹æ˜¯å¯èƒ½ä» Web æœåŠ¡å™¨è¿”å›çš„ HTTP çŠ¶æ€ç å’Œç›¸å…³çš„ä¿¡æ¯åˆ—è¡¨ï¼š</p><table><thead><tr><th align="left">ä»£ç </th><th align="left">æ¶ˆæ¯</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">100</td><td align="left">Continue</td><td align="left">åªæœ‰è¯·æ±‚çš„ä¸€éƒ¨åˆ†å·²ç»è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œä½†åªè¦å®ƒæ²¡æœ‰è¢«æ‹’ç»ï¼Œå®¢æˆ·ç«¯åº”ç»§ç»­è¯¥è¯·æ±‚ã€‚</td></tr><tr><td align="left">101</td><td align="left">Switching Protocols</td><td align="left">æœåŠ¡å™¨åˆ‡æ¢åè®®ã€‚</td></tr><tr><td align="left">200</td><td align="left">OK</td><td align="left">è¯·æ±‚æˆåŠŸã€‚</td></tr><tr><td align="left">201</td><td align="left">Created</td><td align="left">è¯¥è¯·æ±‚æ˜¯å®Œæ•´çš„ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºã€‚</td></tr><tr><td align="left">202</td><td align="left">Accepted</td><td align="left">è¯¥è¯·æ±‚è¢«æ¥å—å¤„ç†ï¼Œä½†æ˜¯è¯¥å¤„ç†æ˜¯ä¸å®Œæ•´çš„ã€‚</td></tr><tr><td align="left">203</td><td align="left">Non-authoritative Information</td><td align="left"></td></tr><tr><td align="left">204</td><td align="left">No Content</td><td align="left"></td></tr><tr><td align="left">205</td><td align="left">Reset Content</td><td align="left"></td></tr><tr><td align="left">206</td><td align="left">Partial Content</td><td align="left"></td></tr><tr><td align="left">300</td><td align="left">Multiple Choices</td><td align="left">é“¾æ¥åˆ—è¡¨ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸€ä¸ªé“¾æ¥ï¼Œè¿›å…¥åˆ°è¯¥ä½ç½®ã€‚æœ€å¤šäº”ä¸ªåœ°å€ã€‚</td></tr><tr><td align="left">301</td><td align="left">Moved Permanently</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å·²ç»è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ URLã€‚</td></tr><tr><td align="left">302</td><td align="left">Found</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å·²ç»ä¸´æ—¶è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ URLã€‚</td></tr><tr><td align="left">303</td><td align="left">See Other</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å¯ä»¥åœ¨å¦ä¸€ä¸ªä¸åŒçš„ URL ä¸‹è¢«æ‰¾åˆ°ã€‚</td></tr><tr><td align="left">304</td><td align="left">Not Modified</td><td align="left"></td></tr><tr><td align="left">305</td><td align="left">Use Proxy</td><td align="left"></td></tr><tr><td align="left">306</td><td align="left"><em>Unused</em></td><td align="left">åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ä½¿ç”¨è¯¥ä»£ç ã€‚ç°åœ¨å·²ä¸å†ä½¿ç”¨å®ƒï¼Œä½†ä»£ç ä»è¢«ä¿ç•™ã€‚</td></tr><tr><td align="left">307</td><td align="left">Temporary Redirect</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å·²ç»ä¸´æ—¶è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ URLã€‚</td></tr><tr><td align="left">400</td><td align="left">Bad Request</td><td align="left">æœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚ã€‚</td></tr><tr><td align="left">401</td><td align="left">Unauthorized</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢éœ€è¦ç”¨æˆ·åå’Œå¯†ç ã€‚</td></tr><tr><td align="left">402</td><td align="left">Payment Required</td><td align="left"><em>æ‚¨è¿˜ä¸èƒ½ä½¿ç”¨è¯¥ä»£ç ã€‚</em></td></tr><tr><td align="left">403</td><td align="left">Forbidden</td><td align="left">ç¦æ­¢è®¿é—®æ‰€è¯·æ±‚çš„é¡µé¢ã€‚</td></tr><tr><td align="left">404</td><td align="left">Not Found</td><td align="left">æœåŠ¡å™¨æ— æ³•æ‰¾åˆ°æ‰€è¯·æ±‚çš„é¡µé¢ã€‚.</td></tr><tr><td align="left">405</td><td align="left">Method Not Allowed</td><td align="left">åœ¨è¯·æ±‚ä¸­æŒ‡å®šçš„æ–¹æ³•æ˜¯ä¸å…è®¸çš„ã€‚</td></tr><tr><td align="left">406</td><td align="left">Not Acceptable</td><td align="left">æœåŠ¡å™¨åªç”Ÿæˆä¸€ä¸ªä¸è¢«å®¢æˆ·ç«¯æ¥å—çš„å“åº”ã€‚</td></tr><tr><td align="left">407</td><td align="left">Proxy Authentication Required</td><td align="left">åœ¨è¯·æ±‚é€è¾¾ä¹‹å‰ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ä»£ç†æœåŠ¡å™¨çš„éªŒè¯ã€‚</td></tr><tr><td align="left">408</td><td align="left">Request Timeout</td><td align="left">è¯·æ±‚éœ€è¦çš„æ—¶é—´æ¯”æœåŠ¡å™¨èƒ½å¤Ÿç­‰å¾…çš„æ—¶é—´é•¿ï¼Œè¶…æ—¶ã€‚</td></tr><tr><td align="left">409</td><td align="left">Conflict</td><td align="left">è¯·æ±‚å› ä¸ºå†²çªæ— æ³•å®Œæˆã€‚</td></tr><tr><td align="left">410</td><td align="left">Gone</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢ä¸å†å¯ç”¨ã€‚</td></tr><tr><td align="left">411</td><td align="left">Length Required</td><td align="left">â€œContent-Lengthâ€ æœªå®šä¹‰ã€‚æœåŠ¡å™¨æ— æ³•å¤„ç†å®¢æˆ·ç«¯å‘é€çš„ä¸å¸¦ Content-Length çš„è¯·æ±‚ä¿¡æ¯ã€‚</td></tr><tr><td align="left">412</td><td align="left">Precondition Failed</td><td align="left">è¯·æ±‚ä¸­ç»™å‡ºçš„å…ˆå†³æ¡ä»¶è¢«æœåŠ¡å™¨è¯„ä¼°ä¸º falseã€‚</td></tr><tr><td align="left">413</td><td align="left">Request Entity Too Large</td><td align="left">æœåŠ¡å™¨ä¸æ¥å—è¯¥è¯·æ±‚ï¼Œå› ä¸ºè¯·æ±‚å®ä½“è¿‡å¤§ã€‚</td></tr><tr><td align="left">414</td><td align="left">Request-url Too Long</td><td align="left">æœåŠ¡å™¨ä¸æ¥å—è¯¥è¯·æ±‚ï¼Œå› ä¸º URL å¤ªé•¿ã€‚å½“æ‚¨è½¬æ¢ä¸€ä¸ª â€œpostâ€ è¯·æ±‚ä¸ºä¸€ä¸ªå¸¦æœ‰é•¿çš„æŸ¥è¯¢ä¿¡æ¯çš„ â€œgetâ€ è¯·æ±‚æ—¶å‘ç”Ÿã€‚</td></tr><tr><td align="left">415</td><td align="left">Unsupported Media Type</td><td align="left">æœåŠ¡å™¨ä¸æ¥å—è¯¥è¯·æ±‚ï¼Œå› ä¸ºåª’ä½“ç±»å‹ä¸è¢«æ”¯æŒã€‚</td></tr><tr><td align="left">417</td><td align="left">Expectation Failed</td><td align="left"></td></tr><tr><td align="left">500</td><td align="left">Internal Server Error</td><td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæ„å¤–çš„æƒ…å†µã€‚</td></tr><tr><td align="left">501</td><td align="left">Not Implemented</td><td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨ä¸æ”¯æŒæ‰€éœ€çš„åŠŸèƒ½ã€‚</td></tr><tr><td align="left">502</td><td align="left">Bad Gateway</td><td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨ä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº”ã€‚</td></tr><tr><td align="left">503</td><td align="left">Service Unavailable</td><td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨æš‚æ—¶è¶…è½½æˆ–æ­»æœºã€‚</td></tr><tr><td align="left">504</td><td align="left">Gateway Timeout</td><td align="left">ç½‘å…³è¶…æ—¶ã€‚</td></tr><tr><td align="left">505</td><td align="left">HTTP Version Not Supported</td><td align="left">æœåŠ¡å™¨ä¸æ”¯æŒâ€HTTPåè®®â€ç‰ˆæœ¬ã€‚### ğŸHTTP è¯·æ±‚å’Œ HTTP å“åº”æ¶ˆæ¯çš„æ ¼å¼æ˜¯ç±»ä¼¼çš„ï¼Œç»“æ„å¦‚ä¸‹ï¼š</td></tr></tbody></table><h3 id="ğŸè®¾ç½®-HTTP-çŠ¶æ€ä»£ç çš„æ–¹æ³•"><a href="#ğŸè®¾ç½®-HTTP-çŠ¶æ€ä»£ç çš„æ–¹æ³•" class="headerlink" title="ğŸè®¾ç½® HTTP çŠ¶æ€ä»£ç çš„æ–¹æ³•"></a>ğŸè®¾ç½® HTTP çŠ¶æ€ä»£ç çš„æ–¹æ³•</h3><p>ä¸‹é¢çš„æ–¹æ³•å¯ç”¨äºåœ¨ Servlet ç¨‹åºä¸­è®¾ç½® HTTP çŠ¶æ€ç ã€‚è¿™äº›æ–¹æ³•é€šè¿‡ <em>HttpServletResponse</em> å¯¹è±¡å¯ç”¨ã€‚</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>public void setStatus ( int statusCode )</strong> è¯¥æ–¹æ³•è®¾ç½®ä¸€ä¸ªä»»æ„çš„çŠ¶æ€ç ã€‚setStatus æ–¹æ³•æ¥å—ä¸€ä¸ª intï¼ˆçŠ¶æ€ç ï¼‰ä½œä¸ºå‚æ•°ã€‚å¦‚æœæ‚¨çš„å“åº”åŒ…å«äº†ä¸€ä¸ªç‰¹æ®Šçš„çŠ¶æ€ç å’Œæ–‡æ¡£ï¼Œè¯·ç¡®ä¿åœ¨ä½¿ç”¨ <em>PrintWriter</em> å®é™…è¿”å›ä»»ä½•å†…å®¹ä¹‹å‰è°ƒç”¨ setStatusã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>public void sendRedirect(String url)</strong> è¯¥æ–¹æ³•ç”Ÿæˆä¸€ä¸ª 302 å“åº”ï¼Œè¿åŒä¸€ä¸ªå¸¦æœ‰æ–°æ–‡æ¡£ URL çš„ <em>Location</em> å¤´ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>public void sendError(int code, String message)</strong> è¯¥æ–¹æ³•å‘é€ä¸€ä¸ªçŠ¶æ€ç ï¼ˆé€šå¸¸ä¸º 404ï¼‰ï¼Œè¿åŒä¸€ä¸ªåœ¨ HTML æ–‡æ¡£å†…éƒ¨è‡ªåŠ¨æ ¼å¼åŒ–å¹¶å‘é€åˆ°å®¢æˆ·ç«¯çš„çŸ­æ¶ˆæ¯ã€‚</td></tr></tbody></table><h3 id="ğŸHTTP-çŠ¶æ€ç å®ä¾‹"><a href="#ğŸHTTP-çŠ¶æ€ç å®ä¾‹" class="headerlink" title="ğŸHTTP çŠ¶æ€ç å®ä¾‹"></a>ğŸHTTP çŠ¶æ€ç å®ä¾‹</h3><p>ä¸‹é¢çš„ä¾‹å­æŠŠ 407 é”™è¯¯ä»£ç å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¼šæ˜¾ç¤º â€œNeed authentication!!!â€ æ¶ˆæ¯ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/showError"</span>)</span><br><span class="line"><span class="comment">// æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">showError</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è®¾ç½®é”™è¯¯ä»£ç å’ŒåŸå› </span></span><br><span class="line">      response.sendError(<span class="number">407</span>, <span class="string">"Need authentication!!!"</span> );</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                     HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">     doGet(request, response);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨ï¼Œè°ƒç”¨ä¸Šé¢çš„ Servlet å°†æ˜¾ç¤ºä»¥ä¸‹ç»“æœï¼š</p><p><a href="https://imgchr.com/i/wPro0f" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/03/wPro0f.png" alt="wPro0f.png"></a></p><hr><h2 id="ğŸŒ¸Servlet-ç¼–å†™è¿‡æ»¤å™¨"><a href="#ğŸŒ¸Servlet-ç¼–å†™è¿‡æ»¤å™¨" class="headerlink" title="ğŸŒ¸Servlet ç¼–å†™è¿‡æ»¤å™¨"></a>ğŸŒ¸Servlet ç¼–å†™è¿‡æ»¤å™¨</h2><p>Servlet è¿‡æ»¤å™¨å¯ä»¥åŠ¨æ€åœ°æ‹¦æˆªè¯·æ±‚å’Œå“åº”ï¼Œä»¥å˜æ¢æˆ–ä½¿ç”¨åŒ…å«åœ¨è¯·æ±‚æˆ–å“åº”ä¸­çš„ä¿¡æ¯ã€‚</p><p>å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ª Servlet è¿‡æ»¤å™¨é™„åŠ åˆ°ä¸€ä¸ª Servlet æˆ–ä¸€ç»„ Servletã€‚Servlet è¿‡æ»¤å™¨ä¹Ÿå¯ä»¥é™„åŠ åˆ° JavaServer Pages (JSP) æ–‡ä»¶å’Œ HTML é¡µé¢ã€‚è°ƒç”¨ Servlet å‰è°ƒç”¨æ‰€æœ‰é™„åŠ çš„ Servlet è¿‡æ»¤å™¨ã€‚</p><p>Servlet è¿‡æ»¤å™¨æ˜¯å¯ç”¨äº Servlet ç¼–ç¨‹çš„ Java ç±»ï¼Œå¯ä»¥å®ç°ä»¥ä¸‹ç›®çš„ï¼š</p><ul><li>åœ¨å®¢æˆ·ç«¯çš„è¯·æ±‚è®¿é—®åç«¯èµ„æºä¹‹å‰ï¼Œæ‹¦æˆªè¿™äº›è¯·æ±‚ã€‚</li><li>åœ¨æœåŠ¡å™¨çš„å“åº”å‘é€å›å®¢æˆ·ç«¯ä¹‹å‰ï¼Œå¤„ç†è¿™äº›å“åº”ã€‚</li></ul><p>æ ¹æ®è§„èŒƒå»ºè®®çš„å„ç§ç±»å‹çš„è¿‡æ»¤å™¨ï¼š</p><ul><li>èº«ä»½éªŒè¯è¿‡æ»¤å™¨ï¼ˆAuthentication Filtersï¼‰ã€‚</li><li>æ•°æ®å‹ç¼©è¿‡æ»¤å™¨ï¼ˆData compression Filtersï¼‰ã€‚</li><li>åŠ å¯†è¿‡æ»¤å™¨ï¼ˆEncryption Filtersï¼‰ã€‚</li><li>è§¦å‘èµ„æºè®¿é—®äº‹ä»¶è¿‡æ»¤å™¨ã€‚</li><li>å›¾åƒè½¬æ¢è¿‡æ»¤å™¨ï¼ˆImage Conversion Filtersï¼‰ã€‚</li><li>æ—¥å¿—è®°å½•å’Œå®¡æ ¸è¿‡æ»¤å™¨ï¼ˆLogging and Auditing Filtersï¼‰ã€‚</li><li>MIME-TYPE é“¾è¿‡æ»¤å™¨ï¼ˆMIME-TYPE Chain Filtersï¼‰ã€‚</li><li>æ ‡è®°åŒ–è¿‡æ»¤å™¨ï¼ˆTokenizing Filtersï¼‰ã€‚</li><li>XSL/T è¿‡æ»¤å™¨ï¼ˆXSL/T Filtersï¼‰ï¼Œè½¬æ¢ XML å†…å®¹ã€‚</li></ul><p>è¿‡æ»¤å™¨é€šè¿‡ Web éƒ¨ç½²æè¿°ç¬¦ï¼ˆweb.xmlï¼‰ä¸­çš„ XML æ ‡ç­¾æ¥å£°æ˜ï¼Œç„¶åæ˜ å°„åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºçš„éƒ¨ç½²æè¿°ç¬¦ä¸­çš„ Servlet åç§°æˆ– URL æ¨¡å¼ã€‚</p><p>å½“ Web å®¹å™¨å¯åŠ¨ Web åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šä¸ºæ‚¨åœ¨éƒ¨ç½²æè¿°ç¬¦ä¸­å£°æ˜çš„æ¯ä¸€ä¸ªè¿‡æ»¤å™¨åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚</p><p>Filterçš„æ‰§è¡Œé¡ºåºä¸åœ¨web.xmlé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®é¡ºåºä¸€è‡´ï¼Œä¸€èˆ¬æŠŠFilteré…ç½®åœ¨æ‰€æœ‰çš„Servletä¹‹å‰ã€‚</p><h3 id="ğŸServlet-è¿‡æ»¤å™¨æ–¹æ³•"><a href="#ğŸServlet-è¿‡æ»¤å™¨æ–¹æ³•" class="headerlink" title="ğŸServlet è¿‡æ»¤å™¨æ–¹æ³•"></a>ğŸServlet è¿‡æ»¤å™¨æ–¹æ³•</h3><p>è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªå®ç°äº† javax.servlet.Filter æ¥å£çš„ Java ç±»ã€‚javax.servlet.Filter æ¥å£å®šä¹‰äº†ä¸‰ä¸ªæ–¹æ³•ï¼š</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>public void doFilter (ServletRequest, ServletResponse, FilterChain)</strong> è¯¥æ–¹æ³•å®Œæˆå®é™…çš„è¿‡æ»¤æ“ä½œï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚æ–¹æ³•ä¸è¿‡æ»¤å™¨è®¾ç½®åŒ¹é…çš„URLæ—¶ï¼ŒServletå®¹å™¨å°†å…ˆè°ƒç”¨è¿‡æ»¤å™¨çš„doFilteræ–¹æ³•ã€‚FilterChainç”¨æˆ·è®¿é—®åç»­è¿‡æ»¤å™¨ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>public void init(FilterConfig filterConfig)</strong> web åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œweb æœåŠ¡å™¨å°†åˆ›å»ºFilter çš„å®ä¾‹å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å…¶initæ–¹æ³•ï¼Œè¯»å–web.xmlé…ç½®ï¼Œå®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–åŠŸèƒ½ï¼Œä»è€Œä¸ºåç»­çš„ç”¨æˆ·è¯·æ±‚ä½œå¥½æ‹¦æˆªçš„å‡†å¤‡å·¥ä½œï¼ˆfilterå¯¹è±¡åªä¼šåˆ›å»ºä¸€æ¬¡ï¼Œinitæ–¹æ³•ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚å¼€å‘äººå‘˜é€šè¿‡initæ–¹æ³•çš„å‚æ•°ï¼Œå¯è·å¾—ä»£è¡¨å½“å‰filteré…ç½®ä¿¡æ¯çš„FilterConfigå¯¹è±¡ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>public void destroy()</strong> Servletå®¹å™¨åœ¨é”€æ¯è¿‡æ»¤å™¨å®ä¾‹å‰è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­é‡Šæ”¾Servletè¿‡æ»¤å™¨å ç”¨çš„èµ„æºã€‚</td></tr></tbody></table><h3 id="ğŸFilterConfig-ä½¿ç”¨"><a href="#ğŸFilterConfig-ä½¿ç”¨" class="headerlink" title="ğŸFilterConfig ä½¿ç”¨"></a>ğŸFilterConfig ä½¿ç”¨</h3><p>Filter çš„ init æ–¹æ³•ä¸­æä¾›äº†ä¸€ä¸ª FilterConfig å¯¹è±¡ã€‚</p><p>å¦‚ web.xml æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;LogFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-<span class="class"><span class="keyword">class</span>&gt;<span class="title">com</span>.<span class="title">runoob</span>.<span class="title">test</span>.<span class="title">LogFilter</span>&lt;/<span class="title">filter</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">init</span>-<span class="title">param</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">param</span>-<span class="title">name</span>&gt;<span class="title">Site</span>&lt;/<span class="title">param</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">param</span>-<span class="title">value</span>&gt;äº‘æ¾ˆ&lt;/<span class="title">param</span>-<span class="title">value</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">init</span>-<span class="title">param</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">filter</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>åœ¨ init æ–¹æ³•ä½¿ç”¨ FilterConfig å¯¹è±¡è·å–å‚æ•°ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">    <span class="comment">// è·å–åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">    String site = config.getInitParameter(<span class="string">"Site"</span>); </span><br><span class="line">    <span class="comment">// è¾“å‡ºåˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">    System.out.println(<span class="string">"ç½‘ç«™åç§°: "</span> + site); </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸServlet-è¿‡æ»¤å™¨å®ä¾‹"><a href="#ğŸServlet-è¿‡æ»¤å™¨å®ä¾‹" class="headerlink" title="ğŸServlet è¿‡æ»¤å™¨å®ä¾‹"></a>ğŸServlet è¿‡æ»¤å™¨å®ä¾‹</h3><p>ä»¥ä¸‹æ˜¯ Servlet è¿‡æ»¤å™¨çš„å®ä¾‹ï¼Œå°†è¾“å‡ºç½‘ç«™åç§°å’Œåœ°å€ã€‚æœ¬å®ä¾‹è®©æ‚¨å¯¹ Servlet è¿‡æ»¤å™¨æœ‰åŸºæœ¬çš„äº†è§£ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ¦‚å¿µç¼–å†™æ›´å¤æ‚çš„è¿‡æ»¤å™¨åº”ç”¨ç¨‹åºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">        <span class="comment">// è·å–åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">        String site = config.getInitParameter(<span class="string">"Site"</span>); </span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾“å‡ºåˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">        System.out.println(<span class="string">"ç½‘ç«™åç§°: "</span> + site); </span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> java.io.IOException, ServletException </span>{</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾“å‡ºç«™ç‚¹åç§°</span></span><br><span class="line">        System.out.println(<span class="string">"ç«™ç‚¹ç½‘å€ï¼šhttp://liudufu.github.io"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŠŠè¯·æ±‚ä¼ å›è¿‡æ»¤é“¾</span></span><br><span class="line">        chain.doFilter(request,response);</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">( )</span></span>{</span><br><span class="line">        <span class="comment">/* åœ¨ Filter å®ä¾‹è¢« Web å®¹å™¨ä»æœåŠ¡ç§»é™¤ä¹‹å‰è°ƒç”¨ */</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™è¾¹ä½¿ç”¨å‰æ–‡æåˆ°çš„ DisplayHeader.java ä¸ºä¾‹å­ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/DisplayHeader"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DisplayHeader</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"HTTP Header è¯·æ±‚å®ä¾‹ - äº‘æ¾ˆå®ä¾‹"</span>;</span><br><span class="line">        String docType =</span><br><span class="line">            <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">            out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;meta charset=\"utf-8\"&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;table width=\"100%\" border=\"1\" align=\"center\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;tr bgcolor=\"#949494\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;th&gt;Header åç§°&lt;/th&gt;&lt;th&gt;Header å€¼&lt;/th&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;/tr&gt;\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"rawtypes"</span>)</span><br><span class="line">Enumeration headerNames = request.getHeaderNames();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(headerNames.hasMoreElements()) {</span><br><span class="line">            String paramName = (String)headerNames.nextElement();</span><br><span class="line">            out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">            String paramValue = request.getHeader(paramName);</span><br><span class="line">            out.println(<span class="string">"&lt;td&gt; "</span> + paramValue + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span>);</span><br><span class="line">        }</span><br><span class="line">        out.println(<span class="string">"&lt;/table&gt;\n&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸWeb-xml-ä¸­çš„-Servlet-è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet-Filter-Mappingï¼‰"><a href="#ğŸWeb-xml-ä¸­çš„-Servlet-è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet-Filter-Mappingï¼‰" class="headerlink" title="ğŸWeb.xml ä¸­çš„ Servlet è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet Filter Mappingï¼‰"></a>ğŸWeb.xml ä¸­çš„ Servlet è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet Filter Mappingï¼‰</h3><p>å®šä¹‰è¿‡æ»¤å™¨ï¼Œç„¶åæ˜ å°„åˆ°ä¸€ä¸ª URL æˆ– Servletï¼Œè¿™ä¸å®šä¹‰ Servletï¼Œç„¶åæ˜ å°„åˆ°ä¸€ä¸ª URL æ¨¡å¼æ–¹å¼å¤§è‡´ç›¸åŒã€‚åœ¨éƒ¨ç½²æè¿°ç¬¦æ–‡ä»¶ <strong>web.xml</strong> ä¸­ä¸º filter æ ‡ç­¾åˆ›å»ºä¸‹é¢çš„æ¡ç›®ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.runoob.test.LogFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>Site<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>äº‘æ¾ˆ<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayHeader<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">  <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.DisplayHeader<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayHeader<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">  <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/DisplayHeader<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°è¿‡æ»¤å™¨é€‚ç”¨äºæ‰€æœ‰çš„ Servletï¼Œå› ä¸ºæˆ‘ä»¬åœ¨é…ç½®ä¸­æŒ‡å®š <strong>/*</strong> ã€‚å¦‚æœæ‚¨åªæƒ³åœ¨å°‘æ•°çš„ Servlet ä¸Šåº”ç”¨è¿‡æ»¤å™¨ï¼Œæ‚¨å¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„ Servlet è·¯å¾„ã€‚</p><p>ç°åœ¨è¯•ç€ä»¥å¸¸ç”¨çš„æ–¹å¼è°ƒç”¨ä»»ä½• Servletï¼Œæ‚¨å°†ä¼šçœ‹åˆ°åœ¨ Web æœåŠ¡å™¨ä¸­ç”Ÿæˆçš„æ—¥å¿—ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ Log4J è®°å½•å™¨æ¥æŠŠä¸Šé¢çš„æ—¥å¿—è®°å½•åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è®¿é—®è¿™ä¸ªå®ä¾‹åœ°å€ <strong><a href="http://localhost:8080/TomcatTest/DisplayHeader" target="_blank" rel="noopener">http://localhost:8080/TomcatTest/DisplayHeader</a></strong>, ç„¶ååœ¨æ§åˆ¶å°çœ‹ä¸‹è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><a href="https://imgchr.com/i/0UGZTg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/06/0UGZTg.png" alt="0UGZTg.png"></a></p><h3 id="ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨"><a href="#ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨" class="headerlink" title="ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨"></a>ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨</h3><p>Web åº”ç”¨ç¨‹åºå¯ä»¥æ ¹æ®ç‰¹å®šçš„ç›®çš„å®šä¹‰è‹¥å¹²ä¸ªä¸åŒçš„è¿‡æ»¤å™¨ã€‚å‡è®¾æ‚¨å®šä¹‰äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ <em>AuthenFilter</em> å’Œ <em>LogFilter</em>ã€‚æ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹æ‰€è¿°çš„ä¸åŒçš„æ˜ å°„ï¼Œå…¶ä½™çš„å¤„ç†ä¸ä¸Šè¿°æ‰€è®²è§£çš„å¤§è‡´ç›¸åŒï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.runoob.test.LogFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>test-param<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>Initialization Paramter<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AuthenFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.runoob.test.AuthenFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>test-param<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>Initialization Paramter<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AuthenFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº"><a href="#ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº" class="headerlink" title="ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº"></a>ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº</h3><p>web.xml ä¸­çš„ filter-mapping å…ƒç´ çš„é¡ºåºå†³å®šäº† Web å®¹å™¨åº”ç”¨è¿‡æ»¤å™¨åˆ° Servlet çš„é¡ºåºã€‚è‹¥è¦åè½¬è¿‡æ»¤å™¨çš„é¡ºåºï¼Œæ‚¨åªéœ€è¦åœ¨ web.xml æ–‡ä»¶ä¸­åè½¬ filter-mapping å…ƒç´ å³å¯ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸Šé¢çš„å®ä¾‹å°†å…ˆåº”ç”¨ LogFilterï¼Œç„¶åå†åº”ç”¨ AuthenFilterï¼Œä½†æ˜¯ä¸‹é¢çš„å®ä¾‹å°†é¢ å€’è¿™ä¸ªé¡ºåºï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AuthenFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><hr><h3 id="ğŸweb-xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜"><a href="#ğŸweb-xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜" class="headerlink" title="ğŸweb.xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜"></a>ğŸweb.xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜</h3><ul><li><code>&lt;filter&gt;</code>æŒ‡å®šä¸€ä¸ªè¿‡æ»¤å™¨ã€‚<ul><li><code>&lt;filter-name&gt;</code>ç”¨äºä¸ºè¿‡æ»¤å™¨æŒ‡å®šä¸€ä¸ªåå­—ï¼Œè¯¥å…ƒç´ çš„å†…å®¹ä¸èƒ½ä¸ºç©ºã€‚</li><li><code>&lt;filter-class&gt;</code>å…ƒç´ ç”¨äºæŒ‡å®šè¿‡æ»¤å™¨çš„å®Œæ•´çš„é™å®šç±»åã€‚</li><li><code>&lt;init-param&gt;</code>å…ƒç´ ç”¨äºä¸ºè¿‡æ»¤å™¨æŒ‡å®šåˆå§‹åŒ–å‚æ•°ï¼Œå®ƒçš„å­å…ƒç´ <code>&lt;param-name&gt;</code>æŒ‡å®šå‚æ•°çš„åå­—ï¼Œ<code>&lt;param-value&gt;</code>æŒ‡å®šå‚æ•°çš„å€¼ã€‚</li><li>åœ¨è¿‡æ»¤å™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>FilterConfig</code>æ¥å£å¯¹è±¡æ¥è®¿é—®åˆå§‹åŒ–å‚æ•°ã€‚</li></ul></li><li><code>&lt;filter-mapping&gt;</code>å…ƒç´ ç”¨äºè®¾ç½®ä¸€ä¸ª Filter æ‰€è´Ÿè´£æ‹¦æˆªçš„èµ„æºã€‚ä¸€ä¸ªFilteræ‹¦æˆªçš„èµ„æºå¯é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æŒ‡å®šï¼šServlet åç§°å’Œèµ„æºè®¿é—®çš„è¯·æ±‚è·¯å¾„<ul><li><code>&lt;filter-name&gt;</code>å­å…ƒç´ ç”¨äºè®¾ç½®filterçš„æ³¨å†Œåç§°ã€‚è¯¥å€¼å¿…é¡»æ˜¯åœ¨<code>&lt;filter&gt;</code>å…ƒç´ ä¸­å£°æ˜è¿‡çš„è¿‡æ»¤å™¨çš„åå­—</li><li><code>&lt;url-pattern&gt;</code>è®¾ç½® filter æ‰€æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„(è¿‡æ»¤å™¨å…³è”çš„URLæ ·å¼)</li></ul></li><li><code>&lt;servlet-name&gt;</code>æŒ‡å®šè¿‡æ»¤å™¨æ‰€æ‹¦æˆªçš„Servletåç§°ã€‚</li><li><code>&lt;dispatcher&gt;</code>æŒ‡å®šè¿‡æ»¤å™¨æ‰€æ‹¦æˆªçš„èµ„æºè¢« Servlet å®¹å™¨è°ƒç”¨çš„æ–¹å¼ï¼Œå¯ä»¥æ˜¯<code>REQUEST</code>,<code>INCLUDE</code>,<code>FORWARD</code>å’Œ<code>ERROR</code>ä¹‹ä¸€ï¼Œé»˜è®¤<code>REQUEST</code>ã€‚ç”¨æˆ·å¯ä»¥è®¾ç½®å¤šä¸ª<code>&lt;dispatcher&gt;</code>å­å…ƒç´ ç”¨æ¥æŒ‡å®š Filter å¯¹èµ„æºçš„å¤šç§è°ƒç”¨æ–¹å¼è¿›è¡Œæ‹¦æˆªã€‚</li><li><code>&lt;dispatcher&gt;</code>å­å…ƒç´ å¯ä»¥è®¾ç½®çš„å€¼åŠå…¶æ„ä¹‰<ul><li><code>REQUEST</code>ï¼šå½“ç”¨æˆ·ç›´æ¥è®¿é—®é¡µé¢æ—¶ï¼ŒWebå®¹å™¨å°†ä¼šè°ƒç”¨è¿‡æ»¤å™¨ã€‚å¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡<code>RequestDispatcher</code>çš„include()æˆ–forward()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°±ä¸ä¼šè¢«è°ƒç”¨ã€‚</li><li><code>INCLUDE</code>ï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡RequestDispatcherçš„include()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥è¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚</li><li><code>FORWARD</code>ï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡RequestDispatcherçš„forward()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¯¥è¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚</li><li><code>ERROR</code>ï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡å£°æ˜å¼å¼‚å¸¸å¤„ç†æœºåˆ¶è°ƒç”¨æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚</li></ul></li></ul><h2 id="ğŸŒ¸Servlet-å¼‚å¸¸å¤„ç†"><a href="#ğŸŒ¸Servlet-å¼‚å¸¸å¤„ç†" class="headerlink" title="ğŸŒ¸Servlet å¼‚å¸¸å¤„ç†"></a>ğŸŒ¸Servlet å¼‚å¸¸å¤„ç†</h2><p>å½“ä¸€ä¸ª Servlet æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸æ—¶ï¼ŒWeb å®¹å™¨åœ¨ä½¿ç”¨äº† exception-type å…ƒç´ çš„ <strong>web.xml</strong> ä¸­æœç´¢ä¸æŠ›å‡ºå¼‚å¸¸ç±»å‹ç›¸åŒ¹é…çš„é…ç½®ã€‚</p><p>æ‚¨å¿…é¡»åœ¨ web.xml ä¸­ä½¿ç”¨ <strong>error-page</strong> å…ƒç´ æ¥æŒ‡å®šå¯¹ç‰¹å®š<strong>å¼‚å¸¸</strong> æˆ– HTTP <strong>çŠ¶æ€ç </strong> ä½œå‡ºç›¸åº”çš„ Servlet è°ƒç”¨ã€‚</p><h3 id="ğŸweb-xml-é…ç½®"><a href="#ğŸweb-xml-é…ç½®" class="headerlink" title="ğŸweb.xml é…ç½®"></a>ğŸweb.xml é…ç½®</h3><p>å‡è®¾ï¼Œæœ‰ä¸€ä¸ª <em>ErrorHandler</em> çš„ Servlet åœ¨ä»»ä½•å·²å®šä¹‰çš„å¼‚å¸¸æˆ–é”™è¯¯å‡ºç°æ—¶è¢«è°ƒç”¨ã€‚ä»¥ä¸‹å°†æ˜¯åœ¨ web.xml ä¸­åˆ›å»ºçš„é¡¹ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- servlet å®šä¹‰ --&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;ErrorHandler&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-<span class="class"><span class="keyword">class</span>&gt;<span class="title">ErrorHandler</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class">&lt;!-- <span class="title">servlet</span> æ˜ å°„ --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">ErrorHandler</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;!-- <span class="title">error</span>-<span class="title">code</span> ç›¸å…³çš„é”™è¯¯é¡µé¢ --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">error</span>-<span class="title">code</span>&gt;404&lt;/<span class="title">error</span>-<span class="title">code</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">location</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">location</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">error</span>-<span class="title">code</span>&gt;403&lt;/<span class="title">error</span>-<span class="title">code</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">location</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">location</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;!-- <span class="title">exception</span>-<span class="title">type</span> ç›¸å…³çš„é”™è¯¯é¡µé¢ --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">exception</span>-<span class="title">type</span>&gt;</span></span><br><span class="line"><span class="class">          <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">ServletException</span></span></span><br><span class="line"><span class="class">    &lt;/<span class="title">exception</span>-<span class="title">type</span> &gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">location</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">location</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">exception</span>-<span class="title">type</span>&gt;<span class="title">java</span>.<span class="title">io</span>.<span class="title">IOException</span>&lt;/<span class="title">exception</span>-<span class="title">type</span> &gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">location</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">location</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ‚¨æƒ³å¯¹æ‰€æœ‰çš„å¼‚å¸¸æœ‰ä¸€ä¸ªé€šç”¨çš„é”™è¯¯å¤„ç†ç¨‹åºï¼Œé‚£ä¹ˆåº”è¯¥å®šä¹‰ä¸‹é¢çš„ error-pageï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªå¼‚å¸¸å®šä¹‰å•ç‹¬çš„ error-page å…ƒç´ ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span>java.lang.Throwable<span class="tag">&lt;/<span class="name">exception-type</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸‹æ˜¯å…³äºä¸Šé¢çš„ web.xml å¼‚å¸¸å¤„ç†è¦æ³¨æ„çš„ç‚¹ï¼š</p><ul><li>Servlet ErrorHandler ä¸å…¶ä»–çš„ Servlet çš„å®šä¹‰æ–¹å¼ä¸€æ ·ï¼Œä¸”åœ¨ web.xml ä¸­è¿›è¡Œé…ç½®ã€‚</li><li>å¦‚æœæœ‰é”™è¯¯çŠ¶æ€ä»£ç å‡ºç°ï¼Œä¸ç®¡ä¸º 404ï¼ˆNot Found æœªæ‰¾åˆ°ï¼‰æˆ– 403ï¼ˆForbidden ç¦æ­¢ï¼‰ï¼Œåˆ™ä¼šè°ƒç”¨ ErrorHandler çš„ Servletã€‚</li><li>å¦‚æœ Web åº”ç”¨ç¨‹åºæŠ›å‡º <em>ServletException</em> æˆ– <em>IOException</em>ï¼Œé‚£ä¹ˆ Web å®¹å™¨ä¼šè°ƒç”¨ ErrorHandler çš„ Servletã€‚</li><li>æ‚¨å¯ä»¥å®šä¹‰ä¸åŒçš„é”™è¯¯å¤„ç†ç¨‹åºæ¥å¤„ç†ä¸åŒç±»å‹çš„é”™è¯¯æˆ–å¼‚å¸¸ã€‚ä¸Šé¢çš„å®ä¾‹æ˜¯éå¸¸é€šç”¨çš„ï¼Œå¸Œæœ›æ‚¨èƒ½é€šè¿‡å®ä¾‹ç†è§£åŸºæœ¬çš„æ¦‚å¿µã€‚</li></ul><h3 id="ğŸè¯·æ±‚å±æ€§-é”™è¯¯-å¼‚å¸¸"><a href="#ğŸè¯·æ±‚å±æ€§-é”™è¯¯-å¼‚å¸¸" class="headerlink" title="ğŸè¯·æ±‚å±æ€§ - é”™è¯¯/å¼‚å¸¸"></a>ğŸè¯·æ±‚å±æ€§ - é”™è¯¯/å¼‚å¸¸</h3><p>ä»¥ä¸‹æ˜¯é”™è¯¯å¤„ç†çš„ Servlet å¯ä»¥è®¿é—®çš„è¯·æ±‚å±æ€§åˆ—è¡¨ï¼Œç”¨æ¥åˆ†æé”™è¯¯/å¼‚å¸¸çš„æ€§è´¨ã€‚</p><table><thead><tr><th align="left">åºå·</th><th align="left">å±æ€§ &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>javax.servlet.error.status_code</strong> è¯¥å±æ€§ç»™å‡ºçŠ¶æ€ç ï¼ŒçŠ¶æ€ç å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.Integer æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>javax.servlet.error.exception_type</strong> è¯¥å±æ€§ç»™å‡ºå¼‚å¸¸ç±»å‹çš„ä¿¡æ¯ï¼Œå¼‚å¸¸ç±»å‹å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.Class æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>javax.servlet.error.message</strong> è¯¥å±æ€§ç»™å‡ºç¡®åˆ‡é”™è¯¯æ¶ˆæ¯çš„ä¿¡æ¯ï¼Œä¿¡æ¯å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.String æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>javax.servlet.error.request_uri</strong> è¯¥å±æ€§ç»™å‡ºæœ‰å…³ URL è°ƒç”¨ Servlet çš„ä¿¡æ¯ï¼Œä¿¡æ¯å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.String æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>javax.servlet.error.exception</strong> è¯¥å±æ€§ç»™å‡ºå¼‚å¸¸äº§ç”Ÿçš„ä¿¡æ¯ï¼Œä¿¡æ¯å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.Throwable æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>javax.servlet.error.servlet_name</strong> è¯¥å±æ€§ç»™å‡º Servlet çš„åç§°ï¼Œåç§°å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.String æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr></tbody></table><h3 id="ğŸServlet-é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹"><a href="#ğŸServlet-é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹" class="headerlink" title="ğŸServlet é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹"></a>ğŸServlet é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹</h3><p>ä»¥ä¸‹æ˜¯ Servlet å®ä¾‹ï¼Œå°†åº”å¯¹ä»»ä½•æ‚¨æ‰€å®šä¹‰çš„é”™è¯¯æˆ–å¼‚å¸¸å‘ç”Ÿæ—¶çš„é”™è¯¯å¤„ç†ç¨‹åºã€‚</p><p>æœ¬å®ä¾‹è®©æ‚¨å¯¹ Servlet ä¸­çš„å¼‚å¸¸å¤„ç†æœ‰åŸºæœ¬çš„äº†è§£ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ¦‚å¿µç¼–å†™æ›´å¤æ‚çš„å¼‚å¸¸å¤„ç†åº”ç”¨ç¨‹åºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="comment">//import java.util.*;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorHandler</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      Throwable throwable = (Throwable)</span><br><span class="line">      request.getAttribute(<span class="string">"javax.servlet.error.exception"</span>);</span><br><span class="line">      Integer statusCode = (Integer)</span><br><span class="line">      request.getAttribute(<span class="string">"javax.servlet.error.status_code"</span>);</span><br><span class="line">      String servletName = (String)</span><br><span class="line">      request.getAttribute(<span class="string">"javax.servlet.error.servlet_name"</span>);</span><br><span class="line">      <span class="keyword">if</span> (servletName == <span class="keyword">null</span>){</span><br><span class="line">          servletName = <span class="string">"Unknown"</span>;</span><br><span class="line">      }</span><br><span class="line">      String requestUri = (String)</span><br><span class="line">      request.getAttribute(<span class="string">"javax.servlet.error.request_uri"</span>);</span><br><span class="line">      <span class="keyword">if</span> (requestUri == <span class="keyword">null</span>){</span><br><span class="line">          requestUri = <span class="string">"Unknown"</span>;</span><br><span class="line">      }</span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">  </span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line">      String title = <span class="string">"äº‘æ¾ˆError/Exception ä¿¡æ¯"</span>;</span><br><span class="line">     </span><br><span class="line">      String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">          <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">           <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">           <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span>);</span><br><span class="line">         out.println(<span class="string">"&lt;h1&gt;äº‘æ¾ˆå¼‚å¸¸ä¿¡æ¯å®ä¾‹æ¼”ç¤º&lt;/h1&gt;"</span>);</span><br><span class="line">         <span class="keyword">if</span> (throwable == <span class="keyword">null</span> &amp;&amp; statusCode == <span class="keyword">null</span>){</span><br><span class="line">            out.println(<span class="string">"&lt;h2&gt;é”™è¯¯ä¿¡æ¯ä¸¢å¤±&lt;/h2&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"è¯·è¿”å› &lt;a href=\""</span> + </span><br><span class="line">          response.encodeURL(<span class="string">"http://localhost:8080/"</span>) + </span><br><span class="line">              <span class="string">"\"&gt;ä¸»é¡µ&lt;/a&gt;ã€‚"</span>);</span><br><span class="line">         }<span class="keyword">else</span> <span class="keyword">if</span> (statusCode != <span class="keyword">null</span>) {</span><br><span class="line">            out.println(<span class="string">"é”™è¯¯ä»£ç  : "</span> + statusCode);</span><br><span class="line">      }<span class="keyword">else</span>{</span><br><span class="line">             out.println(<span class="string">"&lt;h2&gt;é”™è¯¯ä¿¡æ¯&lt;/h2&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"Servlet Name : "</span> + servletName + </span><br><span class="line">                            <span class="string">"&lt;/br&gt;&lt;/br&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"å¼‚å¸¸ç±»å‹ : "</span> + </span><br><span class="line">                            throwable.getClass( ).getName( ) + </span><br><span class="line">                            <span class="string">"&lt;/br&gt;&lt;/br&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"è¯·æ±‚ URI: "</span> + requestUri + </span><br><span class="line">                            <span class="string">"&lt;br&gt;&lt;br&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"å¼‚å¸¸ä¿¡æ¯: "</span> + </span><br><span class="line">                                throwable.getMessage( ));</span><br><span class="line">         }</span><br><span class="line">         out.println(<span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">         out.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">     <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">      doGet(request, response);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä»¥é€šå¸¸çš„æ–¹å¼ç¼–è¯‘ <strong>ErrorHandler.java</strong>ï¼ŒæŠŠæ‚¨çš„ç±»æ–‡ä»¶æ”¾å…¥<tomcat-installation-directory>/webapps/ROOT/WEB-INF/classes ä¸­ã€‚</tomcat-installation-directory></p><p>è®©æˆ‘ä»¬åœ¨ web.xml æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®æ¥å¤„ç†å¼‚å¸¸ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ErrorHandler<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.ErrorHandler<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- servlet mappings --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ErrorHandler<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/ErrorHandler<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/TomcatTest/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span>java.lang.Throwable<span class="tag">&lt;/<span class="name">exception-type</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨ï¼Œå°è¯•ä½¿ç”¨ä¸€ä¸ªä¼šäº§ç”Ÿå¼‚å¸¸çš„ Servletï¼Œæˆ–è€…è¾“å…¥ä¸€ä¸ªé”™è¯¯çš„ URLï¼Œè¿™å°†è§¦å‘ Web å®¹å™¨è°ƒç”¨ <strong>ErrorHandler</strong> çš„ Servletï¼Œå¹¶æ˜¾ç¤ºé€‚å½“çš„æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨è¾“å…¥äº†ä¸€ä¸ªé”™è¯¯çš„ URLï¼ˆå¦‚ï¼š<a href="http://localhost:8080/TomcatTest/UnKonwPageï¼‰ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¾ç¤ºä¸‹é¢çš„ç»“æœï¼š" target="_blank" rel="noopener">http://localhost:8080/TomcatTest/UnKonwPageï¼‰ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¾ç¤ºä¸‹é¢çš„ç»“æœï¼š</a></p><p><a href="https://imgchr.com/i/0UNCE8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/06/0UNCE8.png" alt="0UNCE8.png"></a></p><hr><h2 id="ğŸŒ¸Servlet-Cookie-å¤„ç†"><a href="#ğŸŒ¸Servlet-Cookie-å¤„ç†" class="headerlink" title="ğŸŒ¸Servlet  Cookie å¤„ç†"></a>ğŸŒ¸Servlet  Cookie å¤„ç†</h2><p>Cookie æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯è®¡ç®—æœºä¸Šçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶ä¿ç•™äº†å„ç§è·Ÿè¸ªä¿¡æ¯ã€‚Java Servlet æ˜¾ç„¶æ”¯æŒ HTTP Cookieã€‚</p><p>è¯†åˆ«è¿”å›ç”¨æˆ·åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ul><li>æœåŠ¡å™¨è„šæœ¬å‘æµè§ˆå™¨å‘é€ä¸€ç»„ Cookieã€‚ä¾‹å¦‚ï¼šå§“åã€å¹´é¾„æˆ–è¯†åˆ«å·ç ç­‰ã€‚</li><li>æµè§ˆå™¨å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šï¼Œä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚</li><li>å½“ä¸‹ä¸€æ¬¡æµè§ˆå™¨å‘ Web æœåŠ¡å™¨å‘é€ä»»ä½•è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šæŠŠè¿™äº› Cookie ä¿¡æ¯å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°†ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥è¯†åˆ«ç”¨æˆ·ã€‚</li></ul><p>æœ¬ç« å°†å‘æ‚¨è®²è§£å¦‚ä½•è®¾ç½®æˆ–é‡ç½® Cookieï¼Œå¦‚ä½•è®¿é—®å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•å°†å®ƒä»¬åˆ é™¤ã€‚</p><p>Servlet Cookie å¤„ç†éœ€è¦å¯¹ä¸­æ–‡è¿›è¡Œç¼–ç ä¸è§£ç ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String   str   =   java.net.URLEncoder.encode(<span class="string">"ä¸­æ–‡"</span>ï¼Œ<span class="string">"UTF-8"</span>);            <span class="comment">//ç¼–ç </span></span><br><span class="line">String   str   =   java.net.URLDecoder.decode(<span class="string">"ç¼–ç åçš„å­—ç¬¦ä¸²"</span>,<span class="string">"UTF-8"</span>);   <span class="comment">// è§£ç </span></span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸCookie-å‰–æ"><a href="#ğŸCookie-å‰–æ" class="headerlink" title="ğŸCookie å‰–æ"></a>ğŸCookie å‰–æ</h3><p>Cookie é€šå¸¸è®¾ç½®åœ¨ HTTP å¤´ä¿¡æ¯ä¸­ï¼ˆè™½ç„¶ JavaScript ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸Šè®¾ç½®ä¸€ä¸ª Cookieï¼‰ã€‚è®¾ç½® Cookie çš„ Servlet ä¼šå‘é€å¦‚ä¸‹çš„å¤´ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Date: Fri, <span class="number">04</span> Feb <span class="number">2000</span> <span class="number">21</span>:<span class="number">03</span>:<span class="number">38</span> GMT</span><br><span class="line">Server: Apache/<span class="number">1.3</span><span class="number">.9</span> (UNIX) PHP/<span class="number">4.0</span>b3</span><br><span class="line">Set-Cookie: name=xyz; expires=Friday, <span class="number">04</span>-Feb-<span class="number">07</span> <span class="number">22</span>:<span class="number">03</span>:<span class="number">38</span> GMT; </span><br><span class="line">                 path=/; domain=runoob.com</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: text/html</span><br></pre></td></tr></tbody></table></figure><p>æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼ŒSet-Cookie å¤´åŒ…å«äº†ä¸€ä¸ªåç§°å€¼å¯¹ã€ä¸€ä¸ª GMT æ—¥æœŸã€ä¸€ä¸ªè·¯å¾„å’Œä¸€ä¸ªåŸŸã€‚åç§°å’Œå€¼ä¼šè¢« URL ç¼–ç ã€‚expires å­—æ®µæ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨ç»™å®šçš„æ—¶é—´å’Œæ—¥æœŸä¹‹åâ€å¿˜è®°â€è¯¥ Cookieã€‚</p><p>å¦‚æœæµè§ˆå™¨è¢«é…ç½®ä¸ºå­˜å‚¨ Cookieï¼Œå®ƒå°†ä¼šä¿ç•™æ­¤ä¿¡æ¯ç›´åˆ°åˆ°æœŸæ—¥æœŸã€‚å¦‚æœç”¨æˆ·çš„æµè§ˆå™¨æŒ‡å‘ä»»ä½•åŒ¹é…è¯¥ Cookie çš„è·¯å¾„å’ŒåŸŸçš„é¡µé¢ï¼Œå®ƒä¼šé‡æ–°å‘é€ Cookie åˆ°æœåŠ¡å™¨ã€‚æµè§ˆå™¨çš„å¤´ä¿¡æ¯å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET / HTTP/<span class="number">1.0</span></span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">User-Agent: Mozilla/<span class="number">4.6</span> (X11; I; Linux <span class="number">2.2</span><span class="number">.6</span><span class="number">-15</span>apmac ppc)</span><br><span class="line">Host: zink.demon.co.uk:<span class="number">1126</span></span><br><span class="line">Accept: image/gif, *<span class="comment">/*</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip</span></span><br><span class="line"><span class="comment">Accept-Language: en</span></span><br><span class="line"><span class="comment">Accept-Charset: iso-8859-1,*,utf-8</span></span><br><span class="line"><span class="comment">Cookie: name=xyz</span></span><br></pre></td></tr></tbody></table></figure><p>Servlet å°±èƒ½å¤Ÿé€šè¿‡è¯·æ±‚æ–¹æ³• <em>request.getCookies()</em> è®¿é—® Cookieï¼Œè¯¥æ–¹æ³•å°†è¿”å›ä¸€ä¸ª <em>Cookie</em> å¯¹è±¡çš„æ•°ç»„ã€‚</p><h3 id="ğŸServlet-Cookie-æ–¹æ³•"><a href="#ğŸServlet-Cookie-æ–¹æ³•" class="headerlink" title="ğŸServlet Cookie æ–¹æ³•"></a>ğŸServlet Cookie æ–¹æ³•</h3><p>ä»¥ä¸‹æ˜¯åœ¨ Servlet ä¸­æ“ä½œ Cookie æ—¶å¯ä½¿ç”¨çš„æœ‰ç”¨çš„æ–¹æ³•åˆ—è¡¨ã€‚</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>public void setDomain(String pattern)</strong> è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ runoob.comã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>public String getDomain()</strong> è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ runoob.comã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>public void setMaxAge(int expiry)</strong> è¯¥æ–¹æ³•è®¾ç½® cookie è¿‡æœŸçš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚å¦‚æœä¸è¿™æ ·è®¾ç½®ï¼Œcookie åªä¼šåœ¨å½“å‰ session ä¼šè¯ä¸­æŒç»­æœ‰æ•ˆã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>public int getMaxAge()</strong> è¯¥æ–¹æ³•è¿”å› cookie çš„æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ-1 è¡¨ç¤º cookie å°†æŒç»­ä¸‹å»ï¼Œç›´åˆ°æµè§ˆå™¨å…³é—­ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>public String getName()</strong> è¯¥æ–¹æ³•è¿”å› cookie çš„åç§°ã€‚åç§°åœ¨åˆ›å»ºåä¸èƒ½æ”¹å˜ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>public void setValue(String newValue)</strong> è¯¥æ–¹æ³•è®¾ç½®ä¸ cookie å…³è”çš„å€¼ã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>public String getValue()</strong> è¯¥æ–¹æ³•è·å–ä¸ cookie å…³è”çš„å€¼ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>public void setPath(String uri)</strong> è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„è·¯å¾„ã€‚å¦‚æœæ‚¨ä¸æŒ‡å®šè·¯å¾„ï¼Œä¸å½“å‰é¡µé¢ç›¸åŒç›®å½•ä¸‹çš„ï¼ˆåŒ…æ‹¬å­ç›®å½•ä¸‹çš„ï¼‰æ‰€æœ‰ URL éƒ½ä¼šè¿”å› cookieã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>public String getPath()</strong> è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„è·¯å¾„ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>public void setSecure(boolean flag)</strong> è¯¥æ–¹æ³•è®¾ç½®å¸ƒå°”å€¼ï¼Œè¡¨ç¤º cookie æ˜¯å¦åº”è¯¥åªåœ¨åŠ å¯†çš„ï¼ˆå³ SSLï¼‰è¿æ¥ä¸Šå‘é€ã€‚</td></tr><tr><td align="left">11</td><td align="left"><strong>public void setComment(String purpose)</strong> è®¾ç½®cookieçš„æ³¨é‡Šã€‚è¯¥æ³¨é‡Šåœ¨æµè§ˆå™¨å‘ç”¨æˆ·å‘ˆç° cookie æ—¶éå¸¸æœ‰ç”¨ã€‚</td></tr><tr><td align="left">12</td><td align="left"><strong>public String getComment()</strong> è·å– cookie çš„æ³¨é‡Šï¼Œå¦‚æœ cookie æ²¡æœ‰æ³¨é‡Šåˆ™è¿”å› nullã€‚</td></tr></tbody></table><h3 id="ğŸé€šè¿‡-Servlet-è®¾ç½®-Cookie"><a href="#ğŸé€šè¿‡-Servlet-è®¾ç½®-Cookie" class="headerlink" title="ğŸé€šè¿‡ Servlet è®¾ç½® Cookie"></a>ğŸé€šè¿‡ Servlet è®¾ç½® Cookie</h3><p>é€šè¿‡ Servlet è®¾ç½® Cookie åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š</p><p><strong>(1) åˆ›å»ºä¸€ä¸ª Cookie å¯¹è±¡ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨å¸¦æœ‰ cookie åç§°å’Œ cookie å€¼çš„ Cookie æ„é€ å‡½æ•°ï¼Œcookie åç§°å’Œ cookie å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"key"</span>,<span class="string">"value"</span>);</span><br></pre></td></tr></tbody></table></figure><p>è¯·è®°ä½ï¼Œæ— è®ºæ˜¯åå­—è¿˜æ˜¯å€¼ï¼Œéƒ½ä¸åº”è¯¥åŒ…å«ç©ºæ ¼æˆ–ä»¥ä¸‹ä»»ä½•å­—ç¬¦ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ ] ( ) = , <span class="string">" / ? @ : ;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>(2) è®¾ç½®æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼š</strong>æ‚¨å¯ä»¥ä½¿ç”¨ setMaxAge æ–¹æ³•æ¥æŒ‡å®š cookie èƒ½å¤Ÿä¿æŒæœ‰æ•ˆçš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚ä¸‹é¢å°†è®¾ç½®ä¸€ä¸ªæœ€é•¿æœ‰æ•ˆæœŸä¸º 24 å°æ—¶çš„ cookieã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);</span><br></pre></td></tr></tbody></table></figure><p><strong>(3) å‘é€ Cookie åˆ° HTTP å“åº”å¤´ï¼š</strong>æ‚¨å¯ä»¥ä½¿ç”¨ <strong>response.addCookie</strong> æ¥æ·»åŠ  HTTP å“åº”å¤´ä¸­çš„ Cookieï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸå®ä¾‹"><a href="#ğŸå®ä¾‹" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><p>è®©æˆ‘ä»¬ä¿®æ”¹æˆ‘ä»¬çš„ <a href="">è¡¨å•æ•°æ®å®ä¾‹</a>ï¼Œä¸ºåå­—å’Œå§“æ°è®¾ç½® Cookieã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class HelloServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/HelloForm"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloForm</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloForm</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// ä¸ºåå­—å’Œå§“æ°åˆ›å»º Cookie      </span></span><br><span class="line">        Cookie name = <span class="keyword">new</span> Cookie(<span class="string">"name"</span>,</span><br><span class="line">                URLEncoder.encode(request.getParameter(<span class="string">"name"</span>), <span class="string">"UTF-8"</span>)); <span class="comment">// ä¸­æ–‡è½¬ç </span></span><br><span class="line">        Cookie url = <span class="keyword">new</span> Cookie(<span class="string">"url"</span>,</span><br><span class="line">                      request.getParameter(<span class="string">"url"</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸ºä¸¤ä¸ª Cookie è®¾ç½®è¿‡æœŸæ—¥æœŸä¸º 24 å°æ—¶å</span></span><br><span class="line">        name.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>); </span><br><span class="line">        url.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>); </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åœ¨å“åº”å¤´ä¸­æ·»åŠ ä¸¤ä¸ª Cookie</span></span><br><span class="line">        response.addCookie( name );</span><br><span class="line">        response.addCookie( url );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"è®¾ç½® Cookie å®ä¾‹"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">                <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;ul&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;ç«™ç‚¹åï¼š&lt;/b&gt;ï¼š"</span></span><br><span class="line">                + request.getParameter(<span class="string">"name"</span>) + <span class="string">"\n&lt;/li&gt;"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;ç«™ç‚¹ URLï¼š&lt;/b&gt;ï¼š"</span></span><br><span class="line">                + request.getParameter(<span class="string">"url"</span>) + <span class="string">"\n&lt;/li&gt;"</span> +</span><br><span class="line">                <span class="string">"&lt;/ul&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç¼–è¯‘ä¸Šé¢çš„ Servlet <strong>HelloForm</strong>ï¼Œå¹¶åœ¨ web.xml æ–‡ä»¶ä¸­åˆ›å»ºé€‚å½“çš„æ¡ç›®:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloForm<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.HelloForm<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloForm<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/HelloForm<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>æœ€åå°è¯•ä¸‹é¢çš„ HTML é¡µé¢æ¥è°ƒç”¨ Servletã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‘æ¾ˆ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/TomcatTest/HelloForm"</span> <span class="attr">method</span>=<span class="string">"GET"</span>&gt;</span></span><br><span class="line">ç«™ç‚¹å ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">ç«™ç‚¹ URLï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"url"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¿å­˜ä¸Šé¢çš„ HTML å†…å®¹åˆ°æ–‡ä»¶ /TomcatTest/test.html ä¸­ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è®¿é—®<a href="http://localhost:8080/TomcatTest/test.htmlï¼Œå¦‚ä¸‹ï¼š" target="_blank" rel="noopener">http://localhost:8080/TomcatTest/test.htmlï¼Œå¦‚ä¸‹ï¼š</a></p><p><img src="https://s1.ax1x.com/2020/10/08/007Dl8.png" alt="007Dl8.png"></p><p><img src="https://s1.ax1x.com/2020/10/08/007WYq.png" alt="007WYq.png"></p><h3 id="ğŸé€šè¿‡-Servlet-è¯»å–-Cookie"><a href="#ğŸé€šè¿‡-Servlet-è¯»å–-Cookie" class="headerlink" title="ğŸé€šè¿‡ Servlet è¯»å– Cookie"></a>ğŸé€šè¿‡ Servlet è¯»å– Cookie</h3><p>è¦è¯»å– Cookieï¼Œæ‚¨éœ€è¦é€šè¿‡è°ƒç”¨ <em>HttpServletRequest</em> çš„ <strong>getCookies( )</strong> æ–¹æ³•åˆ›å»ºä¸€ä¸ª <em>javax.servlet.http.Cookie</em> å¯¹è±¡çš„æ•°ç»„ã€‚ç„¶åå¾ªç¯éå†æ•°ç»„ï¼Œå¹¶ä½¿ç”¨ getName() å’Œ getValue() æ–¹æ³•æ¥è®¿é—®æ¯ä¸ª cookie å’Œå…³è”çš„å€¼ã€‚</p><h4 id="ğŸ‚-å®ä¾‹"><a href="#ğŸ‚-å®ä¾‹" class="headerlink" title="ğŸ‚ å®ä¾‹"></a>ğŸ‚ å®ä¾‹</h4><p>è®©æˆ‘ä»¬è¯»å–ä¸Šé¢çš„å®ä¾‹ä¸­è®¾ç½®çš„ Cookie</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class ReadCookies</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/ReadCookies"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadCookies</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReadCookies</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        Cookie cookie = <span class="keyword">null</span>;</span><br><span class="line">        Cookie[] cookies = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// è·å–ä¸è¯¥åŸŸç›¸å…³çš„ Cookie çš„æ•°ç»„</span></span><br><span class="line">        cookies = request.getCookies();</span><br><span class="line">         </span><br><span class="line">         <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">         response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    </span><br><span class="line">         PrintWriter out = response.getWriter();</span><br><span class="line">         String title = <span class="string">"Delete Cookie Example"</span>;</span><br><span class="line">         String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">         out.println(docType +</span><br><span class="line">                   <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                   <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                   <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> );</span><br><span class="line">          <span class="keyword">if</span>( cookies != <span class="keyword">null</span> ){</span><br><span class="line">            out.println(<span class="string">"&lt;h2&gt;Cookie åç§°å’Œå€¼&lt;/h2&gt;"</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++){</span><br><span class="line">               cookie = cookies[i];</span><br><span class="line">               <span class="keyword">if</span>((cookie.getName( )).compareTo(<span class="string">"name"</span>) == <span class="number">0</span> ){</span><br><span class="line">                    cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">                    response.addCookie(cookie);</span><br><span class="line">                    out.print(<span class="string">"å·²åˆ é™¤çš„ cookieï¼š"</span> + </span><br><span class="line">                                 cookie.getName( ) + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">               }</span><br><span class="line">               out.print(<span class="string">"åç§°ï¼š"</span> + cookie.getName( ) + <span class="string">"ï¼Œ"</span>);</span><br><span class="line">               out.print(<span class="string">"å€¼ï¼š"</span> +  URLDecoder.decode(cookie.getValue(), <span class="string">"utf-8"</span>) +<span class="string">" &lt;br/&gt;"</span>);</span><br><span class="line">            }</span><br><span class="line">         }<span class="keyword">else</span>{</span><br><span class="line">             out.println(</span><br><span class="line">               <span class="string">"&lt;h2 class=\"tutheader\"&gt;No Cookie founds&lt;/h2&gt;"</span>);</span><br><span class="line">         }</span><br><span class="line">         out.println(<span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">         out.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸé€šè¿‡-Servlet-åˆ é™¤-Cookie"><a href="#ğŸé€šè¿‡-Servlet-åˆ é™¤-Cookie" class="headerlink" title="ğŸé€šè¿‡ Servlet åˆ é™¤ Cookie"></a>ğŸé€šè¿‡ Servlet åˆ é™¤ Cookie</h3><p>åˆ é™¤ Cookie æ˜¯éå¸¸ç®€å•çš„ã€‚å¦‚æœæ‚¨æƒ³åˆ é™¤ä¸€ä¸ª cookieï¼Œé‚£ä¹ˆæ‚¨åªéœ€è¦æŒ‰ç…§ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤è¿›è¡Œï¼š</p><ul><li>è¯»å–ä¸€ä¸ªç°æœ‰çš„ cookieï¼Œå¹¶æŠŠå®ƒå­˜å‚¨åœ¨ Cookie å¯¹è±¡ä¸­ã€‚</li><li>ä½¿ç”¨ <strong>setMaxAge()</strong> æ–¹æ³•è®¾ç½® cookie çš„å¹´é¾„ä¸ºé›¶ï¼Œæ¥åˆ é™¤ç°æœ‰çš„ cookieã€‚</li><li>æŠŠè¿™ä¸ª cookie æ·»åŠ åˆ°å“åº”å¤´ã€‚</li></ul><h4 id="ğŸ‚å®ä¾‹"><a href="#ğŸ‚å®ä¾‹" class="headerlink" title="ğŸ‚å®ä¾‹"></a>ğŸ‚å®ä¾‹</h4><p>ä¸‹é¢çš„ä¾‹å­å°†åˆ é™¤ç°æœ‰çš„åä¸º â€œurlâ€ çš„ cookieï¼Œå½“æ‚¨ä¸‹æ¬¡è¿è¡Œ ReadCookies çš„ Servlet æ—¶ï¼Œå®ƒä¼šè¿”å› url ä¸º nullã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class DeleteCookies</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/DeleteCookies"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeleteCookies</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DeleteCookies</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        Cookie cookie = <span class="keyword">null</span>;</span><br><span class="line">        Cookie[] cookies = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// è·å–ä¸è¯¥åŸŸç›¸å…³çš„ Cookie çš„æ•°ç»„</span></span><br><span class="line">        cookies = request.getCookies();</span><br><span class="line">        </span><br><span class="line">            <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">   </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"åˆ é™¤ Cookie å®ä¾‹"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">                  <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                  <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                  <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> );</span><br><span class="line">         <span class="keyword">if</span>( cookies != <span class="keyword">null</span> ){</span><br><span class="line">           out.println(<span class="string">"&lt;h2&gt;Cookie åç§°å’Œå€¼&lt;/h2&gt;"</span>);</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++){</span><br><span class="line">              cookie = cookies[i];</span><br><span class="line">              <span class="keyword">if</span>((cookie.getName( )).compareTo(<span class="string">"url"</span>) == <span class="number">0</span> ){</span><br><span class="line">                   cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">                   response.addCookie(cookie);</span><br><span class="line">                   out.print(<span class="string">"å·²åˆ é™¤çš„ cookieï¼š"</span> + </span><br><span class="line">                                cookie.getName( ) + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">              }</span><br><span class="line">              out.print(<span class="string">"åç§°ï¼š"</span> + cookie.getName( ) + <span class="string">"ï¼Œ"</span>);</span><br><span class="line">              out.print(<span class="string">"å€¼ï¼š"</span> + cookie.getValue( )+<span class="string">" &lt;br/&gt;"</span>);</span><br><span class="line">           }</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            out.println(</span><br><span class="line">              <span class="string">"&lt;h2 class=\"tutheader\"&gt;No Cookie founds&lt;/h2&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line">        out.println(<span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸Servlet-Session-è·Ÿè¸ª"><a href="#ğŸŒ¸Servlet-Session-è·Ÿè¸ª" class="headerlink" title="ğŸŒ¸Servlet Session è·Ÿè¸ª"></a>ğŸŒ¸Servlet Session è·Ÿè¸ª</h2><p>HTTP æ˜¯ä¸€ç§â€æ— çŠ¶æ€â€åè®®ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡å®¢æˆ·ç«¯æ£€ç´¢ç½‘é¡µæ—¶ï¼Œå®¢æˆ·ç«¯æ‰“å¼€ä¸€ä¸ªå•ç‹¬çš„è¿æ¥åˆ° Web æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨ä¸ä¿ç•™ä¹‹å‰å®¢æˆ·ç«¯è¯·æ±‚çš„ä»»ä½•è®°å½•ã€‚</p><p>ä½†æ˜¯ä»ç„¶æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼æ¥ç»´æŒ Web å®¢æˆ·ç«¯å’Œ Web æœåŠ¡å™¨ä¹‹é—´çš„ session ä¼šè¯ï¼š</p><h3 id="ğŸCookies"><a href="#ğŸCookies" class="headerlink" title="ğŸCookies"></a>ğŸCookies</h3><p>ä¸€ä¸ª Web æœåŠ¡å™¨å¯ä»¥åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ session ä¼šè¯ ID ä½œä¸ºæ¯ä¸ª Web å®¢æˆ·ç«¯çš„ cookieï¼Œå¯¹äºå®¢æˆ·ç«¯çš„åç»­è¯·æ±‚å¯ä»¥ä½¿ç”¨æ¥æ”¶åˆ°çš„ cookie æ¥è¯†åˆ«ã€‚</p><p>è¿™å¯èƒ½ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ–¹æ³•ï¼Œå› ä¸ºå¾ˆå¤šæµè§ˆå™¨ä¸æ”¯æŒ cookieï¼Œæ‰€ä»¥æˆ‘ä»¬å»ºè®®ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼æ¥ç»´æŒ session ä¼šè¯ã€‚</p><h3 id="ğŸéšè—çš„è¡¨å•å­—æ®µ"><a href="#ğŸéšè—çš„è¡¨å•å­—æ®µ" class="headerlink" title="ğŸéšè—çš„è¡¨å•å­—æ®µ"></a>ğŸéšè—çš„è¡¨å•å­—æ®µ</h3><h3 id="ğŸServletä¸€ä¸ª-Web-æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„-HTML-è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„-session-ä¼šè¯-IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"><a href="#ğŸServletä¸€ä¸ª-Web-æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„-HTML-è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„-session-ä¼šè¯-IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š" class="headerlink" title="ğŸServletä¸€ä¸ª Web æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„ HTML è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„ session ä¼šè¯ IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"></a>ğŸServletä¸€ä¸ª Web æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„ HTML è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„ session ä¼šè¯ IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"hidden"</span> name=<span class="string">"sessionid"</span> value=<span class="string">"12345"</span>&gt;</span><br></pre></td></tr></tbody></table></figure><p>è¯¥æ¡ç›®æ„å‘³ç€ï¼Œå½“è¡¨å•è¢«æäº¤æ—¶ï¼ŒæŒ‡å®šçš„åç§°å’Œå€¼ä¼šè¢«è‡ªåŠ¨åŒ…å«åœ¨ GET æˆ– POST æ•°æ®ä¸­ã€‚æ¯æ¬¡å½“ Web æµè§ˆå™¨å‘é€å›è¯·æ±‚æ—¶ï¼Œsession_id å€¼å¯ä»¥ç”¨äºä¿æŒä¸åŒçš„ Web æµè§ˆå™¨çš„è·Ÿè¸ªã€‚</p><p>è¿™å¯èƒ½æ˜¯ä¸€ç§ä¿æŒ session ä¼šè¯è·Ÿè¸ªçš„æœ‰æ•ˆæ–¹å¼ï¼Œä½†æ˜¯ç‚¹å‡»å¸¸è§„çš„è¶…æ–‡æœ¬é“¾æ¥ï¼ˆ<a href...="">ï¼‰ä¸ä¼šå¯¼è‡´è¡¨å•æäº¤ï¼Œå› æ­¤éšè—çš„è¡¨å•å­—æ®µä¹Ÿä¸æ”¯æŒå¸¸è§„çš„ session ä¼šè¯è·Ÿè¸ªã€‚</a></p><a href...=""></a><h3 id="ğŸURL-é‡å†™"><a href...=""></a><a href="#ğŸURL-é‡å†™" class="headerlink" title="ğŸURL é‡å†™"></a>ğŸURL é‡å†™</h3><p>æ‚¨å¯ä»¥åœ¨æ¯ä¸ª URL æœ«å°¾è¿½åŠ ä¸€äº›é¢å¤–çš„æ•°æ®æ¥æ ‡è¯† session ä¼šè¯ï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯¥ session ä¼šè¯æ ‡è¯†ç¬¦ä¸å·²å­˜å‚¨çš„æœ‰å…³ session ä¼šè¯çš„æ•°æ®ç›¸å…³è”ã€‚</p><p>ä¾‹å¦‚ï¼Œhttp://w3cschool.cc/file.htm;sessionid=12345ï¼Œsession ä¼šè¯æ ‡è¯†ç¬¦è¢«é™„åŠ ä¸º sessionid=12345ï¼Œæ ‡è¯†ç¬¦å¯è¢« Web æœåŠ¡å™¨è®¿é—®ä»¥è¯†åˆ«å®¢æˆ·ç«¯ã€‚</p><p>URL é‡å†™æ˜¯ä¸€ç§æ›´å¥½çš„ç»´æŒ session ä¼šè¯çš„æ–¹å¼ï¼Œå®ƒåœ¨æµè§ˆå™¨ä¸æ”¯æŒ cookie æ—¶èƒ½å¤Ÿå¾ˆå¥½åœ°å·¥ä½œï¼Œä½†æ˜¯å®ƒçš„ç¼ºç‚¹æ˜¯ä¼šåŠ¨æ€ç”Ÿæˆæ¯ä¸ª URL æ¥ä¸ºé¡µé¢åˆ†é…ä¸€ä¸ª session ä¼šè¯ IDï¼Œå³ä½¿æ˜¯åœ¨å¾ˆç®€å•çš„é™æ€ HTML é¡µé¢ä¸­ä¹Ÿä¼šå¦‚æ­¤ã€‚</p><h3 id="ğŸHttpSession-å¯¹è±¡"><a href="#ğŸHttpSession-å¯¹è±¡" class="headerlink" title="ğŸHttpSession å¯¹è±¡"></a>ğŸHttpSession å¯¹è±¡</h3><p>é™¤äº†ä¸Šè¿°çš„ä¸‰ç§æ–¹å¼ï¼ŒServlet è¿˜æä¾›äº† HttpSession æ¥å£ï¼Œè¯¥æ¥å£æä¾›äº†ä¸€ç§è·¨å¤šä¸ªé¡µé¢è¯·æ±‚æˆ–è®¿é—®ç½‘ç«™æ—¶è¯†åˆ«ç”¨æˆ·ä»¥åŠå­˜å‚¨æœ‰å…³ç”¨æˆ·ä¿¡æ¯çš„æ–¹å¼ã€‚</p><p>Servlet å®¹å™¨ä½¿ç”¨è¿™ä¸ªæ¥å£æ¥åˆ›å»ºä¸€ä¸ª HTTP å®¢æˆ·ç«¯å’Œ HTTP æœåŠ¡å™¨ä¹‹é—´çš„ session ä¼šè¯ã€‚ä¼šè¯æŒç»­ä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´æ®µï¼Œè·¨å¤šä¸ªè¿æ¥æˆ–é¡µé¢è¯·æ±‚ã€‚</p><p>æ‚¨ä¼šé€šè¿‡è°ƒç”¨ HttpServletRequest çš„å…¬å…±æ–¹æ³• <strong>getSession()</strong> æ¥è·å– HttpSession å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = request.getSession();</span><br></pre></td></tr></tbody></table></figure><p>ä½ éœ€è¦åœ¨å‘å®¢æˆ·ç«¯å‘é€ä»»ä½•æ–‡æ¡£å†…å®¹ä¹‹å‰è°ƒç”¨ <em>request.getSession()</em>ã€‚ä¸‹é¢æ€»ç»“äº† HttpSession å¯¹è±¡ä¸­å¯ç”¨çš„å‡ ä¸ªé‡è¦çš„æ–¹æ³•ï¼š</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>public Object getAttribute(String name)</strong> è¯¥æ–¹æ³•è¿”å›åœ¨è¯¥ session ä¼šè¯ä¸­å…·æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œåˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>public Enumeration getAttributeNames()</strong> è¯¥æ–¹æ³•è¿”å› String å¯¹è±¡çš„æšä¸¾ï¼ŒString å¯¹è±¡åŒ…å«æ‰€æœ‰ç»‘å®šåˆ°è¯¥ session ä¼šè¯çš„å¯¹è±¡çš„åç§°ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>public long getCreationTime()</strong> è¯¥æ–¹æ³•è¿”å›è¯¥ session ä¼šè¯è¢«åˆ›å»ºçš„æ—¶é—´ï¼Œè‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>public String getId()</strong> è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«åˆ†é…ç»™è¯¥ session ä¼šè¯çš„å”¯ä¸€æ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>public long getLastAccessedTime()</strong> è¯¥æ–¹æ³•è¿”å›å®¢æˆ·ç«¯æœ€åä¸€æ¬¡å‘é€ä¸è¯¥ session ä¼šè¯ç›¸å…³çš„è¯·æ±‚çš„æ—¶é—´è‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>public int getMaxInactiveInterval()</strong> è¯¥æ–¹æ³•è¿”å› Servlet å®¹å™¨åœ¨å®¢æˆ·ç«¯è®¿é—®æ—¶ä¿æŒ session ä¼šè¯æ‰“å¼€çš„æœ€å¤§æ—¶é—´é—´éš”ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>public void invalidate()</strong> è¯¥æ–¹æ³•æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆï¼Œå¹¶è§£é™¤ç»‘å®šåˆ°å®ƒä¸Šé¢çš„ä»»ä½•å¯¹è±¡ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>public boolean isNew()</strong> å¦‚æœå®¢æˆ·ç«¯è¿˜ä¸çŸ¥é“è¯¥ session ä¼šè¯ï¼Œæˆ–è€…å¦‚æœå®¢æˆ·é€‰æ‹©ä¸å‚å…¥è¯¥ session ä¼šè¯ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› trueã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>public void removeAttribute(String name)</strong> è¯¥æ–¹æ³•å°†ä»è¯¥ session ä¼šè¯ç§»é™¤æŒ‡å®šåç§°çš„å¯¹è±¡ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>public void setAttribute(String name, Object value)</strong>  è¯¥æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åç§°ç»‘å®šä¸€ä¸ªå¯¹è±¡åˆ°è¯¥ session ä¼šè¯ã€‚</td></tr><tr><td align="left">11</td><td align="left"><strong>public void setMaxInactiveInterval(int interval)</strong> è¯¥æ–¹æ³•åœ¨ Servlet å®¹å™¨æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆä¹‹å‰ï¼ŒæŒ‡å®šå®¢æˆ·ç«¯è¯·æ±‚ä¹‹é—´çš„æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td></tr></tbody></table><h3 id="ğŸSession-è·Ÿè¸ªå®ä¾‹"><a href="#ğŸSession-è·Ÿè¸ªå®ä¾‹" class="headerlink" title="ğŸSession è·Ÿè¸ªå®ä¾‹"></a>ğŸSession è·Ÿè¸ªå®ä¾‹</h3><p>æœ¬å®ä¾‹è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨ HttpSession å¯¹è±¡è·å– session ä¼šè¯åˆ›å»ºæ—¶é—´å’Œæœ€åè®¿é—®æ—¶é—´ã€‚å¦‚æœä¸å­˜åœ¨ session ä¼šè¯ï¼Œæˆ‘ä»¬å°†é€šè¿‡è¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„ session ä¼šè¯ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class SessionTrack</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/SessionTrack"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionTrack</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// å¦‚æœä¸å­˜åœ¨ session ä¼šè¯ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª session å¯¹è±¡</span></span><br><span class="line">        HttpSession session = request.getSession(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// è·å– session åˆ›å»ºæ—¶é—´</span></span><br><span class="line">        Date createTime = <span class="keyword">new</span> Date(session.getCreationTime());</span><br><span class="line">        <span class="comment">// è·å–è¯¥ç½‘é¡µçš„æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´</span></span><br><span class="line">        Date lastAccessTime = <span class="keyword">new</span> Date(session.getLastAccessedTime());</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//è®¾ç½®æ—¥æœŸè¾“å‡ºçš„æ ¼å¼  </span></span><br><span class="line">        SimpleDateFormat df=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);  </span><br><span class="line">    </span><br><span class="line">        String title = <span class="string">"Servlet Session å®ä¾‹ - äº‘æ¾ˆ"</span>;</span><br><span class="line">        Integer visitCount = <span class="keyword">new</span> Integer(<span class="number">0</span>);</span><br><span class="line">        String visitCountKey = <span class="keyword">new</span> String(<span class="string">"visitCount"</span>);</span><br><span class="line">        String userIDKey = <span class="keyword">new</span> String(<span class="string">"userID"</span>);</span><br><span class="line">        String userID = <span class="keyword">new</span> String(<span class="string">"Runoob"</span>);</span><br><span class="line">        <span class="keyword">if</span>(session.getAttribute(visitCountKey) == <span class="keyword">null</span>) {</span><br><span class="line">            session.setAttribute(visitCountKey, <span class="keyword">new</span> Integer(<span class="number">0</span>));</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">        <span class="comment">// æ£€æŸ¥ç½‘é¡µä¸Šæ˜¯å¦æœ‰æ–°çš„è®¿é—®è€…</span></span><br><span class="line">        <span class="keyword">if</span> (session.isNew()){</span><br><span class="line">            title = <span class="string">"Servlet Session å®ä¾‹ - äº‘æ¾ˆ"</span>;</span><br><span class="line">             session.setAttribute(userIDKey, userID);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">             visitCount = (Integer)session.getAttribute(visitCountKey);</span><br><span class="line">             visitCount = visitCount + <span class="number">1</span>;</span><br><span class="line">             userID = (String)session.getAttribute(userIDKey);</span><br><span class="line">        }</span><br><span class="line">        session.setAttribute(visitCountKey,  visitCount);</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">    </span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">                <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">                 <span class="string">"&lt;h2 align=\"center\"&gt;Session ä¿¡æ¯&lt;/h2&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;table border=\"1\" align=\"center\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr bgcolor=\"#949494\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;th&gt;Session ä¿¡æ¯&lt;/th&gt;&lt;th&gt;å€¼&lt;/th&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;id&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> + session.getId() + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> +  df.format(createTime) + </span><br><span class="line">                <span class="string">"  &lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;æœ€åè®¿é—®æ—¶é—´&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> + df.format(lastAccessTime) + </span><br><span class="line">                <span class="string">"  &lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;ç”¨æˆ· ID&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> + userID + </span><br><span class="line">                <span class="string">"  &lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;è®¿é—®ç»Ÿè®¡ï¼š&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> + visitCount + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/table&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>); </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç¼–è¯‘ä¸Šé¢çš„ Servlet <strong>SessionTrack</strong>ï¼Œå¹¶åœ¨ web.xml æ–‡ä»¶ä¸­åˆ›å»ºé€‚å½“çš„æ¡ç›®ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SessionTrack<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.SessionTrack<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SessionTrack<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/SessionTrack<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ <em>http://localhost:8080/TomcatTest/SessionTrack</em>ï¼Œå½“æ‚¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶å°†æ˜¾ç¤ºå¦‚ä¸‹ç»“æœï¼š</p><p><a href="https://imgchr.com/i/0rsYND" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rsYND.png" alt="0rsYND.png"></a></p><p>å†æ¬¡å°è¯•è¿è¡Œç›¸åŒçš„ Servletï¼Œå®ƒå°†æ˜¾ç¤ºå¦‚ä¸‹ç»“æœ</p><p><a href="https://imgchr.com/i/0rsBut" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rsBut.png" alt="0rsBut.png"></a></p><h3 id="ğŸåˆ é™¤-Session-ä¼šè¯æ•°æ®"><a href="#ğŸåˆ é™¤-Session-ä¼šè¯æ•°æ®" class="headerlink" title="ğŸåˆ é™¤ Session ä¼šè¯æ•°æ®"></a>ğŸåˆ é™¤ Session ä¼šè¯æ•°æ®</h3><p>å½“æ‚¨å®Œæˆäº†ä¸€ä¸ªç”¨æˆ·çš„ session ä¼šè¯æ•°æ®ï¼Œæ‚¨æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š</p><ul><li><strong>ç§»é™¤ä¸€ä¸ªç‰¹å®šçš„å±æ€§ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ <em>public void removeAttribute(String name)</em> æ–¹æ³•æ¥åˆ é™¤ä¸ç‰¹å®šçš„é”®ç›¸å…³è”çš„å€¼ã€‚</li><li><strong>åˆ é™¤æ•´ä¸ª session ä¼šè¯ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ <em>public void invalidate()</em> æ–¹æ³•æ¥ä¸¢å¼ƒæ•´ä¸ª session ä¼šè¯ã€‚</li><li><strong>è®¾ç½® session ä¼šè¯è¿‡æœŸæ—¶é—´ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ <em>public void setMaxInactiveInterval(int interval)</em> æ–¹æ³•æ¥å•ç‹¬è®¾ç½® session ä¼šè¯è¶…æ—¶ã€‚</li><li><strong>æ³¨é”€ç”¨æˆ·ï¼š</strong>å¦‚æœä½¿ç”¨çš„æ˜¯æ”¯æŒ servlet 2.4 çš„æœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ <strong>logout</strong> æ¥æ³¨é”€ Web æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼Œå¹¶æŠŠå±äºæ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰ session ä¼šè¯è®¾ç½®ä¸ºæ— æ•ˆã€‚</li><li><strong>web.xml é…ç½®ï¼š</strong>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Tomcatï¼Œé™¤äº†ä¸Šè¿°æ–¹æ³•ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ web.xml æ–‡ä»¶ä¸­é…ç½® session ä¼šè¯è¶…æ—¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¸Šé¢å®ä¾‹ä¸­çš„è¶…æ—¶æ—¶é—´æ˜¯ä»¥åˆ†é’Ÿä¸ºå•ä½ï¼Œå°†è¦†ç›– Tomcat ä¸­é»˜è®¤çš„ 30 åˆ†é’Ÿè¶…æ—¶æ—¶é—´ã€‚</p><p>åœ¨ä¸€ä¸ª Servlet ä¸­çš„ getMaxInactiveInterval() æ–¹æ³•ä¼šè¿”å› session ä¼šè¯çš„è¶…æ—¶æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨ web.xml ä¸­é…ç½® session ä¼šè¯è¶…æ—¶æ—¶é—´ä¸º 15 åˆ†é’Ÿï¼Œé‚£ä¹ˆ getMaxInactiveInterval() ä¼šè¿”å› 900ã€‚</p><h2 id="ğŸŒ¸Servletæ•°æ®åº“è®¿é—®"><a href="#ğŸŒ¸Servletæ•°æ®åº“è®¿é—®" class="headerlink" title="ğŸŒ¸Servletæ•°æ®åº“è®¿é—®"></a>ğŸŒ¸Servletæ•°æ®åº“è®¿é—®</h2><blockquote><p>åœ¨ java é¡¹ç›®ä¸­ï¼Œåªéœ€è¦åœ¨ Eclipse ä¸­å¼•å…¥ mysql-connector-java-5.1.39-bin.jar å°±å¯ä»¥è¿è¡Œjavaé¡¹ç›®ã€‚</p><p>ä½†æ˜¯åœ¨ Eclipse web é¡¹ç›®ä¸­ï¼Œå½“æ‰§è¡Œ Class.forName(â€œcom.mysql.jdbc.Driverâ€);æ—¶ ä¸ä¼šå»æŸ¥æ‰¾é©±åŠ¨çš„ã€‚æ‰€ä»¥æœ¬å®ä¾‹ä¸­æˆ‘ä»¬éœ€è¦æŠŠ mysql-connector-java-5.1.39-bin.jar æ‹·è´åˆ° tomcat ä¸‹ lib ç›®å½•ã€‚</p></blockquote><h3 id="ğŸåˆ›å»ºæµ‹è¯•æ•°æ®"><a href="#ğŸåˆ›å»ºæµ‹è¯•æ•°æ®" class="headerlink" title="ğŸåˆ›å»ºæµ‹è¯•æ•°æ®"></a>ğŸåˆ›å»ºæµ‹è¯•æ•°æ®</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ MySQL ä¸­åˆ›å»º RUNOOB æ•°æ®åº“ï¼Œå¹¶åˆ›å»º websites æ•°æ®è¡¨ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`websites`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">char</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'ç«™ç‚¹åç§°'</span>,</span><br><span class="line">  <span class="string">`url`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`alexa`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'Alexa æ’å'</span>,</span><br><span class="line">  <span class="string">`country`</span> <span class="built_in">char</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'å›½å®¶'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">10</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></tbody></table></figure><p>æ’å…¥ä¸€äº›æ•°æ®ï¼š</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`websites`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'Google'</span>, <span class="string">'https://www.google.cm/'</span>, <span class="string">'1'</span>, <span class="string">'USA'</span>), (<span class="string">'2'</span>, <span class="string">'æ·˜å®'</span>, <span class="string">'https://www.taobao.com/'</span>, <span class="string">'13'</span>, <span class="string">'CN'</span>), (<span class="string">'3'</span>, <span class="string">'èœé¸Ÿæ•™ç¨‹'</span>, <span class="string">'http://www.runoob.com'</span>, <span class="string">'5892'</span>, <span class="string">''</span>), (<span class="string">'4'</span>, <span class="string">'å¾®åš'</span>, <span class="string">'http://weibo.com/'</span>, <span class="string">'20'</span>, <span class="string">'CN'</span>), (<span class="string">'5'</span>, <span class="string">'Facebook'</span>, <span class="string">'https://www.facebook.com/'</span>, <span class="string">'3'</span>, <span class="string">'USA'</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸè®¿é—®æ•°æ®åº“"><a href="#ğŸè®¿é—®æ•°æ®åº“" class="headerlink" title="ğŸè®¿é—®æ•°æ®åº“"></a>ğŸè®¿é—®æ•°æ®åº“</h3><p>ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Servlet è®¿é—® RUNOOB æ•°æ®åº“ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class DatabaseAccess</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/DatabaseAccess"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatabaseAccess</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">// JDBC é©±åŠ¨ååŠæ•°æ®åº“ URL</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String JDBC_DRIVER = <span class="string">"com.mysql.jdbc.Driver"</span>;  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String DB_URL = <span class="string">"jdbc:mysql://localhost:3306/RUNOOB"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ•°æ®åº“çš„ç”¨æˆ·åä¸å¯†ç ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„è®¾ç½®</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String USER = <span class="string">"root"</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String PASS = <span class="string">"123456"</span>; </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DatabaseAccess</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"Servlet Mysql æµ‹è¯• - èœé¸Ÿæ•™ç¨‹"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">        <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span>);</span><br><span class="line">        <span class="keyword">try</span>{</span><br><span class="line">            <span class="comment">// æ³¨å†Œ JDBC é©±åŠ¨å™¨</span></span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æ‰“å¼€ä¸€ä¸ªè¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(DB_URL,USER,PASS);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œ SQL æŸ¥è¯¢</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line">            String sql;</span><br><span class="line">            sql = <span class="string">"SELECT id, name, url FROM websites"</span>;</span><br><span class="line">            ResultSet rs = stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å±•å¼€ç»“æœé›†æ•°æ®åº“</span></span><br><span class="line">            <span class="keyword">while</span>(rs.next()){</span><br><span class="line">                <span class="comment">// é€šè¿‡å­—æ®µæ£€ç´¢</span></span><br><span class="line">                <span class="keyword">int</span> id  = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">                String name = rs.getString(<span class="string">"name"</span>);</span><br><span class="line">                String url = rs.getString(<span class="string">"url"</span>);</span><br><span class="line">    </span><br><span class="line">                <span class="comment">// è¾“å‡ºæ•°æ®</span></span><br><span class="line">                out.println(<span class="string">"ID: "</span> + id);</span><br><span class="line">                out.println(<span class="string">", ç«™ç‚¹åç§°: "</span> + name);</span><br><span class="line">                out.println(<span class="string">", ç«™ç‚¹ URL: "</span> + url);</span><br><span class="line">                out.println(<span class="string">"&lt;br /&gt;"</span>);</span><br><span class="line">            }</span><br><span class="line">            out.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å®Œæˆåå…³é—­</span></span><br><span class="line">            rs.close();</span><br><span class="line">            stmt.close();</span><br><span class="line">            conn.close();</span><br><span class="line">        } <span class="keyword">catch</span>(SQLException se) {</span><br><span class="line">            <span class="comment">// å¤„ç† JDBC é”™è¯¯</span></span><br><span class="line">            se.printStackTrace();</span><br><span class="line">        } <span class="keyword">catch</span>(Exception e) {</span><br><span class="line">            <span class="comment">// å¤„ç† Class.forName é”™è¯¯</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }<span class="keyword">finally</span>{</span><br><span class="line">            <span class="comment">// æœ€åæ˜¯ç”¨äºå…³é—­èµ„æºçš„å—</span></span><br><span class="line">            <span class="keyword">try</span>{</span><br><span class="line">                <span class="keyword">if</span>(stmt!=<span class="keyword">null</span>)</span><br><span class="line">                stmt.close();</span><br><span class="line">            }<span class="keyword">catch</span>(SQLException se2){</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">try</span>{</span><br><span class="line">                <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)</span><br><span class="line">                conn.close();</span><br><span class="line">            }<span class="keyword">catch</span>(SQLException se){</span><br><span class="line">                se.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">       </span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨è®©æˆ‘ä»¬æ¥ç¼–è¯‘ä¸Šé¢çš„ Servletï¼Œå¹¶åœ¨ web.xml æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DatabaseAccess<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.DatabaseAccess<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DatabaseAccess<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/DatabaseAccess<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç¬”è®°"><a href="#ğŸç¬”è®°" class="headerlink" title="ğŸç¬”è®°"></a>ğŸç¬”è®°</h3><p>è¿›è¡Œæ•°æ®åº“æ’å…¥æ“ä½œçš„æ—¶å€™ä½¿ç”¨ PreparedStatement æ›´å¥½ï¼Œå¥½å¤„å¦‚ä¸‹ï¼š</p><ul><li>1.PreparedStatementå¯ä»¥å†™åŠ¨æ€å‚æ•°åŒ–çš„æŸ¥è¯¢ï¼›</li><li>2.PreparedStatementæ¯” Statement æ›´å¿«ï¼›</li><li>3.PreparedStatementå¯ä»¥é˜²æ­¢SQLæ³¨å…¥å¼æ”»å‡»</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–å†™é¢„å¤„ç† SQL è¯­å¥</span></span><br><span class="line">String sql= <span class="string">"INSERT INTO websites1 VALUES(?,?,?,?,?)"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ä¾‹åŒ– PreparedStatement</span></span><br><span class="line">ps = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼ å…¥å‚æ•°ï¼Œè¿™é‡Œçš„å‚æ•°æ¥è‡ªäºä¸€ä¸ªå¸¦æœ‰è¡¨å•çš„jspæ–‡ä»¶ï¼Œå¾ˆå®¹æ˜“å®ç°</span></span><br><span class="line">ps.setString(<span class="number">1</span>, request.getParameter(<span class="string">"id"</span>));</span><br><span class="line">ps.setString(<span class="number">2</span>, request.getParameter(<span class="string">"name"</span>));</span><br><span class="line">ps.setString(<span class="number">3</span>, request.getParameter(<span class="string">"url"</span>));</span><br><span class="line">ps.setString(<span class="number">4</span>, request.getParameter(<span class="string">"alexa"</span>));</span><br><span class="line">ps.setString(<span class="number">5</span>, request.getParameter(<span class="string">"country"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œæ•°æ®åº“æ›´æ–°æ“ä½œï¼Œä¸éœ€è¦SQLè¯­å¥</span></span><br><span class="line">ps.executeUpdate();</span><br><span class="line">sql = <span class="string">"SELECT id, name, url FROM websites1"</span>;</span><br><span class="line">ps = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">ResultSet rs = ps.executeQuery();</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸæ³¨æ„"><a href="#ğŸæ³¨æ„" class="headerlink" title="ğŸæ³¨æ„"></a>ğŸæ³¨æ„</h3><p>ç”±äºæ›´æ–°çš„ MySQL8.0ï¼Œæ‰€ä»¥æœ¬ç½‘ç«™æä¾›çš„ jar åŒ…ï¼š<strong>mysql-connector-java-5.1.39-bin.jar</strong> å°±ä¸èƒ½ç”¨äº†ï¼Œè¿æ¥æ—¶ä¼šæŠ¥ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server</span><br></pre></td></tr></tbody></table></figure><p>è¿™ä¸ªå¼‚å¸¸ã€‚</p><p>éœ€è¦é‡æ–°ä¸‹è½½ï¼Œä¸‹è½½åœ°å€ <a href="https://dev.mysql.com/downloads/file/?id=484819ï¼Œæš‚æ—¶æˆ‘ä¸‹è½½åˆ°çš„æ˜¯" target="_blank" rel="noopener">https://dev.mysql.com/downloads/file/?id=484819ï¼Œæš‚æ—¶æˆ‘ä¸‹è½½åˆ°çš„æ˜¯</a> <strong>mysql-connector-java-8.0.15</strong> æ›¿æ¢è¿™ä¸ª jar åŒ…åï¼Œåˆå‡ºç°å¼‚å¸¸ <strong>java.sql.SQLException: The server time zone value</strong>ï¼Œåªéœ€åœ¨æ•°æ®åº“åœ°å€åè¾¹æ·»åŠ  <strong>serverTimezone=UTC</strong> å³å¯ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DB_URL = <span class="string">"jdbc:mysql://localhost:3306/servlet_db?serverTimezone=UTC"</span>;</span><br></pre></td></tr></tbody></table></figure><p>è¿˜æœ‰æ³¨å†Œ jdbc çš„é©±åŠ¨ä¹Ÿæ¢äº†ã€‚</p><p>æ³¨å†Œ JDBC é©±åŠ¨å™¨ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸Servlet-æ–‡ä»¶ä¸Šä¼ "><a href="#ğŸŒ¸Servlet-æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="ğŸŒ¸Servlet æ–‡ä»¶ä¸Šä¼ "></a>ğŸŒ¸Servlet æ–‡ä»¶ä¸Šä¼ </h2><p>Servlet å¯ä»¥ä¸ HTML form æ ‡ç­¾ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å…è®¸ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ã€‚ä¸Šä¼ çš„æ–‡ä»¶å¯ä»¥æ˜¯æ–‡æœ¬æ–‡ä»¶æˆ–å›¾åƒæ–‡ä»¶æˆ–ä»»ä½•æ–‡æ¡£ã€‚</p><p>æœ¬æ–‡ä½¿ç”¨åˆ°çš„æ–‡ä»¶æœ‰ï¼š</p><ul><li>upload.jsp : æ–‡ä»¶ä¸Šä¼ è¡¨å•ã€‚</li><li>message.jsp : ä¸Šä¼ æˆåŠŸåè·³è½¬é¡µé¢ã€‚</li><li>UploadServlet.java : ä¸Šä¼ å¤„ç† Servletã€‚</li><li>éœ€è¦å¼•å…¥çš„ jar æ–‡ä»¶ï¼šcommons-fileupload-1.4ã€commons-io-2.8.jarã€‚</li><li><em>Servlet3.0 å·²ç»å†…ç½®äº†æ–‡ä»¶ä¸Šä¼ è¿™ä¸€ç‰¹æ€§ï¼Œå¼€å‘è€…ä¸å†éœ€è¦å°† Commons FileUpload ç»„ä»¶å¯¼å…¥åˆ°å·¥ç¨‹ä¸­å»ã€‚</em></li></ul><h3 id="ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•"><a href="#ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•" class="headerlink" title="ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•"></a>ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•</h3><p>ä¸‹é¢çš„ HTML ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•ã€‚ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li>è¡¨å• <strong>method</strong> å±æ€§åº”è¯¥è®¾ç½®ä¸º <strong>POST</strong> æ–¹æ³•ï¼Œä¸èƒ½ä½¿ç”¨ GET æ–¹æ³•ã€‚</li><li>è¡¨å• <strong>enctype</strong> å±æ€§åº”è¯¥è®¾ç½®ä¸º <strong>multipart/form-data</strong>.</li><li>è¡¨å• <strong>action</strong> å±æ€§åº”è¯¥è®¾ç½®ä¸ºåœ¨åç«¯æœåŠ¡å™¨ä¸Šå¤„ç†æ–‡ä»¶ä¸Šä¼ çš„ Servlet æ–‡ä»¶ã€‚ä¸‹é¢çš„å®ä¾‹ä½¿ç”¨äº† <strong>UploadServlet</strong> Servlet æ¥ä¸Šä¼ æ–‡ä»¶ã€‚</li><li>ä¸Šä¼ å•ä¸ªæ–‡ä»¶ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨å•ä¸ªå¸¦æœ‰å±æ€§ type=â€fileâ€ çš„ &lt;input â€¦/&gt; æ ‡ç­¾ã€‚ä¸ºäº†å…è®¸å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œè¯·åŒ…å«å¤šä¸ª name å±æ€§å€¼ä¸åŒçš„ input æ ‡ç­¾ã€‚è¾“å…¥æ ‡ç­¾å…·æœ‰ä¸åŒçš„åç§°å±æ€§çš„å€¼ã€‚æµè§ˆå™¨ä¼šä¸ºæ¯ä¸ª input æ ‡ç­¾å…³è”ä¸€ä¸ªæµè§ˆæŒ‰é’®ã€‚</li></ul><p>upload.jsp æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;æ–‡ä»¶ä¸Šä¼ å®ä¾‹ - äº‘æ¾ˆ&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;æ–‡ä»¶ä¸Šä¼ å®ä¾‹ - äº‘æ¾ˆ&lt;/h1&gt;</span><br><span class="line">&lt;form method=<span class="string">"post"</span> action=<span class="string">"/TomcatTest/UploadServlet"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶:</span><br><span class="line">    &lt;input type=<span class="string">"file"</span> name=<span class="string">"uploadFile"</span> /&gt;</span><br><span class="line">    &lt;br/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"ä¸Šä¼ "</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç¼–å†™åå°-Servlet"><a href="#ğŸç¼–å†™åå°-Servlet" class="headerlink" title="ğŸç¼–å†™åå° Servlet"></a>ğŸç¼–å†™åå° Servlet</h3><p>ä»¥ä¸‹æ˜¯ UploadServlet çš„æºä»£ç ï¼ŒåŒäºå¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œåœ¨è¿™ä¹‹å‰æˆ‘ä»¬å…ˆç¡®ä¿ä¾èµ–åŒ…å·²ç»å¼•å…¥åˆ°é¡¹ç›®çš„ WEB-INF/lib ç›®å½•ä¸‹ï¼š</p><ul><li>ä¸‹é¢çš„å®ä¾‹ä¾èµ–äº FileUploadï¼Œæ‰€ä»¥ä¸€å®šè¦ç¡®ä¿åœ¨æ‚¨çš„ classpath ä¸­æœ‰æœ€æ–°ç‰ˆæœ¬çš„ <strong>commons-fileupload.x.x.jar</strong>æ–‡ä»¶ã€‚å¯ä»¥ä» <a href="http://commons.apache.org/proper/commons-fileupload/" target="_blank" rel="noopener">http://commons.apache.org/proper/commons-fileupload/</a> ä¸‹è½½ã€‚</li><li>FileUpload ä¾èµ–äº Commons IOï¼Œæ‰€ä»¥ä¸€å®šè¦ç¡®ä¿åœ¨æ‚¨çš„ classpath ä¸­æœ‰æœ€æ–°ç‰ˆæœ¬çš„ <strong>commons-io-x.x.jar</strong> æ–‡ä»¶ã€‚å¯ä»¥ä» <a href="http://commons.apache.org/proper/commons-io/" target="_blank" rel="noopener">http://commons.apache.org/proper/commons-io/</a> ä¸‹è½½ã€‚</li></ul><p>UploadServlet çš„æºä»£ç  å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class UploadServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/UploadServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// ä¸Šä¼ æ–‡ä»¶å­˜å‚¨ç›®å½•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String UPLOAD_DIRECTORY = <span class="string">"upload"</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// ä¸Šä¼ é…ç½®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MEMORY_THRESHOLD   = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">3</span>;  <span class="comment">// 3MB</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_FILE_SIZE      = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">40</span>; <span class="comment">// 40MB</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_REQUEST_SIZE   = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">50</span>; <span class="comment">// 50MB</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ æ•°æ®åŠä¿å­˜æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">        HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// æ£€æµ‹æ˜¯å¦ä¸ºå¤šåª’ä½“ä¸Šä¼ </span></span><br><span class="line">        <span class="keyword">if</span> (!ServletFileUpload.isMultipartContent(request)) {</span><br><span class="line">            <span class="comment">// å¦‚æœä¸æ˜¯åˆ™åœæ­¢</span></span><br><span class="line">            PrintWriter writer = response.getWriter();</span><br><span class="line">            writer.println(<span class="string">"Error: è¡¨å•å¿…é¡»åŒ…å« enctype=multipart/form-data"</span>);</span><br><span class="line">            writer.flush();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// é…ç½®ä¸Šä¼ å‚æ•°</span></span><br><span class="line">        DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">        <span class="comment">// è®¾ç½®å†…å­˜ä¸´ç•Œå€¼ - è¶…è¿‡åå°†äº§ç”Ÿä¸´æ—¶æ–‡ä»¶å¹¶å­˜å‚¨äºä¸´æ—¶ç›®å½•ä¸­</span></span><br><span class="line">        factory.setSizeThreshold(MEMORY_THRESHOLD);</span><br><span class="line">        <span class="comment">// è®¾ç½®ä¸´æ—¶å­˜å‚¨ç›®å½•</span></span><br><span class="line">        factory.setRepository(<span class="keyword">new</span> File(System.getProperty(<span class="string">"java.io.tmpdir"</span>)));</span><br><span class="line"> </span><br><span class="line">        ServletFileUpload upload = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// è®¾ç½®æœ€å¤§æ–‡ä»¶ä¸Šä¼ å€¼</span></span><br><span class="line">        upload.setFileSizeMax(MAX_FILE_SIZE);</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// è®¾ç½®æœ€å¤§è¯·æ±‚å€¼ (åŒ…å«æ–‡ä»¶å’Œè¡¨å•æ•°æ®)</span></span><br><span class="line">        upload.setSizeMax(MAX_REQUEST_SIZE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸­æ–‡å¤„ç†</span></span><br><span class="line">        upload.setHeaderEncoding(<span class="string">"UTF-8"</span>); </span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„é€ ä¸´æ—¶è·¯å¾„æ¥å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">// è¿™ä¸ªè·¯å¾„ç›¸å¯¹å½“å‰åº”ç”¨çš„ç›®å½•</span></span><br><span class="line">        String uploadPath = request.getServletContext().getRealPath(<span class="string">"./"</span>) + File.separator + UPLOAD_DIRECTORY;</span><br><span class="line">       </span><br><span class="line">         </span><br><span class="line">        <span class="comment">// å¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">        File uploadDir = <span class="keyword">new</span> File(uploadPath);</span><br><span class="line">        <span class="keyword">if</span> (!uploadDir.exists()) {</span><br><span class="line">            uploadDir.mkdir();</span><br><span class="line">        }</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// è§£æè¯·æ±‚çš„å†…å®¹æå–æ–‡ä»¶æ•°æ®</span></span><br><span class="line">            <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">            List&lt;FileItem&gt; formItems = upload.parseRequest(request);</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span> (formItems != <span class="keyword">null</span> &amp;&amp; formItems.size() &gt; <span class="number">0</span>) {</span><br><span class="line">                <span class="comment">// è¿­ä»£è¡¨å•æ•°æ®</span></span><br><span class="line">                <span class="keyword">for</span> (FileItem item : formItems) {</span><br><span class="line">                    <span class="comment">// å¤„ç†ä¸åœ¨è¡¨å•ä¸­çš„å­—æ®µ</span></span><br><span class="line">                    <span class="keyword">if</span> (!item.isFormField()) {</span><br><span class="line">                        String fileName = <span class="keyword">new</span> File(item.getName()).getName();</span><br><span class="line">                        String filePath = uploadPath + File.separator + fileName;</span><br><span class="line">                        File storeFile = <span class="keyword">new</span> File(filePath);</span><br><span class="line">                        <span class="comment">// åœ¨æ§åˆ¶å°è¾“å‡ºæ–‡ä»¶çš„ä¸Šä¼ è·¯å¾„</span></span><br><span class="line">                        System.out.println(filePath);</span><br><span class="line">                        <span class="comment">// ä¿å­˜æ–‡ä»¶åˆ°ç¡¬ç›˜</span></span><br><span class="line">                        item.write(storeFile);</span><br><span class="line">                        request.setAttribute(<span class="string">"message"</span>,</span><br><span class="line">                            <span class="string">"æ–‡ä»¶ä¸Šä¼ æˆåŠŸ!"</span>);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception ex) {</span><br><span class="line">            request.setAttribute(<span class="string">"message"</span>,</span><br><span class="line">                    <span class="string">"é”™è¯¯ä¿¡æ¯: "</span> + ex.getMessage());</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// è·³è½¬åˆ° message.jsp</span></span><br><span class="line">        request.getServletContext().getRequestDispatcher(<span class="string">"/message.jsp"</span>).forward(</span><br><span class="line">                request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>message.jsp æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;æ–‡ä»¶ä¸Šä¼ ç»“æœ&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">        &lt;h2&gt;${message}&lt;/h2&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç¼–è¯‘å’Œè¿è¡Œ-Servlet"><a href="#ğŸç¼–è¯‘å’Œè¿è¡Œ-Servlet" class="headerlink" title="ğŸç¼–è¯‘å’Œè¿è¡Œ Servlet"></a>ğŸç¼–è¯‘å’Œè¿è¡Œ Servlet</h3><p>ç¼–è¯‘ä¸Šé¢çš„ Servlet UploadServletï¼Œå¹¶åœ¨ web.xml æ–‡ä»¶ä¸­åˆ›å»ºæ‰€éœ€çš„æ¡ç›®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">"2.5"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee   </span></span></span><br><span class="line"><span class="tag"><span class="string">    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">     <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.UploadServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/UploadServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸Servlet-å¤„ç†æ—¥æœŸ"><a href="#ğŸŒ¸Servlet-å¤„ç†æ—¥æœŸ" class="headerlink" title="ğŸŒ¸Servlet å¤„ç†æ—¥æœŸ"></a>ğŸŒ¸Servlet å¤„ç†æ—¥æœŸ</h2><p>Date ç±»æ”¯æŒä¸¤ä¸ªæ„é€ å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°åˆå§‹åŒ–å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Date( )</span><br></pre></td></tr></tbody></table></figure><p>ä¸‹é¢çš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ç­‰äº 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ç»è¿‡çš„æ¯«ç§’æ•°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Date(<span class="keyword">long</span> millisec)</span><br></pre></td></tr></tbody></table></figure><p>ä¸€æ—¦æ‚¨æœ‰ä¸€ä¸ªå¯ç”¨çš„ Date å¯¹è±¡ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ä¸‹åˆ—ä»»æ„æ”¯æŒçš„æ–¹æ³•æ¥ä½¿ç”¨æ—¥æœŸï¼š</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>boolean after(Date date)</strong> å¦‚æœè°ƒç”¨çš„ Date å¯¹è±¡ä¸­åŒ…å«çš„æ—¥æœŸåœ¨ date æŒ‡å®šçš„æ—¥æœŸä¹‹åï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>boolean before(Date date)</strong> å¦‚æœè°ƒç”¨çš„ Date å¯¹è±¡ä¸­åŒ…å«çš„æ—¥æœŸåœ¨ date æŒ‡å®šçš„æ—¥æœŸä¹‹å‰ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>Object clone( )</strong> é‡å¤è°ƒç”¨ Date å¯¹è±¡ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>int compareTo(Date date)</strong> æŠŠè°ƒç”¨å¯¹è±¡çš„å€¼ä¸ date çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªå€¼æ˜¯ç›¸ç­‰çš„ï¼Œåˆ™è¿”å› 0ã€‚å¦‚æœè°ƒç”¨å¯¹è±¡åœ¨ date ä¹‹å‰ï¼Œåˆ™è¿”å›ä¸€ä¸ªè´Ÿå€¼ã€‚å¦‚æœè°ƒç”¨å¯¹è±¡åœ¨ date ä¹‹åï¼Œåˆ™è¿”å›ä¸€ä¸ªæ­£å€¼ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>int compareTo(Object obj)</strong> å¦‚æœ obj æ˜¯ Date ç±»ï¼Œåˆ™æ“ä½œç­‰åŒäº compareTo(Date)ã€‚å¦åˆ™ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ª ClassCastExceptionã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>boolean equals(Object date)</strong> å¦‚æœè°ƒç”¨çš„ Date å¯¹è±¡ä¸­åŒ…å«çš„æ—¶é—´å’Œæ—¥æœŸä¸ date æŒ‡å®šçš„ç›¸åŒï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>long getTime( )</strong> è¿”å› 1970 å¹´ 1 æœˆ 1 æ—¥ä»¥æ¥ç»è¿‡çš„æ¯«ç§’æ•°ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>int hashCode( )</strong> ä¸ºè°ƒç”¨å¯¹è±¡è¿”å›å“ˆå¸Œä»£ç ã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>void setTime(long time)</strong> è®¾ç½® time æŒ‡å®šçš„æ—¶é—´å’Œæ—¥æœŸï¼Œè¿™è¡¨ç¤ºä» 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ç»è¿‡çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>String toString( )</strong> è½¬æ¢è°ƒç”¨çš„ Date å¯¹è±¡ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœã€‚</td></tr></tbody></table><h3 id="ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´"><a href="#ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´"></a>ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class CurrentDate</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/CurrentDate"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentDate</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CurrentDate</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line"></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">          String title = <span class="string">"æ˜¾ç¤ºå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´"</span>;</span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">          out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + date.toString() + <span class="string">"&lt;/h2&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CurrentDate<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.CurrentDate<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CurrentDate<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/CurrentDate<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸæ—¥æœŸæ¯”è¾ƒ"><a href="#ğŸæ—¥æœŸæ¯”è¾ƒ" class="headerlink" title="ğŸæ—¥æœŸæ¯”è¾ƒ"></a>ğŸæ—¥æœŸæ¯”è¾ƒ</h3><ul><li>å¯ä»¥ä½¿ç”¨ getTime() æ¥è·å–ä¸¤ä¸ªå¯¹è±¡è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ç»è¿‡çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼Œç„¶åå¯¹è¿™ä¸¤ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒã€‚</li><li>å¯ä»¥ä½¿ç”¨æ–¹æ³• before( )ã€after( ) å’Œ equals( )ã€‚ç”±äºä¸€ä¸ªæœˆé‡Œ 12 å·åœ¨ 18 å·ä¹‹å‰ï¼Œä¾‹å¦‚ï¼Œnew Date(99, 2, 12).before(new Date (99, 2, 18)) è¿”å› trueã€‚</li><li>å¯ä»¥ä½¿ç”¨ compareTo( ) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”± Comparable æ¥å£å®šä¹‰ï¼Œç”± Date å®ç°ã€‚</li></ul><h3 id="ğŸä½¿ç”¨-SimpleDateFormat-æ ¼å¼åŒ–æ—¥æœŸ"><a href="#ğŸä½¿ç”¨-SimpleDateFormat-æ ¼å¼åŒ–æ—¥æœŸ" class="headerlink" title="ğŸä½¿ç”¨ SimpleDateFormat æ ¼å¼åŒ–æ—¥æœŸ"></a>ğŸä½¿ç”¨ SimpleDateFormat æ ¼å¼åŒ–æ—¥æœŸ</h3><p>SimpleDateFormat æ˜¯ä¸€ä¸ªä»¥è¯­è¨€ç¯å¢ƒæ•æ„Ÿçš„æ–¹å¼æ¥æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±»ã€‚ SimpleDateFormat å…è®¸æ‚¨é€‰æ‹©ä»»ä½•ç”¨æˆ·å®šä¹‰çš„æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–çš„æ¨¡å¼ã€‚</p><p>è®©æˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„å®ä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class CurrentDate</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/CurrentDate"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentDate</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CurrentDate</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line"></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"æ˜¾ç¤ºå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´"</span>;</span><br><span class="line">        Date dNow = <span class="keyword">new</span> Date( );</span><br><span class="line">        SimpleDateFormat ft = </span><br><span class="line">                <span class="keyword">new</span> SimpleDateFormat (<span class="string">"yyyy.MM.dd  hh:mm:ss E a "</span>);</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + ft.format(dNow) + <span class="string">"&lt;/h2&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç "><a href="#ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç " class="headerlink" title="ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç "></a>ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç </h3><p>ä½¿ç”¨äº‹ä»¶æ¨¡å¼å­—ç¬¦ä¸²æ¥æŒ‡å®šæ—¶é—´æ ¼å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„ ASCII å­—æ¯è¢«ä¿ç•™ä¸ºæ¨¡å¼å­—æ¯ï¼Œè¿™äº›å­—æ¯å®šä¹‰å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="left">å­—ç¬¦</th><th align="left">æè¿°</th><th align="left">å®ä¾‹</th></tr></thead><tbody><tr><td align="left">G</td><td align="left">Era æŒ‡ç¤ºå™¨</td><td align="left">AD</td></tr><tr><td align="left">y</td><td align="left">å››ä½æ•°è¡¨ç¤ºçš„å¹´</td><td align="left">2001</td></tr><tr><td align="left">M</td><td align="left">ä¸€å¹´ä¸­çš„æœˆ</td><td align="left">July æˆ– 07</td></tr><tr><td align="left">d</td><td align="left">ä¸€æœˆä¸­çš„ç¬¬å‡ å¤©</td><td align="left">10</td></tr><tr><td align="left">h</td><td align="left">å¸¦æœ‰ A.M./P.M. çš„å°æ—¶ï¼ˆ1~12ï¼‰</td><td align="left">12</td></tr><tr><td align="left">H</td><td align="left">ä¸€å¤©ä¸­çš„ç¬¬å‡ å°æ—¶ï¼ˆ0~23ï¼‰</td><td align="left">22</td></tr><tr><td align="left">m</td><td align="left">ä¸€å°æ—¶ä¸­çš„ç¬¬å‡ åˆ†</td><td align="left">30</td></tr><tr><td align="left">s</td><td align="left">ä¸€åˆ†ä¸­çš„ç¬¬å‡ ç§’</td><td align="left">55</td></tr><tr><td align="left">S</td><td align="left">æ¯«ç§’</td><td align="left">234</td></tr><tr><td align="left">E</td><td align="left">ä¸€å‘¨ä¸­çš„æ˜ŸæœŸå‡ </td><td align="left">Tuesday</td></tr><tr><td align="left">D</td><td align="left">ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©</td><td align="left">360</td></tr><tr><td align="left">F</td><td align="left">æ‰€åœ¨çš„å‘¨æ˜¯è¿™ä¸ªæœˆçš„ç¬¬å‡ å‘¨</td><td align="left">2 (second Wed. in July)</td></tr><tr><td align="left">w</td><td align="left">ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨</td><td align="left">40</td></tr><tr><td align="left">W</td><td align="left">ä¸€æœˆä¸­çš„ç¬¬å‡ å‘¨</td><td align="left">1</td></tr><tr><td align="left">a</td><td align="left">A.M./P.M. æ ‡è®°</td><td align="left">PM</td></tr><tr><td align="left">k</td><td align="left">ä¸€å¤©ä¸­çš„ç¬¬å‡ å°æ—¶ï¼ˆ1~24ï¼‰</td><td align="left">24</td></tr><tr><td align="left">K</td><td align="left">å¸¦æœ‰ A.M./P.M. çš„å°æ—¶ï¼ˆ0~11ï¼‰</td><td align="left">10</td></tr><tr><td align="left">z</td><td align="left">æ—¶åŒº</td><td align="left">Eastern Standard Time</td></tr><tr><td align="left">â€˜</td><td align="left">Escape for text</td><td align="left">Delimiter</td></tr><tr><td align="left">â€œ</td><td align="left">å•å¼•å·</td><td align="left">`</td></tr></tbody></table><h2 id="ğŸŒ¸"><a href="#ğŸŒ¸" class="headerlink" title="ğŸŒ¸"></a>ğŸŒ¸</h2><p>å½“æ–‡æ¡£ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼Œæˆ‘ä»¬éœ€è¦å‘å®¢æˆ·ç«¯å‘é€è¿™ä¸ªæ–°ä½ç½®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ç½‘é¡µé‡å®šå‘ã€‚å½“ç„¶ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸ºäº†è´Ÿè½½å‡è¡¡ï¼Œæˆ–è€…åªæ˜¯ä¸ºäº†ç®€å•çš„éšæœºï¼Œè¿™äº›æƒ…å†µéƒ½æœ‰å¯èƒ½ç”¨åˆ°ç½‘é¡µé‡å®šå‘ã€‚</p><p>é‡å®šå‘è¯·æ±‚åˆ°å¦ä¸€ä¸ªç½‘é¡µçš„æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ response å¯¹è±¡çš„ sendRedirect() æ–¹æ³•ã€‚ä¸‹é¢æ˜¯è¯¥æ–¹æ³•çš„å®šä¹‰ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> HttpServletResponse.sendRedirect(String location)</span><br><span class="line"><span class="keyword">throws</span> IOException</span><br></pre></td></tr></tbody></table></figure><p>è¯¥æ–¹æ³•æŠŠå“åº”è¿åŒçŠ¶æ€ç å’Œæ–°çš„ç½‘é¡µä½ç½®å‘é€å›æµè§ˆå™¨ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡æŠŠ setStatus() å’Œ setHeader() æ–¹æ³•ä¸€èµ·ä½¿ç”¨æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">String site = <span class="string">"http://www.runoob.com"</span> ;</span><br><span class="line">response.setStatus(response.SC_MOVED_TEMPORARILY);</span><br><span class="line">response.setHeader(<span class="string">"Location"</span>, site); </span><br><span class="line">....</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸå®ä¾‹-1"><a href="#ğŸå®ä¾‹-1" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class PageRedirect</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/PageRedirect"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageRedirect</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="meta">@SuppressWarnings</span>(<span class="string">"static-access"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¦é‡å®šå‘çš„æ–°ä½ç½®</span></span><br><span class="line">      String site = <span class="keyword">new</span> String(<span class="string">"http://liudufu.gihub.io"</span>);</span><br><span class="line"></span><br><span class="line">      response.setStatus(response.SC_MOVED_TEMPORARILY);</span><br><span class="line">      response.setHeader(<span class="string">"Location"</span>, site);    </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>PageRedirect<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>PageRedirect<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>PageRedirect<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/PageRedirect<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨é€šè¿‡è®¿é—® URL <a href="http://localhost:8080/PageRedirect" target="_blank" rel="noopener">http://localhost:8080/PageRedirect</a> æ¥è°ƒç”¨è¿™ä¸ª Servlet</p><h2 id="ğŸŒ¸Servlet-ç‚¹å‡»è®¡æ•°å™¨"><a href="#ğŸŒ¸Servlet-ç‚¹å‡»è®¡æ•°å™¨" class="headerlink" title="ğŸŒ¸Servlet ç‚¹å‡»è®¡æ•°å™¨"></a>ğŸŒ¸Servlet ç‚¹å‡»è®¡æ•°å™¨</h2><p>å¾ˆå¤šæ—¶å€™ï¼Œæ‚¨å¯èƒ½æœ‰å…´è¶£çŸ¥é“ç½‘ç«™çš„æŸä¸ªç‰¹å®šé¡µé¢ä¸Šçš„æ€»ç‚¹å‡»é‡ã€‚ä½¿ç”¨ Servlet æ¥è®¡ç®—è¿™äº›ç‚¹å‡»é‡æ˜¯éå¸¸ç®€å•çš„ï¼Œå› ä¸ºä¸€ä¸ª Servlet çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±å®ƒè¿è¡Œæ‰€åœ¨çš„å®¹å™¨æ§åˆ¶çš„ã€‚</p><p>ä»¥ä¸‹æ˜¯å®ç°ä¸€ä¸ªç®€å•çš„åŸºäº Servlet ç”Ÿå‘½å‘¨æœŸçš„ç½‘é¡µç‚¹å‡»è®¡æ•°å™¨éœ€è¦é‡‡å–çš„æ­¥éª¤ï¼š</p><ul><li>åœ¨ init() æ–¹æ³•ä¸­åˆå§‹åŒ–ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</li><li>æ¯æ¬¡è°ƒç”¨ doGet() æˆ– doPost() æ–¹æ³•æ—¶ï¼Œéƒ½å¢åŠ å…¨å±€å˜é‡ã€‚</li><li>å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“è¡¨æ¥å­˜å‚¨å…¨å±€å˜é‡çš„å€¼åœ¨ destroy() ä¸­ã€‚åœ¨ä¸‹æ¬¡åˆå§‹åŒ– Servlet æ—¶ï¼Œè¯¥å€¼å¯åœ¨ init() æ–¹æ³•å†…è¢«è¯»å–ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li><li>å¦‚æœæ‚¨åªæƒ³å¯¹ä¸€ä¸ª session ä¼šè¯è®¡æ•°ä¸€æ¬¡é¡µé¢ç‚¹å‡»ï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨ isNew() æ–¹æ³•æ¥æ£€æŸ¥è¯¥ session ä¼šè¯æ˜¯å¦å·²ç‚¹å‡»è¿‡ç›¸åŒé¡µé¢ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li><li>æ‚¨å¯ä»¥é€šè¿‡æ˜¾ç¤ºå…¨å±€è®¡æ•°å™¨çš„å€¼ï¼Œæ¥åœ¨ç½‘ç«™ä¸Šå±•ç¤ºé¡µé¢çš„æ€»ç‚¹å‡»é‡ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li></ul><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾ Web å®¹å™¨å°†æ— æ³•é‡æ–°å¯åŠ¨ã€‚å¦‚æœæ˜¯é‡æ–°å¯åŠ¨æˆ– Servlet è¢«é”€æ¯ï¼Œè®¡æ•°å™¨å°†è¢«é‡ç½®ã€‚</p><h3 id="ğŸå®ä¾‹-2"><a href="#ğŸå®ä¾‹-2" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class PageHitCounter</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/PageHitCounter"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageHitCounter</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hitCount; </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>{ </span><br><span class="line">        <span class="comment">// é‡ç½®ç‚¹å‡»è®¡æ•°å™¨</span></span><br><span class="line">        hitCount = <span class="number">0</span>;</span><br><span class="line">    } </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line"></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        <span class="comment">// å¢åŠ  hitCount </span></span><br><span class="line">        hitCount++; </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"æ€»ç‚¹å‡»é‡"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + hitCount + <span class="string">"&lt;/h2&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>{ </span><br><span class="line">        <span class="comment">// è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥æŠŠ hitCount çš„å€¼å†™å…¥åˆ°æ•°æ®åº“</span></span><br><span class="line">    } </span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>PageHitCounter<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.PageHitCounter<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>PageHitCounter<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/PageHitCounter<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨"><a href="#ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨" class="headerlink" title="ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨"></a>ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨</h3><p>å¾ˆå¤šæ—¶å€™ï¼Œæ‚¨å¯èƒ½æœ‰å…´è¶£çŸ¥é“æ•´ä¸ªç½‘ç«™çš„æ€»ç‚¹å‡»é‡ã€‚åœ¨ Servlet ä¸­ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p>ä»¥ä¸‹æ˜¯å®ç°ä¸€ä¸ªç®€å•çš„åŸºäºè¿‡æ»¤å™¨ç”Ÿå‘½å‘¨æœŸçš„ç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨éœ€è¦é‡‡å–çš„æ­¥éª¤ï¼š</p><ul><li>åœ¨è¿‡æ»¤å™¨çš„ init() æ–¹æ³•ä¸­åˆå§‹åŒ–ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</li><li>æ¯æ¬¡è°ƒç”¨ doFilter æ–¹æ³•æ—¶ï¼Œéƒ½å¢åŠ å…¨å±€å˜é‡ã€‚</li><li>å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥åœ¨è¿‡æ»¤å™¨çš„ destroy() ä¸­ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“è¡¨æ¥å­˜å‚¨å…¨å±€å˜é‡çš„å€¼ã€‚åœ¨ä¸‹æ¬¡åˆå§‹åŒ–è¿‡æ»¤å™¨æ—¶ï¼Œè¯¥å€¼å¯åœ¨ init() æ–¹æ³•å†…è¢«è¯»å–, è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li></ul><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾ Web å®¹å™¨å°†æ— æ³•é‡æ–°å¯åŠ¨ã€‚å¦‚æœæ˜¯é‡æ–°å¯åŠ¨æˆ– Servlet è¢«é”€æ¯ï¼Œç‚¹å‡»è®¡æ•°å™¨å°†è¢«é‡ç½®ã€‚</p><h3 id="ğŸå®ä¾‹-3"><a href="#ğŸå®ä¾‹-3" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SiteHitCounter</span> <span class="keyword">implements</span> <span class="title">Filter</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> hitCount; </span><br><span class="line">               </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">(FilterConfig config)</span> </span></span><br><span class="line"><span class="function">                    <span class="keyword">throws</span> ServletException</span>{</span><br><span class="line">     <span class="comment">// é‡ç½®ç‚¹å‡»è®¡æ•°å™¨</span></span><br><span class="line">     hitCount = <span class="number">0</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">doFilter</span><span class="params">(ServletRequest request, </span></span></span><br><span class="line"><span class="function"><span class="params">              ServletResponse response,</span></span></span><br><span class="line"><span class="function"><span class="params">              FilterChain chain)</span> </span></span><br><span class="line"><span class="function">              <span class="keyword">throws</span> java.io.IOException, ServletException </span>{</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æŠŠè®¡æ•°å™¨çš„å€¼å¢åŠ  1</span></span><br><span class="line">      hitCount++;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¾“å‡ºè®¡æ•°å™¨</span></span><br><span class="line">      System.out.println(<span class="string">"ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š"</span>+ hitCount );</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æŠŠè¯·æ±‚ä¼ å›åˆ°è¿‡æ»¤å™¨é“¾</span></span><br><span class="line">      chain.doFilter(request,response);</span><br><span class="line">  }</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">  </span>{ </span><br><span class="line">      <span class="comment">// è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥æŠŠ hitCount çš„å€¼å†™å…¥åˆ°æ•°æ®åº“</span></span><br><span class="line">  } </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>SiteHitCounter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>SiteHitCounter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>SiteHitCounter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨è®¿é—®ç½‘ç«™çš„ä»»æ„é¡µé¢ï¼Œæ¯”å¦‚ <a href="http://localhost:8080/ã€‚è¿™å°†ä¼šåœ¨æ¯æ¬¡ä»»æ„é¡µé¢è¢«ç‚¹å‡»æ—¶ï¼ŒæŠŠè®¡æ•°å™¨çš„å€¼å¢åŠ " target="_blank" rel="noopener">http://localhost:8080/ã€‚è¿™å°†ä¼šåœ¨æ¯æ¬¡ä»»æ„é¡µé¢è¢«ç‚¹å‡»æ—¶ï¼ŒæŠŠè®¡æ•°å™¨çš„å€¼å¢åŠ </a> 1ï¼Œå®ƒä¼šåœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºä»¥ä¸‹æ¶ˆæ¯ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 1</span><br><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 2</span><br><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 3</span><br><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 4</span><br><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 5</span><br><span class="line">..................</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸Servlet-è‡ªåŠ¨åˆ·æ–°é¡µé¢"><a href="#ğŸŒ¸Servlet-è‡ªåŠ¨åˆ·æ–°é¡µé¢" class="headerlink" title="ğŸŒ¸Servlet è‡ªåŠ¨åˆ·æ–°é¡µé¢"></a>ğŸŒ¸Servlet è‡ªåŠ¨åˆ·æ–°é¡µé¢</h2><p>å‡è®¾æœ‰ä¸€ä¸ªç½‘é¡µï¼Œå®ƒæ˜¯æ˜¾ç¤ºç°åœºæ¯”èµ›æˆç»©æˆ–è‚¡ç¥¨å¸‚åœºçŠ¶å†µæˆ–è´§å¸å…‘æ¢ç‡ã€‚å¯¹äºæ‰€æœ‰è¿™äº›ç±»å‹çš„é¡µé¢ï¼Œæ‚¨éœ€è¦å®šæœŸåˆ·æ–°ç½‘é¡µã€‚</p><p>Java Servlet æä¾›äº†ä¸€ä¸ªæœºåˆ¶ï¼Œä½¿å¾—ç½‘é¡µä¼šåœ¨ç»™å®šçš„æ—¶é—´é—´éš”è‡ªåŠ¨åˆ·æ–°ã€‚</p><p>åˆ·æ–°ç½‘é¡µçš„æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨å“åº”å¯¹è±¡çš„æ–¹æ³• <strong>setIntHeader()</strong>ã€‚ä»¥ä¸‹æ˜¯è¿™ç§æ–¹æ³•çš„å®šä¹‰ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void setIntHeader(String header, int headerValue)</span><br></pre></td></tr></tbody></table></figure><p>æ­¤æ–¹æ³•æŠŠå¤´ä¿¡æ¯ â€œRefreshâ€ è¿åŒä¸€ä¸ªè¡¨ç¤ºæ—¶é—´é—´éš”çš„æ•´æ•°å€¼ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰å‘é€å›æµè§ˆå™¨ã€‚</p><h3 id="ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹"><a href="#ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹" class="headerlink" title="ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹"></a>ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹</h3><p>æœ¬å®ä¾‹æ¼”ç¤ºäº† Servlet å¦‚ä½•ä½¿ç”¨ <strong>setIntHeader()</strong> æ–¹æ³•æ¥è®¾ç½® <strong>Refresh</strong> å¤´ä¿¡æ¯ï¼Œä»è€Œå®ç°è‡ªåŠ¨åˆ·æ–°é¡µé¢ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.GregorianCalendar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class Refresh</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/Refresh"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Refresh</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®åˆ·æ–°è‡ªåŠ¨åŠ è½½çš„äº‹ä»¶é—´éš”ä¸º 5 ç§’</span></span><br><span class="line">        response.setIntHeader(<span class="string">"Refresh"</span>, <span class="number">5</span>);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">// è·å–å½“å‰çš„æ—¶é—´</span></span><br><span class="line">        Calendar calendar = <span class="keyword">new</span> GregorianCalendar();</span><br><span class="line">        String am_pm;</span><br><span class="line">        <span class="keyword">int</span> hour = calendar.get(Calendar.HOUR);</span><br><span class="line">        <span class="keyword">int</span> minute = calendar.get(Calendar.MINUTE);</span><br><span class="line">        <span class="keyword">int</span> second = calendar.get(Calendar.SECOND);</span><br><span class="line">        <span class="keyword">if</span>(calendar.get(Calendar.AM_PM) == <span class="number">0</span>)</span><br><span class="line">            am_pm = <span class="string">"AM"</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            am_pm = <span class="string">"PM"</span>;</span><br><span class="line">     </span><br><span class="line">        String CT = hour+<span class="string">":"</span>+ minute +<span class="string">":"</span>+ second +<span class="string">" "</span>+ am_pm;</span><br><span class="line">        </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"ä½¿ç”¨ Servlet è‡ªåŠ¨åˆ·æ–°é¡µé¢"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;p&gt;å½“å‰æ—¶é—´æ˜¯ï¼š"</span> + CT + <span class="string">"&lt;/p&gt;\n"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Refresh<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.Refresh<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Refresh<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/Refresh<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸Servlet-å‘é€ç”µå­é‚®ä»¶"><a href="#ğŸŒ¸Servlet-å‘é€ç”µå­é‚®ä»¶" class="headerlink" title="ğŸŒ¸Servlet å‘é€ç”µå­é‚®ä»¶"></a>ğŸŒ¸Servlet å‘é€ç”µå­é‚®ä»¶</h2><p>ä½¿ç”¨ Servlet å‘é€ä¸€å°ç”µå­é‚®ä»¶æ˜¯å¾ˆç®€å•çš„ï¼Œä½†é¦–å…ˆæ‚¨å¿…é¡»åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šå®‰è£… <strong>JavaMail API</strong> å’Œ <strong>Java Activation Frameworkï¼‰JAFï¼‰</strong>ã€‚</p><ul><li>æ‚¨å¯ä»¥ä» Java ç½‘ç«™ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ <a href="http://www.oracle.com/technetwork/java/javamail/index.html" target="_blank" rel="noopener">JavaMail</a>ï¼Œæ‰“å¼€ç½‘é¡µå³ä¾§æœ‰ä¸ª <strong>Downloads</strong> é“¾æ¥ï¼Œç‚¹å‡»å®ƒä¸‹è½½ã€‚</li><li>æ‚¨å¯ä»¥ä» Java ç½‘ç«™ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ <a href="http://www.oracle.com/technetwork/articles/java/index-135046.html" target="_blank" rel="noopener">JAFï¼ˆï¼‰</a>ã€‚</li></ul><p>ä¸‹è½½å¹¶è§£å‹ç¼©è¿™äº›æ–‡ä»¶ï¼Œåœ¨æ–°åˆ›å»ºçš„é¡¶å±‚ç›®å½•ä¸­ï¼Œæ‚¨ä¼šå‘ç°è¿™ä¸¤ä¸ªåº”ç”¨ç¨‹åºçš„ä¸€äº› jar æ–‡ä»¶ã€‚æ‚¨éœ€è¦æŠŠ <strong>mail.jar</strong> å’Œ <strong>activation.jar</strong> æ–‡ä»¶æ·»åŠ åˆ°æ‚¨çš„ CLASSPATH ä¸­ã€‚</p><h3 id="ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶"><a href="#ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶" class="headerlink" title="ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶"></a>ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶</h3><p>ä¸‹é¢çš„å®ä¾‹å°†ä»æ‚¨çš„è®¡ç®—æœºä¸Šå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶ã€‚è¿™é‡Œå‡è®¾æ‚¨çš„<strong>æœ¬åœ°ä¸»æœº</strong>å·²è¿æ¥åˆ°äº’è”ç½‘ï¼Œå¹¶æ”¯æŒå‘é€ç”µå­é‚®ä»¶ã€‚åŒæ—¶ç¡®ä¿ Java Email API åŒ…å’Œ JAF åŒ…çš„æ‰€æœ‰çš„ jar æ–‡ä»¶åœ¨ CLASSPATH ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶å SendEmail.java</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.*;</span><br><span class="line"><span class="keyword">import</span> javax.activation.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendEmail</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ”¶ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String to = <span class="string">"abcd@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‘ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String from = <span class="string">"web@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‡è®¾æ‚¨æ˜¯ä»æœ¬åœ°ä¸»æœºå‘é€ç”µå­é‚®ä»¶</span></span><br><span class="line">      String host = <span class="string">"localhost"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–ç³»ç»Ÿçš„å±æ€§</span></span><br><span class="line">      Properties properties = System.getProperties();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è®¾ç½®é‚®ä»¶æœåŠ¡å™¨</span></span><br><span class="line">      properties.setProperty(<span class="string">"mail.smtp.host"</span>, host);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–é»˜è®¤çš„ Session å¯¹è±¡</span></span><br><span class="line">      Session session = Session.getDefaultInstance(properties);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span>{</span><br><span class="line">         <span class="comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ MimeMessage å¯¹è±¡</span></span><br><span class="line">         MimeMessage message = <span class="keyword">new</span> MimeMessage(session);</span><br><span class="line">         <span class="comment">// è®¾ç½® From: header field of the header.</span></span><br><span class="line">         message.setFrom(<span class="keyword">new</span> InternetAddress(from));</span><br><span class="line">         <span class="comment">// è®¾ç½® To: header field of the header.</span></span><br><span class="line">         message.addRecipient(Message.RecipientType.TO,</span><br><span class="line">                                  <span class="keyword">new</span> InternetAddress(to));</span><br><span class="line">         <span class="comment">// è®¾ç½® Subject: header field</span></span><br><span class="line">         message.setSubject(<span class="string">"This is the Subject Line!"</span>);</span><br><span class="line">         <span class="comment">// ç°åœ¨è®¾ç½®å®é™…æ¶ˆæ¯</span></span><br><span class="line">         message.setText(<span class="string">"This is actual message"</span>);</span><br><span class="line">         <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">         Transport.send(message);</span><br><span class="line">         String title = <span class="string">"å‘é€ç”µå­é‚®ä»¶"</span>;</span><br><span class="line">         String res = <span class="string">"æˆåŠŸå‘é€æ¶ˆæ¯..."</span>;</span><br><span class="line">         String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">         out.println(docType +</span><br><span class="line">         <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;p align=\"center\"&gt;"</span> + res + <span class="string">"&lt;/p&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">      }<span class="keyword">catch</span> (MessagingException mex) {</span><br><span class="line">         mex.printStackTrace();</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SendEmail<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>SendEmail<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SendEmail<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/SendEmail<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨é€šè¿‡è®¿é—® URL <a href="http://localhost:8080/SendEmail" target="_blank" rel="noopener">http://localhost:8080/SendEmail</a> æ¥è°ƒç”¨è¿™ä¸ª Servletã€‚è¿™å°†ä¼šå‘é€ä¸€å°ç”µå­é‚®ä»¶åˆ°ç»™å®šçš„ç”µå­é‚®ä»¶ ID <em><a href="mailto:abcd@gmail.com">abcd@gmail.com</a></em>ï¼Œå¹¶å°†æ˜¾ç¤ºä¸‹é¢æ‰€ç¤ºçš„å“åº”ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å‘é€ç”µå­é‚®ä»¶</span><br><span class="line">æˆåŠŸå‘é€æ¶ˆæ¯...</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ‚¨æƒ³è¦å‘é€ä¸€å°ç”µå­é‚®ä»¶ç»™å¤šä¸ªæ”¶ä»¶äººï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥æŒ‡å®šå¤šä¸ªç”µå­é‚®ä»¶ IDï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addRecipients</span><span class="params">(Message.RecipientType type, </span></span></span><br><span class="line"><span class="function"><span class="params">                   Address[] addresses)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> MessagingException</span></span><br></pre></td></tr></tbody></table></figure><p>ä¸‹é¢æ˜¯å¯¹å‚æ•°çš„æè¿°ï¼š</p><ul><li><strong>typeï¼š</strong>è¿™å°†è¢«è®¾ç½®ä¸º TOã€CC æˆ– BCCã€‚åœ¨è¿™é‡Œï¼ŒCC ä»£è¡¨æŠ„é€ï¼ŒBCC ä»£è¡¨å¯†ä»¶æŠ„é€ã€‚ä¾‹å¦‚ <em>Message.RecipientType.TO</em>ã€‚</li><li><strong>addressesï¼š</strong>è¿™æ˜¯ç”µå­é‚®ä»¶ ID çš„æ•°ç»„ã€‚å½“æŒ‡å®šç”µå­é‚®ä»¶ ID æ—¶ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ InternetAddress() æ–¹æ³•ã€‚</li></ul><h3 id="ğŸå‘é€ä¸€å°-HTML-ç”µå­é‚®ä»¶"><a href="#ğŸå‘é€ä¸€å°-HTML-ç”µå­é‚®ä»¶" class="headerlink" title="ğŸå‘é€ä¸€å° HTML ç”µå­é‚®ä»¶"></a>ğŸå‘é€ä¸€å° HTML ç”µå­é‚®ä»¶</h3><p>ä¸‹é¢çš„å®ä¾‹å°†ä»æ‚¨çš„è®¡ç®—æœºä¸Šå‘é€ä¸€å° HTML æ ¼å¼çš„ç”µå­é‚®ä»¶ã€‚è¿™é‡Œå‡è®¾æ‚¨çš„<strong>æœ¬åœ°ä¸»æœº</strong>å·²è¿æ¥åˆ°äº’è”ç½‘ï¼Œå¹¶æ”¯æŒå‘é€ç”µå­é‚®ä»¶ã€‚åŒæ—¶ç¡®ä¿ Java Email API åŒ…å’Œ JAF åŒ…çš„æ‰€æœ‰çš„ jar æ–‡ä»¶åœ¨ CLASSPATH ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚</p><p>æœ¬å®ä¾‹ä¸ä¸Šä¸€ä¸ªå®ä¾‹å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ setContent() æ–¹æ³•æ¥è®¾ç½®ç¬¬äºŒä¸ªå‚æ•°ä¸º â€œtext/htmlâ€ çš„å†…å®¹ï¼Œè¯¥å‚æ•°ç”¨æ¥æŒ‡å®š HTML å†…å®¹æ˜¯åŒ…å«åœ¨æ¶ˆæ¯ä¸­çš„ã€‚</p><p>ä½¿ç”¨è¿™ä¸ªå®ä¾‹ï¼Œæ‚¨å¯ä»¥å‘é€å†…å®¹å¤§å°ä¸é™çš„ HTML å†…å®¹ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶å SendEmail.java</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.*;</span><br><span class="line"><span class="keyword">import</span> javax.activation.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendEmail</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ”¶ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String to = <span class="string">"abcd@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‘ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String from = <span class="string">"web@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‡è®¾æ‚¨æ˜¯ä»æœ¬åœ°ä¸»æœºå‘é€ç”µå­é‚®ä»¶</span></span><br><span class="line">      String host = <span class="string">"localhost"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–ç³»ç»Ÿçš„å±æ€§</span></span><br><span class="line">      Properties properties = System.getProperties();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è®¾ç½®é‚®ä»¶æœåŠ¡å™¨</span></span><br><span class="line">      properties.setProperty(<span class="string">"mail.smtp.host"</span>, host);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–é»˜è®¤çš„ Session å¯¹è±¡</span></span><br><span class="line">      Session session = Session.getDefaultInstance(properties);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span>{</span><br><span class="line">         <span class="comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ MimeMessage å¯¹è±¡</span></span><br><span class="line">         MimeMessage message = <span class="keyword">new</span> MimeMessage(session);</span><br><span class="line">         <span class="comment">// è®¾ç½® From: header field of the header.</span></span><br><span class="line">         message.setFrom(<span class="keyword">new</span> InternetAddress(from));</span><br><span class="line">         <span class="comment">// è®¾ç½® To: header field of the header.</span></span><br><span class="line">         message.addRecipient(Message.RecipientType.TO,</span><br><span class="line">                                  <span class="keyword">new</span> InternetAddress(to));</span><br><span class="line">         <span class="comment">// è®¾ç½® Subject: header field</span></span><br><span class="line">         message.setSubject(<span class="string">"This is the Subject Line!"</span>);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// è®¾ç½®å®é™…çš„ HTML æ¶ˆæ¯ï¼Œå†…å®¹å¤§å°ä¸é™</span></span><br><span class="line">         message.setContent(<span class="string">"&lt;h1&gt;This is actual message&lt;/h1&gt;"</span>,</span><br><span class="line">                            <span class="string">"text/html"</span> );</span><br><span class="line">         <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">         Transport.send(message);</span><br><span class="line">         String title = <span class="string">"å‘é€ç”µå­é‚®ä»¶"</span>;</span><br><span class="line">         String res = <span class="string">"æˆåŠŸå‘é€æ¶ˆæ¯..."</span>;</span><br><span class="line">         String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">         out.println(docType +</span><br><span class="line">         <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;p align=\"center\"&gt;"</span> + res + <span class="string">"&lt;/p&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">      }<span class="keyword">catch</span> (MessagingException mex) {</span><br><span class="line">         mex.printStackTrace();</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç¼–è¯‘å¹¶è¿è¡Œä¸Šé¢çš„ Servlet ï¼Œåœ¨ç»™å®šçš„ç”µå­é‚®ä»¶ ID ä¸Šå‘é€ HTML æ¶ˆæ¯ã€‚</p><h3 id="ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶"><a href="#ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶" class="headerlink" title="ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶"></a>ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶</h3><p>ä¸‹é¢çš„å®ä¾‹å°†ä»æ‚¨çš„è®¡ç®—æœºä¸Šå‘é€ä¸€å°å¸¦æœ‰é™„ä»¶çš„ç”µå­é‚®ä»¶ã€‚è¿™é‡Œå‡è®¾æ‚¨çš„<strong>æœ¬åœ°ä¸»æœº</strong>å·²è¿æ¥åˆ°äº’è”ç½‘ï¼Œå¹¶æ”¯æŒå‘é€ç”µå­é‚®ä»¶ã€‚åŒæ—¶ç¡®ä¿ Java Email API åŒ…å’Œ JAF åŒ…çš„æ‰€æœ‰çš„ jar æ–‡ä»¶åœ¨ CLASSPATH ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶å SendEmail.java</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.*;</span><br><span class="line"><span class="keyword">import</span> javax.activation.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendEmail</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ”¶ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String to = <span class="string">"abcd@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‘ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String from = <span class="string">"web@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‡è®¾æ‚¨æ˜¯ä»æœ¬åœ°ä¸»æœºå‘é€ç”µå­é‚®ä»¶</span></span><br><span class="line">      String host = <span class="string">"localhost"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–ç³»ç»Ÿçš„å±æ€§</span></span><br><span class="line">      Properties properties = System.getProperties();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è®¾ç½®é‚®ä»¶æœåŠ¡å™¨</span></span><br><span class="line">      properties.setProperty(<span class="string">"mail.smtp.host"</span>, host);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–é»˜è®¤çš„ Session å¯¹è±¡</span></span><br><span class="line">      Session session = Session.getDefaultInstance(properties);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">       <span class="keyword">try</span>{</span><br><span class="line">         <span class="comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ MimeMessage å¯¹è±¡</span></span><br><span class="line">         MimeMessage message = <span class="keyword">new</span> MimeMessage(session);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// è®¾ç½® From: header field of the header.</span></span><br><span class="line">         message.setFrom(<span class="keyword">new</span> InternetAddress(from));</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// è®¾ç½® To: header field of the header.</span></span><br><span class="line">         message.addRecipient(Message.RecipientType.TO,</span><br><span class="line">                                  <span class="keyword">new</span> InternetAddress(to));</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// è®¾ç½® Subject: header field</span></span><br><span class="line">         message.setSubject(<span class="string">"This is the Subject Line!"</span>);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// åˆ›å»ºæ¶ˆæ¯éƒ¨åˆ† </span></span><br><span class="line">         BodyPart messageBodyPart = <span class="keyword">new</span> MimeBodyPart();</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// å¡«å†™æ¶ˆæ¯</span></span><br><span class="line">         messageBodyPart.setText(<span class="string">"This is message body"</span>);</span><br><span class="line">         </span><br><span class="line">         <span class="comment">// åˆ›å»ºä¸€ä¸ªå¤šéƒ¨åˆ†æ¶ˆæ¯</span></span><br><span class="line">         Multipart multipart = <span class="keyword">new</span> MimeMultipart();</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// è®¾ç½®æ–‡æœ¬æ¶ˆæ¯éƒ¨åˆ†</span></span><br><span class="line">         multipart.addBodyPart(messageBodyPart);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// ç¬¬äºŒéƒ¨åˆ†æ˜¯é™„ä»¶</span></span><br><span class="line">         messageBodyPart = <span class="keyword">new</span> MimeBodyPart();</span><br><span class="line">         String filename = <span class="string">"file.txt"</span>;</span><br><span class="line">         DataSource source = <span class="keyword">new</span> FileDataSource(filename);</span><br><span class="line">         messageBodyPart.setDataHandler(<span class="keyword">new</span> DataHandler(source));</span><br><span class="line">         messageBodyPart.setFileName(filename);</span><br><span class="line">         multipart.addBodyPart(messageBodyPart);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// å‘é€å®Œæ•´çš„æ¶ˆæ¯éƒ¨åˆ†</span></span><br><span class="line">         message.setContent(multipart );</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">         Transport.send(message);</span><br><span class="line">         String title = <span class="string">"å‘é€ç”µå­é‚®ä»¶"</span>;</span><br><span class="line">         String res = <span class="string">"æˆåŠŸå‘é€ç”µå­é‚®ä»¶..."</span>;</span><br><span class="line">         String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">         out.println(docType +</span><br><span class="line">         <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;p align=\"center\"&gt;"</span> + res + <span class="string">"&lt;/p&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">      }<span class="keyword">catch</span> (MessagingException mex) {</span><br><span class="line">         mex.printStackTrace();</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç¼–è¯‘å¹¶è¿è¡Œä¸Šé¢çš„ Servlet ï¼Œåœ¨ç»™å®šçš„ç”µå­é‚®ä»¶ ID ä¸Šå‘é€å¸¦æœ‰æ–‡ä»¶é™„ä»¶çš„æ¶ˆæ¯ã€‚</p><h3 id="ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†"><a href="#ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†" class="headerlink" title="ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†"></a>ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†</h3><p>å¦‚æœéœ€è¦å‘ç”µå­é‚®ä»¶æœåŠ¡å™¨æä¾›ç”¨æˆ· ID å’Œå¯†ç è¿›è¡Œèº«ä»½è®¤è¯ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è®¾ç½®å¦‚ä¸‹å±æ€§ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">props.setProperty(<span class="string">"mail.user"</span>, <span class="string">"myuser"</span>);</span><br><span class="line">props.setProperty(<span class="string">"mail.password"</span>, <span class="string">"mypwd"</span>);</span><br></pre></td></tr></tbody></table></figure><p>ç”µå­é‚®ä»¶å‘é€æœºåˆ¶çš„å…¶ä½™éƒ¨åˆ†ä¸ä¸Šé¢è®²è§£çš„ä¿æŒä¸€è‡´ã€‚</p><h2 id="ğŸŒ¸ServletåŒ…"><a href="#ğŸŒ¸ServletåŒ…" class="headerlink" title="ğŸŒ¸ServletåŒ…"></a>ğŸŒ¸ServletåŒ…</h2><p>æ¶‰åŠåˆ° WEB-INF å­ç›®å½•çš„ Web åº”ç”¨ç¨‹åºç»“æ„æ˜¯æ‰€æœ‰çš„ Java web åº”ç”¨ç¨‹åºçš„æ ‡å‡†ï¼Œå¹¶ç”± Servlet API è§„èŒƒæŒ‡å®šã€‚ç»™å®šä¸€ä¸ªé¡¶çº§ç›®å½•å myappï¼Œç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/myapp</span><br><span class="line">    /images</span><br><span class="line">    /WEB-INF</span><br><span class="line">        /classes</span><br><span class="line">        /lib</span><br></pre></td></tr></tbody></table></figure><p>WEB-INF å­ç›®å½•ä¸­åŒ…å«åº”ç”¨ç¨‹åºçš„éƒ¨ç½²æè¿°ç¬¦ï¼Œåä¸º web.xmlã€‚æ‰€æœ‰çš„ HTML æ–‡ä»¶éƒ½ä½äºé¡¶çº§ç›®å½• <em>myapp</em> ä¸‹ã€‚å¯¹äº admin ç”¨æˆ·ï¼Œæ‚¨ä¼šå‘ç° ROOT ç›®å½•æ˜¯ myApp çš„çˆ¶ç›®å½•ã€‚</p><h3 id="ğŸåˆ›å»ºåŒ…ä¸­çš„-Servlet"><a href="#ğŸåˆ›å»ºåŒ…ä¸­çš„-Servlet" class="headerlink" title="ğŸåˆ›å»ºåŒ…ä¸­çš„ Servlet"></a>ğŸåˆ›å»ºåŒ…ä¸­çš„ Servlet</h3><p>WEB-INF/classes ç›®å½•åŒ…å«äº†æ‰€æœ‰çš„ Servlet ç±»å’Œå…¶ä»–ç±»æ–‡ä»¶ï¼Œç±»æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ç»“æ„ä¸ä»–ä»¬çš„åŒ…åç§°åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„ç±»åç§° <strong>com.myorg.MyServlet</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ª Servlet ç±»å¿…é¡»ä½äºä»¥ä¸‹ç›®å½•ä¸­ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/myapp/WEB-INF/classes/com/myorg/MyServlet.class</span><br></pre></td></tr></tbody></table></figure><p>ä¸‹é¢çš„ä¾‹å­åˆ›å»ºåŒ…åä¸º <em>com.myorg</em> çš„ MyServlet ç±»ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ºåŒ…å‘½å</span></span><br><span class="line"><span class="keyword">package</span> com.myorg;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/MyServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">private</span> String message;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ‰§è¡Œå¿…éœ€çš„çš„åˆå§‹åŒ–</span></span><br><span class="line">      message = <span class="string">"Hello World"</span>;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å®é™…çš„é€»è¾‘æ˜¯åœ¨è¿™é‡Œ</span></span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line">      out.println(<span class="string">"&lt;h1&gt;"</span> + message + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// ä»€ä¹ˆä¹Ÿä¸åš</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç¼–è¯‘åŒ…ä¸­çš„-Servlet"><a href="#ğŸç¼–è¯‘åŒ…ä¸­çš„-Servlet" class="headerlink" title="ğŸç¼–è¯‘åŒ…ä¸­çš„ Servlet"></a>ğŸç¼–è¯‘åŒ…ä¸­çš„ Servlet</h3><p>ç¼–è¯‘åŒ…ä¸­çš„ç±»ä¸ç¼–è¯‘å…¶ä»–çš„ç±»æ²¡æœ‰ä»€ä¹ˆå¤§çš„ä¸åŒã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯è®©æ‚¨çš„ java æ–‡ä»¶ä¿ç•™å®Œå…¨é™å®šè·¯å¾„ï¼Œå¦‚ä¸Šé¢æåˆ°çš„ç±»ï¼Œå°†è¢«ä¿ç•™åœ¨ com.myorg ä¸­ã€‚æ‚¨è¿˜éœ€è¦åœ¨ CLASSPATH ä¸­æ·»åŠ è¯¥ç›®å½•ã€‚</p><p>å‡è®¾æ‚¨çš„ç¯å¢ƒå·²æ­£ç¡®è®¾ç½®ï¼Œè¿›å…¥ <strong><tomcat-installation-directory>/webapps/ROOT/WEB-INF/classes</tomcat-installation-directory></strong> ç›®å½•ï¼Œå¹¶ç¼–è¯‘ MyServlet.javaï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ javac MyServlet.java</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœ Servlet ä¾èµ–äºå…¶ä»–åº“ï¼Œé‚£ä¹ˆæ‚¨å¿…é¡»åœ¨ CLASSPATH ä¸­ä¹Ÿè¦å¼•ç”¨é‚£äº› JAR æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘åªå¼•ç”¨äº† servlet-api.jar JAR æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘åœ¨ Hello World ç¨‹åºä¸­å¹¶æ²¡æœ‰ä½¿ç”¨ä»»ä½•å…¶ä»–åº“ã€‚</p><p>è¯¥å‘½ä»¤è¡Œä½¿ç”¨å†…ç½®çš„ javac ç¼–è¯‘å™¨ï¼Œå®ƒæ˜¯ Sun Microsystems Java è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼Œå…¨ç§° Java Software Development Kitï¼‰é™„å¸¦çš„ã€‚ Microsystemsçš„Javaè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰ã€‚ä¸ºäº†è®©è¯¥å‘½ä»¤æ­£å¸¸å·¥ä½œï¼Œå¿…é¡»åŒ…æ‹¬æ‚¨åœ¨ PATH ç¯å¢ƒå˜é‡ä¸­æ‰€ä½¿ç”¨çš„ Java SDK çš„ä½ç½®ã€‚</p><p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä¸Šè¿°ç¼–è¯‘ä¼šåœ¨åŒä¸€ç›®å½•ä¸‹ç”Ÿæˆ <strong>MyServlet.class</strong> æ–‡ä»¶ã€‚ä¸‹ä¸€èŠ‚å°†è§£é‡Šå¦‚ä½•æŠŠä¸€ä¸ªå·²ç¼–è¯‘çš„ Servlet éƒ¨ç½²åˆ°ç”Ÿäº§ä¸­ã€‚</p><h3 id="ğŸServlet-æ‰“åŒ…éƒ¨ç½²"><a href="#ğŸServlet-æ‰“åŒ…éƒ¨ç½²" class="headerlink" title="ğŸServlet æ‰“åŒ…éƒ¨ç½²"></a>ğŸServlet æ‰“åŒ…éƒ¨ç½²</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒServlet åº”ç”¨ç¨‹åºä½äºè·¯å¾„ <tomcat-installation-directory>/webapps/ROOT ä¸‹ï¼Œä¸”ç±»æ–‡ä»¶æ”¾åœ¨ <tomcat-installation-directory>/webapps/ROOT/WEB-INF/classes ä¸­ã€‚</tomcat-installation-directory></tomcat-installation-directory></p><p>å¦‚æœæ‚¨æœ‰ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„ç±»åç§° <strong>com.myorg.MyServlet</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ª Servlet ç±»å¿…é¡»ä½äº WEB-INF/classes/com/myorg/MyServlet.class ä¸­ï¼Œæ‚¨éœ€è¦åœ¨ä½äº <tomcat-installation-directory>/webapps/ROOT/WEB-INF/ çš„ web.xml æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®ï¼š</tomcat-installation-directory></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.myorg.MyServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/MyServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¸Šé¢çš„æ¡ç›®è¦è¢«åˆ›å»ºåœ¨ web.xml æ–‡ä»¶ä¸­çš„ <web-app>â€¦</web-app> æ ‡ç­¾å†…ã€‚åœ¨è¯¥æ–‡ä»¶ä¸­å¯èƒ½å·²ç»æœ‰å„ç§å¯ç”¨çš„æ¡ç›®ï¼Œä½†ä¸è¦åœ¨æ„ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæ‚¨åŸºæœ¬ä¸Šå·²ç»å®Œæˆäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨ <tomcat-installation-directory>\bin\startup.batï¼ˆåœ¨ Windows ä¸Šï¼‰æˆ– <tomcat-installation-directory>/bin/startup.shï¼ˆåœ¨ Linux/Solaris ç­‰ä¸Šï¼‰å¯åŠ¨ tomcat æœåŠ¡å™¨ï¼Œæœ€ååœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥ <strong><a href="http://localhost:8080/MyServlet" target="_blank" rel="noopener">http://localhost:8080/MyServlet</a></strong>ã€‚</tomcat-installation-directory></tomcat-installation-directory></p><h2 id="ğŸŒ¸Servlet-è°ƒè¯•"><a href="#ğŸŒ¸Servlet-è°ƒè¯•" class="headerlink" title="ğŸŒ¸Servlet è°ƒè¯•"></a>ğŸŒ¸Servlet è°ƒè¯•</h2><p>æµ‹è¯•/è°ƒè¯• Servlet å§‹ç»ˆæ˜¯å¼€å‘ä½¿ç”¨è¿‡ç¨‹ä¸­çš„éš¾ç‚¹ã€‚Servlet å¾€å¾€æ¶‰åŠå¤§é‡çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨äº¤äº’ï¼Œå¯èƒ½ä¼šå‡ºç°é”™è¯¯ä½†åˆéš¾ä»¥é‡ç°ã€‚</p><p>è¿™é‡Œæœ‰ä¸€äº›æç¤ºå’Œå»ºè®®ï¼Œå¯ä»¥å¸®åŠ©æ‚¨è°ƒè¯•ã€‚</p><h3 id="ğŸSystem-out-println"><a href="#ğŸSystem-out-println" class="headerlink" title="ğŸSystem.out.println()"></a>ğŸSystem.out.println()</h3><p>System.out.println() æ˜¯ä½œä¸ºä¸€ä¸ªæ ‡è®°æ¥ä½¿ç”¨çš„ï¼Œç”¨æ¥æµ‹è¯•ä¸€æ®µç‰¹å®šçš„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰“å°å‡ºå˜é‡çš„å€¼ã€‚æ­¤å¤–ï¼š</p><ul><li>ç”±äº System å¯¹è±¡æ˜¯æ ¸å¿ƒ Java å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯ä»¥åœ¨ä¸éœ€è¦å®‰è£…ä»»ä½•é¢å¤–ç±»çš„æƒ…å†µä¸‹è¢«ç”¨äºä»»ä½•åœ°æ–¹ã€‚è¿™åŒ…æ‹¬ Servletã€JSPã€RMIã€EJBâ€™sã€æ™®é€šçš„ Beans å’Œç±»ï¼Œä»¥åŠç‹¬ç«‹çš„åº”ç”¨ç¨‹åºã€‚</li><li>ä¸åœ¨æ–­ç‚¹å¤„åœæ­¢ä¸åŒï¼Œå†™å…¥åˆ° System.out ä¸ä¼šå¹²æ‰°åˆ°åº”ç”¨ç¨‹åºçš„æ­£å¸¸æ‰§è¡Œæµç¨‹ï¼Œè¿™ä½¿å¾—å®ƒåœ¨æ—¶åºæ˜¯è‡³å…³é‡è¦çš„æ—¶å€™æ˜¾å¾—å°¤ä¸ºæœ‰ä»·å€¼ã€‚</li></ul><p>ä¸‹é¢æ˜¯ä½¿ç”¨ System.out.println() çš„è¯­æ³•ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println("Debugging message");</span><br></pre></td></tr></tbody></table></figure><p>é€šè¿‡ä¸Šé¢çš„è¯­æ³•ç”Ÿæˆçš„æ‰€æœ‰æ¶ˆæ¯å°†è¢«è®°å½•åœ¨ Web æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p><h3 id="ğŸæ¶ˆæ¯æ—¥å¿—"><a href="#ğŸæ¶ˆæ¯æ—¥å¿—" class="headerlink" title="ğŸæ¶ˆæ¯æ—¥å¿—"></a>ğŸæ¶ˆæ¯æ—¥å¿—</h3><p>ä½¿ç”¨é€‚å½“çš„æ—¥å¿—è®°å½•æ–¹æ³•æ¥è®°å½•æ‰€æœ‰è°ƒè¯•ã€è­¦å‘Šå’Œé”™è¯¯æ¶ˆæ¯ï¼Œè¿™æ˜¯éå¸¸å¥½çš„æƒ³æ³•ï¼Œæ¨èä½¿ç”¨ <a href="https://logging.apache.org/log4j/2.0/download.html" target="_blank" rel="noopener">log4J</a> æ¥è®°å½•æ‰€æœ‰çš„æ¶ˆæ¯ã€‚</p><p>Servlet API è¿˜æä¾›äº†ä¸€ä¸ªç®€å•çš„è¾“å‡ºä¿¡æ¯çš„æ–¹å¼ï¼Œä½¿ç”¨ log() æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextLog</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, </span></span></span><br><span class="line"><span class="function"><span class="params">      HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException,</span></span><br><span class="line"><span class="function">         java.io.IOException </span>{</span><br><span class="line">    </span><br><span class="line">      String par = request.getParameter(<span class="string">"par1"</span>);</span><br><span class="line">      <span class="comment">// è°ƒç”¨ä¸¤ä¸ª ServletContext.log æ–¹æ³•</span></span><br><span class="line">      ServletContext context = getServletContext( );</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (par == <span class="keyword">null</span> || par.equals(<span class="string">""</span>))</span><br><span class="line">      <span class="comment">// é€šè¿‡ Throwable å‚æ•°è®°å½•ç‰ˆæœ¬</span></span><br><span class="line">      context.log(<span class="string">"No message received:"</span>,</span><br><span class="line">          <span class="keyword">new</span> IllegalStateException(<span class="string">"Missing parameter"</span>));</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">          context.log(<span class="string">"Here is the visitor's message: "</span> + par);</span><br><span class="line">      </span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      java.io.PrintWriter out = response.getWriter( );</span><br><span class="line">      String title = <span class="string">"Context Log"</span>;</span><br><span class="line">      String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">        <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h2 align=\"center\"&gt;Messages sent&lt;/h2&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    } <span class="comment">//doGet</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ServletContext æŠŠå®ƒçš„æ–‡æœ¬æ¶ˆæ¯è®°å½•åˆ° Servlet å®¹å™¨çš„æ—¥å¿—æ–‡ä»¶ä¸­ã€‚å¯¹äº Tomcatï¼Œè¿™äº›æ—¥å¿—å¯ä»¥åœ¨ <tomcat-installation-directory>/logs ç›®å½•ä¸­æ‰¾åˆ°ã€‚</tomcat-installation-directory></p><p>è¿™äº›æ—¥å¿—æ–‡ä»¶ç¡®å®å¯¹æ–°å‡ºç°çš„é”™è¯¯æˆ–é—®é¢˜çš„é¢‘ç‡ç»™å‡ºæŒ‡ç¤ºã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œå»ºè®®åœ¨é€šå¸¸ä¸ä¼šå‘ç”Ÿçš„å¼‚å¸¸çš„ catch å­å¥ä¸­ä½¿ç”¨ log() å‡½æ•°ã€‚</p><h3 id="ğŸä½¿ç”¨-JDB-è°ƒè¯•å™¨"><a href="#ğŸä½¿ç”¨-JDB-è°ƒè¯•å™¨" class="headerlink" title="ğŸä½¿ç”¨ JDB è°ƒè¯•å™¨"></a>ğŸä½¿ç”¨ JDB è°ƒè¯•å™¨</h3><p>å¯ä»¥ä½¿ç”¨è°ƒè¯• applet æˆ–åº”ç”¨ç¨‹åºçš„ jdb å‘½ä»¤æ¥è°ƒè¯• Servletã€‚</p><p>ä¸ºäº†è°ƒè¯•ä¸€ä¸ª Servletï¼Œæˆ‘ä»¬å¯ä»¥è°ƒè¯• sun.servlet.http.HttpServerï¼Œç„¶åæŠŠå®ƒçœ‹æˆæ˜¯ HttpServer æ‰§è¡Œ Servlet æ¥å“åº”æµè§ˆå™¨ç«¯çš„ HTTP è¯·æ±‚ã€‚è¿™ä¸è°ƒè¯• applet å°ç¨‹åºéå¸¸ç›¸ä¼¼ã€‚ä¸è°ƒè¯• applet ä¸åŒçš„æ˜¯ï¼Œå®é™…è¢«è°ƒè¯•çš„ç¨‹åºæ˜¯ sun.applet.AppletViewerã€‚</p><p>å¤§å¤šæ•°è°ƒè¯•å™¨ä¼šè‡ªåŠ¨éšè—å¦‚ä½•è°ƒè¯• applet çš„ç»†èŠ‚ã€‚åŒæ ·çš„ï¼Œå¯¹äº servletï¼Œæ‚¨å¿…é¡»å¸®è°ƒè¯•å™¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>è®¾ç½®æ‚¨çš„è°ƒè¯•å™¨çš„ç±»è·¯å¾„ classpathï¼Œä»¥ä¾¿å®ƒå¯ä»¥æ‰¾åˆ° sun.servlet.http.Http-Server å’Œç›¸å…³çš„ç±»ã€‚</li><li>è®¾ç½®æ‚¨çš„è°ƒè¯•å™¨çš„ç±»è·¯å¾„ classpathï¼Œä»¥ä¾¿å®ƒå¯ä»¥æ‰¾åˆ°æ‚¨çš„ servlet å’Œæ”¯æŒçš„ç±»ï¼Œé€šå¸¸æ˜¯åœ¨ server_root/servlets å’Œ server_root/classes ä¸­ã€‚</li></ul><p>æ‚¨é€šå¸¸ä¸ä¼šå¸Œæœ› server_root/servlets åœ¨æ‚¨çš„ classpath ä¸­ï¼Œå› ä¸ºå®ƒä¼šç¦ç”¨ servlet çš„é‡æ–°åŠ è½½ã€‚ä½†æ˜¯è¿™ç§åŒ…å«è§„åˆ™å¯¹äºè°ƒè¯•æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚å®ƒå…è®¸æ‚¨çš„è°ƒè¯•å™¨åœ¨ HttpServer ä¸­çš„è‡ªå®šä¹‰ Servlet åŠ è½½å™¨åŠ è½½ Servlet ä¹‹å‰åœ¨ Servlet ä¸­è®¾ç½®æ–­ç‚¹ã€‚</p><p>å¦‚æœæ‚¨å·²ç»è®¾ç½®äº†æ­£ç¡®çš„ç±»è·¯å¾„ classpathï¼Œå°±å¯ä»¥å¼€å§‹è°ƒè¯• sun.servlet.http.HttpServerã€‚å¯ä»¥åœ¨æ‚¨æƒ³è¦è°ƒè¯•çš„ Servlet ä»£ç ä¸­è®¾ç½®æ–­ç‚¹ï¼Œç„¶åé€šè¿‡ Web æµè§ˆå™¨ä½¿ç”¨ç»™å®šçš„ Servletï¼ˆ<a href="http://localhost:8080/servlet/ServletToDebugï¼‰å‘" target="_blank" rel="noopener">http://localhost:8080/servlet/ServletToDebugï¼‰å‘</a> HttpServer å‘å‡ºè¯·æ±‚ã€‚æ‚¨ä¼šçœ‹åˆ°ç¨‹åºæ‰§è¡Œåˆ°æ–­ç‚¹å¤„ä¼šåœæ­¢ã€‚</p><h3 id="ğŸä½¿ç”¨æ³¨é‡Š"><a href="#ğŸä½¿ç”¨æ³¨é‡Š" class="headerlink" title="ğŸä½¿ç”¨æ³¨é‡Š"></a>ğŸä½¿ç”¨æ³¨é‡Š</h3><p>ä»£ç ä¸­çš„æ³¨é‡Šæœ‰åŠ©äºä»¥å„ç§æ–¹å¼è¿›è¡Œè°ƒè¯•ã€‚æ³¨é‡Šå¯ç”¨äºè°ƒè¯•è¿‡ç¨‹çš„å¾ˆå¤šå…¶ä»–æ–¹å¼ä¸­ã€‚</p><p>è¯¥ Servlet ä½¿ç”¨ Java æ³¨é‡Šå’Œå•è¡Œæ³¨é‡Šï¼ˆ//â€¦ï¼‰ï¼Œå¤šè¡Œæ³¨é‡Šï¼ˆ/* â€¦*/ï¼‰å¯ç”¨äºæš‚æ—¶ç§»é™¤éƒ¨åˆ† Java ä»£ç ã€‚å¦‚æœ bug æ¶ˆå¤±ï¼Œä»”ç»†çœ‹çœ‹æ‚¨åˆšæ‰æ³¨é‡Šçš„ä»£ç å¹¶æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚</p><h3 id="ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯"><a href="#ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯" class="headerlink" title="ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯"></a>ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯</h3><p>æœ‰æ—¶ï¼Œå½“ä¸€ä¸ª Servlet å¹¶æ²¡æœ‰åƒé¢„æœŸé‚£æ ·æ—¶ï¼ŒæŸ¥çœ‹åŸå§‹çš„ HTTP è¯·æ±‚å’Œå“åº”æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚å¦‚æœæ‚¨ç†Ÿæ‚‰ HTTP ç»“æ„ï¼Œæ‚¨å¯ä»¥é˜…è¯»è¯·æ±‚å’Œå“åº”ï¼Œçœ‹çœ‹è¿™äº›å¤´ä¿¡æ¯ç©¶ç«Ÿæ˜¯ä»€ä¹ˆã€‚</p><h3 id="ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§"><a href="#ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§" class="headerlink" title="ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§"></a>ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§</h3><p>ä¸‹é¢åˆ—å‡ºäº†ä¸€äº› Servlet è°ƒè¯•çš„æŠ€å·§ï¼š</p><ul><li>è¯·æ³¨æ„ï¼Œserver_root/classes ä¸ä¼šé‡è½½ï¼Œè€Œ server_root/servlets å¯èƒ½ä¼šã€‚</li><li>è¦æ±‚æµè§ˆå™¨æ˜¾ç¤ºå®ƒæ‰€æ˜¾ç¤ºçš„é¡µé¢çš„åŸå§‹å†…å®¹ã€‚è¿™æœ‰åŠ©äºè¯†åˆ«æ ¼å¼çš„é—®é¢˜ã€‚å®ƒé€šå¸¸æ˜¯â€è§†å›¾â€èœå•ä¸‹çš„ä¸€ä¸ªé€‰é¡¹ã€‚</li><li>é€šè¿‡å¼ºåˆ¶æ‰§è¡Œå®Œå…¨é‡æ–°åŠ è½½é¡µé¢æ¥ç¡®ä¿æµè§ˆå™¨è¿˜æ²¡æœ‰ç¼“å­˜å‰ä¸€ä¸ªè¯·æ±‚çš„è¾“å‡ºã€‚åœ¨ Netscape Navigator ä¸­ï¼Œè¯·ä½¿ç”¨ Shift-Reloadï¼Œåœ¨ Internet Explorer ä¸­ï¼Œè¯·ä½¿ç”¨ Shift-Refreshã€‚</li><li>è¯·ç¡®è®¤ servlet çš„ init() æ–¹æ³•æ¥å—ä¸€ä¸ª ServletConfig å‚æ•°ï¼Œå¹¶è°ƒç”¨ super.init(config)ã€‚</li></ul><h2 id="ğŸŒ¸servletå›½é™…åŒ–"><a href="#ğŸŒ¸servletå›½é™…åŒ–" class="headerlink" title="ğŸŒ¸servletå›½é™…åŒ–"></a>ğŸŒ¸servletå›½é™…åŒ–</h2><p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ä¸‰ä¸ªé‡è¦æœ¯è¯­ï¼š</p><ul><li><strong>å›½é™…åŒ–ï¼ˆi18nï¼‰ï¼š</strong>è¿™æ„å‘³ç€ä¸€ä¸ªç½‘ç«™æä¾›äº†ä¸åŒç‰ˆæœ¬çš„ç¿»è¯‘æˆè®¿é—®è€…çš„è¯­è¨€æˆ–å›½ç±çš„å†…å®¹ã€‚</li><li><strong>æœ¬åœ°åŒ–ï¼ˆl10nï¼‰ï¼š</strong>è¿™æ„å‘³ç€å‘ç½‘ç«™æ·»åŠ èµ„æºï¼Œä»¥ä½¿å…¶é€‚åº”ç‰¹å®šçš„åœ°ç†æˆ–æ–‡åŒ–åŒºåŸŸï¼Œä¾‹å¦‚ç½‘ç«™ç¿»è¯‘æˆå°åœ°æ–‡ï¼ˆHindiï¼‰ã€‚</li><li><strong>åŒºåŸŸè®¾ç½®ï¼ˆlocaleï¼‰ï¼š</strong>è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡åŒ–æˆ–åœ°ç†åŒºåŸŸã€‚å®ƒé€šå¸¸æŒ‡è¯­è¨€ç¬¦å·åè·Ÿä¸€ä¸ªä¸‹åˆ’çº¿å’Œä¸€ä¸ªå›½å®¶ç¬¦å·ã€‚ä¾‹å¦‚ â€œen_USâ€ è¡¨ç¤ºé’ˆå¯¹ US çš„è‹±è¯­åŒºåŸŸè®¾ç½®ã€‚</li></ul><p>å½“å»ºç«‹ä¸€ä¸ªå…¨çƒæ€§çš„ç½‘ç«™æ—¶æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚æœ¬æ•™ç¨‹ä¸ä¼šè®²è§£è¿™äº›æ³¨æ„äº‹é¡¹çš„å®Œæ•´ç»†èŠ‚ï¼Œä½†å®ƒä¼šé€šè¿‡ä¸€ä¸ªå¾ˆå¥½çš„å®ä¾‹å‘æ‚¨æ¼”ç¤ºå¦‚ä½•é€šè¿‡å·®å¼‚åŒ–å®šä½ï¼ˆå³åŒºåŸŸè®¾ç½®ï¼‰æ¥è®©ç½‘é¡µä»¥ä¸åŒè¯­è¨€å‘ˆç°ã€‚</p><p>Servlet å¯ä»¥æ ¹æ®è¯·æ±‚è€…çš„åŒºåŸŸè®¾ç½®æ‹¾å–ç›¸åº”ç‰ˆæœ¬çš„ç½‘ç«™ï¼Œå¹¶æ ¹æ®å½“åœ°çš„è¯­è¨€ã€æ–‡åŒ–å’Œéœ€æ±‚æä¾›ç›¸åº”çš„ç½‘ç«™ç‰ˆæœ¬ã€‚ä»¥ä¸‹æ˜¯ request å¯¹è±¡ä¸­è¿”å› Locale å¯¹è±¡çš„æ–¹æ³•ã€‚</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.Locale request.getLocale()</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®"><a href="#ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®" class="headerlink" title="ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®"></a>ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®</h3><p>ä¸‹é¢åˆ—å‡ºäº†é‡è¦çš„åŒºåŸŸè®¾ç½®æ–¹æ³•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æ£€æµ‹è¯·æ±‚è€…çš„åœ°ç†ä½ç½®ã€è¯­è¨€å’ŒåŒºåŸŸè®¾ç½®ã€‚ä¸‹é¢æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¾ç¤ºäº†è¯·æ±‚è€…æµè§ˆå™¨ä¸­è®¾ç½®çš„å›½å®¶åç§°å’Œè¯­è¨€åç§°ã€‚</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>String getCountry()</strong> è¯¥æ–¹æ³•ä»¥ 2 ä¸ªå¤§å†™å­—æ¯å½¢å¼çš„ ISO 3166 æ ¼å¼è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„å›½å®¶/åœ°åŒºä»£ç ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>String getDisplayCountry()</strong> è¯¥æ–¹æ³•è¿”å›é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„åŒºåŸŸè®¾ç½®çš„å›½å®¶çš„åç§°ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>String getLanguage()</strong> è¯¥æ–¹æ³•ä»¥å°å†™å­—æ¯å½¢å¼çš„ ISO 639 æ ¼å¼è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„è¯­è¨€ä»£ç ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>String getDisplayLanguage()</strong> è¯¥æ–¹æ³•è¿”å›é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„åŒºåŸŸè®¾ç½®çš„è¯­è¨€çš„åç§°ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>String getISO3Country()</strong> è¯¥æ–¹æ³•è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„å›½å®¶çš„ä¸‰ä¸ªå­—æ¯ç¼©å†™ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>String getISO3Language()</strong> è¯¥æ–¹æ³•è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„è¯­è¨€çš„ä¸‰ä¸ªå­—æ¯çš„ç¼©å†™ã€‚</td></tr></tbody></table><h3 id="ğŸå®ä¾‹-4"><a href="#ğŸå®ä¾‹-4" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetLocale</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span></span><br><span class="line">      Locale locale = request.getLocale();</span><br><span class="line">      String language = locale.getLanguage();</span><br><span class="line">      String country = locale.getCountry();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">      String title = <span class="string">"æ£€æµ‹åŒºåŸŸè®¾ç½®"</span>;</span><br><span class="line">      String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">        <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + language + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + country + <span class="string">"&lt;/h2&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸè¯­è¨€è®¾ç½®"><a href="#ğŸè¯­è¨€è®¾ç½®" class="headerlink" title="ğŸè¯­è¨€è®¾ç½®"></a>ğŸè¯­è¨€è®¾ç½®</h3><p>Servlet å¯ä»¥è¾“å‡ºä»¥è¥¿æ¬§è¯­è¨€ï¼ˆå¦‚è‹±è¯­ã€è¥¿ç­ç‰™è¯­ã€å¾·è¯­ã€æ³•è¯­ã€æ„å¤§åˆ©è¯­ã€è·å…°è¯­ç­‰ï¼‰ç¼–å†™çš„é¡µé¢ã€‚åœ¨è¿™é‡Œï¼Œä¸ºäº†èƒ½æ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰çš„å­—ç¬¦ï¼Œè®¾ç½® Content-Language å¤´æ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>ç¬¬äºŒç‚¹æ˜¯ä½¿ç”¨ HTML å®ä½“æ˜¾ç¤ºæ‰€æœ‰çš„ç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚ï¼Œâ€Ã±â€ è¡¨ç¤º â€œÃ±â€ï¼Œâ€Â¡â€ è¡¨ç¤º â€œÂ¡â€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DisplaySpanish</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">// è®¾ç½®è¥¿ç­ç‰™è¯­è¨€ä»£ç </span></span><br><span class="line">    response.setHeader(<span class="string">"Content-Language"</span>, <span class="string">"es"</span>);</span><br><span class="line"></span><br><span class="line">    String title = <span class="string">"En Espa&amp;ntilde;ol"</span>;</span><br><span class="line">    String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">     out.println(docType +</span><br><span class="line">     <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;h1&gt;"</span> + <span class="string">"En Espa&amp;ntilde;ol:"</span> + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;h1&gt;"</span> + <span class="string">"&amp;iexcl;Hola Mundo!"</span> + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ"><a href="#ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ" class="headerlink" title="ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ"></a>ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ</h3><p>å¯ä»¥ä½¿ç”¨ java.text.DateFormat ç±»åŠå…¶é™æ€æ–¹æ³• getDateTimeInstance() æ¥æ ¼å¼åŒ–ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸå’Œæ—¶é—´ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ ¼å¼åŒ–ç‰¹å®šäºæŸä¸ªç»™å®šçš„åŒºåŸŸè®¾ç½®çš„æ—¥æœŸï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.text.DateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateLocale</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span></span><br><span class="line">    Locale locale = request.getLocale( );</span><br><span class="line">    String date = DateFormat.getDateTimeInstance(</span><br><span class="line">                                  DateFormat.FULL, </span><br><span class="line">                                  DateFormat.SHORT, </span><br><span class="line">                                  locale).format(<span class="keyword">new</span> Date( ));</span><br><span class="line"></span><br><span class="line">    String title = <span class="string">"ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ"</span>;</span><br><span class="line">    String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">      <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + date + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸"><a href="#ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸" class="headerlink" title="ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸"></a>ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸</h3><p>å¯ä»¥ä½¿ç”¨ java.text.NumberFormat ç±»åŠå…¶é™æ€æ–¹æ³• getCurrencyInstance() æ¥æ ¼å¼åŒ–æ•°å­—ï¼ˆæ¯”å¦‚ long ç±»å‹æˆ– double ç±»å‹ï¼‰ä¸ºç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ ¼å¼åŒ–ç‰¹å®šäºæŸä¸ªç»™å®šçš„åŒºåŸŸè®¾ç½®çš„è´§å¸ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">javaimport java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrencyLocale</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span></span><br><span class="line">    Locale locale = request.getLocale( );</span><br><span class="line">    NumberFormat nft = NumberFormat.getCurrencyInstance(locale);</span><br><span class="line">    String formattedCurr = nft.format(<span class="number">1000000</span>);</span><br><span class="line"></span><br><span class="line">    String title = <span class="string">"ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸"</span>;</span><br><span class="line">    String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">      <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + formattedCurr + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”"><a href="#ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”" class="headerlink" title="ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”"></a>ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”</h3><p>å¯ä»¥ä½¿ç”¨ java.text.NumberFormat ç±»åŠå…¶é™æ€æ–¹æ³• getPercentInstance() æ¥æ ¼å¼åŒ–ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ ¼å¼åŒ–ç‰¹å®šäºæŸä¸ªç»™å®šçš„åŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PercentageLocale</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span></span><br><span class="line">    Locale locale = request.getLocale( );</span><br><span class="line">    NumberFormat nft = NumberFormat.getPercentInstance(locale);</span><br><span class="line">    String formattedPerc = nft.format(<span class="number">0.51</span>);</span><br><span class="line"></span><br><span class="line">    String title = <span class="string">"ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”"</span>;</span><br><span class="line">    String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">      <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + formattedPerc + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt; java Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚ä½¿ç”¨ Servletï¼Œæ‚¨å¯ä»¥æ”¶é›†æ¥è‡ªç½‘é¡µè¡¨å•çš„ç”¨æˆ·è¾“å…¥ï¼Œå‘ˆç°æ¥è‡ªæ•°æ®åº“æˆ–è€…å…¶ä»–æºçš„è®°å½•ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºç½‘é¡µã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="åç«¯" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="java" scheme="https://liudufu.github.io/tags/java/"/>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://liudufu.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Servlet" scheme="https://liudufu.github.io/tags/Servlet/"/>
    
  </entry>
  
  <entry>
    <title>JPAä¸JDBCçš„åŒºåˆ«å’ŒåŸºæœ¬ç”¨æ³•</title>
    <link href="https://liudufu.github.io/The_difference_and_basic_usage_of_JPA_and_JDBC/"/>
    <id>https://liudufu.github.io/The_difference_and_basic_usage_of_JPA_and_JDBC/</id>
    <published>2020-12-08T10:43:05.000Z</published>
    <updated>2020-12-08T10:44:37.057Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>JPAï¼ˆJava Persistence APIï¼‰ç”¨äºå¯¹è±¡æŒä¹…åŒ–çš„ APIï¼Œæ˜¯ Java EE 5.0 å¹³å°æ ‡å‡†çš„ ORM è§„èŒƒï¼Œä½¿å¾—åº”ç”¨ç¨‹åºä»¥ç»Ÿä¸€çš„æ–¹å¼è®¿é—®æŒä¹…å±‚ã€‚</p></blockquote><a id="more"></a><h1 id="JPA-ä¸-JDBC-çš„åŒºåˆ«å’ŒåŸºæœ¬ç”¨æ³•"><a href="#JPA-ä¸-JDBC-çš„åŒºåˆ«å’ŒåŸºæœ¬ç”¨æ³•" class="headerlink" title="JPA ä¸ JDBC çš„åŒºåˆ«å’ŒåŸºæœ¬ç”¨æ³•"></a>JPA ä¸ JDBC çš„åŒºåˆ«å’ŒåŸºæœ¬ç”¨æ³•</h1><p><a href="https://www.cnblogs.com/yunche/p/10279324.html" target="_blank" rel="noopener">åŸæ–‡åœ°å€</a></p><h2 id="JPA-æ¦‚å¿µ"><a href="#JPA-æ¦‚å¿µ" class="headerlink" title="JPA æ¦‚å¿µ"></a>JPA æ¦‚å¿µ</h2><p>JPAï¼ˆJava Persistence APIï¼‰ç”¨äºå¯¹è±¡æŒä¹…åŒ–çš„ APIï¼Œæ˜¯ Java EE 5.0 å¹³å°æ ‡å‡†çš„ ORM è§„èŒƒï¼Œä½¿å¾—åº”ç”¨ç¨‹åºä»¥ç»Ÿä¸€çš„æ–¹å¼è®¿é—®æŒä¹…å±‚ã€‚</p><h3 id="ä¸-JDBC-çš„å¯¹æ¯”"><a href="#ä¸-JDBC-çš„å¯¹æ¯”" class="headerlink" title="ä¸ JDBC çš„å¯¹æ¯”"></a>ä¸ JDBC çš„å¯¹æ¯”</h3><p>JDBC ä¹Ÿæ˜¯ä¸€ç§è§„èŒƒå’Œæ¥å£ï¼Œä¸è¿‡ JDBC æ˜¯é¢å‘ SQL çš„ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒç¹çã€‚æ‰€ä»¥å°±æœ‰äº† ORM æ¡†æ¶ï¼Œå»ºç«‹äº† Java å¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥æ“ä½œå¯¹è±¡æ¥å®ç°æŒä¹…åŒ–ï¼Œç®€åŒ–äº†æ“ä½œçš„ç¹æ‚åº¦ã€‚è€Œ JPA å°±æ˜¯ ORM æ¡†æ¶çš„è§„èŒƒï¼Œå€¼å¾—ä¸€æçš„æ˜¯ Hibernate æ˜¯ç¬¦åˆ JPA è§„èŒƒçš„ï¼Œè€Œ MyBatis å´ä¸ç¬¦åˆï¼Œå› ä¸º MyBatis è¿˜æ˜¯éœ€è¦å†™ SQL çš„ã€‚</p><p>JDBC ç¤ºæ„å›¾ï¼š</p><p><img src="https://www.cnblogs.com/images/cnblogs_com/yunche/1384050/o_jdbc.png" alt="img"></p><p>JPA ç¤ºæ„å›¾ï¼š</p><p><img src="https://www.cnblogs.com/images/cnblogs_com/yunche/1384050/o_JPA.png" alt="img"></p><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>åœ¨ IDEA ä¸‹åˆ›å»ºä¸€ä¸ª JPA é¡¹ç›®ï¼Œå¹¶å®ç°åŸºæœ¬çš„ CRUDã€‚</p><p>1ã€åˆ›å»ºä¸€ä¸ª JavaEE Persistence é¡¹ç›®ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤º</p><p><img src="https://www.cnblogs.com/images/cnblogs_com/yunche/1384050/o_1.png" alt="img"></p><p>é‡‡ç”¨ Hibernate å®ç° JPAã€‚</p><p>2ã€å¯¼å…¥ç›¸åº”çš„ Maven ä¾èµ–</p><p><img src="https://www.cnblogs.com/images/cnblogs_com/yunche/1384050/o_2.1.png" alt="img"></p><p>æ·»åŠ  Maven æ”¯æŒã€‚</p><p>pom.xml:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>groupId<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jpa-helloworld<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-entitymanager<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.4.0.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>3ã€é…ç½®æ•°æ®åº“ï¼ˆMySQL 8ï¼‰ç›¸å…³å†…å®¹ persistence.xml</p><p>æ³¨æ„æ­¤æ–‡ä»¶è¦ä½äºç±»è·¯å¾„ä¸‹ï¼Œè¿™é‡Œæ”¾åœ¨ resources/META-INF ä¸‹ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">persistence</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/persistence"</span> <span class="attr">version</span>=<span class="string">"2.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">persistence-unit</span> <span class="attr">name</span>=<span class="string">"jpa-1"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ˜¯ PersistenceProvider æ¥å£çš„å®ç°ç±»--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">provider</span>&gt;</span>org.hibernate.jpa.HibernatePersistenceProvider<span class="tag">&lt;/<span class="name">provider</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--æ·»åŠ æŒä¹…åŒ–ç±»--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">class</span>&gt;</span>com.yunche.helloworld.Customer<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/jpa?useSSL=false<span class="symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.driver_class"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.password"</span> <span class="attr">value</span>=<span class="string">"123456"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.archive.autodetection"</span> <span class="attr">value</span>=<span class="string">"class"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.show_sql"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.format_sql"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ³¨æ„è¿™ä¸ªå±æ€§ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶å‰é¢æ²¡æœ‰ hibernateï¼Œè¦åŠ ä¸Š hibernate --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.hbm2ddl.auto"</span> <span class="attr">value</span>=<span class="string">"update"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä½¿ç”¨ MySQL8Dialect --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.dialect"</span> <span class="attr">value</span>=<span class="string">"org.hibernate.dialect.MySQL8Dialect"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">persistence-unit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">persistence</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>4ã€æ–°å»ºä¸€ä¸ªæŒä¹…åŒ–å¯¹è±¡ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yunche.helloworld;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: Customer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: yunche</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019/01/16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Entity</span>(name = <span class="string">"customers"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"last_name"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLastName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> lastName;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.lastName = lastName;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¹¶åœ¨ persistence.xml ä¸­çš„ persistence-unit èŠ‚ç‚¹ä¸‹åŠ å…¥ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--æ·»åŠ æŒä¹…åŒ–ç±»--&gt;</span><br><span class="line">&lt;!--åæ¥å‘ç°ï¼šä¼¼ä¹å¯ä»¥ä¸åŠ --&gt;</span><br><span class="line">&lt;class&gt;com.yunche.helloworld.Customer&lt;/class&gt;</span><br></pre></td></tr></tbody></table></figure><p>5ã€Main ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yunche.helloworld;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.EntityManager;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.EntityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.EntityTransaction;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Persistence;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: Main</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: yunche</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019/01/16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="comment">//persistence.xml ä¸­çš„ persistence-unit</span></span><br><span class="line">        String persistenceUnitName = <span class="string">"jpa-1"</span>;</span><br><span class="line">        <span class="comment">//1ã€åˆ›å»º EntityManagerFactory</span></span><br><span class="line">        EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(persistenceUnitName);</span><br><span class="line">        <span class="comment">//2ã€åˆ›å»º EntityManager</span></span><br><span class="line">        EntityManager entityManager = entityManagerFactory.createEntityManager();</span><br><span class="line">        <span class="comment">//3ã€å¼€å¯äº‹åŠ¡</span></span><br><span class="line">        EntityTransaction transaction = entityManager.getTransaction();</span><br><span class="line">        transaction.begin();</span><br><span class="line">        <span class="comment">//4ã€è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ</span></span><br><span class="line">        Customer customer = <span class="keyword">new</span> Customer();</span><br><span class="line">        customer.setAge(<span class="number">13</span>);</span><br><span class="line">        customer.setLastName(<span class="string">"li"</span>);</span><br><span class="line">        customer.setEmail(<span class="string">"123@qq.com"</span>);</span><br><span class="line"></span><br><span class="line">        entityManager.persist(customer);</span><br><span class="line">        <span class="comment">//5ã€æäº¤äº‹åŠ¡</span></span><br><span class="line">        transaction.commit();</span><br><span class="line">        <span class="comment">//6ã€å…³é—­ EntityManager</span></span><br><span class="line">        entityManager.close();</span><br><span class="line">        <span class="comment">//7ã€å…³é—­ EntityManagerFactory</span></span><br><span class="line">        entityManagerFactory.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>6ã€ç»“æœ</p><p><img src="https://www.cnblogs.com/images/cnblogs_com/yunche/1384050/o_output.png" alt="img"></p><p><img src="https://www.cnblogs.com/images/cnblogs_com/yunche/1384050/o_result.png" alt="img"></p><p>7ã€æ³¨æ„äº‹é¡¹<br>æˆ‘åæ¥å‘ç°äº†ä¸€ç‚¹é—®é¢˜ï¼Œå…³äºåŒ… javax.persistence-api çš„ï¼Œæˆ‘åˆ›å»ºé¡¹ç›®çš„æ—¶å€™é€‰ä¸­äº† persistence 2.0 , IDEA è‡ªåŠ¨å¯¼å…¥äº† javax.persistence-api-2.0.jarï¼Œè€Œ maven ä¸‹çš„ hibernate-entitymanager ä¾èµ–å«æœ‰ javax.persistence-api-2.2.jar ï¼Œæ‰€ä»¥ jar åŒ…é‡å¤äº†ï¼Œå¹¶ä¸”æˆ‘å‘ç°2.0ç‰ˆæœ¬çš„æœ‰äº›æ–¹æ³•æ²¡æœ‰ï¼Œæ‰€ä»¥è¿˜æ˜¯å°†2.0ç‰ˆæœ¬çš„jaråŒ…åˆ é™¤ï¼Œç”¨ 2.2 ç‰ˆæœ¬çš„ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;JPAï¼ˆJava Persistence APIï¼‰ç”¨äºå¯¹è±¡æŒä¹…åŒ–çš„ APIï¼Œæ˜¯ Java EE 5.0 å¹³å°æ ‡å‡†çš„ ORM è§„èŒƒï¼Œä½¿å¾—åº”ç”¨ç¨‹åºä»¥ç»Ÿä¸€çš„æ–¹å¼è®¿é—®æŒä¹…å±‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="åç«¯" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="java" scheme="https://liudufu.github.io/tags/java/"/>
    
      <category term="JPA" scheme="https://liudufu.github.io/tags/JPA/"/>
    
      <category term="JDBC" scheme="https://liudufu.github.io/tags/JDBC/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºæ•°æ®åº“å’Œmybatisçš„mapperå…³ç³»</title>
    <link href="https://liudufu.github.io/Mapper_relation_of_mybatis/"/>
    <id>https://liudufu.github.io/Mapper_relation_of_mybatis/</id>
    <published>2020-12-08T10:39:42.000Z</published>
    <updated>2020-12-08T10:42:24.493Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ POJOs(Plain Ordinary Java Object,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p></blockquote><a id="more"></a><h1 id="å…³äºæ•°æ®åº“mybatisçš„mapperå…³ç³»"><a href="#å…³äºæ•°æ®åº“mybatisçš„mapperå…³ç³»" class="headerlink" title="å…³äºæ•°æ®åº“mybatisçš„mapperå…³ç³»"></a>å…³äºæ•°æ®åº“mybatisçš„mapperå…³ç³»</h1><p><a href="https://blog.csdn.net/weixin_42603009/article/details/91981037" target="_blank" rel="noopener">åŸæ–‡åœ°å€</a></p><p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹å…³äºæ•°æ®åº“ï¼Œæ•°æ®åº“å¯¹åº”å®ä½“å„ç§å¤æ‚æƒ…å†µå…³ç³»æ˜ å°„ã€‚<br>æœ€åŸºæœ¬çš„å®ä½“ï¼š<br>æ¯”å¦‚ï¼šï¼ˆè¿™é‡Œé¢ä¸æ¶‰åŠå¤æ‚map,list,setç­‰ï¼‰</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestUser</span> </span>{</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer testUserNo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String testUserName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String testUserSex;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æ•°æ®åº“ï¼š<br><img src="https://img-blog.csdnimg.cn/20190614160536245.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>resultMapæœ€ç»ˆå°†æ•°æ®åº“æŸ¥å‡ºçš„ç»“æœï¼Œæ˜ å°„åˆ°pojoï¼ˆå®ä½“ï¼‰ä¸Š<br>typeæ˜¯æŒ‡å®šæ˜ å°„åˆ°å“ªä¸€ä¸ªå®ä½“ï¼›idæ˜¯ç›¸å¯¹åº”çš„resultMapçš„id</p><p>è¿™é‡Œæœ‰ä¸¤ç§å±æ€§ï¼Œä¸»é”®å±æ€§å’Œæ™®é€šå±æ€§<br>1,ä¸»é”®å±æ€§æ–¹å¼ï¼ˆæ˜¯ä¸»é”®ï¼‰<br>user_noæ˜¯ä¸»é”®ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;id property=<span class="string">"testUserNo"</span> column=<span class="string">"user_no"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure><p>2,æ™®é€šå±æ€§ï¼ˆå³ä¸æ˜¯ä¸»é”®ï¼‰<br>user_nameä¸æ˜¯ä¸»é”®</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;result property=<span class="string">"testUserName"</span> column=<span class="string">"user_name"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure><p>å®Œæ•´çš„mapper.xml</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC <span class="string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="string">"http://www.mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><br><span class="line">&lt;!-- namespaceæ˜¯å¯¹åº”çš„å®šä¹‰æ–¹æ³•mapperï¼Œä¼šå»æ‹¿åˆ°å¯¹åº”çš„geTestUsersæ–¹æ³•ã€‚è¿™æ ·æ‰å»ºç«‹èµ·äº†è¾“å…¥ï¼Œè¿”å›çš„å¯¹åº”çš„å…³ç³» --&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">"com.cun.mapper.TestUserMapper"</span>&gt;</span><br><span class="line">&lt;resultMap type=<span class="string">"com.cun.entity.TestUser"</span> id=<span class="string">"TestUser"</span>&gt;</span><br><span class="line">&lt;!-- propertyæ˜¯å¯¹åº”çš„å®ä½“å±æ€§ï¼Œcolumnæ˜¯å¯¹åº”çš„æ•°æ®åº“columné¡¹--&gt;</span><br><span class="line">&lt;id property=<span class="string">"testUserNo"</span> column=<span class="string">"user_no"</span>/&gt; </span><br><span class="line">&lt;result property=<span class="string">"testUserName"</span> column=<span class="string">"user_name"</span>/&gt;</span><br><span class="line">&lt;result property=<span class="string">"testUserSex"</span> column=<span class="string">"user_sex"</span>/&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=<span class="string">"geTestUsers"</span> resultMap=<span class="string">"TestUser"</span>&gt;</span><br><span class="line">    select * from test_user</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></tbody></table></figure><p>åœ¨æˆ‘ä»¬æ·±å…¥æ›´åŠ å¤æ‚æƒ…å†µå‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£mapper3.0ä¸‹å¸¸ç”¨çš„æ ‡ç­¾ã€‚æˆ‘ä»¬ä»mapperå¼€å§‹è®²èµ·ã€‚<br>mapper: æ˜¯æ€»æ ‡ç­¾ï¼Œæ‰€æœ‰æ ‡ç­¾éƒ½åŒ…å«åœ¨å†…ã€‚<br>namespaceï¼šå‘½åç©ºé—´ã€‚å¦‚æœé‡‡ç”¨çš„æ˜¯Mapperæ¥å£ä»£ç†çš„æ–¹å¼å¼€å‘ï¼ŒMapperçš„æ˜ å°„æ–‡ä»¶ä¸­namespaceå¿…é¡»ä¸ºæ¥å£çš„å…¨åï¼Œæ¯”å¦‚è¿™é‡Œnamespace=â€œcom.cun.mapper.TestUserMapperâ€ã€‚<br><img src="https://img-blog.csdnimg.cn/2019061420233673.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æœ€å¸¸è§çš„å¢åˆ æ”¹æŸ¥selectï¼Œinsertï¼Œupdateï¼Œdeleteã€‚</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">PUBLIC <span class="string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">"Mapper.EmpMapper"</span>&gt;</span><br><span class="line"><span class="comment">// CURDæ“ä½œæ ‡ç­¾</span></span><br><span class="line"><span class="comment">// æŸ¥  parameterTypeå…¥å‚ç±»å‹   resultTypeè¿”å›ç±»å‹  idæ˜¯å”¯ä¸€æ ‡è¯†ç¬¦</span></span><br><span class="line">&lt;select id="" parameterType="" resultType=""&gt; &lt;/select&gt;</span><br><span class="line">&lt;insert id="" parameterType=""&gt; &lt;/insert&gt;</span><br><span class="line">&lt;delete id="" parameterType=""&gt; &lt;/delete&gt;</span><br><span class="line">&lt;update id="" parameterType=""&gt; &lt;/update&gt;</span><br><span class="line">    <span class="comment">// ifç‰‡æ®µ</span></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></tbody></table></figure><p>æ¯ä¸€ä¸ªå…¶ä¸­çš„å†…å«æ ‡ç­¾ï¼š<br><img src="https://img-blog.csdnimg.cn/20190614212707731.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20190614212756788.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20190614212942527.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20190614213051667.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä¸‹é¢é€ä¸€ä»‹ç»å…¶ä¸­çš„Content Model(å†…å®¹æ¨¡å‹)<br>selectKey : æ ‡ç­¾è¡¨ç¤ºå­æŸ¥è¯¢ä¸­ä¸»é”®çš„æå–é—®é¢˜<br>å®ƒå…¶ä¸­çš„æ ‡è®°ï¼š<br>keyColumnè¡¨ç¤ºæŸ¥è¯¢è¯­å¥è¿”å›ç»“æœçš„åˆ—å<br>keyPropertyè¡¨ç¤ºå°†å±æ€§è®¾ç½®åˆ°æŸä¸ªåˆ—ä¸­<br>order=â€BEFOREè¡¨ç¤ºåœ¨æ’å…¥è¯­å¥ä¹‹å‰æ‰§è¡Œ<br>resultType=â€intâ€è¡¨ç¤ºè¿”å›å€¼å¾—ç±»å‹ä¸ºintç±»å‹<br><img src="https://img-blog.csdnimg.cn/20190614222555214.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>includeï¼šå¼•å…¥å®šä¹‰å·çš„å…¬å…±sql<br>è¿™é‡Œä¸å¾—ä¸çš„å¼•å…¥å¦ä¸€ä¸ªæ ‡ç­¾sql,å› ä¸ºè¿™ä¸¤è€…æ­é…ä½¿ç”¨ã€‚<br>ä¾‹å­ï¼šï¼ˆé€šå¸¸ç”¨äºæœ‰ä¸€æ®µsqlæ–‡ï¼Œå¾ˆé•¿è€Œä¸”é‡å¤å¤šæ¬¡ä½¿ç”¨ï¼Œæˆ‘ä»¬æŠŠå®ƒæŠ½è±¡å‡ºæ¥ï¼Œä¹‹åç›´æ¥å¼•ç”¨ï¼‰</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--<span class="number">1</span>ã€é¦–å…ˆå®šä¹‰ä¸€ä¸ªsqlæ ‡ç­¾ï¼Œä¸€å®šè¦å®šä¹‰å”¯ä¸€idã€‚ï¼ˆname,ageæ˜¯è¦æŸ¥è¯¢çš„å­—æ®µï¼‰--&gt;</span><br><span class="line">&lt;sql id="Base_Column_List" &gt;name,age&lt;/sql&gt;</span><br><span class="line">&lt;!--<span class="number">2</span>ã€ç„¶åé€šè¿‡idå¼•ç”¨--&gt;</span><br><span class="line">&lt;select id=<span class="string">"selectAll"</span>&gt;</span><br><span class="line">select </span><br><span class="line">&lt;include refid=<span class="string">"Base_Column_List"</span> /&gt;</span><br><span class="line">from student</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;!--è¿™ä¸ª&lt;include refid=<span class="string">"Base_Column_List"</span> /&gt;ä¼šè‡ªåŠ¨æŠŠä¸Šé¢çš„ä»£ç è´´è¿‡æ¥ã€‚--&gt;</span><br></pre></td></tr></tbody></table></figure><p>trim : ï¼ˆè¿™ä¸ªä¸å¸¸ç”¨ï¼‰<br>prefixï¼šå‰ç¼€ï¼›suffixï¼šåç¼€<br>prefixOverridesï¼šå¿½ç•¥ç¬¬ä¸€ä¸ªæŒ‡å®šåˆ†éš”ç¬¦ï¼›suffixOverridesï¼šä¼šç•¥æœ€åä¸€ä¸ªåˆ†éš”ç¬¦ã€‚</p><p>å¦‚æœidä¸ºnullæ‰§è¡Œçš„sqlè¯­å¥ä¸º:<br>select * from user where name=â€œxxxâ€ and gender=â€œxxxâ€<br>where : ä¸»è¦æ˜¯ç”¨æ¥ç®€åŒ– sql è¯­å¥ä¸­ where æ¡ä»¶åˆ¤æ–­ï¼Œè‡ªåŠ¨åœ°å¤„ç† AND/OR æ¡ä»¶ã€‚<br>ä¾‹å­ï¼šï¼ˆå¹¶è‡ªåŠ¨åœ°æŠŠé¦–ä¸ª and / or ç»™å¿½ç•¥ã€‚ï¼‰</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=<span class="string">"geTestUsers"</span> parameterType=<span class="string">"com.cun.entity.TestUser"</span> resultMap=<span class="string">"TestUser"</span>&gt;</span><br><span class="line">    select user_no,user_name,user_sex </span><br><span class="line">    from test_user </span><br><span class="line">    &lt;where&gt;</span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">"testUserNo != null"</span>&gt;</span><br><span class="line">            user_no = #{testUserNo}</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">"testUserName != null"</span>&gt;</span><br><span class="line">            and user_name = #{testUserName}</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">"testUserSex != null"</span>&gt;</span><br><span class="line">            and user_sex = #{testUserSex}</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></tbody></table></figure><p>set : ï¼ˆä¸»è¦ä½œç”¨äºupdateè¯­å¥ï¼‰æ—¶è‹¥ä½¿ç”¨ifæ ‡ç­¾ï¼Œå¦‚æœå‰é¢çš„ifæ²¡æœ‰æ‰§è¡Œï¼Œåˆ™å¯èƒ½å¯¼è‡´æœ‰å¤šä½™é€—å·çš„é”™è¯¯ã€‚ä½¿ç”¨setæ ‡ç­¾å¯ä»¥å°†åŠ¨æ€çš„é…ç½®SET å…³é”®å­—ï¼Œå’Œå‰”é™¤è¿½åŠ åˆ°æ¡ä»¶æœ«å°¾çš„ä»»ä½•ä¸ç›¸å…³çš„é€—å·ã€‚<br>ä¾‹å­ï¼šï¼ˆè¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼Œå†™å®Œéœ€è¦åŠ é€—å·ï¼‰</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id=<span class="string">"updateByPrimaryKeySelective"</span> parameterType=<span class="string">"RecruitmentConfBanner"</span>&gt;</span><br><span class="line">    UPDATE conf_banner t</span><br><span class="line">    &lt;set&gt; </span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">"bannerName != null"</span>&gt;</span><br><span class="line">            t.banner_name = #{bannerName},</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">"bannerUrl != null"</span>&gt;</span><br><span class="line">            t.banner_url = #{bannerUrl},</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">"bannerLogo != null"</span>&gt;</span><br><span class="line">            t.banner_logo = #{bannerLogo},</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/set&gt;</span><br><span class="line">    where t.banner_id = #{bannerId}</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></tbody></table></figure><p>foreach : ä¸»è¦ç”¨äºæ‰¹é‡åˆ é™¤æˆ–æ‰¹é‡æ’å…¥ã€‚<br>å®ƒçš„6ä¸ªå‚æ•°è¯´æ˜ï¼š<br>collectionï¼šè¦å¾ªç¯çš„é›†åˆ<br>indexï¼šå¾ªç¯ç´¢å¼•ï¼›<br>itemï¼šé›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆitemå’Œcollectionï¼ŒæŒ‰foreachå¾ªç¯ç†è§£ï¼‰ï¼›<br>openï¼šä»¥ä»€ä¹ˆå¼€å§‹ï¼›<br>closeï¼šä»¥ä»€ä¹ˆç»“æŸï¼›<br>separatorï¼šå¾ªç¯å†…å®¹ä¹‹é—´ä»¥ä»€ä¹ˆåˆ†éš”<br>mybatisæ¥å—çš„å‚æ•°åˆ†ä¸ºï¼šï¼ˆ1ï¼‰åŸºæœ¬ç±»å‹ï¼›ï¼ˆ2ï¼‰å¯¹è±¡ï¼›ï¼ˆ3ï¼‰Listï¼›ï¼ˆ4ï¼‰æ•°ç»„ï¼›ï¼ˆ5ï¼‰Map<br>ä¾‹å­ï¼šï¼ˆå…¥å‚ä¸ºlistï¼Œcollectionä¸ºlistï¼‰</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id=<span class="string">"deleteWorkshopByIds"</span> parameterType=<span class="string">"Integer"</span> &gt;</span><br><span class="line">update workshop set status =<span class="number">0</span></span><br><span class="line">where id in</span><br><span class="line">  &lt;foreach collection=<span class="string">"list"</span> index=<span class="string">"i"</span> item=<span class="string">"id"</span> open=<span class="string">"("</span> separator=<span class="string">","</span> close=<span class="string">")"</span>&gt;</span><br><span class="line">  #{id}</span><br><span class="line">  &lt;/foreach&gt;</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></tbody></table></figure><p>choose : æ˜¯æŒ‰é¡ºåºåˆ¤æ–­å…¶å†…éƒ¨whenæ ‡ç­¾ä¸­çš„testæ¡ä»¶å‡ºå¦æˆç«‹ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæˆç«‹ï¼Œåˆ™ choose ç»“æŸã€‚å½“ choose ä¸­æ‰€æœ‰ when çš„æ¡ä»¶éƒ½ä¸æ»¡åˆ™æ—¶ï¼Œåˆ™æ‰§è¡Œ otherwise ä¸­çš„sqlã€‚<br>ä¾‹å­ï¼š</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--  choose(åˆ¤æ–­å‚æ•°) - æŒ‰é¡ºåºå°†å®ä½“ç±» User ç¬¬ä¸€ä¸ªä¸ä¸ºç©ºçš„å±æ€§ä½œä¸ºï¼šwhereæ¡ä»¶ --&gt;  </span><br><span class="line">&lt;select id=<span class="string">"getUserList_choose"</span> resultMap=<span class="string">"resultMap_user"</span> parameterType=<span class="string">"com.yiibai.pojo.User"</span>&gt;  </span><br><span class="line">SELECT *  </span><br><span class="line">  FROM User u   </span><br><span class="line">&lt;where&gt;  </span><br><span class="line">    &lt;choose&gt;  </span><br><span class="line">        &lt;when test=<span class="string">"username !=null "</span>&gt;  </span><br><span class="line">            u.<span class="function">username LIKE <span class="title">CONCAT</span><span class="params">(CONCAT(<span class="string">'%'</span>, #{username, jdbcType=VARCHAR})</span>,'%')  </span></span><br><span class="line"><span class="function">        &lt;/when &gt;  </span></span><br><span class="line"><span class="function">        &lt;when test</span>=<span class="string">"sex != null and sex != '' "</span>&gt;  </span><br><span class="line">            AND u.sex = #{sex, jdbcType=INTEGER}  </span><br><span class="line">        &lt;/when &gt;  </span><br><span class="line">        &lt;when test=<span class="string">"birthday != null "</span>&gt;  </span><br><span class="line">            AND u.birthday = #{birthday, jdbcType=DATE}  </span><br><span class="line">        &lt;/when &gt;  </span><br><span class="line">        &lt;otherwise&gt;  </span><br><span class="line">        &lt;/otherwise&gt;  </span><br><span class="line">    &lt;/choose&gt;  </span><br><span class="line">&lt;/where&gt;</span><br></pre></td></tr></tbody></table></figure><p>æ ‡ç­¾<br>if : è¿™ä¸ªç­¾å‰é¢å·²ç»æ¶‰åŠåˆ°äº†ã€‚<br>bind : å¯ä»¥ä» OGNL è¡¨è¾¾å¼ä¸­åˆ›å»ºä¸€ä¸ªå˜é‡å¹¶å°†å…¶ç»‘å®šåˆ°ä¸Šä¸‹æ–‡</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=<span class="string">"selectBlogsLike"</span> resultType=<span class="string">"Blog"</span>&gt;</span><br><span class="line">&lt;bind name=<span class="string">"pattern"</span> value=<span class="string">"'%' + _parameter.getTitle() + '%'"</span> /&gt;</span><br><span class="line">SELECT * FROM BLOG</span><br><span class="line">WHERE title LIKE #{pattern}</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></tbody></table></figure><p>å›åˆ°åŸå…ˆçš„è¯é¢˜æ˜ å°„æ¶‰åŠå¤æ‚map,list,setç­‰ã€‚<br>ä¸€å¯¹å¤šcollection ä¾‹å­ï¼šä¸€ä¸ªç­çº§ç›¸å…³çš„å­¦ç”Ÿã€‚StudentEntityæ˜¯å­¦ç”Ÿå®ä½“ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClazzEntity</span> </span>{</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> clazzID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String clazzName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> List&lt;StudentEntity&gt; studentList;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¾‹å­ï¼š</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=<span class="string">"ClazzResultMap"</span> type=<span class="string">"com.cn.hnust.pojo.ClazzEntity"</span> &gt;</span><br><span class="line">  &lt;id column=<span class="string">"classID"</span> property=<span class="string">"clazzID"</span> jdbcType=<span class="string">"INTEGER"</span> /&gt;</span><br><span class="line"> &lt;result column=<span class="string">"className"</span> property=<span class="string">"clazzName"</span> jdbcType=<span class="string">"VARCHAR"</span> /&gt;</span><br><span class="line">&lt;collection property=<span class="string">"studentList"</span> column=<span class="string">"classID"</span> javaType=<span class="string">"ArrayList"</span> </span><br><span class="line">            ofType=<span class="string">"com.cn.hnust.pojo.StudentEntity"</span> select=<span class="string">"getStudentByClassID"</span>/&gt;</span><br><span class="line"> &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line"> &lt;resultMap id=<span class="string">"StudentResultMap"</span> type=<span class="string">"com.cn.hnust.pojo.StudentEntity"</span>&gt;  </span><br><span class="line"> &lt;id property=<span class="string">"stuID"</span> column=<span class="string">"stuID"</span> /&gt;  </span><br><span class="line">&lt;result property=<span class="string">"stuName"</span> column=<span class="string">"stuName"</span> /&gt;  </span><br><span class="line">&lt;result property=<span class="string">"stuAge"</span> column=<span class="string">"stuAge"</span> /&gt;  </span><br><span class="line">&lt;result property=<span class="string">"stuAddress"</span> column=<span class="string">"stuAddress"</span> /&gt;</span><br><span class="line">  &lt;/resultMap&gt;  </span><br><span class="line"></span><br><span class="line">&lt;select id=<span class="string">"getClassByID"</span> resultMap=<span class="string">"ClazzResultMap"</span> parameterType=<span class="string">"java.lang.Integer"</span> &gt;</span><br><span class="line">select classID,className</span><br><span class="line">from class_t</span><br><span class="line">where classID = #{clazzID}</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=<span class="string">"getStudentByClassID"</span> resultMap=<span class="string">"StudentResultMap"</span> parameterType=<span class="string">"java.lang.Integer"</span> &gt;</span><br><span class="line">select stuID,stuName,stuAge,stuAddress,classID</span><br><span class="line"> from student_t</span><br><span class="line">where classID = #{clazzID}</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></tbody></table></figure><p>ä¸€å¯¹å¤šï¼Œä¸€å¯¹ä¸€ï¼ˆassociation ï¼‰ï¼š</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap type=<span class="string">"Bill"</span> id=<span class="string">"ResultBill"</span>&gt;  </span><br><span class="line">       &lt;id property=<span class="string">"id"</span> column=<span class="string">"id"</span>/&gt;  </span><br><span class="line">       &lt;result property=<span class="string">"dh"</span> column=<span class="string">"dh"</span>  /&gt;          </span><br><span class="line">       &lt;result property=<span class="string">"rq"</span> column=<span class="string">"rq"</span>/&gt;  </span><br><span class="line">       &lt;association property=<span class="string">"author"</span>  javaType=<span class="string">"Author"</span>  &gt;  </span><br><span class="line">          &lt;id  property=<span class="string">"id"</span>  column=<span class="string">"idAutor"</span> /&gt;  </span><br><span class="line">          &lt;result property=<span class="string">"name"</span> column=<span class="string">"authorName"</span> /&gt;  </span><br><span class="line">          &lt;result property=<span class="string">"email"</span> column=<span class="string">"authorEmail"</span>/&gt;  </span><br><span class="line">       &lt;/association&gt;          </span><br><span class="line">       &lt;collection property=<span class="string">"det1"</span>  javaType=<span class="string">"ArrayList"</span> ofType=<span class="string">"BillDet1"</span> &gt;  </span><br><span class="line">          &lt;id property=<span class="string">"id"</span> column=<span class="string">"idDet1"</span>/&gt;  </span><br><span class="line">          &lt;result property=<span class="string">"dh"</span> column=<span class="string">"dhDet1"</span>/&gt;  </span><br><span class="line">          &lt;result property=<span class="string">"wlbm"</span> column=<span class="string">"wlbm"</span>/&gt;  </span><br><span class="line">          &lt;result property=<span class="string">"wlmc"</span> column=<span class="string">"wlmc"</span>/&gt;  </span><br><span class="line">          &lt;result property=<span class="string">"unit"</span> column=<span class="string">"unit"</span>/&gt;  </span><br><span class="line">          &lt;result property=<span class="string">"qty"</span> column=<span class="string">"qty"</span>/&gt;  </span><br><span class="line">       &lt;/collection&gt;  </span><br><span class="line">&lt;/resultMap&gt;  </span><br><span class="line">&lt;resultMap type=<span class="string">"com.sailod.shiro.dto.HtAuthorityMenuDTO"</span> id=<span class="string">"OneMenuAuthority"</span>&gt;  </span><br><span class="line">    &lt;id property=<span class="string">"htAuthorityId"</span> column=<span class="string">"htAuthorityId"</span> javaType=<span class="string">"java.lang.Long"</span> /&gt;  </span><br><span class="line">    &lt;result property=<span class="string">"name"</span> column=<span class="string">"name"</span> javaType=<span class="string">"java.lang.String"</span> /&gt;  </span><br><span class="line">    &lt;result property=<span class="string">"currentUserId"</span> column=<span class="string">"currentUserId"</span> javaType=<span class="string">"java.lang.Long"</span> /&gt;  </span><br><span class="line">    &lt;collection property=<span class="string">"htAuthorityDTO"</span>  ofType=<span class="string">"com.sailod.shiro.dto.HtAuthorityDTO"</span>  </span><br><span class="line">     select=<span class="string">"selectAuthority"</span> column=<span class="string">"{htAuthorityId2 = htAuthorityId ,currentUserId2 = currentUserId}"</span>   &gt;  </span><br><span class="line">     &lt;/collection&gt;  </span><br><span class="line">&lt;/resultMap&gt;</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ POJOs(Plain Ordinary Java Object,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="åç«¯" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="java" scheme="https://liudufu.github.io/tags/java/"/>
    
      <category term="mybatis" scheme="https://liudufu.github.io/tags/mybatis/"/>
    
      <category term="mappers" scheme="https://liudufu.github.io/tags/mappers/"/>
    
      <category term="æ•°æ®åº“" scheme="https://liudufu.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>windowsä¸‹å¦‚ä½•å®‰è£…redis</title>
    <link href="https://liudufu.github.io/How_to_install_redis_under_Windows/"/>
    <id>https://liudufu.github.io/How_to_install_redis_under_Windows/</id>
    <published>2020-12-08T09:59:45.000Z</published>
    <updated>2020-12-08T10:32:53.976Z</updated>
    
    <content type="html"><![CDATA[<h1 id="windowså’ŒLinuxä¸‹Redisçš„å®‰è£…å’Œä½¿ç”¨-æœ€æ–°"><a href="#windowså’ŒLinuxä¸‹Redisçš„å®‰è£…å’Œä½¿ç”¨-æœ€æ–°" class="headerlink" title="windowså’ŒLinuxä¸‹Redisçš„å®‰è£…å’Œä½¿ç”¨(æœ€æ–°)"></a>windowså’ŒLinuxä¸‹Redisçš„å®‰è£…å’Œä½¿ç”¨(æœ€æ–°)</h1><blockquote><p>REmote DIctionary Server(Redis) æ˜¯ä¸€ä¸ªç”±Salvatore Sanfilippoå†™çš„key-valueå­˜å‚¨ç³»ç»Ÿã€‚</p><p>Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€éµå®ˆBSDåè®®ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚</p><p>å®ƒé€šå¸¸è¢«ç§°ä¸ºæ•°æ®ç»“æ„æœåŠ¡å™¨ï¼Œå› ä¸ºå€¼ï¼ˆvalueï¼‰å¯ä»¥æ˜¯ å­—ç¬¦ä¸²(String), å“ˆå¸Œ(Hash), åˆ—è¡¨(list), é›†åˆ(sets) å’Œ æœ‰åºé›†åˆ(sorted sets)ç­‰ç±»å‹ã€‚</p></blockquote><a id="more"></a><h2 id="Windowsä¸‹å®‰è£…"><a href="#Windowsä¸‹å®‰è£…" class="headerlink" title="Windowsä¸‹å®‰è£…"></a>Windowsä¸‹å®‰è£…</h2><p>1ã€åˆ°<a href="https://github.com/microsoftarchive/redis/releases" target="_blank" rel="noopener">https://github.com/microsoftarchive/redis/releases</a>,å‰å¾€ä¸‹è½½é¡µé¢</p><p><a href="https://imgchr.com/i/DvHmdS" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/12/07/DvHmdS.png" alt="DvHmdS.png"></a></p><p>2ã€åœ¨ä¸‹è½½ç½‘é¡µä¸­ï¼Œæ‰¾åˆ°æœ€åå‘è¡Œçš„ç‰ˆæœ¬ï¼ˆæ­¤å¤„æ˜¯3.2.100ï¼‰ã€‚æ‰¾åˆ°Redis-x64-3.2.100.msiå’ŒRedis-x64-3.2.100.zipï¼Œç‚¹å‡»ä¸‹è½½ã€‚è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œç¬¬ä¸€ä¸ªæ˜¯msiå¾®è½¯æ ¼å¼çš„å®‰è£…åŒ…ï¼Œç¬¬äºŒä¸ªæ˜¯å‹ç¼©åŒ…ã€‚</p><p><a href="https://imgchr.com/i/DvHeZ8" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/12/07/DvHeZ8.png" alt="DvHeZ8.png"></a></p><p>3ã€åŒå‡»åˆšä¸‹è½½å¥½çš„msiæ ¼å¼çš„å®‰è£…åŒ…ï¼ˆRedis-x64-3.2.100.msiï¼‰å¼€å§‹å®‰è£…</p><p><a href="https://imgchr.com/i/DvHEsP" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/12/07/DvHEsP.png" alt="DvHEsP.png"></a></p><p>4ã€é€‰æ‹©â€œåŒæ„åè®®â€ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ç»§ç»­ã€‚</p><p>5ã€å‹¾é€‰â€œæ·»åŠ Redisç›®å½•åˆ°ç¯å¢ƒå˜é‡PATHä¸­â€ï¼Œè¿™æ ·æ–¹ä¾¿ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«Redisæ‰§è¡Œæ–‡ä»¶åœ¨å“ªé‡Œã€‚</p><p>6ã€ç«¯å£å·å¯ä¿æŒé»˜è®¤çš„6379ï¼Œå¹¶é€‰æ‹©é˜²ç«å¢™ä¾‹å¤–ï¼Œä»è€Œä¿è¯å¤–éƒ¨å¯ä»¥æ­£å¸¸è®¿é—®RedisæœåŠ¡</p><p>7ã€è®¾å®šæœ€å¤§å€¼ä¸º100Mã€‚ä½œä¸ºå®éªŒå’Œå­¦ä¹ ï¼Œ100Mè¶³å¤Ÿäº†ã€‚</p><p>8ã€å‡»å®‰è£…åï¼Œæ­£å¼çš„å®‰è£…è¿‡ç¨‹å¼€å§‹ã€‚ç¨ç­‰ä¸€ä¼šå³å¯å®Œæˆã€‚</p><p>9ã€å®‰è£…å®Œæ¯•åï¼Œéœ€è¦å…ˆåšä¸€äº›è®¾å®šå·¥ä½œï¼Œä»¥ä¾¿æœåŠ¡å¯åŠ¨åèƒ½æ­£å¸¸è¿è¡Œã€‚ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè¿™é‡Œä½¿ç”¨Notepad++ï¼Œæ‰“å¼€RedisæœåŠ¡é…ç½®æ–‡ä»¶ã€‚<strong>æ³¨æ„ï¼šä¸è¦æ‰¾é”™äº†ï¼Œé€šå¸¸ä¸ºredis.windows-service.confï¼Œè€Œä¸æ˜¯redis.windows.confã€‚åè€…æ˜¯ä»¥éç³»ç»ŸæœåŠ¡æ–¹å¼å¯åŠ¨ç¨‹åºä½¿ç”¨çš„é…ç½®æ–‡ä»¶ã€‚</strong></p><p>10ã€æ‰¾åˆ°å«æœ‰requirepasså­—æ ·çš„åœ°æ–¹ï¼Œè¿½åŠ ä¸€è¡Œï¼Œè¾“å…¥requirepass å¯†ç ã€‚è¿™æ˜¯è®¿é—®Redisæ—¶æ‰€éœ€çš„å¯†ç ï¼Œä¸€èˆ¬æµ‹è¯•æƒ…å†µä¸‹å¯ä»¥ä¸ç”¨è®¾å®šå¯†ç ã€‚ä¸è¿‡ï¼Œå³ä½¿æ˜¯ä½œä¸ºæœ¬åœ°è®¿é—®ï¼Œä¹Ÿå»ºè®®è®¾å®šä¸€ä¸ªå¯†ç ã€‚</p><p><a href="https://imgchr.com/i/DvHVqf" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/12/07/DvHVqf.png" alt="DvHVqf.png"></a></p><p>11ã€ç‚¹å‡»â€œå¼€å§‹â€&gt;å³å‡»â€œè®¡ç®—æœºâ€&gt;é€‰æ‹©â€œç®¡ç†â€ã€‚åœ¨å·¦ä¾§æ ä¸­ä¾æ¬¡æ‰¾åˆ°å¹¶ç‚¹å‡»â€œè®¡ç®—æœºç®¡ç†ï¼ˆæœ¬åœ°ï¼‰â€&gt;æœåŠ¡å’Œåº”ç”¨ç¨‹åº&gt;æœåŠ¡ã€‚å†åœ¨å³ä¾§æ‰¾åˆ°Redisåç§°çš„æœåŠ¡ï¼ŒæŸ¥çœ‹å¯åŠ¨æƒ…å†µã€‚å¦‚æœªå¯åŠ¨ï¼Œåˆ™æ‰‹åŠ¨å¯åŠ¨ä¹‹ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒæœåŠ¡åº”è¯¥æ­£å¸¸å¯åŠ¨å¹¶è¿è¡Œäº†,å¦‚æœå¯åŠ¨äº†ï¼Œå°±ç‚¹å‡»é‡æ–°å¯åŠ¨ã€‚</p><p>12ã€æœ€åæ¥æµ‹è¯•ä¸€ä¸‹Redisæ˜¯å¦æ­£å¸¸æä¾›æœåŠ¡ã€‚è¿›å…¥Redisçš„ç›®å½•ï¼Œcd D:\Redisã€‚è¾“å…¥redis-cliå¹¶å›è½¦ã€‚ï¼ˆredis-cliæ˜¯å®¢æˆ·ç«¯ç¨‹åºï¼‰å¦‚å›¾æ­£å¸¸æç¤ºè¿›å…¥ï¼Œå¹¶æ˜¾ç¤ºæ­£ç¡®ç«¯å£å·ï¼Œåˆ™è¡¨ç¤ºæœåŠ¡å·²ç»å¯åŠ¨ã€‚</p><p><a href="https://imgchr.com/i/DvHAMt" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/12/07/DvHAMt.png" alt="DvHAMt.png"></a></p><p>13ã€ä½¿ç”¨æœåŠ¡å‰éœ€è¦å…ˆé€šè¿‡å¯†ç éªŒè¯ã€‚è¾“å…¥â€œauth å¯†ç â€œå›è½¦ï¼ˆå¯†ç æ˜¯ä¹‹å‰è®¾å®šçš„å¯†ç ï¼‰ã€‚è¿”å›æç¤ºOKè¡¨ç¤ºéªŒè¯é€šè¿‡ã€‚</p><p>14ã€å®é™…æµ‹è¯•ä¸€ä¸‹è¯»å†™ã€‚è¾“å…¥set mykey1 â€œI love you all!â€å¹¶å›è½¦ï¼Œç”¨æ¥ä¿å­˜ä¸€ä¸ªé”®å€¼ã€‚å†è¾“å…¥get mykey1ï¼Œè·å–åˆšæ‰ä¿å­˜çš„é”®å€¼ã€‚</p><p><a href="https://imgchr.com/i/DvHnIg" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/12/07/DvHnIg.png" alt="DvHnIg.png"></a></p><p>15ã€æ³¨æ„äº‹é¡¹</p><ul><li>1.Windowsä½¿ç”¨çš„è¿™ä¸ªRedisæ˜¯64ä½ç‰ˆæœ¬çš„ï¼Œ32ä½æ“ä½œç³»ç»Ÿçš„åŒå­¦å°±ä¸è¦æŠ˜è…¾äº†ã€‚</li><li>2.<strong>ä½œä¸ºæœåŠ¡è¿è¡Œçš„Redisé…ç½®æ–‡ä»¶ï¼Œé€šå¸¸ä¸ºredis.windows-service.confï¼Œè€Œä¸æ˜¯redis.windows.confã€‚å°å¿ƒä¸è¦é€‰é”™äº†ã€‚</strong></li></ul><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/liuqingzheng/p/9831331.html" target="_blank" rel="noopener">liuqingzheng</a></p><h2 id="Linuxæºç å®‰è£…"><a href="#Linuxæºç å®‰è£…" class="headerlink" title="Linuxæºç å®‰è£…"></a>Linuxæºç å®‰è£…</h2><p>ä¸‹è½½åœ°å€ï¼š<a href="http://redis.io/download" target="_blank" rel="noopener">http://redis.io/download</a>,ä¸‹è½½ç¨³å®šæœ€æ–°ç‰ˆæœ¬</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> wget http://download.redis.io/releases/redis-6.0.8.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tar xzf redis-6.0.8.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> redis-6.0.8</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make</span></span><br></pre></td></tr></tbody></table></figure><p>æ‰§è¡Œå®Œ <strong>make</strong> å‘½ä»¤åï¼Œredis-6.0.8 çš„ <strong>src</strong> ç›®å½•ä¸‹ä¼šå‡ºç°ç¼–è¯‘åçš„ redis æœåŠ¡ç¨‹åº redis-serverï¼Œè¿˜æœ‰ç”¨äºæµ‹è¯•çš„å®¢æˆ·ç«¯ç¨‹åº redis-cliï¼š</p><p>ä¸‹é¢å¯åŠ¨ redis æœåŠ¡ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> src</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./redis-server</span></span><br></pre></td></tr></tbody></table></figure><p>æ³¨æ„è¿™ç§æ–¹å¼å¯åŠ¨ redis ä½¿ç”¨çš„æ˜¯é»˜è®¤é…ç½®ã€‚ä¹Ÿå¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°å‘Šè¯‰ redis ä½¿ç”¨æŒ‡å®šé…ç½®æ–‡ä»¶ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¯åŠ¨ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> src</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./redis-server ../redis.conf</span></span><br></pre></td></tr></tbody></table></figure><p><strong>redis.conf</strong> æ˜¯ä¸€ä¸ªé»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚</p><p>å¯åŠ¨ redis æœåŠ¡è¿›ç¨‹åï¼Œå°±å¯ä»¥ä½¿ç”¨æµ‹è¯•å®¢æˆ·ç«¯ç¨‹åº redis-cli å’Œ redis æœåŠ¡äº¤äº’äº†ã€‚ æ¯”å¦‚ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> src</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./redis-cli</span></span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> <span class="built_in">set</span> foo bar</span></span><br><span class="line">OK</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> get foo</span></span><br><span class="line">"bar"</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="Ubuntu-apt-å‘½ä»¤å®‰è£…"><a href="#Ubuntu-apt-å‘½ä»¤å®‰è£…" class="headerlink" title="Ubuntu apt å‘½ä»¤å®‰è£…"></a>Ubuntu apt å‘½ä»¤å®‰è£…</h2><p>åœ¨ Ubuntu ç³»ç»Ÿå®‰è£… Redis å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sudo apt update</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sudo apt install redis-server</span></span><br></pre></td></tr></tbody></table></figure><h3 id="å¯åŠ¨-Redis"><a href="#å¯åŠ¨-Redis" class="headerlink" title="å¯åŠ¨ Redis"></a>å¯åŠ¨ Redis</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> redis-server</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æŸ¥çœ‹-redis-æ˜¯å¦å¯åŠ¨ï¼Ÿ"><a href="#æŸ¥çœ‹-redis-æ˜¯å¦å¯åŠ¨ï¼Ÿ" class="headerlink" title="æŸ¥çœ‹ redis æ˜¯å¦å¯åŠ¨ï¼Ÿ"></a>æŸ¥çœ‹ redis æ˜¯å¦å¯åŠ¨ï¼Ÿ</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> redis-cli</span></span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸Šå‘½ä»¤å°†æ‰“å¼€ä»¥ä¸‹ç»ˆç«¯ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></tbody></table></figure><p>127.0.0.1 æ˜¯æœ¬æœº IP ï¼Œ6379 æ˜¯ redis æœåŠ¡ç«¯å£ã€‚ç°åœ¨æˆ‘ä»¬è¾“å…¥ PING å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; ping</span><br><span class="line">PONG</span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸Šè¯´æ˜æˆ‘ä»¬å·²ç»æˆåŠŸå®‰è£…äº†redisã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;windowså’ŒLinuxä¸‹Redisçš„å®‰è£…å’Œä½¿ç”¨-æœ€æ–°&quot;&gt;&lt;a href=&quot;#windowså’ŒLinuxä¸‹Redisçš„å®‰è£…å’Œä½¿ç”¨-æœ€æ–°&quot; class=&quot;headerlink&quot; title=&quot;windowså’ŒLinuxä¸‹Redisçš„å®‰è£…å’Œä½¿ç”¨(æœ€æ–°)&quot;&gt;&lt;/a&gt;windowså’ŒLinuxä¸‹Redisçš„å®‰è£…å’Œä½¿ç”¨(æœ€æ–°)&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;REmote DIctionary Server(Redis) æ˜¯ä¸€ä¸ªç”±Salvatore Sanfilippoå†™çš„key-valueå­˜å‚¨ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€éµå®ˆBSDåè®®ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚&lt;/p&gt;
&lt;p&gt;å®ƒé€šå¸¸è¢«ç§°ä¸ºæ•°æ®ç»“æ„æœåŠ¡å™¨ï¼Œå› ä¸ºå€¼ï¼ˆvalueï¼‰å¯ä»¥æ˜¯ å­—ç¬¦ä¸²(String), å“ˆå¸Œ(Hash), åˆ—è¡¨(list), é›†åˆ(sets) å’Œ æœ‰åºé›†åˆ(sorted sets)ç­‰ç±»å‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="åç«¯" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Redis" scheme="https://liudufu.github.io/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>SQLyogè¿æ¥æ•°æ®åº“æŠ¥é”™plugin caching_sha2_password could not be loaded</title>
    <link href="https://liudufu.github.io/SQL_log_connection_database_report/"/>
    <id>https://liudufu.github.io/SQL_log_connection_database_report/</id>
    <published>2020-12-08T09:57:08.000Z</published>
    <updated>2020-12-08T09:59:22.704Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SQLyogè¿æ¥æ•°æ®åº“æŠ¥é”™plugin-caching-sha2-password-could-not-be-loaded"><a href="#SQLyogè¿æ¥æ•°æ®åº“æŠ¥é”™plugin-caching-sha2-password-could-not-be-loaded" class="headerlink" title="SQLyogè¿æ¥æ•°æ®åº“æŠ¥é”™plugin caching_sha2_password could not be loaded"></a>SQLyogè¿æ¥æ•°æ®åº“æŠ¥é”™plugin caching_sha2_password could not be loaded</h1><a id="more"></a><p><a href="https://imgchr.com/i/Dth1yR" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/24/Dth1yR.png" alt="Dth1yR.png"></a></p><h2 id="å‡ºé”™åŸå› "><a href="#å‡ºé”™åŸå› " class="headerlink" title="å‡ºé”™åŸå› "></a>å‡ºé”™åŸå› </h2><blockquote><p>MySQLæ–°ç‰ˆé»˜è®¤ä½¿ç”¨caching_sha2_passwordä½œä¸ºèº«ä»½éªŒè¯æ’ä»¶ï¼Œè€Œæ—§ç‰ˆæ˜¯ä½¿ç”¨mysql_native_passwordã€‚<br>å½“è¿æ¥MySQLæ—¶æŠ¥é”™â€œplugin caching_sha2_password could not be loadedâ€æ—¶ï¼Œå¯æ¢å›æ—§ç‰ˆæ’ä»¶ã€‚</p></blockquote><h2 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h2><ul><li>cmd:è¿›å…¥æ•°æ®åº“ï¼Œ<code>mysql -uroot -p</code></li><li>ä¾æ¬¡æ‰§è¡Œ<ul><li><code>mysql&gt; alter user 'root'@'localhost' identified by 'yours password' password expire never; # é‡ç½®rootå¯†ç ï¼Œä¿®æ”¹å¯†ç åŠ å¯†è§„åˆ™</code></li><li><code>mysql&gt; alter user 'root'@'localhost' identified with mysql_native_password by 'yours password' # æ›´æ–°ç”¨æˆ·å¯†ç ;</code></li><li><code>mysql&gt; flush privileges;  # åˆ·æ–°æƒé™</code></li></ul></li><li>ç„¶åå†æ¬¡è¿æ¥SQLyogå³å¯æˆåŠŸè®¿é—®</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;SQLyogè¿æ¥æ•°æ®åº“æŠ¥é”™plugin-caching-sha2-password-could-not-be-loaded&quot;&gt;&lt;a href=&quot;#SQLyogè¿æ¥æ•°æ®åº“æŠ¥é”™plugin-caching-sha2-password-could-not-be-loaded&quot; class=&quot;headerlink&quot; title=&quot;SQLyogè¿æ¥æ•°æ®åº“æŠ¥é”™plugin caching_sha2_password could not be loaded&quot;&gt;&lt;/a&gt;SQLyogè¿æ¥æ•°æ®åº“æŠ¥é”™plugin caching_sha2_password could not be loaded&lt;/h1&gt;
    
    </summary>
    
    
      <category term="åç«¯" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="Debug" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/Debug/"/>
    
    
      <category term="MySql" scheme="https://liudufu.github.io/tags/MySql/"/>
    
      <category term="Debug" scheme="https://liudufu.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>gitæ•™ç¨‹</title>
    <link href="https://liudufu.github.io/Git_tutorial/"/>
    <id>https://liudufu.github.io/Git_tutorial/</id>
    <published>2020-12-08T09:47:32.000Z</published>
    <updated>2020-12-08T09:51:04.509Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†ä»»ä½•æˆ–å°æˆ–å¤§çš„é¡¹ç›®ã€‚</p><p>Git æ˜¯ Linus Torvalds ä¸ºäº†å¸®åŠ©ç®¡ç† Linux å†…æ ¸å¼€å‘è€Œå¼€å‘çš„ä¸€ä¸ªå¼€æ”¾æºç çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚</p></blockquote><a id="more"></a><h1 id="Gitæ•™ç¨‹"><a href="#Gitæ•™ç¨‹" class="headerlink" title="Gitæ•™ç¨‹"></a>Gitæ•™ç¨‹</h1><p>æ³¨æ˜ï¼šå­¦ä¹ è‡ª<a href="https://www.liaoxuefeng.com/" target="_blank" rel="noopener">å»–é›ªå³°è€å¸ˆ</a></p><h2 id="Gitç®€ä»‹"><a href="#Gitç®€ä»‹" class="headerlink" title="Gitç®€ä»‹"></a>Gitç®€ä»‹</h2><ol><li><h3 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h3><ul><li><h5 id="åœ¨Linuxä¸Šå®‰è£…Git"><a href="#åœ¨Linuxä¸Šå®‰è£…Git" class="headerlink" title="åœ¨Linuxä¸Šå®‰è£…Git"></a>åœ¨Linuxä¸Šå®‰è£…Git</h5><p>é¦–å…ˆï¼Œä½ å¯ä»¥è¯•ç€è¾“å…¥<code>git</code>ï¼Œçœ‹çœ‹ç³»ç»Ÿæœ‰æ²¡æœ‰å®‰è£…Gitï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git</span><br><span class="line">The program 'git' is currently not installed. You can install it by typing:</span><br><span class="line">sudo apt-get install git</span><br></pre></td></tr></tbody></table></figure><p>åƒä¸Šé¢çš„å‘½ä»¤ï¼Œæœ‰å¾ˆå¤šLinuxä¼šå‹å¥½åœ°å‘Šè¯‰ä½ Gitæ²¡æœ‰å®‰è£…ï¼Œè¿˜ä¼šå‘Šè¯‰ä½ å¦‚ä½•å®‰è£…Gitã€‚</p><p>å¦‚æœä½ ç¢°å·§ç”¨Debianæˆ–Ubuntu Linuxï¼Œé€šè¿‡ä¸€æ¡<code>sudo apt-get install git</code>å°±å¯ä»¥ç›´æ¥å®ŒæˆGitçš„å®‰è£…ï¼Œéå¸¸ç®€å•ã€‚</p><p>è€ä¸€ç‚¹çš„Debianæˆ–Ubuntu Linuxï¼Œè¦æŠŠå‘½ä»¤æ”¹ä¸º<code>sudo apt-get install git-core</code>ï¼Œå› ä¸ºä»¥å‰æœ‰ä¸ªè½¯ä»¶ä¹Ÿå«GITï¼ˆGNU Interactive Toolsï¼‰ï¼Œç»“æœGitå°±åªèƒ½å«<code>git-core</code>äº†ã€‚ç”±äºGitåæ°”å®åœ¨å¤ªå¤§ï¼Œåæ¥å°±æŠŠGNU Interactive Toolsæ”¹æˆ<code>gnuit</code>ï¼Œ<code>git-core</code>æ­£å¼æ”¹ä¸º<code>git</code>ã€‚</p><p>å¦‚æœæ˜¯å…¶ä»–Linuxç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æºç å®‰è£…ã€‚å…ˆä»Gitå®˜ç½‘ä¸‹è½½æºç ï¼Œç„¶åè§£å‹ï¼Œä¾æ¬¡è¾“å…¥ï¼š<code>./config</code>ï¼Œ<code>make</code>ï¼Œ<code>sudo make install</code>è¿™å‡ ä¸ªå‘½ä»¤å®‰è£…å°±å¥½äº†ã€‚</p></li><li><h5 id="åœ¨Mac-OS-Xä¸Šå®‰è£…Git"><a href="#åœ¨Mac-OS-Xä¸Šå®‰è£…Git" class="headerlink" title="åœ¨Mac OS Xä¸Šå®‰è£…Git"></a>åœ¨Mac OS Xä¸Šå®‰è£…Git</h5><p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨Macåšå¼€å‘ï¼Œæœ‰ä¸¤ç§å®‰è£…Gitçš„æ–¹æ³•ã€‚</p><p>ä¸€æ˜¯å®‰è£…homebrewï¼Œç„¶åé€šè¿‡homebrewå®‰è£…Gitï¼Œå…·ä½“æ–¹æ³•è¯·å‚è€ƒhomebrewçš„æ–‡æ¡£ï¼š<a href="http://brew.sh/ã€‚" target="_blank" rel="noopener">http://brew.sh/ã€‚</a></p><p>ç¬¬äºŒç§æ–¹æ³•æ›´ç®€å•ï¼Œä¹Ÿæ˜¯æ¨èçš„æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥ä»AppStoreå®‰è£…Xcodeï¼ŒXcodeé›†æˆäº†Gitï¼Œä¸è¿‡é»˜è®¤æ²¡æœ‰å®‰è£…ï¼Œä½ éœ€è¦è¿è¡ŒXcodeï¼Œé€‰æ‹©èœå•â€œXcodeâ€-&gt;â€œPreferencesâ€ï¼Œåœ¨å¼¹å‡ºçª—å£ä¸­æ‰¾åˆ°â€œDownloadsâ€ï¼Œé€‰æ‹©â€œCommand Line Toolsâ€ï¼Œç‚¹â€œInstallâ€å°±å¯ä»¥å®Œæˆå®‰è£…äº†ã€‚</p></li><li><h5 id="åœ¨Windowsä¸Šå®‰è£…Git"><a href="#åœ¨Windowsä¸Šå®‰è£…Git" class="headerlink" title="åœ¨Windowsä¸Šå®‰è£…Git"></a>åœ¨Windowsä¸Šå®‰è£…Git</h5><p>åœ¨Windowsä¸Šä½¿ç”¨Gitï¼Œå¯ä»¥ä»Gitå®˜ç½‘ç›´æ¥<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">ä¸‹è½½å®‰è£…ç¨‹åº</a>ï¼Œç„¶åæŒ‰é»˜è®¤é€‰é¡¹å®‰è£…å³å¯ã€‚</p><p>å®‰è£…å®Œæˆåï¼Œåœ¨å¼€å§‹èœå•é‡Œæ‰¾åˆ°â€œGitâ€-&gt;â€œGit Bashâ€ï¼Œè¹¦å‡ºä¸€ä¸ªç±»ä¼¼å‘½ä»¤è¡Œçª—å£çš„ä¸œè¥¿ï¼Œå°±è¯´æ˜Gitå®‰è£…æˆåŠŸï¼</p><p>å®‰è£…å®Œæˆåï¼Œè¿˜éœ€è¦æœ€åä¸€æ­¥è®¾ç½®ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name "Your Name"</span><br><span class="line">$ git config --global user.email "email@example.com"</span><br></pre></td></tr></tbody></table></figure><p>å› ä¸ºGitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªæœºå™¨éƒ½å¿…é¡»è‡ªæŠ¥å®¶é—¨ï¼šä½ çš„åå­—å’ŒEmailåœ°å€ã€‚ä½ ä¹Ÿè®¸ä¼šæ‹…å¿ƒï¼Œå¦‚æœæœ‰äººæ•…æ„å†’å……åˆ«äººæ€ä¹ˆåŠï¼Ÿè¿™ä¸ªä¸å¿…æ‹…å¿ƒï¼Œé¦–å…ˆæˆ‘ä»¬ç›¸ä¿¡å¤§å®¶éƒ½æ˜¯å–„è‰¯æ— çŸ¥çš„ç¾¤ä¼—ï¼Œå…¶æ¬¡ï¼ŒçœŸçš„æœ‰å†’å……çš„ä¹Ÿæ˜¯æœ‰åŠæ³•å¯æŸ¥çš„ã€‚</p><p>æ³¨æ„<code>git config</code>å‘½ä»¤çš„<code>--global</code>å‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„Gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’ŒEmailåœ°å€ã€‚</p></li></ul></li><li><h3 id="åˆ›å»ºç‰ˆæœ¬åº“"><a href="#åˆ›å»ºç‰ˆæœ¬åº“" class="headerlink" title="åˆ›å»ºç‰ˆæœ¬åº“"></a>åˆ›å»ºç‰ˆæœ¬åº“</h3><p>åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬åº“éå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åœ°æ–¹ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir learngit</span><br><span class="line">$ cd learngit</span><br><span class="line">$ pwd</span><br><span class="line">/Users/michael/learngit</span><br></pre></td></tr></tbody></table></figure><p><code>pwd</code>å‘½ä»¤ç”¨äºæ˜¾ç¤ºå½“å‰ç›®å½•ã€‚åœ¨æˆ‘çš„Macä¸Šï¼Œè¿™ä¸ªä»“åº“ä½äº<code>/Users/michael/learngit</code>ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œé€šè¿‡<code>git init</code>å‘½ä»¤æŠŠè¿™ä¸ªç›®å½•å˜æˆGitå¯ä»¥ç®¡ç†çš„ä»“åº“ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">Initialized empty Git repository in /Users/michael/learngit/.git/</span><br></pre></td></tr></tbody></table></figure><p>ç¬é—´Gitå°±æŠŠä»“åº“å»ºå¥½äº†ï¼Œè€Œä¸”å‘Šè¯‰ä½ æ˜¯ä¸€ä¸ªç©ºçš„ä»“åº“ï¼ˆempty Git repositoryï¼‰ï¼Œç»†å¿ƒçš„è¯»è€…å¯ä»¥å‘ç°å½“å‰ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª<code>.git</code>çš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•æ˜¯Gitæ¥è·Ÿè¸ªç®¡ç†ç‰ˆæœ¬åº“çš„ï¼Œæ²¡äº‹åƒä¸‡ä¸è¦æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ªç›®å½•é‡Œé¢çš„æ–‡ä»¶ï¼Œä¸ç„¶æ”¹ä¹±äº†ï¼Œå°±æŠŠGitä»“åº“ç»™ç ´åäº†ã€‚</p><p>å¦‚æœä½ æ²¡æœ‰çœ‹åˆ°<code>.git</code>ç›®å½•ï¼Œé‚£æ˜¯å› ä¸ºè¿™ä¸ªç›®å½•é»˜è®¤æ˜¯éšè—çš„ï¼Œç”¨<code>ls -ah</code>å‘½ä»¤å°±å¯ä»¥çœ‹è§ã€‚</p><p>ä¹Ÿä¸ä¸€å®šå¿…é¡»åœ¨ç©ºç›®å½•ä¸‹åˆ›å»ºGitä»“åº“ï¼Œé€‰æ‹©ä¸€ä¸ªå·²ç»æœ‰ä¸œè¥¿çš„ç›®å½•ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¸è¿‡ï¼Œä¸å»ºè®®ä½ ä½¿ç”¨è‡ªå·±æ­£åœ¨å¼€å‘çš„å…¬å¸é¡¹ç›®æ¥å­¦ä¹ Gitï¼Œå¦åˆ™é€ æˆçš„ä¸€åˆ‡åæœæ¦‚ä¸è´Ÿè´£ã€‚</p><h5 id="æŠŠæ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“"><a href="#æŠŠæ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“" class="headerlink" title="æŠŠæ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“"></a>æŠŠæ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“</h5><p>é¦–å…ˆè¿™é‡Œå†æ˜ç¡®ä¸€ä¸‹ï¼Œæ‰€æœ‰çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå…¶å®åªèƒ½è·Ÿè¸ªæ–‡æœ¬æ–‡ä»¶çš„æ”¹åŠ¨ï¼Œæ¯”å¦‚TXTæ–‡ä»¶ï¼Œç½‘é¡µï¼Œæ‰€æœ‰çš„ç¨‹åºä»£ç ç­‰ç­‰ï¼ŒGitä¹Ÿä¸ä¾‹å¤–ã€‚ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¯ä»¥å‘Šè¯‰ä½ æ¯æ¬¡çš„æ”¹åŠ¨ï¼Œæ¯”å¦‚åœ¨ç¬¬5è¡ŒåŠ äº†ä¸€ä¸ªå•è¯â€œLinuxâ€ï¼Œåœ¨ç¬¬8è¡Œåˆ äº†ä¸€ä¸ªå•è¯â€œWindowsâ€ã€‚è€Œå›¾ç‰‡ã€è§†é¢‘è¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè™½ç„¶ä¹Ÿèƒ½ç”±ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç®¡ç†ï¼Œä½†æ²¡æ³•è·Ÿè¸ªæ–‡ä»¶çš„å˜åŒ–ï¼Œåªèƒ½æŠŠäºŒè¿›åˆ¶æ–‡ä»¶æ¯æ¬¡æ”¹åŠ¨ä¸²èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯åªçŸ¥é“å›¾ç‰‡ä»100KBæ”¹æˆäº†120KBï¼Œä½†åˆ°åº•æ”¹äº†å•¥ï¼Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸çŸ¥é“ï¼Œä¹Ÿæ²¡æ³•çŸ¥é“ã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼ŒMicrosoftçš„Wordæ ¼å¼æ˜¯äºŒè¿›åˆ¶æ ¼å¼ï¼Œå› æ­¤ï¼Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯æ²¡æ³•è·Ÿè¸ªWordæ–‡ä»¶çš„æ”¹åŠ¨çš„ï¼Œå‰é¢æˆ‘ä»¬ä¸¾çš„ä¾‹å­åªæ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œå¦‚æœè¦çœŸæ­£ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå°±è¦ä»¥çº¯æ–‡æœ¬æ–¹å¼ç¼–å†™æ–‡ä»¶ã€‚</p><p>å› ä¸ºæ–‡æœ¬æ˜¯æœ‰ç¼–ç çš„ï¼Œæ¯”å¦‚ä¸­æ–‡æœ‰å¸¸ç”¨çš„GBKç¼–ç ï¼Œæ—¥æ–‡æœ‰Shift_JISç¼–ç ï¼Œå¦‚æœæ²¡æœ‰å†å²é—ç•™é—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨æ ‡å‡†çš„UTF-8ç¼–ç ï¼Œæ‰€æœ‰è¯­è¨€ä½¿ç”¨åŒä¸€ç§ç¼–ç ï¼Œæ—¢æ²¡æœ‰å†²çªï¼Œåˆè¢«æ‰€æœ‰å¹³å°æ‰€æ”¯æŒã€‚</p><p>ä½¿ç”¨Windowsçš„ç«¥é‹è¦ç‰¹åˆ«æ³¨æ„ï¼š</p><p>åƒä¸‡ä¸è¦ä½¿ç”¨Windowsè‡ªå¸¦çš„<strong>è®°äº‹æœ¬</strong>ç¼–è¾‘ä»»ä½•æ–‡æœ¬æ–‡ä»¶ã€‚åŸå› æ˜¯Microsoftå¼€å‘è®°äº‹æœ¬çš„å›¢é˜Ÿä½¿ç”¨äº†ä¸€ä¸ªéå¸¸å¼±æ™ºçš„è¡Œä¸ºæ¥ä¿å­˜UTF-8ç¼–ç çš„æ–‡ä»¶ï¼Œä»–ä»¬è‡ªä½œèªæ˜åœ°åœ¨æ¯ä¸ªæ–‡ä»¶å¼€å¤´æ·»åŠ äº†0xefbbbfï¼ˆåå…­è¿›åˆ¶ï¼‰çš„å­—ç¬¦ï¼Œä½ ä¼šé‡åˆ°å¾ˆå¤šä¸å¯æ€è®®çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼Œç½‘é¡µç¬¬ä¸€è¡Œå¯èƒ½ä¼šæ˜¾ç¤ºä¸€ä¸ªâ€œ?â€ï¼Œæ˜æ˜æ­£ç¡®çš„ç¨‹åºä¸€ç¼–è¯‘å°±æŠ¥è¯­æ³•é”™è¯¯ï¼Œç­‰ç­‰ï¼Œéƒ½æ˜¯ç”±è®°äº‹æœ¬çš„å¼±æ™ºè¡Œä¸ºå¸¦æ¥çš„ã€‚å»ºè®®ä½ ä¸‹è½½<a href="http://notepad-plus-plus.org/" target="_blank" rel="noopener">Notepad++</a>ä»£æ›¿è®°äº‹æœ¬ï¼Œä¸ä½†åŠŸèƒ½å¼ºå¤§ï¼Œè€Œä¸”å…è´¹ï¼è®°å¾—æŠŠNotepad++çš„é»˜è®¤ç¼–ç è®¾ç½®ä¸ºUTF-8 without BOMå³å¯</p><p>è¨€å½’æ­£ä¼ ï¼Œç°åœ¨æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª<code>readme.txt</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a version control system.</span><br><span class="line">Git is free software.</span><br></pre></td></tr></tbody></table></figure><p>ä¸€å®šè¦æ”¾åˆ°<code>learngit</code>ç›®å½•ä¸‹ï¼ˆå­ç›®å½•ä¹Ÿè¡Œï¼‰ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªGitä»“åº“ï¼Œæ”¾åˆ°å…¶ä»–åœ°æ–¹Gitå†å‰å®³ä¹Ÿæ‰¾ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚</p><p>å’ŒæŠŠå¤§è±¡æ”¾åˆ°å†°ç®±éœ€è¦3æ­¥ç›¸æ¯”ï¼ŒæŠŠä¸€ä¸ªæ–‡ä»¶æ”¾åˆ°Gitä»“åº“åªéœ€è¦ä¸¤æ­¥ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œç”¨å‘½ä»¤<code>git add</code>å‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br></pre></td></tr></tbody></table></figure><p>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œæ²¡æœ‰ä»»ä½•æ˜¾ç¤ºï¼Œè¿™å°±å¯¹äº†ï¼ŒUnixçš„å“²å­¦æ˜¯â€œæ²¡æœ‰æ¶ˆæ¯å°±æ˜¯å¥½æ¶ˆæ¯â€ï¼Œè¯´æ˜æ·»åŠ æˆåŠŸã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œç”¨å‘½ä»¤<code>git commit</code>å‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m "wrote a readme file"</span><br><span class="line">[master (root-commit) eaadf4e] wrote a readme file</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 readme.txt</span><br></pre></td></tr></tbody></table></figure><p>ç®€å•è§£é‡Šä¸€ä¸‹<code>git commit</code>å‘½ä»¤ï¼Œ<code>-m</code>åé¢è¾“å…¥çš„æ˜¯æœ¬æ¬¡æäº¤çš„è¯´æ˜ï¼Œå¯ä»¥è¾“å…¥ä»»æ„å†…å®¹ï¼Œå½“ç„¶æœ€å¥½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè¿™æ ·ä½ å°±èƒ½ä»å†å²è®°å½•é‡Œæ–¹ä¾¿åœ°æ‰¾åˆ°æ”¹åŠ¨è®°å½•ã€‚</p><p>å«Œéº»çƒ¦ä¸æƒ³è¾“å…¥<code>-m "xxx"</code>è¡Œä¸è¡Œï¼Ÿç¡®å®æœ‰åŠæ³•å¯ä»¥è¿™ä¹ˆå¹²ï¼Œä½†æ˜¯å¼ºçƒˆä¸å»ºè®®ä½ è¿™ä¹ˆå¹²ï¼Œå› ä¸ºè¾“å…¥è¯´æ˜å¯¹è‡ªå·±å¯¹åˆ«äººé˜…è¯»éƒ½å¾ˆé‡è¦ã€‚å®åœ¨ä¸æƒ³è¾“å…¥è¯´æ˜çš„ç«¥é‹è¯·è‡ªè¡ŒGoogleï¼Œæˆ‘ä¸å‘Šè¯‰ä½ è¿™ä¸ªå‚æ•°ã€‚</p><p><code>git commit</code>å‘½ä»¤æ‰§è¡ŒæˆåŠŸåä¼šå‘Šè¯‰ä½ ï¼Œ<code>1 file changed</code>ï¼š1ä¸ªæ–‡ä»¶è¢«æ”¹åŠ¨ï¼ˆæˆ‘ä»¬æ–°æ·»åŠ çš„readme.txtæ–‡ä»¶ï¼‰ï¼›<code>2 insertions</code>ï¼šæ’å…¥äº†ä¸¤è¡Œå†…å®¹ï¼ˆreadme.txtæœ‰ä¸¤è¡Œå†…å®¹ï¼‰ã€‚</p><p>ä¸ºä»€ä¹ˆGitæ·»åŠ æ–‡ä»¶éœ€è¦<code>add</code>ï¼Œ<code>commit</code>ä¸€å…±ä¸¤æ­¥å‘¢ï¼Ÿå› ä¸º<code>commit</code>å¯ä»¥ä¸€æ¬¡æäº¤å¾ˆå¤šæ–‡ä»¶ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¤šæ¬¡<code>add</code>ä¸åŒçš„æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add file1.txt</span><br><span class="line">$ git add file2.txt file3.txt</span><br><span class="line">$ git commit -m "add 3 files."</span><br></pre></td></tr></tbody></table></figure></li><li><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>ç°åœ¨æ€»ç»“ä¸€ä¸‹ä»Šå¤©å­¦çš„ä¸¤ç‚¹å†…å®¹ï¼š</p><p>åˆå§‹åŒ–ä¸€ä¸ªGitä»“åº“ï¼Œä½¿ç”¨<code>git init</code>å‘½ä»¤ã€‚</p><p>æ·»åŠ æ–‡ä»¶åˆ°Gitä»“åº“ï¼Œåˆ†ä¸¤æ­¥ï¼š</p><ol><li>ä½¿ç”¨å‘½ä»¤<code>git add &lt;file&gt;</code>ï¼Œæ³¨æ„ï¼Œå¯åå¤å¤šæ¬¡ä½¿ç”¨ï¼Œæ·»åŠ å¤šä¸ªæ–‡ä»¶ï¼›</li><li>ä½¿ç”¨å‘½ä»¤<code>git commit -m &lt;message&gt;</code>ï¼Œå®Œæˆã€‚</li></ol></li></ol><h2 id="æ—¶å…‰æœºç©¿æ¢­"><a href="#æ—¶å…‰æœºç©¿æ¢­" class="headerlink" title="æ—¶å…‰æœºç©¿æ¢­"></a>æ—¶å…‰æœºç©¿æ¢­</h2><ol><li><p>ç‰ˆæœ¬å›é€€</p><ul><li><code>HEAD</code>æŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯<code>HEAD^</code>ï¼Œä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯<code>HEAD^^</code>ï¼Œå½“ç„¶å¾€ä¸Š100ä¸ªç‰ˆæœ¬å†™100ä¸ª<code>^</code>æ¯”è¾ƒå®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å†™æˆ<code>HEAD~100</code>ã€‚å› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´ç©¿æ¢­ï¼Œè¿˜å¯ä»¥å†™æˆä½¿ç”¨å‘½ä»¤<code>git reset --hard commit_id</code>ã€‚</li><li>ç©¿æ¢­å‰ï¼Œç”¨<code>git log</code>å¯ä»¥æŸ¥çœ‹æäº¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬ã€‚</li><li>è¦é‡è¿”æœªæ¥ï¼Œç”¨<code>git reflog</code>æŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ã€‚</li></ul></li><li><p>å·¥ä½œåŒºå’Œæš‚å­˜åŒº</p><ul><li><p>å·¥ä½œåŒºï¼šç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ï¼Œå‰é¢è®²äº†æˆ‘ä»¬æŠŠæ–‡ä»¶å¾€Gitç‰ˆæœ¬åº“é‡Œæ·»åŠ çš„æ—¶å€™ï¼Œæ˜¯åˆ†ä¸¤æ­¥æ‰§è¡Œçš„ï¼š</p><p>ç¬¬ä¸€æ­¥æ˜¯ç”¨<code>git add</code>æŠŠæ–‡ä»¶æ·»åŠ è¿›å»ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºï¼›</p><p>ç¬¬äºŒæ­¥æ˜¯ç”¨<code>git commit</code>æäº¤æ›´æ”¹ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚</p><p>å› ä¸ºæˆ‘ä»¬åˆ›å»ºGitç‰ˆæœ¬åº“æ—¶ï¼ŒGitè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†å”¯ä¸€ä¸€ä¸ª<code>master</code>åˆ†æ”¯ï¼Œæ‰€ä»¥ï¼Œç°åœ¨ï¼Œ<code>git commit</code>å°±æ˜¯å¾€<code>master</code>åˆ†æ”¯ä¸Šæäº¤æ›´æ”¹ã€‚</p><p>ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œéœ€è¦æäº¤çš„æ–‡ä»¶ä¿®æ”¹é€šé€šæ”¾åˆ°æš‚å­˜åŒºï¼Œç„¶åï¼Œä¸€æ¬¡æ€§æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹ã€‚ï¼ˆæ‰€ä»¥ï¼Œ<code>git add</code>å‘½ä»¤å®é™…ä¸Šå°±æ˜¯æŠŠè¦æäº¤çš„æ‰€æœ‰ä¿®æ”¹æ”¾åˆ°æš‚å­˜åŒºï¼ˆStageï¼‰ï¼Œç„¶åï¼Œæ‰§è¡Œ<code>git commit</code>å°±å¯ä»¥ä¸€æ¬¡æ€§æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯ã€‚ï¼‰</p></li><li><p>Gitç®¡ç†çš„æ–‡ä»¶åˆ†ä¸ºï¼šå·¥ä½œåŒºï¼Œç‰ˆæœ¬åº“ï¼Œç‰ˆæœ¬åº“åˆåˆ†ä¸ºæš‚å­˜åŒºstageå’Œæš‚å­˜åŒºåˆ†æ”¯master(ä»“åº“)</p><p>å·¥ä½œåŒº&gt;&gt;&gt;&gt;æš‚å­˜åŒº&gt;&gt;&gt;&gt;ä»“åº“</p><p><code>git add</code>æŠŠæ–‡ä»¶ä»å·¥ä½œåŒº&gt;&gt;&gt;&gt;æš‚å­˜åŒºï¼Œ``git commit`æŠŠæ–‡ä»¶ä»æš‚å­˜åŒº&gt;&gt;&gt;&gt;ä»“åº“ï¼Œ</p><p><code>git diff</code>æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºå·®å¼‚ï¼Œ</p><p><code>git diff</code> â€“cachedæŸ¥çœ‹æš‚å­˜åŒºå’Œä»“åº“å·®å¼‚ï¼Œ</p><p><code>git diff HEAD</code>æŸ¥çœ‹å·¥ä½œåŒºå’Œä»“åº“çš„å·®å¼‚ï¼Œ</p><p><code>git add</code>çš„åå‘å‘½ä»¤<code>git checkout</code>ï¼Œæ’¤é”€å·¥ä½œåŒºä¿®æ”¹ï¼Œå³æŠŠæš‚å­˜åŒºæœ€æ–°ç‰ˆæœ¬è½¬ç§»åˆ°å·¥ä½œåŒºï¼Œ</p><p><code>git commit</code>çš„åå‘å‘½ä»¤``git reset HEAD`ï¼Œå°±æ˜¯æŠŠä»“åº“æœ€æ–°ç‰ˆæœ¬è½¬ç§»åˆ°æš‚å­˜åŒºã€‚</p></li></ul></li><li><p>ç®¡ç†ä¿®æ”¹</p><ul><li>ç†è§£äº†Gitæ˜¯å¦‚ä½•è·Ÿè¸ªä¿®æ”¹çš„ï¼Œæ¯æ¬¡ä¿®æ”¹ï¼Œå¦‚æœä¸ç”¨<code>git add</code>åˆ°æš‚å­˜åŒºï¼Œé‚£å°±ä¸ä¼šåŠ å…¥åˆ°<code>commit</code>ä¸­ã€‚</li></ul></li><li><p>æ’¤é”€ä¿®æ”¹</p><ul><li>åœºæ™¯1ï¼šå½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤<code>git checkout -- file</code>ã€‚</li><li>åœºæ™¯2ï¼šå½“ä½ ä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œåˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤<code>git reset HEAD &lt;file&gt;</code>ï¼Œå°±å›åˆ°äº†åœºæ™¯1ï¼Œç¬¬äºŒæ­¥æŒ‰åœºæ™¯1æ“ä½œã€‚</li><li>åœºæ™¯3ï¼šå·²ç»æäº¤äº†ä¸åˆé€‚çš„ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“æ—¶ï¼Œæƒ³è¦æ’¤é”€æœ¬æ¬¡æäº¤ï¼Œå‚è€ƒ<a href="https://www.liaoxuefeng.com/wiki/896043488029600/897013573512192" target="_blank" rel="noopener">ç‰ˆæœ¬å›é€€</a>ä¸€èŠ‚ï¼Œä¸è¿‡å‰ææ˜¯æ²¡æœ‰æ¨é€åˆ°è¿œç¨‹åº“ã€‚</li></ul></li><li><p>åˆ é™¤æ–‡ä»¶</p><ul><li><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ é€šå¸¸ç›´æ¥åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æŠŠæ²¡ç”¨çš„æ–‡ä»¶åˆ äº†ï¼Œæˆ–è€…ç”¨<code>rm</code>å‘½ä»¤åˆ äº†ï¼š<code>$ rm test.txt</code></p></li><li><p>è¿™ä¸ªæ—¶å€™ï¼ŒGitçŸ¥é“ä½ åˆ é™¤äº†æ–‡ä»¶ï¼Œå› æ­¤ï¼Œå·¥ä½œåŒºå’Œç‰ˆæœ¬åº“å°±ä¸ä¸€è‡´äº†ï¼Œ<code>git status</code>å‘½ä»¤ä¼šç«‹åˆ»å‘Šè¯‰ä½ å“ªäº›æ–‡ä»¶è¢«åˆ é™¤äº†ï¼š</p><p><img src="C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200602163313271.png" alt="image-20200602163313271"></p></li><li><p>ç°åœ¨ä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œä¸€æ˜¯ç¡®å®è¦ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤è¯¥æ–‡ä»¶ï¼Œé‚£å°±ç”¨å‘½ä»¤<code>git rm</code>åˆ æ‰ï¼Œå¹¶ä¸”<code>git commit</code>ï¼š<code>$ git rm test.txt</code> <code>rm 'test.txt'</code> ç°åœ¨ï¼Œæ–‡ä»¶å°±ä»ç‰ˆæœ¬åº“ä¸­è¢«åˆ é™¤äº†</p></li><li><p>å°æç¤ºï¼šå…ˆæ‰‹åŠ¨åˆ é™¤æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨<code>git rm &lt;file&gt;</code>å’Œ<code>git add&lt;file&gt;</code>æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p></li><li><p>å¦ä¸€ç§æƒ…å†µæ˜¯åˆ é”™äº†ï¼Œå› ä¸ºç‰ˆæœ¬åº“é‡Œè¿˜æœ‰å‘¢ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆè½»æ¾åœ°æŠŠè¯¯åˆ çš„æ–‡ä»¶æ¢å¤åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š<code>$ git checkout -- test.txt</code>ã€‚<code>git checkout</code>å…¶å®æ˜¯ç”¨ç‰ˆæœ¬åº“é‡Œçš„ç‰ˆæœ¬æ›¿æ¢å·¥ä½œåŒºçš„ç‰ˆæœ¬ï¼Œæ— è®ºå·¥ä½œåŒºæ˜¯ä¿®æ”¹è¿˜æ˜¯åˆ é™¤ï¼Œéƒ½å¯ä»¥â€œä¸€é”®è¿˜åŸâ€ã€‚ä½†æ˜¯ï¼Œ<u><strong>ä»æ¥æ²¡æœ‰è¢«æ·»åŠ åˆ°ç‰ˆæœ¬åº“å°±è¢«åˆ é™¤çš„æ–‡ä»¶ï¼Œæ˜¯æ— æ³•æ¢å¤çš„ï¼</strong></u></p></li><li><p>å°ç»“ï¼šå‘½ä»¤<code>git rm</code>ç”¨äºåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶å·²ç»è¢«æäº¤åˆ°ç‰ˆæœ¬åº“ï¼Œé‚£ä¹ˆä½ æ°¸è¿œä¸ç”¨æ‹…å¿ƒè¯¯åˆ ï¼Œä½†æ˜¯è¦å°å¿ƒï¼Œä½ åªèƒ½æ¢å¤æ–‡ä»¶åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½ ä¼šä¸¢å¤±<strong>æœ€è¿‘ä¸€æ¬¡æäº¤åä½ ä¿®æ”¹çš„å†…å®¹</strong>ã€‚</p></li></ul></li></ol><h2 id="è¿œç¨‹ä»“åº“"><a href="#è¿œç¨‹ä»“åº“" class="headerlink" title="è¿œç¨‹ä»“åº“"></a>è¿œç¨‹ä»“åº“</h2><ol><li><p>æ·»åŠ è¿œç¨‹åº“</p><ul><li><p>è¦å…³è”ä¸€ä¸ªè¿œç¨‹åº“ï¼Œä½¿ç”¨å‘½ä»¤<code>git remote add origin git@server-name:path/repo-name.git</code>ï¼›ä»¥<code>github</code>ä¸ºä¾‹å­ï¼š<code>git remote add origin git@github.com:liudufu/First_Git_Text.git</code></p></li><li><p>å…³è”åï¼Œä½¿ç”¨å‘½ä»¤<code>git push -u origin master</code>ç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯çš„æ‰€æœ‰å†…å®¹ï¼›</p></li><li><p>æ­¤åï¼Œæ¯æ¬¡æœ¬åœ°æäº¤åï¼Œåªè¦æœ‰å¿…è¦ï¼Œå°±å¯ä»¥ä½¿ç”¨å‘½ä»¤<code>git push origin master</code>æ¨é€æœ€æ–°ä¿®æ”¹ï¼›</p><p>åˆ†å¸ƒå¼ç‰ˆæœ¬ç³»ç»Ÿçš„æœ€å¤§å¥½å¤„ä¹‹ä¸€æ˜¯åœ¨æœ¬åœ°å·¥ä½œå®Œå…¨ä¸éœ€è¦è€ƒè™‘è¿œç¨‹åº“çš„å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯æœ‰æ²¡æœ‰è”ç½‘éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œè€Œ<code>SVN</code>åœ¨æ²¡æœ‰è”ç½‘çš„æ—¶å€™æ˜¯æ‹’ç»å¹²æ´»çš„ï¼å½“æœ‰ç½‘ç»œçš„æ—¶å€™ï¼Œå†æŠŠæœ¬åœ°æäº¤æ¨é€ä¸€ä¸‹å°±å®Œæˆäº†åŒæ­¥ï¼ŒçœŸæ˜¯å¤ªæ–¹ä¾¿äº†</p></li></ul></li><li><p>ä»è¿œç¨‹åº“å…‹éš†</p><ul><li><p>è¦å…‹éš†ä¸€ä¸ªä»“åº“ï¼Œé¦–å…ˆå¿…é¡»çŸ¥é“ä»“åº“çš„åœ°å€ï¼Œç„¶åä½¿ç”¨<code>git clone</code>å‘½ä»¤å…‹éš†ã€‚ä¾‹å¦‚ï¼š<code>git clone git@github.com:michaelliao/gitskills.git</code></p></li><li><p>å¦‚æœæœ‰å¤šä¸ªäººåä½œå¼€å‘ï¼Œé‚£ä¹ˆæ¯ä¸ªäººå„è‡ªä»è¿œç¨‹å…‹éš†ä¸€ä»½å°±å¯ä»¥äº†ã€‚ä½ ä¹Ÿè®¸è¿˜æ³¨æ„åˆ°ï¼Œ<code>GitHub</code>ç»™å‡ºçš„åœ°å€ä¸æ­¢ä¸€ä¸ªï¼Œè¿˜å¯ä»¥ç”¨<code>https://github.com/michaelliao/gitskills.git</code>è¿™æ ·çš„åœ°å€ã€‚å®é™…ä¸Šï¼ŒGitæ”¯æŒå¤šç§åè®®ï¼Œé»˜è®¤çš„<code>git://</code>ä½¿ç”¨sshï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨<code>https</code>ç­‰å…¶ä»–åè®®ã€‚</p><p>ä½¿ç”¨<code>https</code>é™¤äº†é€Ÿåº¦æ…¢ä»¥å¤–ï¼Œè¿˜æœ‰ä¸ªæœ€å¤§çš„éº»çƒ¦æ˜¯æ¯æ¬¡æ¨é€éƒ½å¿…é¡»è¾“å…¥å£ä»¤ï¼Œä½†æ˜¯åœ¨æŸäº›åªå¼€æ”¾<code>http</code>ç«¯å£çš„å…¬å¸å†…éƒ¨å°±æ— æ³•ä½¿ç”¨<code>ssh</code>åè®®è€Œåªèƒ½ç”¨<code>https</code>ã€‚</p></li><li><p>Gitæ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬<code>https</code>ï¼Œä½†<code>ssh</code>åè®®é€Ÿåº¦æœ€å¿«ã€‚</p></li></ul></li></ol><h2 id="åˆ†æ”¯ç®¡ç†"><a href="#åˆ†æ”¯ç®¡ç†" class="headerlink" title="åˆ†æ”¯ç®¡ç†"></a>åˆ†æ”¯ç®¡ç†</h2><ol><li><p>ç®€ä»‹ï¼šåˆ†æ”¯åœ¨å®é™…ä¸­æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå‡è®¾ä½ å‡†å¤‡å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦ä¸¤å‘¨æ‰èƒ½å®Œæˆï¼Œç¬¬ä¸€å‘¨ä½ å†™äº†50%çš„ä»£ç ï¼Œå¦‚æœç«‹åˆ»æäº¤ï¼Œç”±äºä»£ç è¿˜æ²¡å†™å®Œï¼Œä¸å®Œæ•´çš„ä»£ç åº“ä¼šå¯¼è‡´åˆ«äººä¸èƒ½å¹²æ´»äº†ã€‚å¦‚æœç­‰ä»£ç å…¨éƒ¨å†™å®Œå†ä¸€æ¬¡æäº¤ï¼Œåˆå­˜åœ¨ä¸¢å¤±æ¯å¤©è¿›åº¦çš„å·¨å¤§é£é™©ã€‚</p><p>ç°åœ¨æœ‰äº†åˆ†æ”¯ï¼Œå°±ä¸ç”¨æ€•äº†ã€‚ä½ åˆ›å»ºäº†ä¸€ä¸ªå±äºä½ è‡ªå·±çš„åˆ†æ”¯ï¼Œåˆ«äººçœ‹ä¸åˆ°ï¼Œè¿˜ç»§ç»­åœ¨åŸæ¥çš„åˆ†æ”¯ä¸Šæ­£å¸¸å·¥ä½œï¼Œè€Œä½ åœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæƒ³æäº¤å°±æäº¤ï¼Œç›´åˆ°å¼€å‘å®Œæ¯•åï¼Œå†ä¸€æ¬¡æ€§åˆå¹¶åˆ°åŸæ¥çš„åˆ†æ”¯ä¸Šï¼Œè¿™æ ·ï¼Œæ—¢å®‰å…¨ï¼Œåˆä¸å½±å“åˆ«äººå·¥ä½œã€‚</p></li><li><p>åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯</p><ul><li><p><code>master</code>åˆ†æ”¯æ˜¯ä¸€æ¡çº¿ï¼ŒGitç”¨<code>master</code>æŒ‡å‘æœ€æ–°çš„æäº¤ï¼Œå†ç”¨<code>HEAD</code>æŒ‡å‘<code>master</code>ï¼Œå°±èƒ½ç¡®å®šå½“å‰åˆ†æ”¯ï¼Œä»¥åŠå½“å‰åˆ†æ”¯çš„æäº¤ç‚¹ï¼š</p><p><img src="C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200603203525643.png" alt="image-20200603203525643"></p></li><li><p>æ¯æ¬¡æäº¤ï¼Œ<code>master</code>åˆ†æ”¯éƒ½ä¼šå‘å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè¿™æ ·ï¼Œéšç€ä½ ä¸æ–­æäº¤ï¼Œ<code>master</code>åˆ†æ”¯çš„çº¿ä¹Ÿè¶Šæ¥è¶Šé•¿ã€‚</p><p>å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œä¾‹å¦‚<code>dev</code>æ—¶ï¼ŒGitæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆå«<code>dev</code>ï¼ŒæŒ‡å‘<code>master</code>ç›¸åŒçš„æäº¤ï¼Œå†æŠŠ<code>HEAD</code>æŒ‡å‘<code>dev</code>ï¼Œå°±è¡¨ç¤ºå½“å‰åˆ†æ”¯åœ¨<code>dev</code>ä¸Šï¼š</p><p><img src="C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200603203559448.png" alt="image-20200603203559448"></p></li><li><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»º<code>dev</code>åˆ†æ”¯ï¼Œç„¶ååˆ‡æ¢åˆ°<code>dev</code>åˆ†æ”¯</p><figure class="highlight plain"><figcaption><span>checkout -b dev```</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`git checkout`å‘½ä»¤åŠ ä¸Š`-b`å‚æ•°è¡¨ç¤ºåˆ›å»ºå¹¶åˆ‡æ¢ï¼Œç›¸å½“äºä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š</span><br></pre></td></tr></tbody></table></figure><p>$ git branch dev<br>$ git checkout dev<br>Switched to branch â€˜devâ€™</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- æŠŠ`dev`åˆ†æ”¯çš„å·¥ä½œæˆæœåˆå¹¶åˆ°`master`åˆ†æ”¯ä¸Šï¼š</span><br><span class="line"></span><br><span class="line">  ```git</span><br><span class="line">  $ git merge dev</span><br><span class="line">  Updating d46f35e..b17d20e</span><br><span class="line">  Fast-forward</span><br><span class="line">   readme.txt | 1 +</span><br><span class="line">   1 file changed, 1 insertion(+)</span><br></pre></td></tr></tbody></table></figure></li><li><p><code>Fast-forward</code>ä¿¡æ¯ï¼ŒGitå‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ¬¡åˆå¹¶æ˜¯â€œå¿«è¿›æ¨¡å¼â€ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥æŠŠ<code>master</code>æŒ‡å‘<code>dev</code>çš„å½“å‰æäº¤ï¼Œæ‰€ä»¥åˆå¹¶é€Ÿåº¦éå¸¸å¿«ã€‚</p><p>å½“ç„¶ï¼Œä¹Ÿä¸æ˜¯æ¯æ¬¡åˆå¹¶éƒ½èƒ½<code>Fast-forward</code></p></li><li><p>æˆ‘ä»¬æ³¨æ„åˆ°åˆ‡æ¢åˆ†æ”¯ä½¿ç”¨<code>git checkout &lt;branch&gt;</code>ï¼Œè€Œå‰é¢è®²è¿‡çš„æ’¤é”€ä¿®æ”¹åˆ™æ˜¯<code>git checkout -- &lt;file&gt;</code>ï¼ŒåŒä¸€ä¸ªå‘½ä»¤ï¼Œæœ‰ä¸¤ç§ä½œç”¨ï¼Œç¡®å®æœ‰ç‚¹ä»¤äººè¿·æƒ‘ã€‚</p><p>å®é™…ä¸Šï¼Œåˆ‡æ¢åˆ†æ”¯è¿™ä¸ªåŠ¨ä½œï¼Œç”¨<code>switch</code>æ›´ç§‘å­¦ã€‚å› æ­¤ï¼Œæœ€æ–°ç‰ˆæœ¬çš„Gitæä¾›äº†æ–°çš„<code>git switch</code>å‘½ä»¤æ¥åˆ‡æ¢åˆ†æ”¯ï¼š</p><p>åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°çš„<code>dev</code>åˆ†æ”¯ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch -c dev</span><br></pre></td></tr></tbody></table></figure></li><li><p>ç›´æ¥åˆ‡æ¢åˆ°å·²æœ‰çš„<code>master</code>åˆ†æ”¯ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch master</span><br></pre></td></tr></tbody></table></figure><p>â€‹    ä½¿ç”¨æ–°çš„<code>git switch</code>å‘½ä»¤ï¼Œæ¯”<code>git checkout</code>è¦æ›´å®¹æ˜“ç†è§£ã€‚</p></li><li><p>å°ç»“ï¼šæŸ¥çœ‹åˆ†æ”¯ï¼š<code>git branch</code></p><p>åˆ›å»ºåˆ†æ”¯ï¼š<code>git branch &lt;name&gt;</code></p><p>åˆ‡æ¢åˆ†æ”¯ï¼š<code>git checkout &lt;name&gt;</code>æˆ–è€…<code>git switch &lt;name&gt;</code></p><p>åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼š<code>git checkout -b &lt;name&gt;</code>æˆ–è€…<code>git switch -c &lt;name&gt;</code></p><p>åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼š<code>git merge &lt;name&gt;</code></p><p>åˆ é™¤åˆ†æ”¯ï¼š<code>git branch -d &lt;name&gt;</code></p></li></ul></li><li><p>è§£å†³å†²çª</p><ul><li>å½“Gitæ— æ³•è‡ªåŠ¨åˆå¹¶åˆ†æ”¯æ—¶ï¼Œå°±å¿…é¡»é¦–å…ˆè§£å†³å†²çªã€‚è§£å†³å†²çªåï¼Œå†æäº¤ï¼Œåˆå¹¶å®Œæˆã€‚</li><li>è§£å†³å†²çªå°±æ˜¯æŠŠGitåˆå¹¶å¤±è´¥çš„æ–‡ä»¶æ‰‹åŠ¨ç¼–è¾‘ä¸ºæˆ‘ä»¬å¸Œæœ›çš„å†…å®¹ï¼Œå†æäº¤ã€‚</li><li>ç”¨<code>git log --graph</code>å‘½ä»¤å¯ä»¥çœ‹åˆ°åˆ†æ”¯åˆå¹¶å›¾ã€‚</li></ul></li><li><p>åˆ†æ”¯ç®¡ç†ç­–ç•¥</p><ul><li><p>Gitä¼šç”¨<code>Fast forward</code>æ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚</p><p>å¦‚æœè¦å¼ºåˆ¶ç¦ç”¨<code>Fast forward</code>æ¨¡å¼ï¼ŒGitå°±ä¼šåœ¨mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„commitï¼Œè¿™æ ·ï¼Œä»åˆ†æ”¯å†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å®æˆ˜ä¸€ä¸‹<code>--no-ff</code>æ–¹å¼çš„<code>git merge</code>ï¼š</p></li><li><p>å‡†å¤‡åˆå¹¶<code>dev</code>åˆ†æ”¯ï¼Œè¯·æ³¨æ„<code>--no-ff</code>å‚æ•°ï¼Œè¡¨ç¤ºç¦ç”¨<code>Fast forward</code>ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --no-ff -m "merge with no-ff" dev</span><br></pre></td></tr></tbody></table></figure></li><li><p>å› ä¸ºæœ¬æ¬¡åˆå¹¶è¦åˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼Œæ‰€ä»¥åŠ ä¸Š<code>-m</code>å‚æ•°ï¼ŒæŠŠcommitæè¿°å†™è¿›å»ã€‚åˆå¹¶åï¼Œæˆ‘ä»¬ç”¨<code>git log</code>çœ‹çœ‹åˆ†æ”¯å†å²ï¼š</p><p><img src="C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200603213003612.png" alt="image-20200603213003612"></p></li><li><p>åœ¨Gitä¸­ï¼Œå¹²æ´»éƒ½åœ¨<code>dev</code>åˆ†æ”¯ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>dev</code>åˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ°æŸä¸ªæ—¶å€™ï¼Œæ¯”å¦‚1.0ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå†æŠŠ<code>dev</code>åˆ†æ”¯åˆå¹¶åˆ°<code>master</code>ä¸Šï¼Œåœ¨<code>master</code>åˆ†æ”¯å‘å¸ƒ1.0ç‰ˆæœ¬ï¼›åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Š<code>--no-ff</code>å‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åçš„å†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œ<code>fast forward</code>åˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ã€‚</p></li></ul></li><li><p>bugåˆ†æ”¯</p><ul><li><p>å“ªä¸ªåˆ†æ”¯ä¸Šä¿®å¤bugï¼Œå‡å®šéœ€è¦åœ¨<code>master</code>åˆ†æ”¯ä¸Šä¿®å¤ï¼Œå°±ä»<code>master</code>åˆ›å»ºä¸´æ—¶åˆ†æ”¯ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch 'master'</span><br><span class="line">Your branch is ahead of 'origin/master' by 6 commits.</span><br><span class="line">  (use "git push" to publish your local commits)</span><br><span class="line"></span><br><span class="line">$ git checkout -b issue-101</span><br><span class="line">Switched to a new branch 'isse-101'</span><br></pre></td></tr></tbody></table></figure></li><li><p>bug ä¿®å¤åæŠŠæ–‡ä»¶addä»¥åŠcommitï¼Œåˆ‡æ¢å›masteråˆ†æ”¯ï¼Œåˆ é™¤<code>issue-101</code>åˆ†æ”¯ï¼š<code>$ git switch master</code> <code>git merge --no-ff -m "merged bug fix 101" issue-101</code></p></li><li><p>æŸ¥çœ‹åˆšæ‰çš„å·¥ä½œç°åœº<code>git stash list</code></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@{0}: WIP on dev: f52c633 add merge</span><br></pre></td></tr></tbody></table></figure></li><li><p>å·¥ä½œç°åœºè¿˜åœ¨ï¼ŒGitæŠŠstashå†…å®¹å­˜åœ¨æŸä¸ªåœ°æ–¹äº†ï¼Œä½†æ˜¯éœ€è¦æ¢å¤ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ªåŠæ³•ï¼š</p><p>ä¸€æ˜¯ç”¨<code>git stash apply</code>æ¢å¤ï¼Œä½†æ˜¯æ¢å¤åï¼Œstashå†…å®¹å¹¶ä¸åˆ é™¤ï¼Œä½ éœ€è¦ç”¨<code>git stash drop</code>æ¥åˆ é™¤ï¼›</p><p>å¦ä¸€ç§æ–¹å¼æ˜¯ç”¨<code>git stash pop</code>ï¼Œæ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ äº†ï¼šå†ç”¨<code>git stash list</code>æŸ¥çœ‹ï¼Œå°±çœ‹ä¸åˆ°ä»»ä½•stashå†…å®¹äº†ï¼š</p><p>ä½ å¯ä»¥å¤šæ¬¡stashï¼Œæ¢å¤çš„æ—¶å€™ï¼Œå…ˆç”¨<code>git stash list</code>æŸ¥çœ‹ï¼Œç„¶åæ¢å¤æŒ‡å®šçš„stashï¼Œç”¨å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply stash@{0}</span><br></pre></td></tr></tbody></table></figure></li><li><p>åŒæ ·çš„bugï¼Œè¦åœ¨devä¸Šä¿®å¤ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠ<code>4c805e2 fix bug 101</code>è¿™ä¸ªæäº¤æ‰€åšçš„ä¿®æ”¹â€œå¤åˆ¶â€åˆ°devåˆ†æ”¯ã€‚æ³¨æ„ï¼šæˆ‘ä»¬åªæƒ³å¤åˆ¶<code>4c805e2 fix bug 101</code>è¿™ä¸ªæäº¤æ‰€åšçš„ä¿®æ”¹ï¼Œå¹¶ä¸æ˜¯æŠŠæ•´ä¸ªmasteråˆ†æ”¯mergeè¿‡æ¥ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼ŒGitä¸“é—¨æä¾›äº†ä¸€ä¸ª<code>cherry-pick</code>å‘½ä»¤ï¼Œè®©æˆ‘ä»¬èƒ½å¤åˆ¶ä¸€ä¸ªç‰¹å®šçš„æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br><span class="line">$ git cherry-pick 4c805e2</span><br><span class="line">[master 1d4b803] fix bug 101</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></tbody></table></figure><p>Gitè‡ªåŠ¨ç»™devåˆ†æ”¯åšäº†ä¸€æ¬¡æäº¤ï¼Œæ³¨æ„è¿™æ¬¡æäº¤çš„commitæ˜¯<code>1d4b803</code>ï¼Œå®ƒå¹¶ä¸åŒäºmasterçš„<code>4c805e2</code>ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªcommitåªæ˜¯æ”¹åŠ¨ç›¸åŒï¼Œä½†ç¡®å®æ˜¯ä¸¤ä¸ªä¸åŒçš„commitã€‚ç”¨<code>git cherry-pick</code>ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åœ¨devåˆ†æ”¯ä¸Šæ‰‹åŠ¨å†æŠŠä¿®bugçš„è¿‡ç¨‹é‡å¤ä¸€éã€‚</p><p>æœ‰äº›èªæ˜çš„ç«¥é‹ä¼šæƒ³äº†ï¼Œæ—¢ç„¶å¯ä»¥åœ¨masteråˆ†æ”¯ä¸Šä¿®å¤bugåï¼Œåœ¨devåˆ†æ”¯ä¸Šå¯ä»¥â€œé‡æ”¾â€è¿™ä¸ªä¿®å¤è¿‡ç¨‹ï¼Œé‚£ä¹ˆç›´æ¥åœ¨devåˆ†æ”¯ä¸Šä¿®å¤bugï¼Œç„¶ååœ¨masteråˆ†æ”¯ä¸Šâ€œé‡æ”¾â€è¡Œä¸è¡Œï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä¸è¿‡ä½ ä»ç„¶éœ€è¦<code>git stash</code>å‘½ä»¤ä¿å­˜ç°åœºï¼Œæ‰èƒ½ä»devåˆ†æ”¯åˆ‡æ¢åˆ°masteråˆ†æ”¯ã€‚</p></li><li><p>å°ç»“ï¼šä¿®å¤bugæ—¶ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡åˆ›å»ºæ–°çš„bugåˆ†æ”¯è¿›è¡Œä¿®å¤ï¼Œç„¶ååˆå¹¶ï¼Œæœ€ååˆ é™¤ï¼›</p><p>å½“æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆæŠŠå·¥ä½œç°åœº<code>git stash</code>ä¸€ä¸‹ï¼Œç„¶åå»ä¿®å¤bugï¼Œä¿®å¤åï¼Œå†<code>git stash pop</code>ï¼Œå›åˆ°å·¥ä½œç°åœºï¼›</p><p>åœ¨masteråˆ†æ”¯ä¸Šä¿®å¤çš„bugï¼Œæƒ³è¦åˆå¹¶åˆ°å½“å‰devåˆ†æ”¯ï¼Œå¯ä»¥ç”¨<code>git cherry-pick &lt;commit&gt;</code>å‘½ä»¤ï¼ŒæŠŠbugæäº¤çš„ä¿®æ”¹â€œå¤åˆ¶â€åˆ°å½“å‰åˆ†æ”¯ï¼Œé¿å…é‡å¤åŠ³åŠ¨</p></li></ul></li><li><p>Featureåˆ†æ”¯</p><ul><li><p>å¼€å‘ä¸€ä¸ªæ–°featureï¼Œæœ€å¥½æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼›</p><p>å¦‚æœè¦ä¸¢å¼ƒä¸€ä¸ªæ²¡æœ‰è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯ï¼Œå¯ä»¥é€šè¿‡<code>git branch -D &lt;name&gt;</code>å¼ºè¡Œåˆ é™¤ã€‚</p></li></ul></li><li><p>å¤šäººåä½œ</p><ul><li><p>å½“ä½ ä»è¿œç¨‹ä»“åº“å…‹éš†æ—¶ï¼Œå®é™…ä¸ŠGitè‡ªåŠ¨æŠŠæœ¬åœ°çš„<code>master</code>åˆ†æ”¯å’Œè¿œç¨‹çš„<code>master</code>åˆ†æ”¯å¯¹åº”èµ·æ¥äº†ï¼Œå¹¶ä¸”ï¼Œè¿œç¨‹ä»“åº“çš„é»˜è®¤åç§°æ˜¯<code>origin</code>ã€‚è¦æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼Œç”¨<code>git remote</code>ç”¨<code>git remote -v</code>æ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ï¼š</p></li><li><p><code>master</code>åˆ†æ”¯æ˜¯ä¸»åˆ†æ”¯ï¼Œå› æ­¤è¦æ—¶åˆ»ä¸è¿œç¨‹åŒæ­¥ï¼›<code>dev</code>åˆ†æ”¯æ˜¯å¼€å‘åˆ†æ”¯ï¼Œå›¢é˜Ÿæ‰€æœ‰æˆå‘˜éƒ½éœ€è¦åœ¨ä¸Šé¢å·¥ä½œï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦ä¸è¿œç¨‹åŒæ­¥ï¼›bugåˆ†æ”¯åªç”¨äºåœ¨æœ¬åœ°ä¿®å¤bugï¼Œå°±æ²¡å¿…è¦æ¨åˆ°è¿œç¨‹äº†ï¼Œé™¤éè€æ¿è¦çœ‹çœ‹ä½ æ¯å‘¨åˆ°åº•ä¿®å¤äº†å‡ ä¸ªbugï¼›featureåˆ†æ”¯æ˜¯å¦æ¨åˆ°è¿œç¨‹ï¼Œå–å†³äºä½ æ˜¯å¦å’Œä½ çš„å°ä¼™ä¼´åˆä½œåœ¨ä¸Šé¢å¼€å‘ã€‚</p></li><li><p>æŠ“å–åˆ†æ”¯ï¼Œç°åœ¨ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªä½ çš„å°ä¼™ä¼´ï¼Œå¯ä»¥åœ¨å¦ä¸€å°ç”µè„‘ï¼ˆæ³¨æ„è¦æŠŠSSH Keyæ·»åŠ åˆ°GitHubï¼‰æˆ–è€…åŒä¸€å°ç”µè„‘çš„å¦ä¸€ä¸ªç›®å½•ä¸‹å…‹éš†ï¼š<code>$ git clone git@github.com:michaelliao/learngit.git</code></p></li><li><p>ä½ çš„å°ä¼™ä¼´å·²ç»å‘<code>origin/dev</code>åˆ†æ”¯æ¨é€äº†ä»–çš„æäº¤ï¼Œè€Œç¢°å·§ä½ ä¹Ÿå¯¹åŒæ ·çš„æ–‡ä»¶ä½œäº†ä¿®æ”¹ï¼Œå¹¶è¯•å›¾æ¨é€ï¼š<code>$ git push origin dev</code>,è¿™ä¸ªæ—¶å€™ä¼šæ¨é€å¤±è´¥ï¼Œå› ä¸ºä½ çš„å°ä¼™ä¼´çš„æœ€æ–°æäº¤å’Œä½ è¯•å›¾æ¨é€çš„æäº¤æœ‰å†²çªï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼ŒGitå·²ç»æç¤ºæˆ‘ä»¬ï¼Œå…ˆç”¨<code>git pull</code>æŠŠæœ€æ–°çš„æäº¤ä»<code>origin/dev</code>æŠ“ä¸‹æ¥ï¼Œç„¶åï¼Œåœ¨æœ¬åœ°åˆå¹¶ï¼Œè§£å†³å†²çªï¼Œå†æ¨é€ï¼šå¦‚æœ<code>git pull</code>ä¹Ÿå¤±è´¥äº†ï¼ŒåŸå› æ˜¯æ²¡æœ‰æŒ‡å®šæœ¬åœ°<code>dev</code>åˆ†æ”¯ä¸è¿œç¨‹<code>origin/dev</code>åˆ†æ”¯çš„é“¾æ¥ï¼Œæ ¹æ®æç¤ºï¼Œè®¾ç½®<code>dev</code>å’Œ<code>origin/dev</code>çš„é“¾æ¥ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --set-upstream-to=origin/dev dev</span><br><span class="line">Branch 'dev' set up to track remote branch 'dev' from 'origin'.</span><br></pre></td></tr></tbody></table></figure><p>åœ¨è¿›è¡Œpull,è¿™å›<code>git pull</code>æˆåŠŸï¼Œä½†æ˜¯åˆå¹¶æœ‰å†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³ï¼Œè§£å†³çš„æ–¹æ³•å’Œåˆ†æ”¯ç®¡ç†ä¸­çš„<a href="http://www.liaoxuefeng.com/wiki/896043488029600/900004111093344" target="_blank" rel="noopener">è§£å†³å†²çª</a>å®Œå…¨ä¸€æ ·ã€‚è§£å†³åï¼Œæäº¤ï¼Œå†pushï¼š</p></li><li><p>å› æ­¤ï¼Œå¤šäººåä½œçš„å·¥ä½œæ¨¡å¼é€šå¸¸æ˜¯è¿™æ ·ï¼š</p><ol><li>é¦–å…ˆï¼Œå¯ä»¥è¯•å›¾ç”¨<code>git push origin &lt;branch-name&gt;</code>æ¨é€è‡ªå·±çš„ä¿®æ”¹ï¼›</li><li>å¦‚æœæ¨é€å¤±è´¥ï¼Œåˆ™å› ä¸ºè¿œç¨‹åˆ†æ”¯æ¯”ä½ çš„æœ¬åœ°æ›´æ–°ï¼Œéœ€è¦å…ˆç”¨<code>git pull</code>è¯•å›¾åˆå¹¶ï¼›</li><li>å¦‚æœåˆå¹¶æœ‰å†²çªï¼Œåˆ™è§£å†³å†²çªï¼Œå¹¶åœ¨æœ¬åœ°æäº¤ï¼›</li><li>æ²¡æœ‰å†²çªæˆ–è€…è§£å†³æ‰å†²çªåï¼Œå†ç”¨<code>git push origin &lt;branch-name&gt;</code>æ¨é€å°±èƒ½æˆåŠŸï¼</li></ol><p>å¦‚æœ<code>git pull</code>æç¤º<code>no tracking information</code>ï¼Œåˆ™è¯´æ˜æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„é“¾æ¥å…³ç³»æ²¡æœ‰åˆ›å»ºï¼Œç”¨å‘½ä»¤<code>git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;</code>ã€‚</p></li><li><p>å°ç»“ï¼šæŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼Œä½¿ç”¨<code>git remote -v</code>ï¼›</p><ul><li>æœ¬åœ°æ–°å»ºçš„åˆ†æ”¯å¦‚æœä¸æ¨é€åˆ°è¿œç¨‹ï¼Œå¯¹å…¶ä»–äººå°±æ˜¯ä¸å¯è§çš„ï¼›</li><li>ä»æœ¬åœ°æ¨é€åˆ†æ”¯ï¼Œä½¿ç”¨<code>git push origin branch-name</code>ï¼Œå¦‚æœæ¨é€å¤±è´¥ï¼Œå…ˆç”¨<code>git pull</code>æŠ“å–è¿œç¨‹çš„æ–°æäº¤ï¼›</li><li>åœ¨æœ¬åœ°åˆ›å»ºå’Œè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„åˆ†æ”¯ï¼Œä½¿ç”¨<code>git checkout -b branch-name origin/branch-name</code>ï¼Œæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯çš„åç§°æœ€å¥½ä¸€è‡´ï¼›</li><li>å»ºç«‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è”ï¼Œä½¿ç”¨<code>git branch --set-upstream branch-name origin/branch-name</code>ï¼›</li><li>ä»è¿œç¨‹æŠ“å–åˆ†æ”¯ï¼Œä½¿ç”¨<code>git pull</code>ï¼Œå¦‚æœæœ‰å†²çªï¼Œè¦å…ˆå¤„ç†å†²çªã€‚</li></ul></li></ul></li><li><p>Rebase</p><ul><li><p>å¤šäººåœ¨åŒä¸€ä¸ªåˆ†æ”¯ä¸Šåä½œæ—¶ï¼Œå¾ˆå®¹æ˜“å‡ºç°å†²çªã€‚å³ä½¿æ²¡æœ‰å†²çªï¼Œåpushçš„ç«¥é‹ä¸å¾—ä¸å…ˆpullï¼Œåœ¨æœ¬åœ°åˆå¹¶ï¼Œç„¶åæ‰èƒ½pushæˆåŠŸã€‚</p><p>æ¯æ¬¡åˆå¹¶å†pushåï¼Œåˆ†æ”¯å˜æˆäº†è¿™æ ·</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git log --graph --pretty=oneline --abbrev-commit</span><br><span class="line">* d1be385 (HEAD -&gt; master, origin/master) init hello</span><br><span class="line">*   e5e69f1 Merge branch 'dev'</span><br><span class="line">|\  </span><br><span class="line">| *   57c53ab (origin/dev, dev) fix env conflict</span><br><span class="line">| |\  </span><br><span class="line">| | * 7a5e5dd add env</span><br><span class="line">| * | 7bd91f1 add new env</span><br><span class="line">| |/  </span><br><span class="line">* |   12a631b merged bug fix 101</span><br><span class="line">|\ \  </span><br><span class="line">| * | 4c805e2 fix bug 101</span><br><span class="line">|/ /  </span><br><span class="line">* |   e1e9c68 merge with no-ff</span><br><span class="line">|\ \  </span><br><span class="line">| |/  </span><br><span class="line">| * f52c633 add merge</span><br><span class="line">|/  </span><br><span class="line">*   cf810e4 conflict fixed</span><br></pre></td></tr></tbody></table></figure></li><li><p>è¿™ä¸ªæ—¶å€™ï¼Œrebaseå°±æ´¾ä¸Šäº†ç”¨åœºã€‚æˆ‘ä»¬è¾“å…¥å‘½ä»¤<code>git rebase</code>è¯•è¯•</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: add comment</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">Mhello.py</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging hello.py</span><br><span class="line">Applying: add author</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">Mhello.py</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging hello.py</span><br></pre></td></tr></tbody></table></figure></li><li><p>è¾“å‡ºäº†ä¸€å¤§å †æ“ä½œï¼Œåˆ°åº•æ˜¯å•¥æ•ˆæœï¼Ÿå†ç”¨<code>git log</code>çœ‹çœ‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git log --graph --pretty=oneline --abbrev-commit</span><br><span class="line">* 7e61ed4 (HEAD -&gt; master) add author</span><br><span class="line">* 3611cfe add comment</span><br><span class="line">* f005ed4 (origin/master) set exit=1</span><br><span class="line">* d1be385 init hello</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure></li><li><p>åŸæœ¬åˆ†å‰çš„æäº¤ç°åœ¨å˜æˆä¸€æ¡ç›´çº¿äº†ï¼è¿™ç§ç¥å¥‡çš„æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿå…¶å®åŸç†éå¸¸ç®€å•ã€‚æˆ‘ä»¬æ³¨æ„è§‚å¯Ÿï¼Œå‘ç°GitæŠŠæˆ‘ä»¬æœ¬åœ°çš„æäº¤â€œæŒªåŠ¨â€äº†ä½ç½®ï¼Œæ”¾åˆ°äº†<code>f005ed4 (origin/master) set exit=1</code>ä¹‹åï¼Œè¿™æ ·ï¼Œæ•´ä¸ªæäº¤å†å²å°±æˆäº†ä¸€æ¡ç›´çº¿ã€‚rebaseæ“ä½œå‰åï¼Œæœ€ç»ˆçš„æäº¤å†…å®¹æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬æœ¬åœ°çš„commitä¿®æ”¹å†…å®¹å·²ç»å˜åŒ–äº†ï¼Œå®ƒä»¬çš„ä¿®æ”¹ä¸å†åŸºäº<code>d1be385 init hello</code>ï¼Œè€Œæ˜¯åŸºäº<code>f005ed4 (origin/master) set exit=1</code>ï¼Œä½†æœ€åçš„æäº¤<code>7e61ed4</code>å†…å®¹æ˜¯ä¸€è‡´çš„ã€‚</p><p>è¿™å°±æ˜¯rebaseæ“ä½œçš„ç‰¹ç‚¹ï¼šæŠŠåˆ†å‰çš„æäº¤å†å²â€œæ•´ç†â€æˆä¸€æ¡ç›´çº¿ï¼Œçœ‹ä¸Šå»æ›´ç›´è§‚ã€‚ç¼ºç‚¹æ˜¯æœ¬åœ°çš„åˆ†å‰æäº¤å·²ç»è¢«ä¿®æ”¹è¿‡äº†ã€‚</p><p>æœ€åï¼Œé€šè¿‡pushæ“ä½œæŠŠæœ¬åœ°åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ï¼š</p></li><li><p>å†ç”¨<code>git log</code>çœ‹çœ‹æ•ˆæœ</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git log --graph --pretty=oneline --abbrev-commit</span><br><span class="line">* 7e61ed4 (HEAD -&gt; master, origin/master) add author</span><br><span class="line">* 3611cfe add comment</span><br><span class="line">* f005ed4 set exit=1</span><br><span class="line">* d1be385 init hello</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure><p>è¿œç¨‹åˆ†æ”¯çš„æäº¤å†å²ä¹Ÿæ˜¯ä¸€æ¡ç›´çº¿ã€‚</p></li><li><p>å°ç»“ï¼š</p><ul><li>rebaseæ“ä½œå¯ä»¥æŠŠæœ¬åœ°æœªpushçš„åˆ†å‰æäº¤å†å²æ•´ç†æˆç›´çº¿ï¼›</li><li>rebaseçš„ç›®çš„æ˜¯ä½¿å¾—æˆ‘ä»¬åœ¨æŸ¥çœ‹å†å²æäº¤çš„å˜åŒ–æ—¶æ›´å®¹æ˜“ï¼Œå› ä¸ºåˆ†å‰çš„æäº¤éœ€è¦ä¸‰æ–¹å¯¹æ¯”ã€‚</li></ul></li></ul></li></ol><h2 id="æ ‡ç­¾ç®¡ç†"><a href="#æ ‡ç­¾ç®¡ç†" class="headerlink" title="æ ‡ç­¾ç®¡ç†"></a>æ ‡ç­¾ç®¡ç†</h2><ol><li><p>ç®€ä»‹ï¼šå‘å¸ƒä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å…ˆåœ¨ç‰ˆæœ¬åº“ä¸­æ‰“ä¸€ä¸ªæ ‡ç­¾ï¼ˆtagï¼‰ï¼Œè¿™æ ·ï¼Œå°±å”¯ä¸€ç¡®å®šäº†æ‰“æ ‡ç­¾æ—¶åˆ»çš„ç‰ˆæœ¬ã€‚å°†æ¥æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œå–æŸä¸ªæ ‡ç­¾çš„ç‰ˆæœ¬ï¼Œå°±æ˜¯æŠŠé‚£ä¸ªæ‰“æ ‡ç­¾çš„æ—¶åˆ»çš„å†å²ç‰ˆæœ¬å–å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œæ ‡ç­¾ä¹Ÿæ˜¯ç‰ˆæœ¬åº“çš„ä¸€ä¸ªå¿«ç…§ã€‚ä¾‹å¦‚ï¼š</p><p>è¯·æŠŠä¸Šå‘¨ä¸€çš„é‚£ä¸ªç‰ˆæœ¬æ‰“åŒ…å‘å¸ƒï¼Œç‰ˆæœ¬å·æ˜¯v1.2â€</p><p>â€œå¥½çš„ï¼ŒæŒ‰ç…§tag v1.2æŸ¥æ‰¾commitå°±è¡Œï¼â€</p><p>æ‰€ä»¥ï¼Œtagå°±æ˜¯ä¸€ä¸ªè®©äººå®¹æ˜“è®°ä½çš„æœ‰æ„ä¹‰çš„åå­—ï¼Œå®ƒè·ŸæŸä¸ªcommitç»‘åœ¨ä¸€èµ·ã€‚</p></li><li><p>åˆ›å»ºæ ‡ç­¾</p><ul><li>æ‰“æ ‡ç­¾å¾ˆç®€å•,åˆ‡æ¢åˆ°æ‰“æ ‡ç­¾çš„åˆ†æ”¯</li></ul></li></ol><pre><code><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br><span class="line">* dev</span><br><span class="line">master</span><br><span class="line">$ git checkout master</span><br></pre></td></tr></tbody></table></figure>æ•²`git tag &lt;name&gt;`æ‰“ä¸€ä¸ªæ–°çš„æ ‡ç­¾<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v1.0</span><br></pre></td></tr></tbody></table></figure>ä½¿ç”¨`git tag` æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br><span class="line">v1.0</span><br></pre></td></tr></tbody></table></figure>æ¯”å¦‚ï¼Œç°åœ¨å·²ç»æ˜¯å‘¨äº”äº†ï¼Œä½†åº”è¯¥åœ¨å‘¨ä¸€æ‰“çš„æ ‡ç­¾æ²¡æœ‰æ‰“ï¼Œæ€ä¹ˆåŠï¼Ÿæ–¹æ³•æ˜¯æ‰¾åˆ°å†å²æäº¤çš„commit idï¼Œç„¶åæ‰“ä¸Šå°±å¯ä»¥äº†<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=oneline --abbrev-commit</span><br><span class="line">12a631b (HEAD -&gt; master, tag: v1.0, origin/master) merged bug fix 101</span><br><span class="line">4c805e2 fix bug 101</span><br><span class="line">e1e9c68 merge with no-ff</span><br><span class="line">f52c633 add merge</span><br><span class="line">cf810e4 conflict fixed</span><br><span class="line">5dc6824 &amp; simple</span><br><span class="line">14096d0 AND simple</span><br><span class="line">b17d20e branch test</span><br><span class="line">d46f35e remove test.txt</span><br><span class="line">b84166e add test.txt</span><br><span class="line">519219b git tracks changes</span><br><span class="line">e43a48b understand how stage works</span><br><span class="line">1094adb append GPL</span><br><span class="line">e475afc add distributed</span><br><span class="line">eaadf4e wrote a readme file</span><br></pre></td></tr></tbody></table></figure>æ¯”æ–¹è¯´è¦å¯¹`add merge`è¿™æ¬¡æäº¤æ‰“æ ‡ç­¾ï¼Œå®ƒå¯¹åº”çš„commit idæ˜¯`f52c633`ï¼Œæ•²å…¥å‘½ä»¤ï¼š`$ git tag v0.9 f52c633`</code></pre><ul><li><p>æ ‡ç­¾ä¸æ˜¯æŒ‰æ—¶é—´é¡ºåºåˆ—å‡ºï¼Œè€Œæ˜¯æŒ‰å­—æ¯æ’åºçš„ã€‚å¯ä»¥ç”¨<code>git show &lt;tagname&gt;</code>æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ï¼š</p></li><li><p>è¿˜å¯ä»¥åˆ›å»ºå¸¦æœ‰è¯´æ˜çš„æ ‡ç­¾ï¼Œç”¨<code>-a</code>æŒ‡å®šæ ‡ç­¾åï¼Œ<code>-m</code>æŒ‡å®šè¯´æ˜æ–‡å­—ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.1 -m "version 0.1 released" 1094adb</span><br></pre></td></tr></tbody></table></figure><p>ç”¨å‘½ä»¤<code>git show &lt;tagname&gt;</code>å¯ä»¥çœ‹åˆ°è¯´æ˜æ–‡å­—ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git show v0.1</span><br><span class="line">tag v0.1</span><br><span class="line">Tagger: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Fri May 18 22:48:43 2018 +0800</span><br><span class="line"></span><br><span class="line">version 0.1 released</span><br><span class="line">......</span><br></pre></td></tr></tbody></table></figure></li><li><p><strong>æ ‡ç­¾æ€»æ˜¯å’ŒæŸä¸ªcommitæŒ‚é’©ã€‚å¦‚æœè¿™ä¸ªcommitæ—¢å‡ºç°åœ¨masteråˆ†æ”¯ï¼Œåˆå‡ºç°åœ¨devåˆ†æ”¯ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸¤ä¸ªåˆ†æ”¯ä¸Šéƒ½å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ ‡ç­¾ã€‚</strong></p></li><li><p>å°ç»“ï¼š</p><ul><li>å‘½ä»¤<code>git tag &lt;tagname&gt;</code>ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸º<code>HEAD</code>ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼›</li><li>å‘½ä»¤<code>git tag -a &lt;tagname&gt; -m "blablabla..."</code>å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼›</li><li>å‘½ä»¤<code>git tag</code>å¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚</li></ul></li></ul><ol start="3"><li><p>æ“ä½œæ ‡ç­¾</p><ul><li><p>åˆ é™¤ä¸€ä¸ªæ ‡ç­¾ï¼š<code>git tag -d v0.1</code></p></li><li><p>å› ä¸ºåˆ›å»ºçš„æ ‡ç­¾éƒ½ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨æ¨é€åˆ°è¿œç¨‹ã€‚æ‰€ä»¥æ‰“é”™çš„æ ‡ç­¾å¯ä»¥åœ¨æœ¬åœ°å®‰å…¨çš„åˆ é™¤ï¼Œå¦‚æœè¦æ¨é€æŸä¸ªæ ‡ç­¾åˆ°è¿œç¨‹ï¼Œä½¿ç”¨å‘½ä»¤<code>git push origin &lt;tagname&gt;</code>:</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin v1.0</span><br><span class="line">Total 0 (delta 0), reused 0 (delta 0)</span><br><span class="line">To github.com:michaelliao/learngit.git</span><br><span class="line"> * [new tag]         v1.0 -&gt; v1.0</span><br></pre></td></tr></tbody></table></figure><p>æˆ–è€…ï¼Œä¸€æ¬¡æ€§æ¨é€å…¨éƒ¨å°šæœªæ¨é€åˆ°è¿œç¨‹çš„æœ¬åœ°æ ‡ç­¾ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --tags</span><br><span class="line">Total 0 (delta 0), reused 0 (delta 0)</span><br><span class="line">To github.com:michaelliao/learngit.git</span><br><span class="line"> * [new tag]         v0.9 -&gt; v0.9</span><br></pre></td></tr></tbody></table></figure></li><li><p>å¦‚æœéœ€è¦åˆ é™¤å·²ç»æ¨é€åˆ°è¿œç¨‹çš„æ ‡ç­¾ï¼Œéœ€è¦å…ˆåˆ é™¤æœ¬åœ°æ ‡ç­¾</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v0.9</span><br><span class="line">Deleted tag 'v0.9' (was f52c633)</span><br></pre></td></tr></tbody></table></figure><p>ç„¶åï¼Œä»è¿œç¨‹åˆ é™¤ï¼Œå‘½ä»¤ä¹Ÿæ˜¯pushï¼Œä½†æ˜¯æ ¼å¼å´ä¸åŒï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin :refs/tags/v0.9</span><br><span class="line">To github.com:michaelliao/learngit.git</span><br><span class="line"> - [deleted]         v0.9</span><br></pre></td></tr></tbody></table></figure><p>ç™»å½•GitHubæŸ¥çœ‹æ˜¯å¦åˆ é™¤äº†æ ‡ç­¾</p></li><li><p>å°ç»“ï¼š</p><ul><li>å‘½ä»¤<code>git push origin &lt;tagname&gt;</code>å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼›</li><li>å‘½ä»¤<code>git push origin --tags</code>å¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼›</li><li>å‘½ä»¤<code>git tag -d &lt;tagname&gt;</code>å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼›</li><li>å‘½ä»¤<code>git push origin :refs/tags/&lt;tagname&gt;</code>å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚</li></ul></li></ul></li></ol><h2 id="ä½¿ç”¨GitHub"><a href="#ä½¿ç”¨GitHub" class="headerlink" title="ä½¿ç”¨GitHub"></a>ä½¿ç”¨GitHub</h2><ol><li><p>å¦‚ä½•å‚ä¸ä¸€ä¸ªå¼€æºé¡¹ç›®å‘¢ï¼Ÿæ¯”å¦‚äººæ°”æé«˜çš„bootstrapé¡¹ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„CSSæ¡†æ¶ï¼Œä½ å¯ä»¥è®¿é—®å®ƒçš„é¡¹ç›®ä¸»é¡µ<a href="https://github.com/twbs/bootstrapï¼Œç‚¹â€œForkâ€å°±åœ¨è‡ªå·±çš„è´¦å·ä¸‹å…‹éš†äº†ä¸€ä¸ªbootstrapä»“åº“ï¼Œç„¶åï¼Œä»è‡ªå·±çš„è´¦å·ä¸‹cloneï¼š" target="_blank" rel="noopener">https://github.com/twbs/bootstrapï¼Œç‚¹â€œForkâ€å°±åœ¨è‡ªå·±çš„è´¦å·ä¸‹å…‹éš†äº†ä¸€ä¸ªbootstrapä»“åº“ï¼Œç„¶åï¼Œä»è‡ªå·±çš„è´¦å·ä¸‹cloneï¼š</a></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:michaelliao/bootstrap.git</span><br></pre></td></tr></tbody></table></figure><p>ä¸€å®šè¦ä»è‡ªå·±çš„è´¦å·ä¸‹cloneä»“åº“ï¼Œè¿™æ ·ä½ æ‰èƒ½æ¨é€ä¿®æ”¹ã€‚å¦‚æœä»bootstrapçš„ä½œè€…çš„ä»“åº“åœ°å€<code>git@github.com:twbs/bootstrap.git</code>å…‹éš†ï¼Œå› ä¸ºæ²¡æœ‰æƒé™ï¼Œä½ å°†ä¸èƒ½æ¨é€ä¿®æ”¹ã€‚</p><p>Bootstrapçš„å®˜æ–¹ä»“åº“<code>twbs/bootstrap</code>ã€ä½ åœ¨GitHubä¸Šå…‹éš†çš„ä»“åº“<code>my/bootstrap</code>ï¼Œä»¥åŠä½ è‡ªå·±å…‹éš†åˆ°æœ¬åœ°ç”µè„‘çš„ä»“åº“ï¼Œä»–ä»¬çš„å…³ç³»å°±åƒä¸‹å›¾æ˜¾ç¤ºçš„é‚£æ ·ï¼š</p><p><img src="C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200605203808429.png" alt="image-20200605203808429"></p><p>å¦‚æœä½ æƒ³ä¿®å¤bootstrapçš„ä¸€ä¸ªbugï¼Œæˆ–è€…æ–°å¢ä¸€ä¸ªåŠŸèƒ½ï¼Œç«‹åˆ»å°±å¯ä»¥å¼€å§‹å¹²æ´»ï¼Œå¹²å®Œåï¼Œå¾€è‡ªå·±çš„ä»“åº“æ¨é€ã€‚</p><p>å¦‚æœä½ å¸Œæœ›bootstrapçš„å®˜æ–¹åº“èƒ½æ¥å—ä½ çš„ä¿®æ”¹ï¼Œä½ å°±å¯ä»¥åœ¨GitHubä¸Šå‘èµ·ä¸€ä¸ªpull requestã€‚å½“ç„¶ï¼Œå¯¹æ–¹æ˜¯å¦æ¥å—ä½ çš„pull requestå°±ä¸ä¸€å®šäº†ã€‚</p><p>å¦‚æœä½ æ²¡èƒ½åŠ›ä¿®æ”¹bootstrapï¼Œä½†åˆæƒ³è¦è¯•ä¸€æŠŠpull requestï¼Œé‚£å°±Forkä¸€ä¸‹æˆ‘çš„ä»“åº“ï¼š<a href="https://github.com/michaelliao/learngitï¼Œåˆ›å»ºä¸€ä¸ª`your-github-id.txt`çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå†™ç‚¹è‡ªå·±å­¦ä¹ Gitçš„å¿ƒå¾—ï¼Œç„¶åæ¨é€ä¸€ä¸ªpull" target="_blank" rel="noopener">https://github.com/michaelliao/learngitï¼Œåˆ›å»ºä¸€ä¸ª`your-github-id.txt`çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå†™ç‚¹è‡ªå·±å­¦ä¹ Gitçš„å¿ƒå¾—ï¼Œç„¶åæ¨é€ä¸€ä¸ªpull</a> requestç»™æˆ‘ï¼Œæˆ‘ä¼šè§†å¿ƒæƒ…è€Œå®šæ˜¯å¦æ¥å—ã€‚<a href="https://github.com" target="_blank" rel="noopener">liudufu</a>     <a href="https://github.com" target="_blank" rel="noopener">https://github.com</a></p></li><li><p><strong>å°ç»“</strong></p><ul><li>åœ¨GitHubä¸Šï¼Œå¯ä»¥ä»»æ„Forkå¼€æºä»“åº“ï¼›</li><li>è‡ªå·±æ‹¥æœ‰Forkåçš„ä»“åº“çš„è¯»å†™æƒé™ï¼›</li><li>å¯ä»¥æ¨é€pull requestç»™å®˜æ–¹ä»“åº“æ¥è´¡çŒ®ä»£ç ã€‚</li></ul></li></ol><h2 id="ä½¿ç”¨Gitee"><a href="#ä½¿ç”¨Gitee" class="headerlink" title="ä½¿ç”¨Gitee"></a>ä½¿ç”¨Gitee</h2><ol><li><p>å’ŒGitHubç›¸æ¯”ï¼ŒGiteeä¹Ÿæä¾›å…è´¹çš„Gitä»“åº“ã€‚æ­¤å¤–ï¼Œè¿˜é›†æˆäº†ä»£ç è´¨é‡æ£€æµ‹ã€é¡¹ç›®æ¼”ç¤ºç­‰åŠŸèƒ½ã€‚å¯¹äºå›¢é˜Ÿåä½œå¼€å‘ï¼ŒGiteeè¿˜æä¾›äº†é¡¹ç›®ç®¡ç†ã€ä»£ç æ‰˜ç®¡ã€æ–‡æ¡£ç®¡ç†çš„æœåŠ¡ï¼Œ5äººä»¥ä¸‹å°å›¢é˜Ÿå…è´¹ã€‚</p><p>Giteeçš„å…è´¹ç‰ˆæœ¬ä¹Ÿæä¾›ç§æœ‰åº“åŠŸèƒ½ï¼Œåªæ˜¯æœ‰5äººçš„æˆå‘˜ä¸Šé™ã€‚</p><p>ä½¿ç”¨Giteeå’Œä½¿ç”¨GitHubç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨Giteeä¸Šæ³¨å†Œè´¦å·å¹¶ç™»å½•åï¼Œéœ€è¦å…ˆä¸Šä¼ è‡ªå·±çš„SSHå…¬é’¥ã€‚é€‰æ‹©å³ä¸Šè§’ç”¨æˆ·å¤´åƒ -&gt; èœå•â€œä¿®æ”¹èµ„æ–™â€ï¼Œç„¶åé€‰æ‹©â€œSSHå…¬é’¥â€ï¼Œå¡«å†™ä¸€ä¸ªä¾¿äºè¯†åˆ«çš„æ ‡é¢˜ï¼Œç„¶åæŠŠç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„<code>.ssh/id_rsa.pub</code>æ–‡ä»¶çš„å†…å®¹ç²˜è´´è¿›å»ï¼š</p></li><li><p>å¦‚æœæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæœ¬åœ°çš„gitä»“åº“ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªåä¸ºlearngitçš„æœ¬åœ°åº“ï¼‰ï¼Œå¦‚ä½•æŠŠå®ƒå…³è”åˆ°Giteeçš„è¿œç¨‹åº“ä¸Šå‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨Giteeä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®é¡¹ç›®åç§°æœ€å¥½ä¸æœ¬åœ°åº“ä¿æŒä¸€è‡´ï¼š</p><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°åº“ä¸Šä½¿ç”¨å‘½ä»¤<code>git remote add</code>æŠŠå®ƒå’ŒGiteeçš„è¿œç¨‹åº“å…³è”ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitee.com:liaoxuefeng/learngit.git</span><br><span class="line">(git remote add origin git@gitee.com:https://gitee.com/dufu-03-13/git_repo_Text)</span><br></pre></td></tr></tbody></table></figure><p>ä¹‹åï¼Œå°±å¯ä»¥æ­£å¸¸åœ°ç”¨<code>git push</code>å’Œ<code>git pull</code>æ¨é€äº†ï¼</p><p>å¦‚æœåœ¨ä½¿ç”¨å‘½ä»¤<code>git remote add</code>æ—¶æŠ¥é”™ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitee.com:liaoxuefeng/learngit.git</span><br><span class="line">fatal: remote origin already exists.</span><br></pre></td></tr></tbody></table></figure><p>è¿™è¯´æ˜æœ¬åœ°åº“å·²ç»å…³è”äº†ä¸€ä¸ªåå«<code>origin</code>çš„è¿œç¨‹åº“ï¼Œæ­¤æ—¶ï¼Œå¯ä»¥å…ˆç”¨<code>git remote -v</code>æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">origingit@github.com:michaelliao/learngit.git (fetch)</span><br><span class="line">origingit@github.com:michaelliao/learngit.git (push)</span><br></pre></td></tr></tbody></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°åº“å·²ç»å…³è”äº†<code>origin</code>çš„è¿œç¨‹åº“ï¼Œå¹¶ä¸”ï¼Œè¯¥è¿œç¨‹åº“æŒ‡å‘GitHubã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ é™¤å·²æœ‰çš„GitHubè¿œç¨‹åº“ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote rm origin</span><br></pre></td></tr></tbody></table></figure><p>å†å…³è”Giteeçš„è¿œç¨‹åº“ï¼ˆæ³¨æ„è·¯å¾„ä¸­éœ€è¦å¡«å†™æ­£ç¡®çš„ç”¨æˆ·åï¼‰ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitee.com:liaoxuefeng/learngit.git</span><br></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å†æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">origingit@gitee.com:liaoxuefeng/learngit.git (fetch)</span><br><span class="line">origingit@gitee.com:liaoxuefeng/learngit.git (push)</span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨å¯ä»¥çœ‹åˆ°ï¼Œoriginå·²ç»è¢«å…³è”åˆ°Giteeçš„è¿œç¨‹åº“äº†ã€‚é€šè¿‡<code>git push</code>å‘½ä»¤å°±å¯ä»¥æŠŠæœ¬åœ°åº“æ¨é€åˆ°Giteeä¸Šã€‚</p><p>gitæœ¬èº«æ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥åŒæ­¥åˆ°å¦å¤–ä¸€ä¸ªè¿œç¨‹åº“ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åŒæ­¥åˆ°å¦å¤–ä¸¤ä¸ªè¿œç¨‹åº“ã€‚</p><p>ä½¿ç”¨å¤šä¸ªè¿œç¨‹åº“æ—¶ï¼Œæˆ‘ä»¬è¦æ³¨æ„ï¼Œgitç»™è¿œç¨‹åº“èµ·çš„é»˜è®¤åç§°æ˜¯<code>origin</code>ï¼Œå¦‚æœæœ‰å¤šä¸ªè¿œç¨‹åº“ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸åŒçš„åç§°æ¥æ ‡è¯†ä¸åŒçš„è¿œç¨‹åº“ã€‚</p><p>ä»ç„¶ä»¥<code>learngit</code>æœ¬åœ°åº“ä¸ºä¾‹ï¼Œæˆ‘ä»¬å…ˆåˆ é™¤å·²å…³è”çš„åä¸º<code>origin</code>çš„è¿œç¨‹åº“ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote rm origin</span><br></pre></td></tr></tbody></table></figure><p>ç„¶åï¼Œå…ˆå…³è”GitHubçš„è¿œç¨‹åº“ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add github git@github.com:michaelliao/learngit.git</span><br></pre></td></tr></tbody></table></figure><p>æ³¨æ„ï¼Œè¿œç¨‹åº“çš„åç§°å«<code>github</code>ï¼Œä¸å«<code>origin</code>äº†ã€‚</p><p>æ¥ç€ï¼Œå†å…³è”Giteeçš„è¿œç¨‹åº“ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add gitee git@gitee.com:liaoxuefeng/learngit.git</span><br></pre></td></tr></tbody></table></figure><p>åŒæ ·æ³¨æ„ï¼Œè¿œç¨‹åº“çš„åç§°å«<code>gitee</code>ï¼Œä¸å«<code>origin</code>ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨<code>git remote -v</code>æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªè¿œç¨‹åº“ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">giteegit@gitee.com:liaoxuefeng/learngit.git (fetch)</span><br><span class="line">giteegit@gitee.com:liaoxuefeng/learngit.git (push)</span><br><span class="line">githubgit@github.com:michaelliao/learngit.git (fetch)</span><br><span class="line">githubgit@github.com:michaelliao/learngit.git (push)</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœè¦æ¨é€åˆ°GitHubï¼Œä½¿ç”¨å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push github master</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœè¦æ¨é€åˆ°Giteeï¼Œä½¿ç”¨å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u gitee master</span><br></pre></td></tr></tbody></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬çš„æœ¬åœ°åº“å°±å¯ä»¥åŒæ—¶ä¸å¤šä¸ªè¿œç¨‹åº“äº’ç›¸åŒæ­¥ï¼š</p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†ä»»ä½•æˆ–å°æˆ–å¤§çš„é¡¹ç›®ã€‚&lt;/p&gt;
&lt;p&gt;Git æ˜¯ Linus Torvalds ä¸ºäº†å¸®åŠ©ç®¡ç† Linux å†…æ ¸å¼€å‘è€Œå¼€å‘çš„ä¸€ä¸ªå¼€æ”¾æºç çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://liudufu.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Git" scheme="https://liudufu.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>MySqlåŸºç¡€å­¦ä¹ </title>
    <link href="https://liudufu.github.io/MySQL_basic_learning/"/>
    <id>https://liudufu.github.io/MySQL_basic_learning/</id>
    <published>2020-12-08T09:44:55.000Z</published>
    <updated>2020-12-08T09:56:17.977Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>MySQLæ˜¯ä¸€ä¸ª<strong><a href="https://baike.baidu.com/item/å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ/696511" target="_blank" rel="noopener">å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</a>**</strong>ï¼Œ**ç”±ç‘å…¸MySQL AB å…¬å¸å¼€å‘ï¼Œå±äº <a href="https://baike.baidu.com/item/Oracle" target="_blank" rel="noopener">Oracle</a> æ——ä¸‹äº§å“ã€‚MySQL æ˜¯æœ€æµè¡Œçš„<a href="https://baike.baidu.com/item/å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ/696511" target="_blank" rel="noopener">å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</a>ä¹‹ä¸€ï¼Œåœ¨ WEB åº”ç”¨æ–¹é¢ï¼ŒMySQLæ˜¯æœ€å¥½çš„ <a href="https://baike.baidu.com/item/RDBMS/1048260" target="_blank" rel="noopener">RDBMS</a> (Relational Database Management Systemï¼Œå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ) åº”ç”¨è½¯ä»¶ä¹‹ä¸€ã€‚</p></blockquote><a id="more"></a><h1 id="MySqlåŸºç¡€å­¦ä¹ "><a href="#MySqlåŸºç¡€å­¦ä¹ " class="headerlink" title="MySqlåŸºç¡€å­¦ä¹ "></a>MySqlåŸºç¡€å­¦ä¹ </h1><h2 id="ä¸€ã€å¼•è¨€"><a href="#ä¸€ã€å¼•è¨€" class="headerlink" title="ä¸€ã€å¼•è¨€"></a>ä¸€ã€å¼•è¨€</h2><h3 id="1-1-ç°æœ‰çš„æ•°æ®å­˜å‚¨æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#1-1-ç°æœ‰çš„æ•°æ®å­˜å‚¨æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="1.1 ç°æœ‰çš„æ•°æ®å­˜å‚¨æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>1.1 ç°æœ‰çš„æ•°æ®å­˜å‚¨æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>Javaç¨‹åºå­˜å‚¨æ•°æ®ï¼ˆå˜é‡ã€å¯¹è±¡ã€æ•°ç»„ã€é›†åˆï¼‰ï¼Œæ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå±äºç¬æ—¶çŠ¶æ€å­˜å‚¨ã€‚</li><li>æ–‡ä»¶ï¼ˆFileï¼‰å­˜å‚¨æ•°æ®ï¼Œä¿å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œå±äºæŒä¹…çŠ¶æ€å­˜å‚¨ã€‚</li></ul><h3 id="1-2-ä»¥ä¸Šå­˜å‚¨æ–¹å¼å­˜åœ¨å“ªäº›ç¼ºç‚¹ï¼Ÿ"><a href="#1-2-ä»¥ä¸Šå­˜å‚¨æ–¹å¼å­˜åœ¨å“ªäº›ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="1.2 ä»¥ä¸Šå­˜å‚¨æ–¹å¼å­˜åœ¨å“ªäº›ç¼ºç‚¹ï¼Ÿ"></a>1.2 ä»¥ä¸Šå­˜å‚¨æ–¹å¼å­˜åœ¨å“ªäº›ç¼ºç‚¹ï¼Ÿ</h3><ul><li>æ²¡æœ‰æ•°æ®ç±»å‹çš„åŒºåˆ†ã€‚</li><li>å­˜å‚¨æ•°æ®é‡æå°ã€‚</li><li>æ²¡æœ‰å®‰å…¨è®¿é—®é™åˆ¶ã€‚</li><li>æ²¡æœ‰å¤‡ä»½ã€æ¢å¤æœºåˆ¶ã€‚ </li></ul><h2 id="äºŒã€æ•°æ®åº“"><a href="#äºŒã€æ•°æ®åº“" class="headerlink" title="äºŒã€æ•°æ®åº“"></a>äºŒã€æ•°æ®åº“</h2><h3 id="2-1-æ¦‚å¿µ"><a href="#2-1-æ¦‚å¿µ" class="headerlink" title="2.1 æ¦‚å¿µ"></a>2.1 æ¦‚å¿µ</h3><p> æ•°æ®åº“æ˜¯æŒ‰ç…§æ•°æ®æ¥å£æ¥<strong>ç»„ç»‡</strong>ã€<strong>å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ä»“åº“</strong>ã€‚æ˜¯ä¸€ä¸ªé•¿æœŸå­˜å‚¨åœ¨è®¡ç®—æœºå†…çš„ã€æœ‰ç»„ç»‡çš„ã€æœ‰å…±äº«çš„ã€ç»Ÿä¸€ç®¡ç†çš„æ•°æ®é›†åˆã€‚</p><h3 id="2-2-æ•°æ®åº“çš„åˆ†ç±»"><a href="#2-2-æ•°æ®åº“çš„åˆ†ç±»" class="headerlink" title="2.2 æ•°æ®åº“çš„åˆ†ç±»"></a>2.2 æ•°æ®åº“çš„åˆ†ç±»</h3><ul><li>ç½‘çŠ¶ç»“æ„æ•°æ®åº“ï¼šç¾å›½é€šç”¨ç”µæ°”å…¬å¸IDSï¼ˆIntegrated Data Storeï¼‰ï¼Œä»¥èŠ‚ç‚¹å½¢å¼å­˜å‚¨å’Œè®¿é—®ã€‚</li><li>å±‚æ¬¡ç»“æ„æ•°æ®åº“ï¼šIBMå…¬å¸IMSï¼ˆInformation Management Systemï¼‰å®šå‘æœ‰åºçš„æ ‘çŠ¶ç»“æ„å®ç°å­˜å‚¨å’Œè®¿é—®ã€‚</li><li>å…³ç³»ç»“æ„æ•°æ®åº“ï¼šOracleã€DB2ã€MySQLã€SQL Serverï¼Œä»¥è¡¨æ ¼ï¼ˆTableï¼‰å­˜å‚¨ï¼Œå¤šè¡¨é—´å»ºç«‹å…³è”å…³ç³»ï¼Œé€šè¿‡åˆ†ç±»ã€åˆå¹¶ã€è¿æ¥ã€é€‰å–ç­‰è¿ç®—å®ç°è®¿é—®ã€‚</li><li>éå…³ç³»å‹æ•°æ®åº“ï¼šElastecSearchã€MongoDBã€Redisï¼Œå¤šæ•°ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œè¡¨ä¸­ä»¥é”®å€¼ï¼ˆkey-valueï¼‰çš„æ–¹å¼å®ç°ç‰¹å®šçš„é”®å’Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„ç‰¹å®šæ•°æ®ã€‚</li></ul><h2 id="ä¸‰ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"><a href="#ä¸‰ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="ä¸‰ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"></a>ä¸‰ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h2><h3 id="3-1-æ¦‚å¿µ"><a href="#3-1-æ¦‚å¿µ" class="headerlink" title="3.1 æ¦‚å¿µ"></a>3.1 æ¦‚å¿µ</h3><blockquote><p> <strong>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</strong>ï¼ˆDataBase Management Systemï¼ŒDBMSï¼‰ï¼šæŒ‡ä¸€ç§æ“ä½œå’Œç®¡ç†æ•°æ®åº“çš„å¤§å‹è½¯ä»¶ï¼Œç”¨äºå»ºç«‹ã€ä½¿ç”¨ã€å’Œç»´æŠ¤æ•°æ®åº“ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œç»Ÿä¸€ç®¡ç†å’Œæ§åˆ¶ï¼Œä»¥ä¿è¯æ•°æ®åº“çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ã€‚ç”¨æˆ·é€šè¿‡æ•°æ®åº“ç®¡ç†ç³»ç»Ÿè®¿é—®æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p></blockquote><h3 id="3-2-å¸¸è§æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"><a href="#3-2-å¸¸è§æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="3.2 å¸¸è§æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"></a>3.2 å¸¸è§æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h3><ul><li>Oracleï¼šè¢«è®¤ä¸ºæ˜¯ä¸šç•Œç›®å‰æ¯”è¾ƒæˆåŠŸçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚Oracleæ•°æ®åº“å¯ä»¥è¿è¡Œåœ¨UNIXã€Windowsç­‰ä¸»æµæ“ä½œå¹³å°ï¼Œå®Œå…¨æ”¯æŒæ‰€æœ‰çš„å·¥ä¸šæ ‡å‡†ï¼Œå¹¶è·å¾—æœ€é«˜çº§åˆ«çš„ISOæ ‡å‡†å®‰å…¨æ€§è®¤è¯ã€‚</li><li>DB2ï¼šIBMå…¬å¸çš„äº§å“ï¼ŒDB2æ•°æ®åº“é‡‡ç”¨å¤šè¿›ç¨‹å¤šçº¿ç´¢ä½“ç³»ç»“æ„ï¼Œå…¶åŠŸèƒ½è¶³ä»¥æ»¡è¶³å¤§ä¸­å…¬å¸çš„éœ€æ±‚ï¼Œå¹¶å¯çµæ´»åœ°æœåŠ¡äºä¸­å°å‹ç”µå­å•†åŠ¡è§£å†³æ–¹æ¡ˆã€‚</li><li>SQL Serverï¼š Microsoftå…¬å¸é€€å‡ºçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚å…·æœ‰ä½¿ç”¨æ–¹ä¾¿å¯ä¼¸ç¼©æ€§å¥½ä¸ç›¸å…³è½¯ä»¶é›†æˆç¨‹åº¦é«˜ç­‰ä¼˜ç‚¹ã€‚</li><li>SQLLiteï¼šåº”ç”¨åœ¨æ‰‹æœºç«¯çš„æ•°æ®åº“ã€‚</li></ul><h2 id="å››ã€MySQL"><a href="#å››ã€MySQL" class="headerlink" title="å››ã€MySQL"></a>å››ã€MySQL</h2><h3 id="4-1-ç®€ä»‹"><a href="#4-1-ç®€ä»‹" class="headerlink" title="4.1 ç®€ä»‹"></a>4.1 ç®€ä»‹</h3><blockquote><p> MySQLæ˜¯ä¸€ä¸ª<strong>å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</strong>ï¼Œç”±ç‘å…¸MySQL ABå…¬å¸å¼€å‘ï¼Œå±äºOracleæ——ä¸‹äº§å“ã€‚MySQLæ˜¯æœ€æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¹‹ä¸€ï¼Œåœ¨WEBåº”ç”¨æ–¹é¢ï¼ŒMySQLæ˜¯æœ€å¥½RDBMï¼ˆRelational Database Management Systemï¼Œå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼‰åº”ç”¨è½¯ä»¶ä¹‹ä¸€ã€‚</p></blockquote><h3 id="4-2-è®¿é—®ä¸ä¸‹è½½"><a href="#4-2-è®¿é—®ä¸ä¸‹è½½" class="headerlink" title="4.2 è®¿é—®ä¸ä¸‹è½½"></a>4.2 è®¿é—®ä¸ä¸‹è½½</h3><p>å®˜ç½‘åœ°å€ï¼š <a href="https://www.mysql.com/" target="_blank" rel="noopener">https://www.mysql.com/</a></p><p>ä¸‹è½½åœ°å€ï¼š <a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a></p><p>mysqlå®‰è£…è¿‡ç¨‹è¯·æŸ¥çœ‹<a href="https://blog.csdn.net/weixin_45333934/article/details/105065704" target="_blank" rel="noopener">mysqlå®‰è£…æŒ‡å—</a>ã€‚</p><h3 id="4-3-å¸è½½"><a href="#4-3-å¸è½½" class="headerlink" title="4.3 å¸è½½"></a>4.3 å¸è½½</h3><ul><li>æ§åˆ¶å°å¸è½½ã€‚</li><li>æ‰¾åˆ°mysqlçš„å®‰è£…ç›®å½•è¿›è¡Œåˆ é™¤ã€‚</li><li>programdataåˆ é™¤mysqlã€‚</li></ul><blockquote><ul><li>å¦‚æœå¸è½½åï¼Œæœ‰æœªåˆ é™¤çš„MySQLæœåŠ¡ï¼Œå¯é‡‡ç”¨æ‰‹åŠ¨åˆ é™¤ã€‚</li><li>ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥<code>sc delete MySQL57</code>ï¼Œå›è½¦ã€‚</li></ul></blockquote><p>å¦‚æœæŸä¸ªMySQLç»„ä»¶æ— æ³•åˆ é™¤ï¼Œå¯ä»¥å°è¯•ä»æ³¨å†Œè¡¨æœç´¢ä¿¡æ¯åˆ é™¤ç›¸å…³æ–‡ä»¶å¤¹ã€‚å…·ä½“å¯ç™¾åº¦ã€‚</p><h3 id="4-4-é…ç½®ç¯å¢ƒå˜é‡"><a href="#4-4-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="4.4 é…ç½®ç¯å¢ƒå˜é‡"></a>4.4 é…ç½®ç¯å¢ƒå˜é‡</h3><p><strong>Windows</strong></p><ul><li>åˆ›å»ºMYSQL_HOME: <code>C:\Program Files\MySQL\MySQL Server5.7</code></li><li>è¿½åŠ PATH: <code>%MYSQL_HOME%\bin;</code></li></ul><h3 id="4-5-MySQLç›®å½•ç»“æ„"><a href="#4-5-MySQLç›®å½•ç»“æ„" class="headerlink" title="4.5 MySQLç›®å½•ç»“æ„"></a>4.5 MySQLç›®å½•ç»“æ„</h3><p>æ ¸å¿ƒæ–‡ä»¶ä»‹ç»ï¼š</p><table><thead><tr><th>æ–‡ä»¶å¤¹åç§°</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>bin</td><td>å‘½ä»¤æ–‡ä»¶</td></tr><tr><td>lib</td><td>åº“æ–‡ä»¶</td></tr><tr><td>include</td><td>å¤´æ–‡ä»¶</td></tr><tr><td>Share</td><td>å­—ç¬¦é›†ã€è¯­è¨€ç­‰ä¿¡æ¯</td></tr></tbody></table><h3 id="4-6-MySQLé…ç½®æ–‡ä»¶"><a href="#4-6-MySQLé…ç½®æ–‡ä»¶" class="headerlink" title="4.6 MySQLé…ç½®æ–‡ä»¶"></a>4.6 MySQLé…ç½®æ–‡ä»¶</h3><blockquote><p> åœ¨MySQLå®‰è£…ç›®å½•ä¸­æ‰¾åˆ°my.iniæ–‡ä»¶ï¼Œå¹¶æ‰“å¼€my.iniæ–‡ä»¶æŸ¥çœ‹å‡ ä¸ªå¸¸ç”¨é…ç½®å‚æ•°ã€‚</p></blockquote><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>default-character-set</td><td>å®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</td></tr><tr><td>character-set-server</td><td>æœåŠ¡å™¨ç«¯é»˜è®¤å­—ç¬¦é›†</td></tr><tr><td>port</td><td>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„ç«¯å£å·</td></tr><tr><td>default-storage-engine</td><td>MySQLé»˜è®¤å­˜å‚¨å¼•æ“INNODB</td></tr></tbody></table><p>é€šè¿‡å®‰è£…ç¨‹åºå®‰è£…çš„MySQLé…ç½®æ–‡ä»¶åœ¨Cç›˜çš„éšè—æ–‡ä»¶ProgramDataä¸­ï¼Œç‚¹è¿›å»æ‰¾åˆ°å¯¹åº”çš„MYSQLç›®å½•å°±èƒ½çœ‹åˆ°my.iniæ–‡ä»¶äº†ã€‚</p><p>å®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†å’ŒæœåŠ¡å™¨ç«¯é»˜è®¤å­—ç¬¦é›†å¿…é¡»ä¿æŒä¸€è‡´ï¼Œå®ƒä»¬åœ¨åˆå§‹çš„é…ç½®æ–‡ä»¶ä¸­éƒ½æ˜¯è¢«æ³¨é‡Šæ‰çš„ï¼Œé‚£ä¹ˆé»˜è®¤çš„å­—ç¬¦é›†ä¼šè·Ÿéšä½ çš„ç³»ç»Ÿé»˜è®¤å­—ç¬¦é›†ã€‚</p><h2 id="äº”ã€SQLè¯­è¨€"><a href="#äº”ã€SQLè¯­è¨€" class="headerlink" title="äº”ã€SQLè¯­è¨€"></a>äº”ã€SQLè¯­è¨€</h2><h3 id="5-1æ¦‚å¿µ"><a href="#5-1æ¦‚å¿µ" class="headerlink" title="5.1æ¦‚å¿µ"></a>5.1æ¦‚å¿µ</h3><blockquote><p>SQL (Structured Query Language)ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œç”¨äºå­˜å–æ•°æ®ã€æ›´æ–°ã€æŸ¥è¯¢å’Œç®¡ç†å…³ç³»æ•°æ®åº“ç³»ç»Ÿçš„ç¨‹åºè®¾è®¡è¯­è¨€ã€‚</p></blockquote><ul><li>ç»éªŒ:é€šå¸¸æ‰§è¡Œå¯¹æ•°æ®åº“çš„â€œå¢åˆ æ”¹æŸ¥â€ï¼Œç®€ç§°c (create) R (Read) u (Update) D (Delete)ã€‚</li></ul><h3 id="5-2-MySqlåº”ç”¨"><a href="#5-2-MySqlåº”ç”¨" class="headerlink" title="5.2  MySqlåº”ç”¨"></a>5.2  MySqlåº”ç”¨</h3><blockquote><p>å¯¹äºæ•°æ®åº“çš„æ“ä½œï¼Œéœ€è¦åœ¨è¿›å…¥MySQLç¯å¢ƒä¸‹è¿›è¡ŒæŒ‡ä»¤è¾“å…¥ï¼Œå¹¶åœ¨ä¸€å¥æŒ‡ä»¤çš„æœ«å°¾ä½¿ç”¨;ç»“æŸ</p></blockquote><h3 id="5-3åŸºæœ¬å‘½ä»¤"><a href="#5-3åŸºæœ¬å‘½ä»¤" class="headerlink" title="5.3åŸºæœ¬å‘½ä»¤"></a>5.3åŸºæœ¬å‘½ä»¤</h3><blockquote><p>æŸ¥çœ‹MvSqLä¸­æ‰€æœ‰æ•°æ®åº“</p></blockquote><p><code>mysqls SHOW DATABASES;#æ˜¾ç¤ºå½“å‰MySQLä¸­åŒ…å«çš„æ‰€æœ‰æ•°æ®åº“</code></p><table><thead><tr><th>æ•°æ®åº“åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>information_schema</td><td>ä¿¡æ¯æ•°æ®åº“</td></tr><tr><td>mysql</td><td>æ ¸å¿ƒæ•°æ®åº“</td></tr><tr><td>performance_schema</td><td>æ€§èƒ½ä¼˜åŒ–</td></tr><tr><td>sakila</td><td>æ ·æ¿æ•°æ®åº“</td></tr><tr><td>sys</td><td>ç³»ç»Ÿæ•°æ®åº“</td></tr><tr><td>world</td><td>å›½å®¶çš„ç¼–å·ç­‰</td></tr></tbody></table><blockquote><p>åˆ›å»ºè‡ªå®šä¹‰æ•°æ®åº“</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create database mydb1; # åˆ›å»ºæ•°æ®åº“</span><br><span class="line">create database mydb2 character set gbk; # ç¼–ç æ ¼å¼ä¸ºgbk</span><br><span class="line">create database if not exists mydb4;# å¦‚æœmudb4ä¸å­˜åœ¨å°±åˆ›å»ºä»–</span><br></pre></td></tr></tbody></table></figure><blockquote><p>æŸ¥çœ‹æ•°æ®åº“åˆ›å»ºä¿¡æ¯</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">database</span> mydb2; <span class="comment"># æŸ¥çœ‹æ•°æ®åº“åˆ›å»ºä¿¡æ¯</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>ä¿®æ”¹æ•°æ®åº“</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter database mydb2 character set utf8;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>åˆ é™¤æ•°æ®åº“</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database mydb1; # åˆ é™¤æ•°æ®åº“</span><br></pre></td></tr></tbody></table></figure><blockquote><p>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database();</span><br></pre></td></tr></tbody></table></figure><blockquote><p>ä½¿ç”¨æ•°æ®åº“</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use mydb2;</span><br></pre></td></tr></tbody></table></figure><h2 id="å…­ã€å®¢æˆ·ç«¯å·¥å…·"><a href="#å…­ã€å®¢æˆ·ç«¯å·¥å…·" class="headerlink" title="å…­ã€å®¢æˆ·ç«¯å·¥å…·"></a>å…­ã€å®¢æˆ·ç«¯å·¥å…·</h2><h3 id="6-1-Navicate"><a href="#6-1-Navicate" class="headerlink" title="6.1 Navicate"></a>6.1 Navicate</h3><blockquote><p>Navicatæ˜¯ä¸€å¥—å¿«é€Ÿã€å¯é å¹¶ä»·æ ¼ç›¸å®œçš„æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œä¸“ä¸ºç®€åŒ–æ•°æ®åº“çš„ç®¡ç†åŠé™ä½ç³»ç»Ÿç®¡ç†æˆæœ¬è€Œè®¾ã€‚å®ƒçš„è®¾è®¡ç¬¦åˆæ•°æ®åº“ç®¡ç†å‘˜ã€å¼€å‘äººå‘˜åŠä¸­å°ä¼ä¸šçš„éœ€è¦ã€‚Navicat æ˜¯ä»¥ç›´è§‰åŒ–çš„å›¾å½¢ç”¨æˆ·ç•Œé¢è€Œå»ºçš„ï¼Œè®©ä½ å¯ä»¥ä»¥å®‰å…¨å¹¶ä¸”ç®€å•çš„æ–¹å¼åˆ›å»ºã€ç»„ç»‡ã€è®¿é—®å¹¶å…±ç”¨ä¿¡æ¯ã€‚</p></blockquote><h3 id="6-2-SQLyog"><a href="#6-2-SQLyog" class="headerlink" title="6.2 SQLyog"></a>6.2 SQLyog</h3><blockquote><p>MySQLå¯èƒ½æ˜¯ä¸–ç•Œä¸Šæœ€æµè¡Œçš„å¼€æºæ•°æ®åº“å¼•æ“ï¼Œä½†æ˜¯ä½¿ç”¨åŸºäºæ–‡æœ¬çš„å·¥å…·å’Œé…ç½®æ–‡ä»¶å¯èƒ½å¾ˆéš¾è¿›è¡Œç®¡ç†ã€‚SQLyogæä¾›äº†å®Œæ•´çš„å›¾å½¢ç•Œé¢ï¼Œå³ä½¿åˆå­¦è€…ä¹Ÿå¯ä»¥è½»æ¾ä½¿ç”¨MySQLçš„å¼ºå¤§åŠŸèƒ½ã€‚å…¶æ‹¥æœ‰å¹¿æ³›çš„é¢„å®šä¹‰å·¥å…·å’ŒæŸ¥è¯¢ã€å‹å¥½çš„è§†è§‰ç•Œé¢ã€ç±»ä¼¼Excelçš„æŸ¥è¯¢ç»“æœç¼–è¾‘ç•Œé¢ç­‰ä¼˜ç‚¹ã€‚</p></blockquote><h2 id="ä¸ƒã€æ•°æ®æŸ¥è¯¢ã€é‡ç‚¹ã€‘"><a href="#ä¸ƒã€æ•°æ®æŸ¥è¯¢ã€é‡ç‚¹ã€‘" class="headerlink" title="ä¸ƒã€æ•°æ®æŸ¥è¯¢ã€é‡ç‚¹ã€‘"></a>ä¸ƒã€æ•°æ®æŸ¥è¯¢ã€é‡ç‚¹ã€‘</h2><h3 id="7-1-æ•°æ®åº“è¡¨çš„åŸºæœ¬ç»“æ„"><a href="#7-1-æ•°æ®åº“è¡¨çš„åŸºæœ¬ç»“æ„" class="headerlink" title="7.1 æ•°æ®åº“è¡¨çš„åŸºæœ¬ç»“æ„"></a>7.1 æ•°æ®åº“è¡¨çš„åŸºæœ¬ç»“æ„</h3><blockquote><p>å…³ç³»æ•°æ®åº“æ˜¯ä»¥è¡¨æ ¼(Table)è¿›è¡Œæ•°æ®å­˜å‚¨,è¡¨æ ¼ç”±â€œè¡Œâ€å’Œâ€œåˆ—â€ç»„æˆ</p></blockquote><ul><li>ç»éªŒï¼šæ‰§è¡ŒæŸ¥è¯¢è¯­å¥è¿”å›çš„ç»“æœæ˜¯ä¸€å¼ è™šæ‹Ÿè¡¨</li></ul><h3 id="7-2-åŸºæœ¬æŸ¥è¯¢"><a href="#7-2-åŸºæœ¬æŸ¥è¯¢" class="headerlink" title="7.2 åŸºæœ¬æŸ¥è¯¢"></a>7.2 åŸºæœ¬æŸ¥è¯¢</h3><blockquote><p>è¯­æ³•:SELECTåˆ—åFROMè¡¨å</p></blockquote><table><thead><tr><th>å…³é”®å­—</th><th>æè¿°</th></tr></thead><tbody><tr><td>SELECT</td><td>æŒ‡å®šè¦æŸ¥è¯¢çš„åˆ—</td></tr><tr><td>FROM</td><td>æŒ‡å®šè¦æŸ¥è¯¢çš„è¡¨</td></tr></tbody></table><h4 id="7-2-1-æŸ¥è¯¢éƒ¨åˆ†åˆ—"><a href="#7-2-1-æŸ¥è¯¢éƒ¨åˆ†åˆ—" class="headerlink" title="7.2.1 æŸ¥è¯¢éƒ¨åˆ†åˆ—"></a>7.2.1 æŸ¥è¯¢éƒ¨åˆ†åˆ—</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­æ‰€æœ‰å‘˜å·¥çš„ç¼–å·ã€‘ä½ åå­—ã€é‚®ç®±</span><br><span class="line">select employee_id fist_name, email</span><br><span class="line">from t_employee</span><br></pre></td></tr></tbody></table></figure><h4 id="7-2-2æŸ¥è¯¢æ‰€æœ‰åˆ—"><a href="#7-2-2æŸ¥è¯¢æ‰€æœ‰åˆ—" class="headerlink" title="7.2.2æŸ¥è¯¢æ‰€æœ‰åˆ—"></a>7.2.2æŸ¥è¯¢æ‰€æœ‰åˆ—</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢æ‰€æœ‰åˆ—</span><br><span class="line"># 1ã€ä½¿ç”¨*çš„æ–¹å¼</span><br><span class="line">SELECT * FROM t_employees;</span><br><span class="line"># 2ã€ä½¿ç”¨åˆ—åçš„æ–¹å¼</span><br><span class="line">SELECT æ‰€æœ‰åˆ—çš„åˆ—å FROM t_employees;</span><br></pre></td></tr></tbody></table></figure><ul><li>æ³¨æ„ï¼šç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œä¼˜å…ˆä½¿ç”¨åˆ—åæŸ¥è¯¢ï¼Œ*çš„æ–¹å¼éœ€è¦è½¬æ¢æˆå…¨åˆ—åã€‚æ•ˆç‡ä½ï¼Œå¯è¯»æ€§å·®</li></ul><h4 id="7-2-3-å¯¹åˆ—ä¸­çš„æ•°æ®è¿›è¡Œè¿ç®—"><a href="#7-2-3-å¯¹åˆ—ä¸­çš„æ•°æ®è¿›è¡Œè¿ç®—" class="headerlink" title="7.2.3 å¯¹åˆ—ä¸­çš„æ•°æ®è¿›è¡Œè¿ç®—"></a>7.2.3 å¯¹åˆ—ä¸­çš„æ•°æ®è¿›è¡Œè¿ç®—</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å‘˜å·¥çš„ç¼–å·ã€åå­—ã€å¹´è–ª</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,SALARY * 12 FROM t_employees</span><br></pre></td></tr></tbody></table></figure><table><thead><tr><th>ç®—æ•°è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>+</td><td>ä¸¤åˆ—åšåŠ æ³•è¿ç®—</td></tr><tr><td>-</td><td>ä¸¤åˆ—åšå‡æ³•è¿ç®—</td></tr><tr><td>*</td><td>ä¸¤åˆ—åšä¹˜æ³•è¿ç®—</td></tr><tr><td>/</td><td>ä¸¤åˆ—åšé™¤æ³•è¿ç®—</td></tr></tbody></table><ul><li>% æ˜¯å ä½ç¬¦ã€‚è€Œå¹¶éæ¨¡è¿ç®—ç¬¦</li></ul><h4 id="7-2-4-åˆ—çš„åˆ«å"><a href="#7-2-4-åˆ—çš„åˆ«å" class="headerlink" title="7.2.4 åˆ—çš„åˆ«å"></a>7.2.4 åˆ—çš„åˆ«å</h4><blockquote><p>åˆ— as åˆ—å</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT EMPLOYEE_ID 'ç¼–å·',FIRST_NAME AS 'å§“æ°',SALARY * 12 AS 'å¹´è–ª' FROM t_employees;</span><br></pre></td></tr></tbody></table></figure><h4 id="7-2-5-æŸ¥è¯¢ç»“æœå»é‡"><a href="#7-2-5-æŸ¥è¯¢ç»“æœå»é‡" class="headerlink" title="7.2.5 æŸ¥è¯¢ç»“æœå»é‡"></a>7.2.5 æŸ¥è¯¢ç»“æœå»é‡</h4><blockquote><p>distinct åˆ—å</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­æœ‰å¤šå°‘ä¸ªç»ç†</span><br><span class="line">SELECT DISTINCT MANAGER_ID FROM t_employees;</span><br></pre></td></tr></tbody></table></figure><h3 id="7-3-æ’åºæŸ¥è¯¢"><a href="#7-3-æ’åºæŸ¥è¯¢" class="headerlink" title="7.3  æ’åºæŸ¥è¯¢"></a>7.3  æ’åºæŸ¥è¯¢</h3><blockquote><p>è¯­æ³•:SELECT åˆ—å FROM è¡¨å <code>ORDER BYæ’åºåˆ—[æ’åºè§„åˆ™]</code></p></blockquote><table><thead><tr><th>æ’åºè§„åˆ™</th><th>æè¿°</th></tr></thead><tbody><tr><td>ASC</td><td>å¯¹å‰é¢æ’åºåˆ—åšå‡åºæ’åˆ—</td></tr><tr><td>desc</td><td>å¯¹å‰é¢æ’åºåˆ—åšé™åºæ’åº</td></tr></tbody></table><h4 id="7-3-1-ä¾æ®å•åˆ—æ’åº"><a href="#7-3-1-ä¾æ®å•åˆ—æ’åº" class="headerlink" title="7.3.1  ä¾æ®å•åˆ—æ’åº"></a>7.3.1  ä¾æ®å•åˆ—æ’åº</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å¯¹å‘˜å·¥å·¥èµ„è¿›è¡Œå‡åºæ’åº</span><br><span class="line">SELECT EMPLOYEE_ID,salary FROM t_employees ORDER BY salary + 0 ASC;</span><br><span class="line"># å¯¹å‘˜å·¥å·¥èµ„è¿›è¡Œé™åºæ’åº</span><br><span class="line">SELECT EMPLOYEE_ID,salary FROM t_employees ORDER BY salary + 0 DESC;</span><br></pre></td></tr></tbody></table></figure><h4 id="7-3-2-ä¾æ®å¤šåˆ—æ’åº"><a href="#7-3-2-ä¾æ®å¤šåˆ—æ’åº" class="headerlink" title="7.3.2  ä¾æ®å¤šåˆ—æ’åº"></a>7.3.2  ä¾æ®å¤šåˆ—æ’åº</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æŒ‰ç…§å·¥èµ„é«˜ä½è¿›è¡Œé™åºæ’åºï¼Œå¦‚æœå·¥èµ„ç›¸ç­‰ï¼ŒæŒ‰ç…§å‘˜å·¥ç¼–å·å‡åºè¿›è¡Œæ’åº</span><br><span class="line">SELECT EMPLOYEE_ID,salary FROM t_employees ORDER BY salary + 0 DESC, EMPLOYEE_ID DESC;</span><br></pre></td></tr></tbody></table></figure><h3 id="7-4-æ¡ä»¶æŸ¥è¯¢"><a href="#7-4-æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="7.4  æ¡ä»¶æŸ¥è¯¢"></a>7.4  æ¡ä»¶æŸ¥è¯¢</h3><blockquote><p>è¯­æ³•:  SELECT åˆ—å FROM è¡¨å WHERE  æ¡ä»¶</p></blockquote><table><thead><tr><th>å…³é”®å­—</th><th>æè¿°</th></tr></thead><tbody><tr><td>where æ¡ä»¶</td><td>åœ¨æŸ¥è¯¢ç»“æœä¸­ï¼Œç­›é€‰ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æŸ¥è¯¢ç»“æœï¼Œæ¡ä»¶ä¸ºå¸ƒå°”è¡¨è¾¾å¼</td></tr></tbody></table><h4 id="7-4-1-ç­‰å€¼åˆ¤æ–­"><a href="#7-4-1-ç­‰å€¼åˆ¤æ–­" class="headerlink" title="7.4.1  ç­‰å€¼åˆ¤æ–­"></a>7.4.1  ç­‰å€¼åˆ¤æ–­</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢ç¬¦åˆæ¡ä»¶çš„æ•°æ®</span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE SALARY = 11000</span><br><span class="line"></span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE SALARY = 24000</span><br></pre></td></tr></tbody></table></figure><ul><li>æ³¨æ„ï¼šä¸javaä¸åŒï¼ˆ==ï¼‰ï¼Œmysqlä¸­ç­‰å€¼åˆ¤æ–­ä½¿ç”¨=</li></ul><h4 id="7-4-2-é€»è¾‘åˆ¤æ–­ï¼ˆand-ã€orã€-notï¼‰"><a href="#7-4-2-é€»è¾‘åˆ¤æ–­ï¼ˆand-ã€orã€-notï¼‰" class="headerlink" title="7.4.2  é€»è¾‘åˆ¤æ–­ï¼ˆand ã€orã€ notï¼‰"></a>7.4.2  é€»è¾‘åˆ¤æ–­ï¼ˆand ã€orã€ notï¼‰</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE SALARY = 11000 AND COMMISSION_PCT = 0.30 AND EMPLOYEE_ID = '148';</span><br><span class="line"></span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE SALARY = 11000 OR COMMISSION_PCT = 0.30;</span><br><span class="line"></span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE NOT SALARY = 11000;</span><br></pre></td></tr></tbody></table></figure><h4 id="7-4-3-ä¸ç­‰å€¼åˆ¤æ–­ï¼ˆ-gt-ã€-lt-ã€-gt-ã€-lt-ã€-lt-gt-ã€-ï¼‰"><a href="#7-4-3-ä¸ç­‰å€¼åˆ¤æ–­ï¼ˆ-gt-ã€-lt-ã€-gt-ã€-lt-ã€-lt-gt-ã€-ï¼‰" class="headerlink" title="7.4.3  ä¸ç­‰å€¼åˆ¤æ–­ï¼ˆ>ã€ <ã€>=ã€<=ã€<>ã€!=ï¼‰"></a>7.4.3  ä¸ç­‰å€¼åˆ¤æ–­ï¼ˆ&gt;ã€ &lt;ã€&gt;=ã€&lt;=ã€&lt;&gt;ã€!=ï¼‰</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE SALARY != 11000;</span><br><span class="line"></span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE SALARY &lt;&gt; 11000;</span><br><span class="line"></span><br><span class="line"># æŸ¥è¯¢å·¥èµ„åŒºé—´åœ¨[6000, 10000]ä¹‹é—´</span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE SALARY &gt;= 6000 AND salary &lt;= 10000;</span><br></pre></td></tr></tbody></table></figure><h4 id="7-4-4-åŒºé—´åˆ¤æ–­-between-èµ·å§‹and-ç»ˆæ­¢"><a href="#7-4-4-åŒºé—´åˆ¤æ–­-between-èµ·å§‹and-ç»ˆæ­¢" class="headerlink" title="7.4.4  åŒºé—´åˆ¤æ–­(between èµ·å§‹and ç»ˆæ­¢)"></a>7.4.4  åŒºé—´åˆ¤æ–­(between èµ·å§‹and ç»ˆæ­¢)</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å·¥èµ„åŒºé—´åœ¨[6000, 10000]ä¹‹é—´</span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE SALARY BETWEEN 6000 AND 10000;</span><br></pre></td></tr></tbody></table></figure><ul><li>æ³¨æ„ï¼šåœ¨åŒºé—´åˆ¤æ–­ä¸­ï¼Œå°å€¼åœ¨å‰ï¼Œå¤§å€¼åœ¨åï¼Œåä¹‹ï¼Œå¾—ä¸åˆ°ç»“æœ</li></ul><h4 id="7-4-5-nullå€¼åˆ¤æ–­ï¼ˆis-nullã€is-not-nullï¼‰"><a href="#7-4-5-nullå€¼åˆ¤æ–­ï¼ˆis-nullã€is-not-nullï¼‰" class="headerlink" title="7.4.5 nullå€¼åˆ¤æ–­ï¼ˆis nullã€is not nullï¼‰"></a>7.4.5 nullå€¼åˆ¤æ–­ï¼ˆis nullã€is not nullï¼‰</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å‡ºç»ç†ç¼–å·ä¸ºnullçš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">SELECT employee_id, FIRST_NAME,MANAGER_ID</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE MANAGER_ID IS NULL;</span><br><span class="line"></span><br><span class="line">SELECT employee_id, FIRST_NAME,MANAGER_ID</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE MANAGER_ID IS NOT NULL;</span><br></pre></td></tr></tbody></table></figure><h4 id="7-4-6-æšä¸¾æŸ¥è¯¢ï¼ˆINï¼ˆå€¼1ï¼Œ-å€¼2ï¼Œå€¼3ï¼‰ï¼‰"><a href="#7-4-6-æšä¸¾æŸ¥è¯¢ï¼ˆINï¼ˆå€¼1ï¼Œ-å€¼2ï¼Œå€¼3ï¼‰ï¼‰" class="headerlink" title="7.4.6  æšä¸¾æŸ¥è¯¢ï¼ˆINï¼ˆå€¼1ï¼Œ å€¼2ï¼Œå€¼3ï¼‰ï¼‰"></a>7.4.6  æšä¸¾æŸ¥è¯¢ï¼ˆINï¼ˆå€¼1ï¼Œ å€¼2ï¼Œå€¼3ï¼‰ï¼‰</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸º70,80,90 çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,SALARY,department_id</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE department_id = 70 OR department_id = 80 OR department_id = 90;</span><br><span class="line"></span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME,SALARY,department_id</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE department_id IN (70,80,90);</span><br><span class="line"># in çš„æ•ˆç‡åœ¨å¤§æ•°æ®é¢å‰è¾ƒä½</span><br></pre></td></tr></tbody></table></figure><h4 id="7-4-7-æ¨¡ç³ŠæŸ¥è¯¢"><a href="#7-4-7-æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="7.4.7  æ¨¡ç³ŠæŸ¥è¯¢"></a>7.4.7  æ¨¡ç³ŠæŸ¥è¯¢</h4><blockquote><ul><li>LIKE_ï¼ˆå•ä¸ªä»»ç”±å­—ç¬¦ï¼‰</li></ul><p>â€‹       åˆ—å LIKE â€˜å¼ __â€™</p><ul><li><p>LIKE %(ä»»æ„é•¿åº¦çš„ä»»æ„å­—ç¬¦)</p><p>åˆ—å LIKE â€˜å¼ %â€™</p></li></ul></blockquote><ul><li>æ³¨æ„ï¼šæ¨¡ç³ŠæŸ¥è¯¢åªèƒ½å’ŒLIKEå…³é”®å­—ç»“åˆä½¿ç”¨</li></ul><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢Lå¼€å¤´çš„ä¸‰ä¸ªå­—çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME, SALARY</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE FIRST_NAME LIKE 'L__';</span><br><span class="line"># æŸ¥è¯¢æ‰€æœ‰ä»¥Lå¼€å¤´çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,SALARY</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE first_name LIKE 'å¼ %';</span><br></pre></td></tr></tbody></table></figure><h4 id="7-4-8-åˆ†æ”¯ç»“æ„æŸ¥è¯¢"><a href="#7-4-8-åˆ†æ”¯ç»“æ„æŸ¥è¯¢" class="headerlink" title="7.4.8 åˆ†æ”¯ç»“æ„æŸ¥è¯¢"></a>7.4.8 åˆ†æ”¯ç»“æ„æŸ¥è¯¢</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE</span><br><span class="line">    WHEN æ¡ä»¶1 THEN ç»“æœ1</span><br><span class="line">    WHEN æ¡ä»¶2 THEN ç»“æœ2</span><br><span class="line">    WHEN æ¡ä»¶3 THEN ç»“æœ3</span><br><span class="line">    ELSE ç»“æœ</span><br><span class="line">END</span><br></pre></td></tr></tbody></table></figure><ul><li>æ³¨æ„ï¼šé€šè¿‡ä½¿ç”¨case  endè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œæ¯æ¡æ•°æ®å¯¹åº”ç”Ÿæˆä¸€ä¸ªå€¼</li><li>ç»éªŒï¼šç±»ä¼¼javaä¸­çš„switch</li></ul><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span><br><span class="line">SELECT EMPLOYEE_ID, FIRST_NAME, SALARY,department_id,</span><br><span class="line">CASE</span><br><span class="line">WHEN SALARY &gt;= 10000 THEN 'A'</span><br><span class="line">WHEN SALARY &gt;= 8000 AND SALARY &lt; 10000 THEN 'B'</span><br><span class="line">WHEN SALARY &gt;= 6000 AND SALARY &lt; 8000 THEN 'C'</span><br><span class="line">WHEN SALARY &gt;= 4000 AND SALARY &lt; 6000 THEN 'D'</span><br><span class="line">ELSE 'E'</span><br><span class="line">END AS "level"</span><br><span class="line">FROM t_employees;</span><br></pre></td></tr></tbody></table></figure><h3 id="7-5-æ—¶é—´æŸ¥è¯¢"><a href="#7-5-æ—¶é—´æŸ¥è¯¢" class="headerlink" title="7.5  æ—¶é—´æŸ¥è¯¢"></a>7.5  æ—¶é—´æŸ¥è¯¢</h3><blockquote><p>select     æ—¶é—´å‡½æ•°ï¼ˆ[å‚æ•°åˆ—è¡¨]ï¼‰</p></blockquote><ul><li>ç»éªŒï¼šæ‰§è¡Œæ—¶é—´å‡½æ•°æŸ¥è¯¢ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€å¼ è™šè¡¨</li></ul><table><thead><tr><th>æ—¶é—´å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>SYSDATE</td><td>å½“å‰ç³»ç»Ÿæ—¶é—´ï¼ˆæ—¥æœˆå¹´æ—¶åˆ†ç§’ï¼‰</td></tr><tr><td>CURDATE</td><td>è·å–å½“å‰æ—¥æœŸ</td></tr><tr><td>CURTIME</td><td>è·å–å½“å‰æ—¶é—´</td></tr><tr><td>WEEK(DATE)</td><td>è·å–æŒ‡å®šæ—¥æœŸä¸ºä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨</td></tr><tr><td>YEAR(DATE)</td><td>è·å–æŒ‡å®šæ—¥æœŸçš„å¹´ä»½</td></tr><tr><td>HOUR(TIME)</td><td>è·å–æŒ‡å®šæ—¶é—´çš„å°æ—¶å€¼</td></tr><tr><td>MINUTE(TIME)</td><td>è·å–æ—¶é—´çš„åˆ†é’Ÿå€¼</td></tr><tr><td>DATEDIFF(DATE,DATE2)</td><td>è·å–DATE1å’ŒDATE2ä¹‹é—´ç›¸éš”çš„å¤©æ•°</td></tr><tr><td>ADDDATE(DATE,N)</td><td>è®¡ç®—DATEåŠ ä¸ŠNå¤©åçš„æ—¥æœŸ</td></tr></tbody></table><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># å½“å‰ç³»ç»Ÿçš„æ—¶é—´</span><br><span class="line">SELECT SYSDATE();</span><br><span class="line"># å½“å‰ç³»ç»Ÿçš„riæœŸ</span><br><span class="line">SELECT CURDATE();</span><br><span class="line"># è·å–ç³»ç»Ÿæ—¶é—´</span><br><span class="line">SELECT CURTIME();</span><br><span class="line"># è·å–æŒ‡å®šæ—¥æœŸä¸ºä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨</span><br><span class="line">SELECT WEEK(SYSDATE());</span><br><span class="line"># è·å–æŒ‡å®šæ—¥æœŸå¿ åšçš„å¹´ä»½</span><br><span class="line">SELECT YEAR(SYSDATE());</span><br><span class="line"># è·å–å°æ—¶å€¼</span><br><span class="line">SELECT HOUR(CURTIME());</span><br><span class="line"># è·å–åˆ†é’Ÿå€¼</span><br><span class="line">SELECT MINUTE(CURTIME());</span><br><span class="line"># æŒ‡å®šæ—¥æœŸä¹‹é—´çš„ç›¸éš”å¤©æ•°</span><br><span class="line">SELECT DATEDIFF('2020-4-1','2019-4-1');</span><br><span class="line"># è®¡ç®—dateæ—¥æœŸåŠ ä¸Šnå¤©åçš„æ—¥æœŸ</span><br><span class="line">SELECTADDDATE('2020-4-1', 5);</span><br></pre></td></tr></tbody></table></figure><h3 id="7-6-å­—ç¬¦ä¸²æŸ¥è¯¢"><a href="#7-6-å­—ç¬¦ä¸²æŸ¥è¯¢" class="headerlink" title="7.6  å­—ç¬¦ä¸²æŸ¥è¯¢"></a>7.6  å­—ç¬¦ä¸²æŸ¥è¯¢</h3><blockquote><p>è¯­æ³•:    SELECT    å­—ç¬¦ä¸²å‡½æ•°([å‚æ•°åˆ—è¡¨])</p></blockquote><table><thead><tr><th>å­—ç¬¦ä¸²å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>concat(str1, â€¦)</td><td>å°†å¤šä¸ªå­—ç¬¦ä¸²æ‹¼æ¥</td></tr><tr><td>insert(str, pos, len, newStr)</td><td>å°†strä¸­æŒ‡å®šposä½ç½®å¼€å§‹lené•¿åº¦çš„å†…å®¹æ›¿æ¢ä¸ºnewStr</td></tr><tr><td>lower(str)</td><td>å°†æŒ‡å®šå­—ç¬¦ä¸²è½¬æ¢è¯¶å°å†™</td></tr><tr><td>upper(str)</td><td>å°†æŒ‡å®šå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™</td></tr><tr><td>substring(str, num, len)</td><td>å°†strå­—ç¬¦ä¸²æŒ‡å®šnumä½ç½®å¼€å§‹æˆªå–lenä¸ªå†…å®¹</td></tr></tbody></table><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># å¤šä¸ªå­—ç¬¦ä¸²æ‹¼æ¥</span><br><span class="line">SELECT CONCAT('My', 'S,', 'QAL');</span><br><span class="line">SELECT CONCAT(FIRST_NAME,'-', last_name) FROM t_employees;</span><br><span class="line"># å­—ç¬¦ä¸²æ›¿æ¢</span><br><span class="line">SELECT INSERT('è¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“',3, 2, 'MySql')</span><br><span class="line"># å­—ç¬¦ä¸²è½¬å°å†™</span><br><span class="line">SELECT LOWER('LOWER')</span><br><span class="line"># å­—ç¬¦ä¸²è½¬å¤§å†™</span><br><span class="line">SELECT UPPER('shdiuashdui')</span><br><span class="line"># æŒ‡å®šå†…å®¹æˆªå–</span><br><span class="line">SELECT SUBSTRING('JaavaMySqlStrSub',6,6);</span><br><span class="line"># MySqlS</span><br></pre></td></tr></tbody></table></figure><h3 id="7-7-èšåˆå‡½æ•°"><a href="#7-7-èšåˆå‡½æ•°" class="headerlink" title="7.7  èšåˆå‡½æ•°"></a>7.7  èšåˆå‡½æ•°</h3><blockquote><p>è¯­æ³•:    SELECT èšåˆå‡½æ•°(åˆ—å)      FROM    è¡¨å;</p></blockquote><ul><li>ç»éªŒï¼šå¯¹å¤šæ¡æ•°æ®çš„å•åˆ—è¿›è¡Œç»Ÿè®¡ï¼Œè¿”å›ç»Ÿè®¡åçš„ä¸€è¡Œç»“æœ</li></ul><table><thead><tr><th>èšåˆå‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>SUMï¼ˆï¼‰</td><td>æ±‚æ‰€æœ‰è¡Œä¸­å•åˆ—ç»“æœçš„æ€»å’Œ</td></tr><tr><td>AVG()</td><td>å¹³å‡å€¼</td></tr><tr><td>MAX()</td><td>æœ€å¤§å€¼</td></tr><tr><td>MIN()</td><td>æœ€å°å€¼</td></tr><tr><td>COUNT()</td><td>æ±‚æ€»è¡Œæ•°</td></tr></tbody></table><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># èšåˆå‡½æ•°</span><br><span class="line"># æ±‚å•åˆ—æ‰€æœ‰æ•°æ®çš„å’Œ</span><br><span class="line">SELECT SUM(SALARY) FROM t_employees;</span><br><span class="line"># æ±‚å•åˆ—æ‰€æœ‰æ•°æ®çš„å¹³å‡å€¼</span><br><span class="line">SELECT AVG(SALARY) FROM t_employees;</span><br><span class="line"># æ±‚å•åˆ—æœ€å¤§å€¼</span><br><span class="line">SELECT MAX(SALARY + 0) FROM t_employees;</span><br><span class="line"># æ±‚å•åˆ—æœ€å°å€¼</span><br><span class="line">SELECT MIN(salary + 0) FROM t_employees;</span><br><span class="line"># æ±‚æ€»è¡Œæ•° å‘˜å·¥æ€»æ•°</span><br><span class="line">SELECT COUNT(EMPLOYEE_ID) FROM t_employees;</span><br><span class="line"># ç»Ÿè®¡æœ‰ææˆçš„äººæ•° ä¼šè‡ªåŠ¨å¿½ç•¥nullå€¼ï¼Œä¸è¿›è¡Œç»Ÿè®¡</span><br><span class="line">SELECT COUNT(COMMISSION_PCT) FROM t_employees;</span><br></pre></td></tr></tbody></table></figure><ul><li>æ³¨æ„ï¼šèšåˆå‡½æ•°ä¼šè‡ªåŠ¨å¿½ç•¥nullå€¼ï¼Œä¸è¿›è¡Œç»Ÿè®¡</li></ul><h3 id="7-8-åˆ†ç»„æŸ¥è¯¢"><a href="#7-8-åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="7.8  åˆ†ç»„æŸ¥è¯¢"></a>7.8  åˆ†ç»„æŸ¥è¯¢</h3><blockquote><p>è¯­æ³•ï¼š<code>SELECT åˆ—å FROM è¡¨å WHERE æ¡ä»¶ GROUP BY åˆ†ç»„ä¾æ®(åˆ—);</code></p></blockquote><table><thead><tr><th>å…³é”®å­—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>GROUP BY</td><td>åˆ†ç»„ä¾æ®ï¼Œå¿…é¡»åœ¨WHEREä¹‹åç”Ÿæ•ˆ</td></tr></tbody></table><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å„ä¸ªéƒ¨é—¨çš„é¢æ€»äººæ•°</span><br><span class="line">SELECT department_id, COUNT(employee_id)</span><br><span class="line">FROM t_employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"># æŸ¥è¯¢å„ä¸ªéƒ¨é—¨çš„å¹³å±€å·¥èµ„</span><br><span class="line">SELECT department_id, AVG(salary)</span><br><span class="line">FROM t_employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"># æŸ¥è¯¢å„ä¸ªéƒ¨é—¨ã€å„ä¸ªå²—ä½çš„æ€»äººæ•°</span><br><span class="line">SELECT department_id,job_id, COUNT(employee_id)</span><br><span class="line">FROM t_employees</span><br><span class="line">GROUP BY department_id, job_id;</span><br><span class="line"># å¸¸è§é—®é¢˜ï¼šæŸ¥è¯¢å„ä¸ªéƒ¨é—¨idï¼Œæ€»äººæ•°ã€first_name</span><br><span class="line">SELECT department_id,COUNT(employee_id), first_name</span><br><span class="line">FROM t_employees</span><br><span class="line">GROUP BY department_id;</span><br></pre></td></tr></tbody></table></figure><ul><li>åˆ†ç»„æŸ¥è¯¢ä¸­ï¼Œselectæ˜¾ç¤ºçš„åˆ—åªèƒ½æ˜¯åˆ†ç»„ä¾æ®åˆ—ï¼Œæˆ–è€…èšåˆå‡½æ•°åˆ—ï¼Œä¸èƒ½å‡ºç°å…¶ä»–åˆ—</li></ul><h3 id="7-9-åˆ†ç»„è¿‡æ»¤æŸ¥è¯¢"><a href="#7-9-åˆ†ç»„è¿‡æ»¤æŸ¥è¯¢" class="headerlink" title="7.9  åˆ†ç»„è¿‡æ»¤æŸ¥è¯¢"></a>7.9  åˆ†ç»„è¿‡æ»¤æŸ¥è¯¢</h3><blockquote><p>è¯­æ³•ï¼š<code>SELECT åˆ—å FROM è¡¨å WHERE æ¡ä»¶ GROUNP BY åˆ†ç»„åˆ— HAVING è¿‡æ»¤è§„åˆ™</code></p></blockquote><table><thead><tr><th>å…³é”®å­—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>HAVINGè¿‡æ»¤è§„åˆ™</td><td>è¿‡æ»¤è§„åˆ™å®šä¹‰å¯¹åˆ†ç»„åçš„æ•°æ®è¿›è¡Œè¿‡æ»¤</td></tr></tbody></table><p>ç»Ÿè®¡éƒ¨é—¨çš„æœ€é«˜å·¥èµ„</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#æ€è·¯</span><br><span class="line">#1.ç¡®å®šåˆ†ç»„ä¾æ®ï¼ˆDEPARTMENT_IDï¼‰</span><br><span class="line">#2.å¯¹åˆ†ç»„åçš„æ•°æ®ï¼Œè¿‡æ»¤å‡ºéƒ¨é—¨ç¼–å·æ˜¯60ã€70ã€90ä¿¡æ¯</span><br><span class="line">#3.MAX()å‡½æ•°</span><br><span class="line">SELECT DEPARTMENT_ID,MAX(SALARY) </span><br><span class="line">FROM t_employees GROUP BY DEPARTMENT_ID </span><br><span class="line">HAVING DEPARTMENT_ID IN (60,70,90);</span><br><span class="line">#GROUPç¡®å®šåˆ†ç»„ä¾æ®DEPARTMENT_ID</span><br><span class="line">#HAVINGè¿‡æ»¤å‡º60ï¼Œ70ï¼Œ90çš„éƒ¨é—¨</span><br><span class="line">#SELECTæŸ¥çœ‹éƒ¨é—¨ç¼–å·å’ŒMAXå‡½æ•°</span><br></pre></td></tr></tbody></table></figure><h3 id="7-10-é™å®šæŸ¥è¯¢"><a href="#7-10-é™å®šæŸ¥è¯¢" class="headerlink" title="7.10  é™å®šæŸ¥è¯¢"></a>7.10  é™å®šæŸ¥è¯¢</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>SELECT åˆ—å FROM è¡¨å LIMIT èµ·å§‹è¡Œ,æŸ¥è¯¢è¡Œæ•°</code></p></blockquote><table><thead><tr><th>å…³é”®å­—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>LIMIT offset_start,row_count</td><td>é™å®šæŸ¥è¯¢ç»“æœçš„èµ·å§‹è¡Œå’Œæ€»è¡Œæ•°</td></tr></tbody></table><h4 id="7-10-1-æŸ¥è¯¢å‰5è¡Œè®°å½•"><a href="#7-10-1-æŸ¥è¯¢å‰5è¡Œè®°å½•" class="headerlink" title="7.10.1 æŸ¥è¯¢å‰5è¡Œè®°å½•"></a>7.10.1 æŸ¥è¯¢å‰5è¡Œè®°å½•</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥è¯¢è¡¨ä¸­å‰äº”åå‘˜å·¥çš„æ‰€æœ‰ä¿¡æ¯</span><br><span class="line">SELECT * FROM t_employees LIMIT 0,5;</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>èµ·å§‹è¡Œæ˜¯ä»0å¼€å§‹</strong>ï¼Œ<strong>ä»£è¡¨äº†ç¬¬ä¸€è¡Œ</strong>ï¼Œ<strong>ç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨çš„æ˜¯ä»æŒ‡å®šè¡Œå¼€å§‹æŸ¥è¯¢å‡ è¡Œ</strong>ã€‚</li></ul><h4 id="7-10-2-æŸ¥è¯¢èŒƒå›´è®°å½•"><a href="#7-10-2-æŸ¥è¯¢èŒƒå›´è®°å½•" class="headerlink" title="7.10.2 æŸ¥è¯¢èŒƒå›´è®°å½•"></a>7.10.2 æŸ¥è¯¢èŒƒå›´è®°å½•</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥è¯¢è¡¨ä¸­ä»ç¬¬å››è¡Œå¼€å§‹ï¼ŒæŸ¥è¯¢10è¡Œ</span><br><span class="line">SELECT * FROM t_employees LIMIT 3,10;</span><br></pre></td></tr></tbody></table></figure><h4 id="7-10-3-LIMITå…¸å‹åº”ç”¨"><a href="#7-10-3-LIMITå…¸å‹åº”ç”¨" class="headerlink" title="7.10.3 LIMITå…¸å‹åº”ç”¨"></a>7.10.3 LIMITå…¸å‹åº”ç”¨</h4><p>åˆ†é¡µæŸ¥è¯¢ï¼šä¸€é¡µæ˜¾ç¤º10æ¡ï¼Œä¸€å…±æŸ¥è¯¢ä¸‰é¡µã€‚</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#æ€è·¯ï¼šç¬¬ä¸€é¡µæ˜¯ä»0å¼€å§‹ï¼Œæ˜¾ç¤º10æ¡</span><br><span class="line">SELECT * FROM t_employees LIMIT 0,10;</span><br><span class="line">#ç¬¬äºŒé¡µæ˜¯ä»10æ¡å¼€å§‹ï¼Œæ˜¾ç¤º10æ¡</span><br><span class="line">SELECT * FROM t_employees LIMIT 10,10;</span><br><span class="line">#ç¬¬ä¸‰é¡µæ˜¯ä»20æ¡å¼€å§‹ï¼Œæ˜¾ç¤º10æ¡</span><br><span class="line">SELECT * FROM t_employees LIMIT 20,10;</span><br></pre></td></tr></tbody></table></figure><ul><li>åœ¨åˆ†é¡µåº”ç”¨åœºæ™¯ä¸­ï¼Œèµ·å§‹è¡Œæ˜¯å˜åŒ–çš„ï¼Œä½†æ˜¯ä¸€é¡µæ˜¾ç¤ºçš„é¡µæ•°æ˜¯ä¸å˜çš„</li></ul><h3 id="7-11-æŸ¥è¯¢æ€»ç»“"><a href="#7-11-æŸ¥è¯¢æ€»ç»“" class="headerlink" title="7.11  æŸ¥è¯¢æ€»ç»“"></a>7.11  æŸ¥è¯¢æ€»ç»“</h3><h4 id="7-11-1-SQLè¯­å¥ç¼–å†™é¡ºåº"><a href="#7-11-1-SQLè¯­å¥ç¼–å†™é¡ºåº" class="headerlink" title="7.11.1 SQLè¯­å¥ç¼–å†™é¡ºåº"></a>7.11.1 SQLè¯­å¥ç¼–å†™é¡ºåº</h4><blockquote><p>COPYSELECT åˆ—å FROM è¡¨å WHERE æ¡ä»¶ GROUP BY åˆ†ç»„ HAVING è¿‡æ»¤æ¡ä»¶ ORDER BY æ’åºåˆ—(ASC|DESC) LIMIT èµ·å§‹è¡Œ,æŸ¥è¯¢è¡Œæ•°</p></blockquote><h4 id="7-11-2-SQLè¯­å¥æ‰§è¡Œé¡ºåº"><a href="#7-11-2-SQLè¯­å¥æ‰§è¡Œé¡ºåº" class="headerlink" title="7.11.2 SQLè¯­å¥æ‰§è¡Œé¡ºåº"></a>7.11.2 SQLè¯­å¥æ‰§è¡Œé¡ºåº</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">COPY1.FROM:æŒ‡å®šæ•°æ®æ¥æºè¡¨</span><br><span class="line">2.WHERE:å¯¹æŸ¥è¯¢æ•°æ®ç¬¬ä¸€æ¬¡è¿‡æ»¤</span><br><span class="line">3.GROUP BY:åˆ†ç»„</span><br><span class="line">4.HAVING:å¯¹åˆ†ç»„åçš„æ•°æ®ç¬¬äºŒæ¬¡è¿‡æ»¤</span><br><span class="line">5.SELECT:æŸ¥è¯¢å„å­—æ®µçš„å€¼</span><br><span class="line">6.ORDER BY:æ’åº</span><br><span class="line">7.LIMIT:é™å®šæŸ¥è¯¢ç»“æœ</span><br></pre></td></tr></tbody></table></figure><h3 id="7-12-å­æŸ¥è¯¢ï¼ˆä½œä¸ºæ¡ä»¶åˆ¤æ–­ï¼‰"><a href="#7-12-å­æŸ¥è¯¢ï¼ˆä½œä¸ºæ¡ä»¶åˆ¤æ–­ï¼‰" class="headerlink" title="7.12  å­æŸ¥è¯¢ï¼ˆä½œä¸ºæ¡ä»¶åˆ¤æ–­ï¼‰"></a>7.12  å­æŸ¥è¯¢ï¼ˆä½œä¸ºæ¡ä»¶åˆ¤æ–­ï¼‰</h3><blockquote><p><strong>è¯­æ³•</strong>ï¼š<code>SELECT åˆ—å FROM è¡¨å WHERE æ¡ä»¶(å­æŸ¥è¯¢ç»“æœ)</code></p></blockquote><h4 id="7-12-1-æŸ¥è¯¢å·¥èµ„å¤§äºBruceçš„å‘˜å·¥ä¿¡æ¯"><a href="#7-12-1-æŸ¥è¯¢å·¥èµ„å¤§äºBruceçš„å‘˜å·¥ä¿¡æ¯" class="headerlink" title="7.12.1 æŸ¥è¯¢å·¥èµ„å¤§äºBruceçš„å‘˜å·¥ä¿¡æ¯"></a>7.12.1 æŸ¥è¯¢å·¥èµ„å¤§äºBruceçš„å‘˜å·¥ä¿¡æ¯</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#1.å…ˆæŸ¥è¯¢åˆ°Bruceçš„å·¥èµ„ï¼ˆä¸€è¡Œä¸€åˆ—ï¼‰</span><br><span class="line">SELECT SALARY FROM t_employees WHERE FIRST_NAME = 'Bruce';</span><br><span class="line">#2.æŸ¥è¯¢å·¥èµ„å¤§äºBruceçš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">SELECT * FROM t_employees WHERE SALARY &gt; 6000;</span><br><span class="line">#3.å°†å‰ä¸¤å¥æ•´åˆ</span><br><span class="line">SELECT * FROM t_employees </span><br><span class="line">WHERE SALARY &gt; </span><br><span class="line">(SELECT SALARY FROM t_employees WHERE FIRST_NAME = 'Bruce');</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>å°†å­æŸ¥è¯¢</strong>â€œ<strong>ä¸€è¡Œä¸€åˆ—</strong>â€<strong>çš„ç»“æœä½œä¸ºå¤–éƒ¨æŸ¥è¯¢çš„æ¡ä»¶</strong>ï¼Œ<strong>åšç¬¬äºŒæ¬¡æŸ¥è¯¢</strong>ã€‚</li><li><strong>å­æŸ¥è¯¢å¾—åˆ°ä¸€è¡Œä¸€åˆ—çš„ç»“æœæ‰èƒ½ä½œä¸ºå¤–éƒ¨æŸ¥è¯¢çš„ç­‰å€¼åˆ¤æ–­æ¡ä»¶æˆ–ä¸ç­‰å€¼åˆ¤æ–­æ¡ä»¶</strong></li></ul><h3 id="7-13-å­æŸ¥è¯¢ï¼ˆä½œä¸ºæšä¸¾æŸ¥è¯¢çš„æ¡ä»¶ï¼‰"><a href="#7-13-å­æŸ¥è¯¢ï¼ˆä½œä¸ºæšä¸¾æŸ¥è¯¢çš„æ¡ä»¶ï¼‰" class="headerlink" title="7.13 å­æŸ¥è¯¢ï¼ˆä½œä¸ºæšä¸¾æŸ¥è¯¢çš„æ¡ä»¶ï¼‰"></a>7.13 å­æŸ¥è¯¢ï¼ˆä½œä¸ºæšä¸¾æŸ¥è¯¢çš„æ¡ä»¶ï¼‰</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>SELECT åˆ—å FROM è¡¨å WHERE åˆ—å IN (å­æŸ¥è¯¢ç»“æœ);</code></p></blockquote><h4 id="7-13-1-æŸ¥è¯¢ä¸åä¸ºâ€œKINGâ€åŒä¸€éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯"><a href="#7-13-1-æŸ¥è¯¢ä¸åä¸ºâ€œKINGâ€åŒä¸€éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯" class="headerlink" title="7.13.1 æŸ¥è¯¢ä¸åä¸ºâ€œKINGâ€åŒä¸€éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯"></a>7.13.1 æŸ¥è¯¢ä¸åä¸ºâ€œKINGâ€åŒä¸€éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#æ€è·¯</span><br><span class="line">#1.å…ˆæŸ¥è¯¢KINGæ‰€åœ¨çš„éƒ¨é—¨ç¼–å·</span><br><span class="line">SELECT DEPARTMENT_ID FROM t_employees WHERE LAST_NAME = 'King';#80,90</span><br><span class="line">#2.å†æŸ¥è¯¢80ï¼Œ90å·éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">SELECT * FROM t_employees WHERE DEPARTMENT_ID IN(80,90);</span><br><span class="line">#3.SQL:åˆå¹¶</span><br><span class="line">SELECT * FROM t_employees </span><br><span class="line">WHERE DEPARTMENT_ID IN</span><br><span class="line">(SELECT DEPARTMENT_ID FROM t_employees WHERE LAST_NAME = 'King');</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>å°†å­æŸ¥è¯¢</strong>â€œ<strong>å¤šè¡Œä¸€åˆ—</strong>â€<strong>çš„ç»“æœä½œä¸ºå¤–éƒ¨æŸ¥è¯¢çš„æšä¸¾æŸ¥è¯¢æ¡ä»¶</strong>ï¼Œ<strong>åšç¬¬äºŒæ¬¡æŸ¥è¯¢</strong>ã€‚</li></ul><h4 id="7-13-2-å·¥èµ„é«˜äº60ç¼–å·éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯"><a href="#7-13-2-å·¥èµ„é«˜äº60ç¼–å·éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯" class="headerlink" title="7.13.2 å·¥èµ„é«˜äº60ç¼–å·éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯"></a>7.13.2 å·¥èµ„é«˜äº60ç¼–å·éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#1.æŸ¥è¯¢60ç¼–å·éƒ¨é—¨æ‰€æœ‰äººçš„å·¥èµ„ï¼ˆå¤šè¡Œå•åˆ—ï¼‰</span><br><span class="line">SELECT SALARY FROM t_employees WHERE DEPARTMENT_ID = 60;</span><br><span class="line">#2.æŸ¥è¯¢å·¥èµ„é«˜äº60ç¼–å·éƒ¨é—¨æ‰€æœ‰äººçš„å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯ï¼ˆé«˜äºæ‰€æœ‰ï¼‰</span><br><span class="line">SELECT * FROM t_employees </span><br><span class="line">WHERE SALARY &gt; </span><br><span class="line">ALL(SELECT SALARY FROM t_employees WHERE DEPARTMENT_ID = 60);</span><br><span class="line">#3.æŸ¥è¯¢å·¥èµ„é«˜äº60ç¼–å·éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯ï¼ˆé«˜äºéƒ¨åˆ†ï¼‰</span><br><span class="line">SELECT * FROM t_employees </span><br><span class="line">WHERE SALARY &gt; </span><br><span class="line">ANY(SELECT SALARY FROM t_employees WHERE DEPARTMENT_ID = 60);</span><br></pre></td></tr></tbody></table></figure><ul><li><p><strong>æ³¨æ„</strong>ï¼š<strong>å½“å­æŸ¥è¯¢ç»“æœé›†å½¢å¼ä¸ºå¤šè¡Œå•åˆ—æ—¶å¯ä»¥ä½¿ç”¨ANYæˆ–ALLå…³é”®å­—</strong>ã€‚</p></li><li><p>ALLè¡¨ç¤ºæŸ¥è¯¢é«˜äºéƒ¨é—¨æ‰€æœ‰å‘˜å·¥å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯ï¼›ANYè¡¨ç¤ºæŸ¥è¯¢åªéœ€è¦é«˜äºéƒ¨é—¨ä¸­ä»»æ„ä¸€åå‘˜å·¥å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯</p></li></ul><h3 id="7-14-å­æŸ¥è¯¢ï¼ˆä½œä¸ºä¸€å¼ è¡¨ï¼‰"><a href="#7-14-å­æŸ¥è¯¢ï¼ˆä½œä¸ºä¸€å¼ è¡¨ï¼‰" class="headerlink" title="7.14  å­æŸ¥è¯¢ï¼ˆä½œä¸ºä¸€å¼ è¡¨ï¼‰"></a>7.14  å­æŸ¥è¯¢ï¼ˆä½œä¸ºä¸€å¼ è¡¨ï¼‰</h3><p>æŸ¥è¯¢åˆ°ä¸€å¼ å¤šè¡Œå¤šåˆ—çš„ä¸´æ—¶è¡¨ï¼Œè¿™å¼ è¡¨ä¹Ÿå¯ä»¥ä½œä¸ºæŸ¥è¯¢æ•°æ®æºã€‚</p><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>SELECT åˆ—å FROM (å­æŸ¥è¯¢çš„ç»“æœé›†) WHERE æ¡ä»¶;</code></p></blockquote><h4 id="7-14-1-æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­å·¥èµ„æ’åå‰5åçš„å‘˜å·¥ä¿¡æ¯"><a href="#7-14-1-æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­å·¥èµ„æ’åå‰5åçš„å‘˜å·¥ä¿¡æ¯" class="headerlink" title="7.14.1 æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­å·¥èµ„æ’åå‰5åçš„å‘˜å·¥ä¿¡æ¯"></a>7.14.1 æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­å·¥èµ„æ’åå‰5åçš„å‘˜å·¥ä¿¡æ¯</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#æ€è·¯ï¼š</span><br><span class="line">#1.å…ˆå¯¹æ‰€æœ‰å‘˜å·¥çš„è–ªèµ„è¿›è¡Œæ’åºï¼ˆæ’åºåçš„ä¸´æ—¶è¡¨ï¼‰</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,SALARY FROM t_employees ORDER BY SALARY DESC;</span><br><span class="line">#2.å†æŸ¥è¯¢ä¸´æ—¶è¡¨ä¸­å‰5è¡Œå‘˜å·¥ä¿¡æ¯</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,SALARY FROM (ä¸´æ—¶è¡¨) LIMIT 0,5;</span><br><span class="line">#3.åˆå¹¶</span><br><span class="line">SELECT * FROM </span><br><span class="line">(SELECT EMPLOYEE_ID,FIRST_NAME,SALARY FROM t_employees ORDER BY SALARY DESC) AS ä¸´æ—¶è¡¨ LIMIT 0,5;</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>å°†å­æŸ¥è¯¢</strong>â€œ<strong>å¤šè¡Œå¤šåˆ—</strong>â€œ<strong>çš„ç»“æœä½œä¸ºå¤–éƒ¨æŸ¥è¯¢çš„ä¸€å¼ è¡¨</strong>ï¼Œ<strong>åšç¬¬äºŒæ¬¡æŸ¥è¯¢</strong>ã€‚</li><li><strong>æ³¨æ„</strong>ï¼š<strong>å­æŸ¥è¯¢ä½œä¸ºä¸´æ—¶è¡¨</strong>ï¼Œ<strong>éœ€è¦ä¸ºå…¶èµ‹äºˆä¸€ä¸ªä¸´æ—¶è¡¨å</strong>ã€‚</li></ul><h3 id="7-15-åˆå¹¶æŸ¥è¯¢"><a href="#7-15-åˆå¹¶æŸ¥è¯¢" class="headerlink" title="7.15  åˆå¹¶æŸ¥è¯¢"></a>7.15  åˆå¹¶æŸ¥è¯¢</h3><blockquote><ul><li><code>SELECT * FROM è¡¨å1 UNION SELECT * FROM è¡¨å2</code></li><li><code>SELECT * FROM è¡¨å1 UNION ALL SELECT * FROM è¡¨å2</code></li></ul></blockquote><ul><li>è¿”å›çš„æŸ¥è¯¢ç»“æœæ˜¯å°†è¡¨1çš„ç»“æœå’Œè¡¨2çš„ç»“æœåšäº†ä¸€ä¸ªåˆå¹¶ã€‚</li></ul><h4 id="15-1-åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼ˆå»é™¤é‡å¤è®°å½•ï¼‰"><a href="#15-1-åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼ˆå»é™¤é‡å¤è®°å½•ï¼‰" class="headerlink" title="15.1 åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼ˆå»é™¤é‡å¤è®°å½•ï¼‰"></a>15.1 åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼ˆå»é™¤é‡å¤è®°å½•ï¼‰</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼Œå»é™¤é‡å¤è®°å½•</span><br><span class="line">SELECT * FROM T1 UNION SELECT * FROM T2;</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>åˆå¹¶ç»“æœçš„ä¸¤å¼ è¡¨</strong>ï¼Œ<strong>åˆ—æ•°å¿…é¡»ç›¸åŒ</strong>ï¼Œ<strong>åˆ—çš„æ•°æ®ç±»å‹å¯ä»¥ä¸åŒ</strong>ã€‚</li></ul><p>åˆ—æ•°å¿…é¡»ç›¸åŒæ˜¯å› ä¸ºè¯¥åˆå¹¶åšäº†ä¸€ä¸ªçºµå‘åˆå¹¶ï¼Œä¸¤ä¸ª4åˆ—å¤šè¡Œçš„ç»“æœé›†è¡¨åˆå¹¶åä¹Ÿæ˜¯ä¸€ä¸ª4åˆ—å¤šè¡Œçš„è¡¨ï¼Œä½†æ˜¯åˆå¹¶åçš„åˆ—åä»¥ç¬¬ä¸€ä¸ªç»“æœé›†è¡¨ä¸ºå‡†ã€‚</p><h4 id="7-15-2-åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼ˆä¿ç•™é‡å¤è®°å½•ï¼‰"><a href="#7-15-2-åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼ˆä¿ç•™é‡å¤è®°å½•ï¼‰" class="headerlink" title="7.15.2 åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼ˆä¿ç•™é‡å¤è®°å½•ï¼‰"></a>7.15.2 åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼ˆä¿ç•™é‡å¤è®°å½•ï¼‰</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åˆå¹¶ä¸¤å¼ è¡¨çš„ç»“æœï¼Œä¸å»é™¤é‡å¤è®°å½•ï¼ˆæ˜¾ç¤ºæ‰€æœ‰ï¼‰</span><br><span class="line">SELECT * FROM T1 UNION ALL SELECT * FROM T2;</span><br></pre></td></tr></tbody></table></figure><p>è¯¥åˆå¹¶ç»“æœä¼šä¿ç•™ä¸¤å¼ æŸ¥è¯¢è¡¨ä¸­é‡å¤çš„è®°å½•ï¼Œè€ŒUNIONåªä¿ç•™ç¬¬ä¸€ä¸ªä¸é‡å¤çš„è®°å½•</p><p>7.16 è¡¨è¿æ¥æŸ¥è¯¢</p><blockquote><p>è¯­æ³•ï¼š<code>SELECT åˆ—å FROM è¡¨1 è¿æ¥æ–¹å¼ è¡¨2 ON è¿æ¥æ¡ä»¶</code></p></blockquote><h4 id="7-16-1-å†…è¿æ¥æŸ¥è¯¢ï¼ˆINNER-JOIN-ONï¼‰"><a href="#7-16-1-å†…è¿æ¥æŸ¥è¯¢ï¼ˆINNER-JOIN-ONï¼‰" class="headerlink" title="7.16.1 å†…è¿æ¥æŸ¥è¯¢ï¼ˆINNER JOIN ONï¼‰"></a>7.16.1 å†…è¿æ¥æŸ¥è¯¢ï¼ˆINNER JOIN ONï¼‰</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#1.æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„èŒå‘˜å’ŒèŒä½ä¿¡æ¯ SQLæ ‡å‡†</span><br><span class="line">SELECT * FROM t_employees INNER JOIN t_jobs </span><br><span class="line">ON t_employees.JOB_ID = t_jobs.JOB_ID;</span><br><span class="line">#2.æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„èŒå‘˜å’ŒèŒä½ä¿¡æ¯ MYSQL</span><br><span class="line">SELECT * FROM t_employees,t_jobs WHERE t_employees.JOB_ID = t_jobs.JOB_ID;</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ²¡æœ‰æŒ‡å®šè¿æ¥æ¡ä»¶ï¼Œåˆ™ä¼šé€ æˆç¬›å¡å°”ç§¯çš„ç»“æœï¼Œç¬¬ä¸€å¼ è¡¨ä¸­çš„æ¯è¡Œæ•°æ®éƒ½ä¼šå’Œç¬¬äºŒå¼ è¡¨è¿›è¡Œè¿æ¥ã€‚</p><ul><li><strong>ç»éªŒ</strong>ï¼š<strong>åœ¨MySQLä¸­</strong>ï¼Œ<strong>ç¬¬äºŒç§æ–¹å¼ä¹Ÿå¯ä»¥ä½œä¸ºå†…è¿æ¥æŸ¥è¯¢</strong>ï¼Œ<strong>ä½†æ˜¯ä¸ç¬¦åˆSQLæ ‡å‡†</strong>ã€‚</li><li><strong>è€Œç¬¬ä¸€ç§å±äºSQLæ ‡å‡†</strong>ï¼Œ<strong>ä¸å…¶ä»–å…³ç³»å‹æ•°æ®åº“é€šç”¨</strong>ã€‚</li></ul><h4 id="7-16-2-ä¸‰è¡¨è¿æ¥æŸ¥è¯¢"><a href="#7-16-2-ä¸‰è¡¨è¿æ¥æŸ¥è¯¢" class="headerlink" title="7.16.2 ä¸‰è¡¨è¿æ¥æŸ¥è¯¢"></a>7.16.2 ä¸‰è¡¨è¿æ¥æŸ¥è¯¢</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥å·¥å·ã€åå­—ã€éƒ¨é—¨åç§°ã€éƒ¨é—¨æ‰€åœ¨å›½å®¶ID</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,t_departments.DEPARTMENT_NAME,t_locations.COUNTRY_ID </span><br><span class="line">FROM t_employees</span><br><span class="line">INNER JOIN t_departments ON</span><br><span class="line">t_employees.DEPARTMENT_ID=t_departments.DEPARTMENT_ID</span><br><span class="line">INNER JOIN t_locations ON</span><br><span class="line">t_departments.LOCATION_ID=t_locations.LOCATION_ID;</span><br></pre></td></tr></tbody></table></figure><p>è¯¥è¯­å¥æŸ¥è¯¢å‡ºæ¥çš„ç»“æœæ²¡æœ‰å‘˜å·¥ç¼–å·ä¸º178çš„å‘˜å·¥ä¿¡æ¯ï¼Œè¯¥åå‘˜å·¥çš„éƒ¨é—¨IDä¸ºNULLï¼Œä¸ç¬¦åˆè¿æ¥æ¡ä»¶ï¼Œæ‰€ä»¥ä¸åŒ…å«åœ¨åŒ¹é…å‡ºçš„ç»“æœé›†ä¸­ï¼Œä½ å¯ä»¥è‡ªå·±åŠ¨æ‰‹å°è¯•å¹¶æŸ¥çœ‹ç»“æœã€‚ä¹‹æ‰€ä»¥æè¿™ä¸ªæ˜¯å› ä¸ºå¯ä»¥ä¸ä¸‹èŠ‚çš„è¯­å¥åŒºåˆ†å¼€æ¥ã€‚</p><h4 id="7-16-3-å·¦å¤–è¿æ¥ï¼ˆLEFT-JOIN-ONï¼‰"><a href="#7-16-3-å·¦å¤–è¿æ¥ï¼ˆLEFT-JOIN-ONï¼‰" class="headerlink" title="7.16.3 å·¦å¤–è¿æ¥ï¼ˆLEFT JOIN ONï¼‰"></a>7.16.3 å·¦å¤–è¿æ¥ï¼ˆLEFT JOIN ONï¼‰</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„å·¥å·ã€åå­—ã€å·¥èµ„åŠå…¶å¯¹åº”çš„éƒ¨é—¨åç§°ï¼ˆæ²¡æœ‰éƒ¨é—¨çš„å‘˜å·¥ä¹Ÿåœ¨æŸ¥è¯¢ç»“æœä¸­ï¼Œéƒ¨é—¨åç§°ä»¥NULLå€¼è¡¥å……ï¼‰</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,SALARY,DEPARTMENT_NAME </span><br><span class="line">FROM t_employees</span><br><span class="line">LEFT JOIN t_departments </span><br><span class="line">ON t_departments.DEPARTMENT_ID=t_employees.DEPARTMENT_ID;</span><br></pre></td></tr></tbody></table></figure><p>è¯¥è¯­å¥æŸ¥è¯¢å‡ºæ¥çš„ç»“æœåŒ…å«æ²¡æœ‰éƒ¨é—¨çš„178å·å‘˜å·¥ï¼ŒDEPARTMENT_NAMEçš„å€¼è¢«å¡«å……ä¸ºNULLã€‚</p><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>å·¦å¤–è¿æ¥</strong>ï¼Œ<strong>æ˜¯ä»¥å·¦è¡¨ä½œä¸ºä¸»è¡¨</strong>ï¼Œ<strong>ä¾æ¬¡å‘å³åŒ¹é…</strong>ï¼Œ<strong>åŒ¹é…åˆ°åˆ™è¿”å›ç»“æœ</strong>ï¼›</li><li><strong>åŒ¹é…ä¸åˆ°åˆ™è¿”å›NULLå€¼å¡«å……</strong>ã€‚</li></ul><h4 id="7-16-4-å³å¤–è¿æ¥ï¼ˆRIGHT-JOIN-ONï¼‰"><a href="#7-16-4-å³å¤–è¿æ¥ï¼ˆRIGHT-JOIN-ONï¼‰" class="headerlink" title="7.16.4 å³å¤–è¿æ¥ï¼ˆRIGHT JOIN ONï¼‰"></a>7.16.4 å³å¤–è¿æ¥ï¼ˆRIGHT JOIN ONï¼‰</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨ä¿¡æ¯ï¼Œä»¥åŠæ­¤éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯ï¼ˆæ²¡æœ‰å‘˜å·¥çš„éƒ¨é—¨ä¹Ÿåœ¨æŸ¥è¯¢ç»“æœä¸­ï¼Œå‘˜å·¥ä¿¡æ¯ä»¥NULLå€¼å¡«å……ï¼‰</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,SALARY,DEPARTMENT_NAME </span><br><span class="line">FROM t_employees</span><br><span class="line">RIGHT JOIN t_departments </span><br><span class="line">ON t_departments.DEPARTMENT_ID=t_employees.DEPARTMENT_ID;</span><br></pre></td></tr></tbody></table></figure><p>è¯¥æŸ¥è¯¢ç»“æœä»¥éƒ¨é—¨è¡¨ä½œä¸ºä¸»è¡¨ï¼Œæœ‰äº›éƒ¨é—¨æ²¡æœ‰å‘˜å·¥ï¼Œå…¶å‘˜å·¥ä¿¡æ¯å…¨éƒ¨ä¸ºNULLã€‚</p><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>å³å¤–è¿æ¥</strong>ï¼Œ<strong>æ˜¯ä»¥å³è¡¨ä¸ºä¸»è¡¨</strong>ï¼Œ<strong>ä¾æ¬¡å‘å·¦åŒ¹é…</strong>ï¼Œ<strong>åŒ¹é…åˆ°è¿”å›ç»“æœ</strong>ã€‚</li><li><strong>åŒ¹é…ä¸åˆ°</strong>ï¼Œ<strong>åˆ™è¿”å›NULLå€¼å¡«å……</strong>ã€‚</li></ul><h2 id="å…«ã€DMLæ“ä½œã€é‡ç‚¹ã€‘"><a href="#å…«ã€DMLæ“ä½œã€é‡ç‚¹ã€‘" class="headerlink" title="å…«ã€DMLæ“ä½œã€é‡ç‚¹ã€‘"></a>å…«ã€DMLæ“ä½œã€é‡ç‚¹ã€‘</h2><blockquote><p> DDLï¼ˆData Manipulation Languageï¼‰æ•°æ®åº“æ“çºµè¯­è¨€ï¼Œæ˜¯å…¶ä¸­ä¸€ç±»SQLè¯­è¨€ï¼Œå…¶å®ä¹Ÿå°±æ˜¯<strong>å¢åˆ æ”¹</strong>ã€‚</p></blockquote><h3 id="8-1-æ–°å¢ï¼ˆINSERTï¼‰"><a href="#8-1-æ–°å¢ï¼ˆINSERTï¼‰" class="headerlink" title="8.1 æ–°å¢ï¼ˆINSERTï¼‰"></a>8.1 æ–°å¢ï¼ˆINSERTï¼‰</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>INSERT INTO è¡¨å(åˆ—1,åˆ—2,åˆ—3......) VALUES(å€¼1,å€¼2,å€¼3......);</code></p></blockquote><h4 id="8-1-1-æ·»åŠ ä¸€æ¡ä¿¡æ¯"><a href="#8-1-1-æ·»åŠ ä¸€æ¡ä¿¡æ¯" class="headerlink" title="8.1.1 æ·»åŠ ä¸€æ¡ä¿¡æ¯"></a>8.1.1 æ·»åŠ ä¸€æ¡ä¿¡æ¯</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#æ·»åŠ ä¸€æ¡å²—ä½ä¿¡æ¯</span><br><span class="line">INSERT INTO t_jobs(JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) </span><br><span class="line">VALUES('JAVA_LE','Java Lecturer',6000,1200);</span><br><span class="line">#æ·»åŠ ä¸€æ¡å‘˜å·¥ä¿¡æ¯</span><br><span class="line">INSERT INTO t_employees(EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID)</span><br><span class="line">VALUES('194','Liu','YUNChe','xxx@qq.com','12345','2020-11-14','JAVA_LE','11000','0.6',null,'50');</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>è¡¨ååçš„åˆ—åè¦å’ŒVALUEé‡Œçš„å€¼ä¸€ä¸€å¯¹åº”</strong>ï¼ˆ<strong>ä¸ªæ•°</strong>ã€<strong>é¡ºåº</strong>ã€<strong>ç±»å‹</strong>ï¼‰ã€‚</li></ul><h3 id="8-2-ä¿®æ”¹ï¼ˆUPDATAï¼‰"><a href="#8-2-ä¿®æ”¹ï¼ˆUPDATAï¼‰" class="headerlink" title="8.2 ä¿®æ”¹ï¼ˆUPDATAï¼‰"></a>8.2 ä¿®æ”¹ï¼ˆUPDATAï¼‰</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#ä¿®æ”¹ç¼–å·ä¸º100çš„å‘˜å·¥å·¥èµ„ä¸º25000</span><br><span class="line">UPDATE t_employees SET SALARY = 25000 WHERE EMPLOYEE_ID = '100';</span><br><span class="line">#ä¿®æ”¹ç¼–å·ä¸º100çš„å‘˜å·¥ä¿¡æ¯å²—ä½ç¼–å·ä¸º ST_MANï¼Œå·¥èµ„ä¸º3500</span><br><span class="line">UPDATE t_employees SET JOB_ID = 'ST_MAN',SALARY = 3500 WHERE EMPLOYEE_ID = '135';</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>SETåå¤šä¸ªåˆ—å=å€¼</strong>ï¼Œ<strong>ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½è¦åŠ WHEREæ¡ä»¶æŒ‡å®šä¿®æ”¹</strong>ï¼Œ<strong>å¦åˆ™ä¸ºæ•´è¡¨æ›´æ–°</strong>ã€‚</li></ul><h3 id="8-3-åˆ é™¤ï¼ˆDELETEï¼‰"><a href="#8-3-åˆ é™¤ï¼ˆDELETEï¼‰" class="headerlink" title="8.3 åˆ é™¤ï¼ˆDELETEï¼‰"></a>8.3 åˆ é™¤ï¼ˆDELETEï¼‰</h3><p>è¯­æ³•ï¼š<code>DELETE FROM è¡¨å WHERE æ¡ä»¶;</code></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤ç¼–å·ä¸º135çš„å‘˜å·¥</span><br><span class="line">DELETE FROM t_employees WHERE EMPLOYEE_ID = '135';</span><br><span class="line">#åˆ é™¤å§“Peter,å¹¶ä¸”åä¸ºHallçš„å‘˜å·¥</span><br><span class="line">DELETE FROM t_employees WHERE EMPLOYEE_ID = '135';</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>åˆ é™¤æ—¶</strong>ï¼Œ<strong>å¦‚æœä¸åŠ æ¡ä»¶</strong>ï¼Œ<strong>åˆ™é»˜è®¤åˆ é™¤æ•´å¼ è¡¨</strong>ã€‚</li></ul><p><font color="cornflowerblue">ç”¨DELETEåˆ é™¤æ•´è¡¨æ˜¯ä¸å½»åº•çš„ï¼Œå®ƒåªæ˜¯åˆ é™¤äº†å†…å®¹ï¼Œå¹¶æ²¡æœ‰æ”¹å˜è¡¨çš„ç»“æ„ã€‚</font></p><h3 id="8-4-æ¸…ç©ºæ•´è¡¨æ•°æ®ï¼ˆTRUNCATEï¼‰"><a href="#8-4-æ¸…ç©ºæ•´è¡¨æ•°æ®ï¼ˆTRUNCATEï¼‰" class="headerlink" title="8.4 æ¸…ç©ºæ•´è¡¨æ•°æ®ï¼ˆTRUNCATEï¼‰"></a>8.4 æ¸…ç©ºæ•´è¡¨æ•°æ®ï¼ˆTRUNCATEï¼‰</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COPYTRUNCATE TABLE è¡¨å;</span><br></pre></td></tr></tbody></table></figure><h4 id="8-4-1-æ¸…ç©ºæ•´å¼ è¡¨"><a href="#8-4-1-æ¸…ç©ºæ•´å¼ è¡¨" class="headerlink" title="8.4.1 æ¸…ç©ºæ•´å¼ è¡¨"></a>8.4.1 æ¸…ç©ºæ•´å¼ è¡¨</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COPY#æ¸…ç©ºt1æ•´å¼ è¡¨</span><br><span class="line">TRUNCATE TABLE t1;</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>ä¸DELETEä¸åŠ WHEREåˆ é™¤æ•´è¡¨æ•°æ®ä¸åŒ</strong>ï¼Œ<strong>TRUNCATEæ˜¯æŠŠåŸè¡¨é”€æ¯</strong>ï¼Œ<strong>å†æŒ‰åŸè¡¨çš„æ ¼å¼åˆ›å»ºä¸€å¼ æ–°è¡¨</strong>ã€‚</li></ul><h2 id="ä¹ã€æ•°æ®è¡¨æ“ä½œ"><a href="#ä¹ã€æ•°æ®è¡¨æ“ä½œ" class="headerlink" title="ä¹ã€æ•°æ®è¡¨æ“ä½œ"></a>ä¹ã€æ•°æ®è¡¨æ“ä½œ</h2><h3 id="9-1-æ•°æ®ç±»å‹"><a href="#9-1-æ•°æ®ç±»å‹" class="headerlink" title="9.1 æ•°æ®ç±»å‹"></a>9.1 æ•°æ®ç±»å‹</h3><blockquote><p> <font color="red">MySQLæ”¯æŒå¤šç§ç±»å‹ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼šæ•°å€¼ã€æ—¥æœŸ/æ—¶é—´å’Œå­—ç¬¦ä¸²ï¼ˆå­—ç¬¦ï¼‰ç±»å‹ã€‚å¯¹äºæˆ‘ä»¬çº¦æŸæ•°æ®çš„ç±»å‹æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚</font></p></blockquote><h4 id="9-1-1-æ•°å€¼ç±»å‹"><a href="#9-1-1-æ•°å€¼ç±»å‹" class="headerlink" title="9.1.1 æ•°å€¼ç±»å‹"></a>9.1.1 æ•°å€¼ç±»å‹</h4><table><thead><tr><th>ç±»å‹</th><th>å¤§å°</th><th>èŒƒå›´ï¼ˆæœ‰ç¬¦å·ï¼‰</th><th>èŒƒå›´ï¼ˆæ— ç¬¦å·ï¼‰</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>INT</td><td>4å­—èŠ‚</td><td>(-2147483648,2147483647)</td><td>(0,4294967295)</td><td>å¤§æ•´æ•°å€¼</td></tr><tr><td>DOUBLE</td><td>8å­—èŠ‚</td><td>(-1.797E+308,-2.22E-308)</td><td>0,(2.22E-308,1.797E+308)</td><td><code>åŒç²¾åº¦æµ®ç‚¹æ•°å€¼</code></td></tr><tr><td><code>DOUBLE(M,D)</code></td><td>8å­—èŠ‚ï¼ŒMè¡¨ç¤ºé•¿åº¦ï¼ŒDè¡¨ç¤ºå°æ•°ä½æ•°</td><td>åŒä¸Šï¼Œå—Må’ŒDçš„çº¦æŸï¼›å¦‚DOUBLE(5,2) -999.99~999.99</td><td>åŒä¸Šï¼Œå—Må’ŒDçš„çº¦æŸ</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°å€¼</td></tr><tr><td>DECIMAL(M,D)</td><td>DECIMAL(M,D)</td><td>ä¾èµ–äºMå’ŒDçš„å€¼ï¼ŒMæœ€å¤§å€¼ä¸º65</td><td>ä¾èµ–äºMå’ŒDçš„å€¼ï¼ŒMæœ€å¤§å€¼ä¸º65</td><td>å°æ•°å€¼</td></tr></tbody></table><h4 id="9-1-2-æ—¥æœŸç±»å‹"><a href="#9-1-2-æ—¥æœŸç±»å‹" class="headerlink" title="9.1.2 æ—¥æœŸç±»å‹"></a>9.1.2 æ—¥æœŸç±»å‹</h4><table><thead><tr><th>ç±»å‹</th><th>å¤§å°</th><th>èŒƒå›´</th><th>æ ¼å¼</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>DATE</strong></td><td>3</td><td>1000-01-01/9999-12-31</td><td>YYYY-MM-DD</td><td>æ—¥æœŸå€¼</td></tr><tr><td>TIME</td><td>3</td><td>â€˜-838:59:59â€™/â€˜838:59:59â€™</td><td>HH:MM:SS</td><td>æ—¶é—´å€¼æˆ–æŒç»­æ—¶é—´</td></tr><tr><td>YEAR</td><td>1</td><td>1901/2155</td><td>YYYY</td><td>å¹´ä»½å€¼</td></tr><tr><td><strong>DETETIME</strong></td><td>8</td><td>1000-01-01 00:00:00/9999-12-31 23:59:59</td><td>YYYY-MM-DD HH:MM:SS</td><td>æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼</td></tr><tr><td>TIMESTAMP</td><td>4</td><td>1970-01-01 00:00:00/2038ç»“æŸæ—¶é—´æ˜¯ç¬¬ <strong>2147483647</strong> ç§’ï¼ŒåŒ—äº¬æ—¶é—´ <strong>2038-1-19 11:14:07</strong>ï¼Œæ ¼æ—å°¼æ²»æ—¶é—´ 2038å¹´1æœˆ19æ—¥ å‡Œæ™¨ 03:14:07</td><td>YYYYMMDD HHMMSS</td><td>æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œæ—¶é—´æˆ³</td></tr></tbody></table><h4 id="9-1-3-å­—ç¬¦ä¸²ç±»å‹"><a href="#9-1-3-å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="9.1.3 å­—ç¬¦ä¸²ç±»å‹"></a>9.1.3 å­—ç¬¦ä¸²ç±»å‹</h4><table><thead><tr><th>ç±»å‹</th><th>å¤§å°</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>CHAR</td><td>0-255 bytes</td><td>å®šé•¿å­—ç¬¦ä¸²</td></tr><tr><td>VARCHAR</td><td>0-65535 bytes</td><td>å˜é•¿å­—ç¬¦ä¸²</td></tr><tr><td>BLOBï¼ˆbinary large objectï¼‰</td><td>0-65 535 bytes</td><td>äºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ®</td></tr><tr><td>TEXT</td><td>0-65 535 bytes</td><td>é•¿æ–‡æœ¬æ•°æ®</td></tr></tbody></table><ul><li><font color="orange">CHARå’ŒVARCHARç±»å‹ç±»ä¼¼ï¼Œä½†å®ƒä»¬ä¿å­˜å’Œæ£€ç´¢çš„æ–¹å¼ä¸åŒã€‚å®ƒä»¬çš„æœ€å¤§é•¿åº¦å’Œæ˜¯å¦å°¾éƒ¨ç©ºæ ¼è¢«ä¿ç•™ç­‰æ–¹é¢ä¹Ÿä¸åŒï¼ŒCHAR(N)ä¼šå°†å¤šä½™çš„å­˜å‚¨ä½ä»¥ç©ºæ ¼è¡¥è¶³ï¼Œè€ŒVARCHAR(N)åˆ™ä¼šæ ¹æ®å®é™…å­˜å‚¨é•¿åº¦è¿›è¡Œâ€œå‹ç¼©â€ã€‚åœ¨å­˜å‚¨æˆ–æ£€ç´¢è¿‡ç¨‹ä¸­ä¸è¿›è¡Œå¤§å°å†™è½¬æ¢ã€‚</font></li><li><font color="orange">BLOBæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼Œå¯ä»¥å®¹çº³å¯å˜æ•°é‡çš„æ•°æ®ã€‚æœ‰4ç§BLOBç±»å‹ï¼šTINYBLOBã€BLOBã€MEDIUMBLOBå’ŒLONGBLOBã€‚å®ƒä»¬åªæ˜¯å¯å®¹çº³å€¼çš„æœ€å¤§é•¿åº¦ä¸åŒã€‚</font></li></ul><h3 id="9-2-æ•°æ®è¡¨çš„åˆ›å»ºï¼ˆCREATEï¼‰"><a href="#9-2-æ•°æ®è¡¨çš„åˆ›å»ºï¼ˆCREATEï¼‰" class="headerlink" title="9.2 æ•°æ®è¡¨çš„åˆ›å»ºï¼ˆCREATEï¼‰"></a>9.2 æ•°æ®è¡¨çš„åˆ›å»ºï¼ˆCREATEï¼‰</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE è¡¨å(</span><br><span class="line">    åˆ—å æ•°æ®ç±»å‹ [çº¦æŸ],</span><br><span class="line">    åˆ—å æ•°æ®ç±»å‹ [çº¦æŸ],</span><br><span class="line">    ......</span><br><span class="line">    åˆ—å æ•°æ®ç±»å‹ [çº¦æŸ]#æœ€åä¸€è¡Œçš„æœ«å°¾ä¸åŠ é€—å·</span><br><span class="line">)[CHARSET=UTF8]#å¯æ ¹æ®éœ€è¦æŒ‡å®šè¡¨çš„å­—ç¬¦ç¼–ç é›†</span><br></pre></td></tr></tbody></table></figure><p>æ‹¬å·å†…çš„å†…å®¹ä¸ºå¯é€‰ã€‚</p><h4 id="9-2-1-åˆ›å»ºè¡¨"><a href="#9-2-1-åˆ›å»ºè¡¨" class="headerlink" title="9.2.1 åˆ›å»ºè¡¨"></a>9.2.1 åˆ›å»ºè¡¨</h4><table><thead><tr><th>åˆ—å</th><th>æ•°æ®ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>subject_id</td><td>INT</td><td>è¯¾ç¨‹ç¼–å·</td></tr><tr><td>subject_name</td><td>VARCHAR(20)</td><td>è¯¾ç¨‹æ—¶é—´</td></tr><tr><td>subject_hours</td><td>INT</td><td>è¯¾ç¨‹è¯¾é•¿</td></tr></tbody></table><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#æ ¹æ®ä¸Šè¿°è¡¨æ ¼åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶å‘è¡¨ä¸­æ’å…¥3æ¡æµ‹è¯•è¯­å¥</span><br><span class="line">CREATE TABLE `t_subject` (</span><br><span class="line">  `subject_id` int,</span><br><span class="line">  `subject_name` varchar(20),</span><br><span class="line">  `subject_hours` int(11)</span><br><span class="line">)CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO t_subject(subject_id,subject_name,subject_hours) </span><br><span class="line">VALUES(1,'JAVA',40);</span><br><span class="line">INSERT INTO t_subject(subject_id,subject_name,subject_hours) </span><br><span class="line">VALUES(2,'MYSQL',30);</span><br><span class="line">INSERT INTO t_subject(subject_id,subject_name,subject_hours) VALUES(3,'JAVASCRIPT',20)</span><br></pre></td></tr></tbody></table></figure><h3 id="9-3-æ•°æ®è¡¨çš„ä¿®æ”¹ï¼ˆALTERï¼‰"><a href="#9-3-æ•°æ®è¡¨çš„ä¿®æ”¹ï¼ˆALTERï¼‰" class="headerlink" title="9.3 æ•°æ®è¡¨çš„ä¿®æ”¹ï¼ˆALTERï¼‰"></a>9.3 æ•°æ®è¡¨çš„ä¿®æ”¹ï¼ˆALTERï¼‰</h3><blockquote><p><strong>è¯­æ³•</strong>ï¼š<code>ALTER TABLE è¡¨å æ“ä½œ;</code></p></blockquote><h4 id="9-3-1-å‘ç°æœ‰è¡¨ä¸­æ·»åŠ åˆ—"><a href="#9-3-1-å‘ç°æœ‰è¡¨ä¸­æ·»åŠ åˆ—" class="headerlink" title="9.3.1 å‘ç°æœ‰è¡¨ä¸­æ·»åŠ åˆ—"></a>9.3.1 å‘ç°æœ‰è¡¨ä¸­æ·»åŠ åˆ—</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åœ¨è¯¾ç¨‹è¡¨åŸºç¡€ä¸Šæ·»åŠ grade_idåˆ—</span><br><span class="line">ALTER TABLE t_subject ADD grade_id INT;</span><br></pre></td></tr></tbody></table></figure><h4 id="9-3-2-ä¿®æ”¹è¡¨ä¸­çš„åˆ—"><a href="#9-3-2-ä¿®æ”¹è¡¨ä¸­çš„åˆ—" class="headerlink" title="9.3.2 ä¿®æ”¹è¡¨ä¸­çš„åˆ—"></a>9.3.2 ä¿®æ”¹è¡¨ä¸­çš„åˆ—</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ä¿®æ”¹è¯¾ç¨‹è¡¨ä¸­çš„è¯¾ç¨‹åç§°é•¿åº¦ä¸º10ä¸ªå­—ç¬¦</span><br><span class="line">ALTER TABLE t_subject MODIFY subject_name VARCHAR(10);</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>ä¿®æ”¹è¡¨ä¸­çš„æŸåˆ—æ—¶</strong>ï¼Œ<strong>ä¹Ÿè¦å†™å…¨åˆ—çš„åå­—</strong>ï¼Œ<strong>æ•°æ®ç±»å‹</strong>ï¼Œ<strong>çº¦æŸ</strong>ã€‚</li></ul><h4 id="9-3-3-åˆ é™¤è¡¨ä¸­çš„åˆ—"><a href="#9-3-3-åˆ é™¤è¡¨ä¸­çš„åˆ—" class="headerlink" title="9.3.3 åˆ é™¤è¡¨ä¸­çš„åˆ—"></a>9.3.3 åˆ é™¤è¡¨ä¸­çš„åˆ—</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤è¯¾ç¨‹è¡¨ä¸­grade_idåˆ—</span><br><span class="line">ALTER TABLE t_subject DROP grade_id;</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>åˆ é™¤åˆ—æ—¶</strong>ï¼Œ<strong>æ¯æ¬¡åªèƒ½åˆ ä¸€åˆ—</strong>ã€‚</li></ul><h4 id="9-3-4-ä¿®æ”¹åˆ—å"><a href="#9-3-4-ä¿®æ”¹åˆ—å" class="headerlink" title="9.3.4 ä¿®æ”¹åˆ—å"></a>9.3.4 ä¿®æ”¹åˆ—å</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ä¿®æ”¹è¯¾ç¨‹è¡¨ä¸­subject_hoursåˆ—ä¸ºclass_hours</span><br><span class="line">ALTER TABLE t_subject CHANGE subject_hours class_hours INT;</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>ä¿®æ”¹åˆ—åæ—¶</strong>ï¼Œ<strong>åœ¨ç»™å®šåˆ—æ–°åç§°æ—¶</strong>ï¼Œ<strong>è¦æŒ‡å®šåˆ—çš„ç±»å‹å’Œçº¦æŸ</strong>ã€‚</li></ul><h4 id="9-3-5-ä¿®æ”¹è¡¨å"><a href="#9-3-5-ä¿®æ”¹è¡¨å" class="headerlink" title="9.3.5 ä¿®æ”¹è¡¨å"></a>9.3.5 ä¿®æ”¹è¡¨å</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ä¿®æ”¹è¯¾ç¨‹è¡¨çš„t_subjectä¸ºt_sub</span><br><span class="line">ALTER TABLE t_subject RENAME t_sub;</span><br></pre></td></tr></tbody></table></figure><h3 id="9-4-æ•°æ®è¡¨çš„åˆ é™¤ï¼ˆDROPï¼‰"><a href="#9-4-æ•°æ®è¡¨çš„åˆ é™¤ï¼ˆDROPï¼‰" class="headerlink" title="9.4 æ•°æ®è¡¨çš„åˆ é™¤ï¼ˆDROPï¼‰"></a>9.4 æ•°æ®è¡¨çš„åˆ é™¤ï¼ˆDROPï¼‰</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>DROP TABLE è¡¨å</code></p></blockquote><h4 id="9-4-1-åˆ é™¤è¯¾ç¨‹è¡¨"><a href="#9-4-1-åˆ é™¤è¯¾ç¨‹è¡¨" class="headerlink" title="9.4.1 åˆ é™¤è¯¾ç¨‹è¡¨"></a>9.4.1 åˆ é™¤è¯¾ç¨‹è¡¨</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤è¯¾ç¨‹è¡¨</span><br><span class="line">DROP TABLE t_sub;</span><br></pre></td></tr></tbody></table></figure><h2 id="åã€çº¦æŸ"><a href="#åã€çº¦æŸ" class="headerlink" title="åã€çº¦æŸ"></a>åã€çº¦æŸ</h2><blockquote><p> é—®é¢˜ï¼šåœ¨å¾€å·²åˆ›å»ºè¡¨ä¸­æ–°å¢æ•°æ®æ—¶ï¼Œå¯ä¸å¯ä»¥æ–°å¢ä¸¤è¡Œç›¸åŒåˆ—çš„æ•°æ®ï¼Ÿå¦‚æœå¯è¡Œï¼Œä¼šæœ‰ä»€ä¹ˆå¼Šç«¯ï¼Ÿ</p></blockquote><p>è¿™æ˜¯å¯ä»¥çš„ï¼Œä½†é‡å¤çš„æ•°æ®ä¸ä»…ä¼šæµªè´¹ç©ºé—´ï¼Œè€Œä¸”å¯¹æŸ¥è¯¢ç»“æœä¸åˆ©ï¼Œä¹Ÿæ˜¯å¤šä½™çš„ã€‚åœ¨å®é™…çš„å­˜å‚¨ä¸­åº”å°½é‡ä¿è¯æ¯æ¡æ•°æ®çš„å”¯ä¸€æ€§ã€‚</p><h3 id="10-1-å®ä½“å®Œæ•´æ€§çº¦æŸ"><a href="#10-1-å®ä½“å®Œæ•´æ€§çº¦æŸ" class="headerlink" title="10.1 å®ä½“å®Œæ•´æ€§çº¦æŸ"></a>10.1 å®ä½“å®Œæ•´æ€§çº¦æŸ</h3><blockquote><p> è¡¨ä¸­çš„ä¸€è¡Œæ•°æ®ä»£è¡¨ä¸€ä¸ªå®ä½“ï¼ˆentityï¼‰ï¼Œå®ä½“å®Œæ•´æ€§çš„ä½œç”¨å³æ˜¯æ ‡è¯†æ¯ä¸€è¡Œæ•°æ®ä¸é‡å¤ï¼Œå®ä½“å”¯ä¸€ã€‚</p></blockquote><h4 id="10-1-1-ä¸»é”®çº¦æŸ"><a href="#10-1-1-ä¸»é”®çº¦æŸ" class="headerlink" title="10.1.1 ä¸»é”®çº¦æŸ"></a>10.1.1 ä¸»é”®çº¦æŸ</h4><blockquote><p><strong>å…³é”®è¯</strong>ï¼š<code>PRIMARY KEY</code>å”¯ä¸€ï¼Œæ ‡è¯†è¡¨ä¸­çš„ä¸€è¡Œæ•°æ®ï¼Œæ­¤åˆ—çš„å€¼ä¸å¯é‡å¤ï¼Œä¸”<strong>ä¸èƒ½</strong>ä¸ºNULLã€‚</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#ä¸ºè¡¨ä¸­é€‚ç”¨ä¸»é”®çš„åˆ—æ·»åŠ ä¸»é”®çº¦æŸ</span><br><span class="line">CREATE TABLE t_subject(</span><br><span class="line">#è¯¾ç¨‹æ ‡å·æ ‡è¯†äº†æ¯ä¸€ä¸ªè¯¾ç¨‹çš„ç¼–å·å”¯ä¸€ï¼Œä¸”ä¸èƒ½ä¸ºNULL</span><br><span class="line">subject_id INT PRIMARY KEY,</span><br><span class="line">subject_name VARCHAR(20),</span><br><span class="line">subject_hours INT</span><br><span class="line">)CHARSET=utf8;</span><br><span class="line">INSERT INTO t_subject(subject_id,subject_name,subject_hours) VALUES(1,'JAVA',40);</span><br><span class="line">#æŠ¥é”™ï¼Œä¸»é”®subject_idä¸å¯é‡å¤</span><br><span class="line">INSERT INTO t_subject(subject_id,subject_name,subject_hours) VALUES(1,'JAVA',40);</span><br></pre></td></tr></tbody></table></figure><p>ä½œä¸ºä¸»é”®çš„å­—æ®µä¸€èˆ¬éƒ½æ˜¯ä¹Ÿåº”è¯¥æ˜¯ç¼–å·ã€å­¦å·ã€å·¥å·ç­‰å­—æ®µã€‚</p><h4 id="10-1-2-å”¯ä¸€çº¦æŸ"><a href="#10-1-2-å”¯ä¸€çº¦æŸ" class="headerlink" title="10.1.2 å”¯ä¸€çº¦æŸ"></a>10.1.2 å”¯ä¸€çº¦æŸ</h4><blockquote><p> <strong>å…³é”®å­—</strong>ï¼š<code>UNIQUE</code>å”¯ä¸€ï¼Œæ ‡è¯†è¡¨ä¸­çš„ä¸€è¡Œæ•°æ®ï¼Œä¸å¯é‡å¤ï¼Œ<strong>å¯ä»¥</strong>ä¸ºNULLã€‚</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#ä¸ºè¡¨ä¸­åˆ—å€¼ä¸å…è®¸é‡å¤çš„åˆ—æ·»åŠ å”¯ä¸€çº¦æŸ</span><br><span class="line">ALTER TABLE t_subject MODIFY subject_name VARCHAR(20) UNIQUE;</span><br><span class="line"></span><br><span class="line">INSERT INTO t_subject(subject_id,subject_name,subject_hours) VALUES(1,'JAVA',40);</span><br><span class="line">#æŠ¥é”™ï¼Œè¯¾ç¨‹åå·²å­˜åœ¨</span><br><span class="line">INSERT INTO t_subject(subject_id,subject_name,subject_hours) VALUES(2,'JAVA',40);</span><br></pre></td></tr></tbody></table></figure><h4 id="10-1-3-è‡ªåŠ¨å¢é•¿åˆ—"><a href="#10-1-3-è‡ªåŠ¨å¢é•¿åˆ—" class="headerlink" title="10.1.3 è‡ªåŠ¨å¢é•¿åˆ—"></a>10.1.3 è‡ªåŠ¨å¢é•¿åˆ—</h4><blockquote><p> å…³é”®å­—ï¼š<code>AUTO_INCREAMENT</code>è‡ªåŠ¨å¢é•¿ï¼Œç»™<strong>ä¸»é”®æ•°å€¼åˆ—</strong>æ·»åŠ è‡ªåŠ¨å¢é•¿ã€‚ä»1å¼€å§‹ï¼Œæ¯æ¬¡åŠ 1ã€‚ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå’Œä¸»é”®é…åˆã€‚</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#ä¸ºè¡¨ä¸­ä¸»é”®åˆ—æ·»åŠ è‡ªåŠ¨å¢é•¿ï¼Œé¿å…å¿˜è®°ä¸»é”®IDåºå·</span><br><span class="line">ALTER TABLE t_subject MODIFY subject_id INT AUTO_INCREMENT;</span><br><span class="line">#è¯¾ç¨‹IDè‡ªåŠ¨å¢é•¿ä¸º2</span><br><span class="line">INSERT INTO t_subject ( subject_name, subject_hours ) VALUES( 'HTML5', 40 );</span><br></pre></td></tr></tbody></table></figure><h3 id="10-2-åŸŸå®Œæ•´æ€§çº¦æŸ"><a href="#10-2-åŸŸå®Œæ•´æ€§çº¦æŸ" class="headerlink" title="10.2 åŸŸå®Œæ•´æ€§çº¦æŸ"></a>10.2 åŸŸå®Œæ•´æ€§çº¦æŸ</h3><blockquote><p> è¯¥çº¦æŸé™åˆ¶å•å…ƒæ ¼çš„æ•°æ®æ­£ç¡®æ€§ã€‚</p></blockquote><h4 id="10-2-1-éç©ºçº¦æŸ"><a href="#10-2-1-éç©ºçº¦æŸ" class="headerlink" title="10.2.1 éç©ºçº¦æŸ"></a>10.2.1 éç©ºçº¦æŸ</h4><blockquote><p> è¯­æ³•ï¼š<code>NOT NULL</code>,éç©ºï¼Œæ­¤åˆ—å¿…é¡»æœ‰å€¼</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#è¯¾ç¨‹åç§°è™½ç„¶æ·»åŠ äº†å”¯ä¸€çº¦æŸï¼Œä½†æ˜¯æœ‰NULLå€¼å­˜åœ¨çš„å¯èƒ½ï¼Œè¦é¿å…è¯¾ç¨‹åç§°ä¸ºNULLã€‚</span><br><span class="line">ALTER TABLE t_subject MODIFY subject_name VARCHAR(20) NOT NULL;</span><br><span class="line">#æŠ¥é”™ï¼Œè¯¾ç¨‹åä¸èƒ½ä¸ºç©º</span><br><span class="line">INSERT INTO t_subject(subject_name,subject_hours) VALUES (NULL,40);</span><br></pre></td></tr></tbody></table></figure><h4 id="10-2-2-é»˜è®¤å€¼çº¦æŸ"><a href="#10-2-2-é»˜è®¤å€¼çº¦æŸ" class="headerlink" title="10.2.2 é»˜è®¤å€¼çº¦æŸ"></a>10.2.2 é»˜è®¤å€¼çº¦æŸ</h4><blockquote><p> <strong>å…³é”®å­—</strong>ï¼š<code>DEFAULT å€¼</code>ã€‚ä¸ºåˆ—èµ‹äºˆé»˜è®¤å€¼ï¼Œå½“æ–°å¢æ•°æ®ä¸æŒ‡å®šå€¼æ—¶ï¼Œä¹¦å†™DEFAULTï¼Œä»¥æŒ‡å®šçš„é»˜è®¤å€¼è¿›è¡Œå¡«å……ã€‚</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#å½“å­˜å‚¨è¯¾ç¨‹ä¿¡æ¯æ—¶ï¼Œè‹¥è¯¾ç¨‹æ—¶é•¿æ²¡æœ‰æŒ‡å®šå€¼ï¼Œåˆ™ä»¥é»˜è®¤å€¼è¿›è¡Œå¡«å……</span><br><span class="line">ALTER TABLE t_subject MODIFY subject_hours INT DEFAULT 40;</span><br><span class="line">#ä¸å†™é»˜è®¤è¯¾ç¨‹æ—¶ä¸º40ï¼Œä¹Ÿå¯ä»¥æŠŠå€¼å†™æˆDEFAULT</span><br><span class="line">INSERT INTO t_subject(subject_name) VALUES('JAVAWEB');</span><br></pre></td></tr></tbody></table></figure><h4 id="10-2-3-å¼•ç”¨å®Œæ•´æ€§çº¦æŸ"><a href="#10-2-3-å¼•ç”¨å®Œæ•´æ€§çº¦æŸ" class="headerlink" title="10.2.3 å¼•ç”¨å®Œæ•´æ€§çº¦æŸ"></a>10.2.3 å¼•ç”¨å®Œæ•´æ€§çº¦æŸ</h4><blockquote><p><strong>è¯­æ³•</strong>ï¼š<code>CONSTRAINT å¼•ç”¨å FOREIGN KEY (åˆ—å) REFERENCES è¢«å¼•ç”¨è¡¨å(åˆ—å)</code></p></blockquote><blockquote><p> <strong>è§£é‡Š</strong>ï¼šFOREIGN KEY<strong>å¼•ç”¨å¤–éƒ¨è¡¨æŸä¸ªåˆ—çš„å€¼</strong>ï¼Œæ–°å¢æ•°æ®æ—¶ï¼Œçº¦æŸæ­¤åˆ—çš„å€¼<strong>å¿…é¡»æ˜¯å¼•ç”¨è¡¨ä¸­å­˜åœ¨çš„å€¼</strong>ã€‚</p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºä¸“ä¸šè¡¨</span><br><span class="line">CREATE TABLE t_speciality(</span><br><span class="line">special_id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">special_name VARCHAR(20) UNIQUE NOT NULL</span><br><span class="line">)CHARSET=utf8;</span><br><span class="line">#æ·»åŠ ä¸€äº›ä¸“ä¸šä¿¡æ¯</span><br><span class="line">INSERT INTO t_speciality(special_name) VALUES('HTML5');</span><br><span class="line">INSERT INTO t_speciality(special_name) VALUES('JAVA');</span><br><span class="line">INSERT INTO t_speciality(special_name) VALUES('JAVAWEB');</span><br><span class="line">INSERT INTO t_speciality(special_name) VALUES('æ•°æ®ç»“æ„');</span><br><span class="line">#subject_idå¼•ç”¨special_id</span><br><span class="line">ALTER TABLE t_subject ADD </span><br><span class="line">CONSTRAINT fk_subject_spacial FOREIGN KEY(special_id) REFERENCES t_speciality(special_id);</span><br><span class="line">#æ·»åŠ æ•°æ®æˆåŠŸ</span><br><span class="line">INSERT INTO t_subject(subject_name,special_id) VALUES('æ•°æ®ç»“æ„',4);</span><br><span class="line">#æ·»åŠ å¤±è´¥ï¼Œä¸»è¡¨ä¸­ä¸å­˜åœ¨5</span><br><span class="line">INSERT INTO t_subject(subject_name,special_id) VALUES('æ“ä½œç³»ç»Ÿ',5);</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>å½“ä¸¤å¼ è¡¨å­˜åœ¨å¼•ç”¨å…³ç³»æ—¶</strong>ï¼Œ<strong>è¦æ‰§è¡Œåˆ é™¤æ“ä½œ</strong>ï¼Œ<strong>ä¸€å®šè¦å…ˆåˆ é™¤ä»è¡¨</strong>ï¼ˆ<strong>å¼•ç”¨è¡¨</strong>ï¼‰ï¼Œ<strong>å†åˆ é™¤ä¸»è¡¨</strong>ï¼ˆ<strong>è¢«å¼•ç”¨è¡¨</strong>ï¼‰ã€‚</li></ul><h3 id="10-3-çº¦æŸåˆ›å»ºæ•´åˆ"><a href="#10-3-çº¦æŸåˆ›å»ºæ•´åˆ" class="headerlink" title="10.3 çº¦æŸåˆ›å»ºæ•´åˆ"></a>10.3 çº¦æŸåˆ›å»ºæ•´åˆ</h3><p>åˆ›å»ºå¸¦æœ‰çº¦æŸçš„è¡¨ã€‚</p><table><thead><tr><th>åˆ—å</th><th>æ•°æ®ç±»å‹</th><th>çº¦æŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>grade_id</td><td>INT</td><td>ä¸»é”®ã€è‡ªåŠ¨å¢é•¿</td><td>ç­çº§ç¼–å·</td></tr><tr><td>grade_name</td><td>VARCHAR(20)</td><td>å”¯ä¸€ã€éç©º</td><td>ç­çº§åç§°</td></tr></tbody></table><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE t_grade(</span><br><span class="line">grade_id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">grade_name VARCHAR(20) UNIQUE NOT NULL</span><br><span class="line">)CHARSET=utf8;</span><br></pre></td></tr></tbody></table></figure><table><thead><tr><th>åˆ—å</th><th>æ•°æ®ç±»å‹</th><th>çº¦æŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>student_id</td><td>VARCHAR(20)</td><td>ä¸»é”®</td><td>å­¦å·</td></tr><tr><td>student_name</td><td>VARCHAR(20)</td><td>éç©º</td><td>å§“å</td></tr><tr><td>sex</td><td>CHAR(2)</td><td>é»˜è®¤å¡«å……â€œç”·â€</td><td>æ€§åˆ«</td></tr><tr><td>born_date</td><td>DATE</td><td>éç©º</td><td>ç”Ÿæ—¥</td></tr><tr><td>phone</td><td>VARCHAR(11)</td><td>æ— </td><td>ç”µè„‘</td></tr><tr><td>grade_id</td><td>INT</td><td>éç©ºã€å¤–é”®çº¦æŸå¼•ç”¨ç­çº§è¡¨çš„grade_id</td><td>ç­çº§ç¼–å·</td></tr></tbody></table><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE t_student(</span><br><span class="line">student_id VARCHAR(20) PRIMARY KEY,</span><br><span class="line">student_name VARCHAR(20) NOT NULL,</span><br><span class="line">sex CHAR(2) DEFAULT 'ç”·',</span><br><span class="line">born_date DATE NOT NULL,</span><br><span class="line">phone VARCHAR(11),</span><br><span class="line">grade_id INT NOT NULL,</span><br><span class="line">CONSTRAINT fk_student_grade FOREIGN KEY (grade_id) REFERENCES t_grade(grade_id)</span><br><span class="line">)CHARSET=utf8;</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>åˆ›å»ºå…³ç³»è¡¨æ—¶</strong>ï¼Œ<strong>ä¸€å®šè¦å…ˆåˆ›å»ºä¸»é”®</strong>ï¼Œ<strong>å†åˆ›å»ºä»è¡¨</strong>ã€‚</li><li><strong>åˆ é™¤å…³ç³»è¡¨æ—¶</strong>ï¼Œ<strong>å…ˆåˆ é™¤ä»è¡¨</strong>ï¼Œ<strong>å†åˆ é™¤ä¸»è¡¨</strong>ã€‚</li></ul><h2 id="åä¸€ã€äº‹åŠ¡ã€é‡ç‚¹ã€‘"><a href="#åä¸€ã€äº‹åŠ¡ã€é‡ç‚¹ã€‘" class="headerlink" title="åä¸€ã€äº‹åŠ¡ã€é‡ç‚¹ã€‘"></a>åä¸€ã€äº‹åŠ¡ã€é‡ç‚¹ã€‘</h2><h3 id="11-1-æ¨¡æ‹Ÿè½¬è´¦"><a href="#11-1-æ¨¡æ‹Ÿè½¬è´¦" class="headerlink" title="11.1 æ¨¡æ‹Ÿè½¬è´¦"></a>11.1 æ¨¡æ‹Ÿè½¬è´¦</h3><blockquote><p> ç”Ÿæ´»å½“ä¸­è½¬è´¦æ˜¯è½¬è´¦æ–¹è´¦æˆ·æ‰£é’±ï¼Œæ”¶è´¦æ–¹è´¦æˆ·åŠ é’±ã€‚æˆ‘ä»¬ç”¨æ•°æ®åº“æ“ä½œæ¥æ¨¡æ‹Ÿå®ç°è½¬è´¦ã€‚</p></blockquote><h4 id="11-1-1-æ•°æ®åº“æ¨¡æ‹Ÿè½¬è´¦"><a href="#11-1-1-æ•°æ®åº“æ¨¡æ‹Ÿè½¬è´¦" class="headerlink" title="11.1.1 æ•°æ®åº“æ¨¡æ‹Ÿè½¬è´¦"></a>11.1.1 æ•°æ®åº“æ¨¡æ‹Ÿè½¬è´¦</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#Aè´¦æˆ·è½¬è´¦ç»™Bè´¦æˆ·1000å…ƒ</span><br><span class="line">#Bè´¦æˆ·å‡1000å…ƒ</span><br><span class="line"></span><br><span class="line">#æ–°å»ºè´¦æˆ·è¡¨</span><br><span class="line">CREATE TABLE t_account(</span><br><span class="line">account_id INT PRIMARY KEY,</span><br><span class="line">money INT</span><br><span class="line">)CHARSET=utf8;</span><br><span class="line">#æ’å…¥æ•°æ®</span><br><span class="line">INSERT INTO t_account(account_id,money) VALUES(1,5000);</span><br><span class="line">INSERT INTO t_account(account_id,money) VALUES(2,5000);</span><br><span class="line">#æ¨¡æ‹Ÿè½¬è´¦</span><br><span class="line">UPDATE t_account SET money=money-1000 WHERE account_id=1;#è½¬è´¦</span><br><span class="line">UPDATE t_account SET money=money+1000 WHERE account_id=2;#æ”¶è´¦</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>ä¸Šè¿°ä»£ç å®Œæˆäº†ä¸¤ä¸ªè´¦æˆ·ä¹‹é—´è½¬è´¦çš„æ“ä½œ</strong>ã€‚</li></ul><h3 id="11-1-2-æ¨¡æ‹Ÿè½¬è´¦é”™è¯¯"><a href="#11-1-2-æ¨¡æ‹Ÿè½¬è´¦é”™è¯¯" class="headerlink" title="11.1.2 æ¨¡æ‹Ÿè½¬è´¦é”™è¯¯"></a>11.1.2 æ¨¡æ‹Ÿè½¬è´¦é”™è¯¯</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE t_account SET money=money-1000 WHERE account_id=1;#è½¬è´¦</span><br><span class="line">#æ–­ç”µï¼Œå¼‚å¸¸ï¼Œå‡ºé”™...</span><br><span class="line">UPDATE t_account SET money=money+1000 WHERE account_id=2;#æ”¶è´¦</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>ä¸Šè¿°ä»£ç åœ¨å‡æ“ä½œåè¿‡ç¨‹ä¸­å‡ºç°äº†å¼‚å¸¸æˆ–åŠ é’±è¯­å¥å‡ºé”™</strong>ï¼Œ<strong>ä¼šå‘ç°å‡é’±æˆåŠŸäº†è€ŒåŠ é’±å¤±è´¥äº†</strong>ï¼</li><li><strong>æ³¨æ„</strong>ï¼š<strong>æ¯æ¡SQLè¯­å¥éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ“ä½œ</strong>ï¼Œ<strong>ä¸€ä¸ªæ“ä½œæ‰§è¡Œå®Œå¯¹æ•°æ®åº“æ˜¯æ°¸ä¹…æ€§çš„å½±å“</strong>ã€‚</li></ul><h3 id="11-2-äº‹åŠ¡çš„æ¦‚å¿µ"><a href="#11-2-äº‹åŠ¡çš„æ¦‚å¿µ" class="headerlink" title="11.2 äº‹åŠ¡çš„æ¦‚å¿µ"></a>11.2 äº‹åŠ¡çš„æ¦‚å¿µ</h3><blockquote><p> äº‹åŠ¡æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œæ˜¯ä¸€ä¸ªåšå°æ‰§è¡Œå•å…ƒã€‚å¯ä»¥ç”±ä¸€ä¸ªæˆ–å¤šä¸ªSQLè¯­å¥ç»„æˆï¼Œåœ¨åŒä¸€ä¸ªäº‹åŠ¡å½“ä¸­ï¼Œæ‰€æœ‰çš„SQLè¯­å¥éƒ½æˆåŠŸæ‰§è¡Œï¼Œæ•´ä¸ªäº‹åŠ¡æˆåŠŸï¼Œæœ‰ä¸€ä¸ªSQLè¯­å¥æ‰§è¡Œå¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡æ‰§è¡Œå¤±è´¥ã€‚</p></blockquote><h3 id="11-3-äº‹åŠ¡çš„è¾¹ç•Œ"><a href="#11-3-äº‹åŠ¡çš„è¾¹ç•Œ" class="headerlink" title="11.3 äº‹åŠ¡çš„è¾¹ç•Œ"></a>11.3 äº‹åŠ¡çš„è¾¹ç•Œ</h3><ul><li>å¼€å§‹ï¼šè¿æ¥åˆ°æ•°æ®åº“ï¼Œæ‰§è¡Œä¸€æ¡DMLè¯­å¥ã€‚ä¸Šä¸€ä¸ªäº‹åŠ¡ç»“æŸåï¼Œåˆè¾“å…¥äº†ä¸€æ¡DMLè¯­å¥ï¼Œå³äº‹åŠ¡çš„å¼€å§‹ã€‚</li><li>ç»“æŸï¼š<ol><li>æäº¤ï¼š<ul><li>æ˜¾å¼æäº¤ï¼šCOMMITï¼›</li><li>éšå¼æäº¤ï¼šä¸€æ¡åˆ›å»ºã€åˆ é™¤çš„è¯­å¥ï¼Œæ­£å¸¸é€€å‡ºï¼ˆå®¢æˆ·ç«¯é€€å‡ºè¿æ¥ï¼‰ï¼›</li></ul></li><li>å›æ»šï¼š<ul><li>æ˜¾å¼å›æ»šï¼šROLLBACKï¼›</li><li>éšå¼å›æ»šï¼šéæ­£å¸¸é€€å‡ºï¼ˆæ–­ç”µã€å®•æœºï¼‰ï¼Œæ‰§è¡Œäº†åˆ›å»ºã€åˆ é™¤çš„è¯­å¥ï¼Œä½†æ˜¯å¤±è´¥äº†ï¼Œä¼šä¸ºè¿™ä¸ªæ— æ•ˆçš„è¯­å¥æ‰§è¡Œå›æ»šã€‚</li></ul></li></ol></li></ul><p>å¦‚11.1.2èŠ‚ä¸­çš„ä¸¤æ¡è¯­å¥å°±æ˜¯ä¸¤ä¸ªäº‹åŠ¡ï¼Œç¬¬ä¸€æ¡è¯­å¥æ‰§è¡Œä¾¿æ˜¯äº‹åŠ¡çš„å¼€å§‹ï¼Œåˆ†å·ä¾¿æ˜¯äº‹åŠ¡çš„ç»“æŸï¼Œæ‰§è¡Œå®Œæ¯•è¯¥è¯­å¥å°±è¢«æäº¤äº†ï¼›è€Œç¬¬äºŒå¥ç”±äºæ‰§è¡Œå¤±è´¥ï¼Œè¯¥è¯­å¥çš„ç»“æœå°±æ˜¯å›æ»šï¼Œå›åˆ°äº‹åŠ¡å‰çš„æ ·å­ã€‚</p><h3 id="11-4-äº‹åŠ¡çš„åŸç†"><a href="#11-4-äº‹åŠ¡çš„åŸç†" class="headerlink" title="11.4 äº‹åŠ¡çš„åŸç†"></a>11.4 äº‹åŠ¡çš„åŸç†</h3><blockquote><p> æ•°æ®åº“ä¼šä¸ºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯éƒ½ç»´æŠ¤ä¸€ä¸ªç©ºé—´ç‹¬ç«‹çš„ç¼“å­˜åŒºï¼ˆå›æ»šæ®µï¼‰ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­æ‰€æœ‰çš„å¢åˆ æ”¹æŸ¥è¯­å¥çš„æ‰§è¡Œç»“æœéƒ½ä¼šç¼“å­˜åœ¨å›æ»šæ®µä¸­ï¼Œåªæœ‰å½“äº‹åŠ¡ä¸­æ‰€æœ‰SQLè¯­å¥å‡æ­£å¸¸ç»“æŸï¼ˆCOMMITï¼‰ï¼Œæ‰ä¼šå°†å›æ»šæ®µä¸­çš„æ•°æ®åŒæ­¥åˆ°æ•°æ®åº“ã€‚å¦åˆ™æ— è®ºå› ä¸ºå“ªç§åŸå› å¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡å°†å›æ»šï¼ˆROLLBACKï¼‰ã€‚</p></blockquote><h3 id="11-5-äº‹åŠ¡çš„ç‰¹æ€§ï¼ˆACIDï¼‰"><a href="#11-5-äº‹åŠ¡çš„ç‰¹æ€§ï¼ˆACIDï¼‰" class="headerlink" title="11.5 äº‹åŠ¡çš„ç‰¹æ€§ï¼ˆACIDï¼‰"></a>11.5 äº‹åŠ¡çš„ç‰¹æ€§ï¼ˆACIDï¼‰</h3><ul><li><p><strong>Atomicity</strong>ï¼ˆ<strong>åŸå­æ€§</strong>ï¼‰</p><p>è¡¨ç¤ºä¸€ä¸ªäº‹åŠ¡å†…çš„æ‰€æœ‰æ“ä½œæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p></li><li><p><strong>Consistency</strong>ï¼ˆ<strong>ä¸€è‡´æ€§</strong>ï¼‰</p><p>è¡¨ç¤ºä¸€ä¸ªäº‹åŠ¡å†…æœ‰ä¸€ä¸ªæ“ä½œå¤±è´¥æ—¶ï¼Œæ‰€æœ‰æ›´æ”¹è¿‡çš„æ•°æ®éƒ½å¿…é¡»å›æ»šåˆ°ä¿®æ”¹å‰çŠ¶æ€ã€‚</p></li><li><p><strong>Isolation</strong>ï¼ˆ<strong>éš”ç¦»æ€§</strong>ï¼‰</p><p>äº‹åŠ¡æŸ¥çœ‹æ•°æ®åº“æ“ä½œæ—¶æ•°æ®æ‰€å¤„çš„çŠ¶æ€ï¼Œè¦ä¹ˆæ˜¯å¦ä¸€å¹¶å‘äº‹åŠ¡ä¿®æ”¹å®ƒä¹‹å‰çš„çŠ¶æ€ï¼Œè¦ä¹ˆæ˜¯å¦ä¸€äº‹ç‰©ä¿®æ”¹å®ƒä¹‹åçš„çŠ¶æ€ï¼Œäº‹åŠ¡ä¸ä¼šæŸ¥çœ‹ä¸­é—´çŠ¶æ€çš„æ•°æ®ã€‚</p></li><li><p><strong>Durability</strong>ï¼ˆ<strong>æŒä¹…æ€§</strong>ï¼‰</p><p>æŒä¹…æ€§äº‹åŠ¡å®Œæˆä¹‹åï¼Œå®ƒå¯¹ä¸ç³»ç»Ÿçš„å½±å“æ˜¯æ°¸ä¹…æ€§çš„ã€‚</p></li></ul><h3 id="11-6-äº‹åŠ¡åº”ç”¨"><a href="#11-6-äº‹åŠ¡åº”ç”¨" class="headerlink" title="11.6 äº‹åŠ¡åº”ç”¨"></a>11.6 äº‹åŠ¡åº”ç”¨</h3><p>åº”ç”¨ç¯å¢ƒï¼šåŸºäºå¢åˆ æ”¹æŸ¥è¯­å¥çš„æ“ä½œç»“æœï¼ˆå‡è¿”å›æ“ä½œåå—å½±å“çš„è¡Œæ•°ï¼‰ï¼Œå¯é€šè¿‡ç¨‹åºé€»è¾‘æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</p><h4 id="11-6-1-äº‹åŠ¡å®Œæˆè½¬è´¦"><a href="#11-6-1-äº‹åŠ¡å®Œæˆè½¬è´¦" class="headerlink" title="11.6.1 äº‹åŠ¡å®Œæˆè½¬è´¦"></a>11.6.1 äº‹åŠ¡å®Œæˆè½¬è´¦</h4><p>æ‰‹åŠ¨å¼€å¯äº‹åŠ¡ï¼Œå°†ä¸¤ä¸ªå‡é’±å’ŒåŠ é’±çš„æ“ä½œæ”¾åˆ°äº‹åŠ¡ä¸­ï¼Œæ“ä½œå®Œä¹‹åå†æäº¤ã€‚</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#å¼€å¯äº‹åŠ¡</span><br><span class="line">START TRANSACTION;</span><br><span class="line">#æ‰§è¡Œå‡é’±æ“ä½œï¼ˆä¸¤ä¸ªè´¦æˆ·åˆå§‹é’±éƒ½ä¸º5000ï¼‰</span><br><span class="line">UPDATE t_account SET money=money-1000 WHERE account_id = 1;</span><br><span class="line">#æ‰§è¡ŒåŠ é’±æ“ä½œ</span><br><span class="line">UPDATE t_account SET money=money+1000 WHERE account_id = 2;</span><br><span class="line">#æŸ¥çœ‹è¯¥äº‹åŠ¡ä¸­è´¦æˆ·æ•°æ®</span><br><span class="line">SELECT * FROM t_account;</span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸ŠSQLè¯­å¥å¼€å¯äº†äº‹åŠ¡ï¼Œä½†å¹¶æœªè¿›è¡Œæäº¤ï¼Œæ­¤æ—¶æŸ¥çœ‹è´¦æˆ·ä¸­çš„æ•°æ®å¦‚ä¸‹ï¼š</p><table><thead><tr><th>account_id</th><th>money</th></tr></thead><tbody><tr><td>1</td><td>4000</td></tr><tr><td>2</td><td>6000</td></tr></tbody></table><p>å‘ç°æ•°æ®<strong>å·²ç»å˜äº†</strong>ï¼Œä½†è¯¥æ•°æ®åªæ˜¯äº‹åŠ¡çš„ä¸­é—´çŠ¶æ€ã€‚</p><p>ç„¶ååœ¨ä½ çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­<strong>æ–°å»º</strong>ä¸€ä¸ªè¿æ¥ï¼Œæ–°å»ºè¿æ¥åéšä¾¿å–ä¸€ä¸ªï¼Œç„¶åæ–°å»ºæŸ¥è¯¢ã€‚è¿™ä¹ˆåšç›¸å½“äºæ¨¡æ‹Ÿäº†å¦å¤–ä¸€ä¸ªå®¢æˆ·ç«¯ï¼š</p><p>æ‰§è¡Œ<code>SELECT * FROM t_account</code>;ï¼Œå‘ç°è¡¨ä¸­çš„æ•°æ®å¹¶<strong>æ²¡æœ‰æ”¹å˜</strong>ï¼š</p><table><thead><tr><th>account_id</th><th>money</th></tr></thead><tbody><tr><td>1</td><td>5000</td></tr><tr><td>2</td><td>5000</td></tr></tbody></table><p>è¿™æ˜¯å› ä¸ºåœ¨ç¬¬ä¸€ä¸ªè¿æ¥ä¸­å¼€å¯äº†äº‹åŠ¡ï¼Œä½†æ²¡æœ‰æäº¤ï¼›è€Œåœ¨anotherè¿æ¥ä¸­ï¼ŒæŸ¥è¯¢è¯­å¥ä¹Ÿæ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼ˆæ²¡æœ‰æ˜¾å¼å¼€å¯å’Œæ˜¾å¼æäº¤ï¼‰ï¼Œè¯¥äº‹åŠ¡åªèƒ½æŸ¥çœ‹å…¶å®ƒäº‹åŠ¡ä¿®æ”¹å‰åè€…ä¿®æ”¹åçš„çŠ¶æ€ï¼Œæ­¤å¤„å°±æ˜¯åªèƒ½æŸ¥çœ‹è½¬è´¦æ“ä½œæäº¤å‰çš„çŠ¶æ€ï¼Œä¸¤ä¸ªè´¦æˆ·éƒ½æ˜¯5000ï¼Œè¿™ä¹Ÿæ˜¯äº‹åŠ¡çš„<strong>éš”ç¦»æ€§</strong>ã€‚</p><p>å›åˆ°localhostè¿æ¥ä¸­ï¼Œæäº¤äº‹åŠ¡ï¼›ç„¶ååœ¨anotherè¿æ¥ä¸­å†æŸ¥è¯¢ä¸€æ¬¡ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#localhostè¿æ¥ï¼Œæäº¤äº‹åŠ¡</span><br><span class="line">COMMIT;</span><br><span class="line">#anotherè¿æ¥ï¼ŒæŸ¥è¯¢è¡¨</span><br><span class="line">SELECT * FROM t_account;</span><br></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶çš„æŸ¥è¯¢ç»“æœå¦‚ä¸‹ï¼š</p><table><thead><tr><th>account_id</th><th>money</th></tr></thead><tbody><tr><td>1</td><td>4000</td></tr><tr><td>2</td><td>6000</td></tr></tbody></table><p>å‘ç°æ•°æ®å·²ç»æ­£å¼ä¿®æ”¹å®Œæ¯•ã€‚</p><p>å›æ»šæ“ä½œç±»ä¼¼ï¼Œä½†å®ƒæ˜¯å–æ¶ˆæ‰äº‹åŠ¡çš„æ“ä½œï¼Œå›åˆ°äº‹åŠ¡å‰çš„çŠ¶æ€ã€‚æ¯”å¦‚äº‹åŠ¡å¼€å¯åï¼Œå‡é’±æˆåŠŸï¼Œä½†æ˜¯åŠ é’±å¤±è´¥äº†ï¼ˆå¯ä»¥ç”¨SQLè¯­å¥æŸä¸ªå•è¯å†™é”™æ¥æ¨¡æ‹Ÿï¼‰ï¼Œç„¶åæ‰‹åŠ¨æ‰§è¡Œ<code>ROLLBACK</code>ï¼Œå‡é’±æ“ä½œå°±ä¼šè¢«æ’¤é”€ã€‚ä¸å†æ¼”ç¤ºã€‚</p><ul><li>æ­¤å¤„çš„æ¼”ç¤ºæ˜¯æ‰‹åŠ¨è¿›è¡Œäº†äº‹ç‰©çš„å¼€å¯å’Œæäº¤/å›æ»šï¼Œåœ¨å†™ç¨‹åºæ—¶ï¼Œè¿™äº›æ“ä½œéƒ½ä¼šåœ¨ç¨‹åºä¸­è¿›è¡Œæ§åˆ¶ã€‚</li></ul><h2 id="åäºŒã€æƒé™ç®¡ç†"><a href="#åäºŒã€æƒé™ç®¡ç†" class="headerlink" title="åäºŒã€æƒé™ç®¡ç†"></a>åäºŒã€æƒé™ç®¡ç†</h2><h3 id="12-1-åˆ›å»ºç”¨æˆ·"><a href="#12-1-åˆ›å»ºç”¨æˆ·" class="headerlink" title="12.1 åˆ›å»ºç”¨æˆ·"></a>12.1 åˆ›å»ºç”¨æˆ·</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>CREATE USER ç”¨æˆ·å IDENTIFIED BY å¯†ç </code></p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºä¸€ä¸ªç”¨æˆ·</span><br><span class="line">CREATE USER 'client1' IDENTIFIED BY '123456';</span><br></pre></td></tr></tbody></table></figure><p>æ¥ä¸‹æ¥éªŒè¯ç”¨æˆ·æ˜¯å¦æ·»åŠ æˆåŠŸï¼Œé¦–å…ˆæ–°å»ºè¿æ¥ï¼Œåœ¨ç”¨æˆ·åå’Œè´¦å·é‚£é‡Œå†™ä¸Šè‡ªå·±åˆ›å»ºçš„ç”¨æˆ·å’Œå¯†ç ï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦è¿æ¥æˆåŠŸã€‚</p><p>ç„¶åç‚¹â€œç¡®å®šâ€ã€‚ä½†æ˜¯æ‰“å¼€è¯¥è¿æ¥ä¹‹åä½ ä¼šå‘ç°æ­¤è¿æ¥ä¸­é™¤äº†ä¸€ä¸ªç³»ç»Ÿæ•°æ®åº“ï¼Œå…¶ä»–æ•°æ®åº“<strong>éƒ½ä¸å­˜åœ¨</strong>ã€‚è¿™æ˜¯å› ä¸ºclient1ç”¨æˆ·å»ºç«‹çš„è¿æ¥æ²¡æœ‰å¾—åˆ°ä»»ä½•æˆæƒï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å¯¹æ•°æ®åº“çš„è®¿é—®æ“ä½œæƒé™ã€‚</p><h3 id="12-2-æˆæƒ"><a href="#12-2-æˆæƒ" class="headerlink" title="12.2 æˆæƒ"></a>12.2 æˆæƒ</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>GRANT ALL ON æ•°æ®åº“.è¡¨ TO ç”¨æˆ·å;</code></p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#å°†companydbä¸‹çš„æ‰€æœ‰è¡¨çš„æƒé™éƒ½èµ‹ç»™client</span><br><span class="line">GRANT ALL ON companydb.* TO client1;</span><br></pre></td></tr></tbody></table></figure><p>è¯¥è¯­å¥éœ€è¦åœ¨rootè¿æ¥ä¸­æ‰§è¡Œï¼Œä¸èƒ½åœ¨client1è¿æ¥ä¸­è‡ªå·±ç»™è‡ªå·±æˆæƒã€‚</p><h3 id="12-3-æ’¤é”€æƒé™"><a href="#12-3-æ’¤é”€æƒé™" class="headerlink" title="12.3 æ’¤é”€æƒé™"></a>12.3 æ’¤é”€æƒé™</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>REVOKE ALL ON æ•°æ®åº“.è¡¨å FROM ç”¨æˆ·å</code></p></blockquote><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>æ’¤é”€æƒé™å</strong>ï¼Œ<strong>è´¦æˆ·éœ€è¦é‡æ–°è¿æ¥å®¢æˆ·ç«¯æ‰ä¼šç”Ÿæ•ˆ</strong>ã€‚</li></ul><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#å°†client1çš„companydbçš„æ“ä½œæƒé™æ’¤é”€</span><br><span class="line">GRANT ALL ON companydb.* TO client1;</span><br></pre></td></tr></tbody></table></figure><p>è™½ç„¶åˆ·æ–°ä¹‹åè¡¨ä¸è§äº†ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥å¯¹è¡¨è¿›è¡Œæ“ä½œï¼Œåªæœ‰åœ¨é‡æ–°è¿æ¥æ•°æ®åº“çš„æ—¶å€™æƒé™æ‰ä¼šæ¶ˆå¤±ã€‚</p><h3 id="12-4-åˆ é™¤ç”¨æˆ·"><a href="#12-4-åˆ é™¤ç”¨æˆ·" class="headerlink" title="12.4 åˆ é™¤ç”¨æˆ·"></a>12.4 åˆ é™¤ç”¨æˆ·</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>DROP USER ç”¨æˆ·å</code></p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤ç”¨æˆ·client1</span><br><span class="line">DROP USER 'client1';</span><br></pre></td></tr></tbody></table></figure><h2 id="åä¸‰ã€è§†å›¾"><a href="#åä¸‰ã€è§†å›¾" class="headerlink" title="åä¸‰ã€è§†å›¾"></a>åä¸‰ã€è§†å›¾</h2><h3 id="13-1-æ¦‚å¿µ"><a href="#13-1-æ¦‚å¿µ" class="headerlink" title="13.1 æ¦‚å¿µ"></a>13.1 æ¦‚å¿µ</h3><blockquote><p> è§†å›¾ï¼Œè™šæ‹Ÿè¡¨ï¼Œä»ä¸€ä¸ªè¡¨æˆ–å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢å‡ºæ¥çš„è¡¨ï¼Œä½œç”¨å’ŒçœŸå®è¡¨ä¸€æ ·ï¼ŒåŒ…å«ä¸€ç³»åˆ—å¸¦æœ‰è¡Œå’Œåˆ—çš„æ•°æ®ã€‚è§†å›¾è¡¨ä¸­ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨SELECTè¯­å¥æŸ¥è¯¢æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨INSERTã€UPDATEã€DELETEä¿®æ”¹è®°å½•ï¼Œè§†å›¾å¯ä»¥ä½¿ç”¨æˆ·æ“ä½œæ–¹ä¾¿ï¼Œå¹¶ä¿éšœæ•°æ®åº“ç³»ç»Ÿå®‰å…¨ã€‚</p></blockquote><ul><li>å’Œä¸´æ—¶è¡¨å¾ˆåƒï¼Œä½†ä¸´æ—¶è¡¨ä¸ä¼šè¢«ä¿å­˜ï¼Œè€Œè§†å›¾æ˜¯ä¿å­˜ä¸‹æ¥çš„è¡¨ã€‚</li></ul><h3 id="13-2-è§†å›¾ç‰¹ç‚¹"><a href="#13-2-è§†å›¾ç‰¹ç‚¹" class="headerlink" title="13.2 è§†å›¾ç‰¹ç‚¹"></a>13.2 è§†å›¾ç‰¹ç‚¹</h3><ul><li>ä¼˜ç‚¹<ul><li>ç®€å•åŒ–ï¼Œæ•°æ®æ‰€è§å³æ‰€å¾—ã€‚</li><li>å®‰å…¨æ€§ï¼Œç”¨æˆ·åªèƒ½æŸ¥è¯¢æˆ–ä¿®æ”¹ä»–ä»¬æ‰€èƒ½è§åˆ°çš„æ•°æ®ã€‚</li><li>é€»è¾‘ç‹¬ç«‹æ€§ï¼Œå¯ä»¥å±è”½çœŸå®è¡¨ç»“æ„å˜åŒ–å¸¦æ¥çš„å½±å“ã€‚</li></ul></li><li>ç¼ºç‚¹<ul><li>æ€§èƒ½ç›¸å¯¹è¾ƒå·®ï¼Œç®€å•çš„æŸ¥è¯¢ä¹Ÿä¼šå˜å¾—ç¨æ˜¾å¤æ‚ã€‚</li><li>ä¿®æ”¹ä¸æ–¹ä¾¿ï¼Œç‰¹åˆ«æ˜¯å¤æ‚çš„èšåˆè§†å›¾åŸºæœ¬æ— æ³•ä¿®æ”¹ã€‚</li></ul></li></ul><h3 id="13-3-è§†å›¾çš„åˆ›å»º"><a href="#13-3-è§†å›¾çš„åˆ›å»º" class="headerlink" title="13.3 è§†å›¾çš„åˆ›å»º"></a>13.3 è§†å›¾çš„åˆ›å»º</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>CREATE VIEW è§†å›¾å AS æŸ¥è¯¢æ•°æ®æºè¡¨ç»“æ„è¯­å¥;</code></p></blockquote><h3 id="13-3-1-åˆ›å»ºè§†å›¾"><a href="#13-3-1-åˆ›å»ºè§†å›¾" class="headerlink" title="13.3.1 åˆ›å»ºè§†å›¾"></a>13.3.1 åˆ›å»ºè§†å›¾</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºt_emp_infoçš„è§†å›¾ï¼Œå…¶è§†å›¾ä»t_employeesè¡¨ä¸­æŸ¥è¯¢å‘˜å·¥ç¼–å·ã€å§“åã€é‚®ç®±ã€å·¥èµ„</span><br><span class="line">CREATE VIEW t_emp_info</span><br><span class="line">AS</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,EMAIL,SALARY FROM t_employees;</span><br></pre></td></tr></tbody></table></figure><h4 id="13-3-2-ä½¿ç”¨è§†å›¾"><a href="#13-3-2-ä½¿ç”¨è§†å›¾" class="headerlink" title="13.3.2 ä½¿ç”¨è§†å›¾"></a>13.3.2 ä½¿ç”¨è§†å›¾</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥è¯¢t_emp_infoè§†å›¾ä¸­ç¼–å·ä¸º036çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">SELECT * FROM t_emp_info WHERE EMPLOYEE_ID = 036;</span><br></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨è§†å›¾å¯ä»¥ç®€åŒ–æŸ¥è¯¢çš„æ“ä½œï¼Œå°†æ¥è§†å›¾åº”ç”¨æœ€å¤šçš„åœ°æ–¹ä¹Ÿæ˜¯æŸ¥è¯¢ã€‚</p><h3 id="13-4-è§†å›¾çš„ä¿®æ”¹"><a href="#13-4-è§†å›¾çš„ä¿®æ”¹" class="headerlink" title="13.4 è§†å›¾çš„ä¿®æ”¹"></a>13.4 è§†å›¾çš„ä¿®æ”¹</h3><blockquote><ul><li>æ–¹å¼ä¸€ï¼š<code>CREATE OR REPLACE VIEW è§†å›¾å AS æŸ¥è¯¢è¯­å¥</code></li><li>æ–¹å¼äºŒï¼š<code>ALTER VIEW è§†å›¾å AS æŸ¥è¯¢è¯­å¥</code></li></ul></blockquote><p>æ–¹å¼ä¸€æ˜¯åœ¨ä¸æ˜ç¡®è§†å›¾æ˜¯å¦å­˜åœ¨æ—¶ä½¿ç”¨ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¿®æ”¹ï¼Œå¦åˆ™åˆ›å»ºï¼›æ–¹å¼äºŒæ˜¯æ˜ç¡®å­˜åœ¨æ—¶è¿›è¡Œä¿®æ”¹ã€‚æ— è®ºå“ªç§æ–¹å¼éƒ½éœ€è¦æ‹¼æ¥ä¸€ä¸ªå®Œæ•´æŸ¥è¯¢è¯­å¥ã€‚</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#æ–¹å¼ä¸€ï¼Œå¦‚æœè§†å›¾å­˜åœ¨åˆ™ä¿®æ”¹ï¼Œåä¹‹åˆ›å»ºã€‚</span><br><span class="line">CREATE OR REPLACE VIEW t_emp_info</span><br><span class="line">AS</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,EMAIL,SALARY,JOB_ID FROM t_employees;</span><br><span class="line">#æ–¹å¼äºŒï¼Œå¯¹å·²å­˜åœ¨çš„è§†å›¾è¿›è¡Œä¿®æ”¹</span><br><span class="line">ALTER VIEW t_emp_info</span><br><span class="line">AS</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,EMAIL,SALARY FROM t_employees;</span><br></pre></td></tr></tbody></table></figure><h3 id="13-5-è§†å›¾çš„åˆ é™¤"><a href="#13-5-è§†å›¾çš„åˆ é™¤" class="headerlink" title="13.5 è§†å›¾çš„åˆ é™¤"></a>13.5 è§†å›¾çš„åˆ é™¤</h3><blockquote><p> <strong>è¯­æ³•</strong>ï¼š<code>DROP VIEW è§†å›¾å</code></p></blockquote><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤è§†å›¾</span><br><span class="line">DROP VIEW t_emp_info;</span><br></pre></td></tr></tbody></table></figure><ul><li><strong>æ³¨æ„</strong>ï¼š<strong>åˆ é™¤è§†å›¾ä¸ä¼šå½±å“åŸè¡¨</strong>ã€‚</li></ul><h3 id="13-6-è§†å›¾çš„æ³¨æ„äº‹é¡¹"><a href="#13-6-è§†å›¾çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="13.6 è§†å›¾çš„æ³¨æ„äº‹é¡¹"></a>13.6 è§†å›¾çš„æ³¨æ„äº‹é¡¹</h3><ul><li>è§†å›¾ä¸ä¼šç‹¬ç«‹å­˜å‚¨æ•°æ®ï¼ŒåŸè¡¨å‘ç”Ÿæ”¹å˜ï¼Œè§†å›¾ä¹Ÿå‘ç”Ÿæ”¹å˜ã€‚æ²¡æœ‰ä¼˜åŒ–ä»»ä½•æŸ¥è¯¢æ€§èƒ½ã€‚</li><li>å¦‚æœè§†å›¾åŒ…å«ä»¥ä¸‹ç»“æ„ä¸­çš„ä¸€ç§ï¼Œåˆ™è§†å›¾ä¸å¯æ›´æ–°ï¼š<ul><li>èšåˆå‡½æ•°çš„ç»“æœ</li><li>DISTINCTå»é‡åçš„ç»“æœ</li><li>GROUP BYåˆ†ç»„åçš„ç»“æœ</li><li>HAVINGç­›é€‰è¿‡æ»¤åçš„ç»“æœ</li><li>UNIONã€UNION ALLè”åˆåçš„ç»“æœ</li></ul></li></ul><h2 id="åå››ã€SQLè¯­è¨€åˆ†ç±»"><a href="#åå››ã€SQLè¯­è¨€åˆ†ç±»" class="headerlink" title="åå››ã€SQLè¯­è¨€åˆ†ç±»"></a>åå››ã€SQLè¯­è¨€åˆ†ç±»</h2><ol><li><strong>æ•°æ®æŸ¥è¯¢è¯­è¨€</strong>DQLï¼ˆData Query Languageï¼‰ï¼šSELECTã€WHEREã€ORDER BYã€GROUP BYã€HAVINGï¼›</li><li><strong>æ•°æ®å®šä¹‰è¯­è¨€</strong>DDLï¼ˆData Definition Languageï¼‰ï¼šCREATEã€ALTERã€DROPï¼›</li><li><strong>æ•°æ®æ“ä½œè¯­è¨€</strong>DMLï¼ˆData Manipulation Languageï¼‰ï¼šINSERTã€UNPATEã€DELETEï¼›</li><li><strong>äº‹åŠ¡å¤„ç†è¯­è¨€</strong>TPLï¼ˆTransaction Process Languageï¼‰ï¼šCOMMITã€ROLLBACKï¼›</li><li><strong>æ•°æ®æ§åˆ¶è¯­è¨€</strong>DCLï¼ˆData Control Languageï¼‰ï¼šGRANTã€REVOKEã€‚</li></ol><h2 id="åäº”ã€ç»¼åˆç»ƒä¹ "><a href="#åäº”ã€ç»¼åˆç»ƒä¹ " class="headerlink" title="åäº”ã€ç»¼åˆç»ƒä¹ "></a>åäº”ã€ç»¼åˆç»ƒä¹ </h2><p>æŸç½‘ä¸Šè´­ç‰©å•†åŸæ•°æ®åº“è¡¨çš„ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºç”¨æˆ·è¡¨</span><br><span class="line">CREATE TABLE USER(</span><br><span class="line">userId INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">username VARCHAR(20) NOT NULL,</span><br><span class="line">PASSWORD VARCHAR(18) NOT NULL,</span><br><span class="line">address VARCHAR(100),</span><br><span class="line">phone VARCHAR(11)</span><br><span class="line">);</span><br><span class="line">SELECT * FROM USER;</span><br><span class="line">INSERT INTO USER(username, PASSWORD, address,phone) VALUES('å¼ ä¸‰','123','åŒ—äº¬æ˜Œå¹³','13541489201');</span><br><span class="line">INSERT INTO USER(username, PASSWORD, address,phone) VALUES('æå››','678','åŒ—äº¬æµ·å®š','13541489202');</span><br><span class="line">INSERT INTO USER(username, PASSWORD, address,phone) VALUES('ç‹äº”','123','åŒ—äº¬æœé˜³','13541489203');</span><br><span class="line">INSERT INTO USER(username, PASSWORD, address,phone) VALUES('èµµæŸ³','123','åŒ—äº¬å¤§å…´','13541489204');</span><br><span class="line"># åˆ›å»ºåˆ†ç±»è¡¨</span><br><span class="line">CREATE TABLE category(</span><br><span class="line">cid VARCHAR(32) PRIMARY KEY,</span><br><span class="line">cname VARCHAR(100) NOT NULL  # åˆ†ç±»åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO category VALUES('c001','ç”µå™¨');</span><br><span class="line">INSERT INTO category VALUES('c002','æœé¥°');</span><br><span class="line">INSERT INTO category VALUES('c003','åŒ–å¦†å“');</span><br><span class="line">INSERT INTO category VALUES('c004','ä¹¦ç±');</span><br><span class="line"></span><br><span class="line"># å•†å“è¡¨</span><br><span class="line">CREATE TABLE `products`(</span><br><span class="line">`pid` VARCHAR(32) PRIMARY KEY,</span><br><span class="line">`name` VARCHAR(40),</span><br><span class="line">`price` DOUBLE(7,2),</span><br><span class="line">category_id VARCHAR(32),</span><br><span class="line">CONSTRAINT fk_products_category_id FOREIGN KEY (category_id) REFERENCES category(cid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p001','è”æƒ³',5000,'c001');</span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p002','æµ·å°”',3000,'c001');</span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p003','é›·ç¥',5000,'c001');</span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p004','JACK',800,'c001');</span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p005','çœŸç»´æ–¯',200,'c002');</span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p006','èŠ±èŠ±å…¬å­',440,'c002');</span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p007','åŠ²éœ¸',2000,'c002');</span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p008','é¦™å¥ˆå„¿',800,'c003');</span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p009','ç›¸å®œæœ¬è‰ ',200,'c003');</span><br><span class="line">INSERT INTO products(pid, NAME, price, category_id) VALUES('p0010','æ¢…æ˜å­',200,NULL);</span><br><span class="line"># è®¢å•è¡¨</span><br><span class="line">CREATE TABLE `orders` (</span><br><span class="line">`oid` VARCHAR(32) PRIMARY KEY,</span><br><span class="line">`totalprice` DOUBLE(12,2), # æ€»è®¡</span><br><span class="line">`userId` INT,</span><br><span class="line">CONSTRAINT fk_orders_userId FOREIGN KEY(userId) REFERENCES USER(userId) # å¤–é”®</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO orders VALUES('o6100',18000.50,1);</span><br><span class="line">INSERT INTO orders VALUES('o6101',7200.35,1);</span><br><span class="line">INSERT INTO orders VALUES('o6102',600.00,2);</span><br><span class="line">INSERT INTO orders VALUES('o6103',1300.26,4);</span><br><span class="line">SELECT * FROM orders;</span><br><span class="line"># è®¢å•è¯¦æƒ…è¡¨</span><br><span class="line">CREATE TABLE orderitem(</span><br><span class="line">oid VARCHAR(32), # è®¢å•id</span><br><span class="line">pid VARCHAR(32), # å•†å“id</span><br><span class="line">num INT, # è´­ä¹°å•†å“æ•°é‡</span><br><span class="line">PRIMARY KEY(oid, pid), # ä¸»é”®</span><br><span class="line">CONSTRAINT fk_orderitem_oid FOREIGN KEY(oid) REFERENCES orders(oid),</span><br><span class="line">CONSTRAINT fk_orderitem_pid FOREIGN KEY(pid) REFERENCES products(pid)</span><br><span class="line">);</span><br><span class="line"># è®¢å•è¯¦æƒ…è¡¨æ·»åŠ ä¿¡æ¯</span><br><span class="line">INSERT INTO orderitem VALUES('o6100','p001',1),('o6100','p002',1),('o6101','p003',1);</span><br></pre></td></tr></tbody></table></figure><h3 id="15-1-ç»¼åˆç»ƒä¹ 1-ã€å¤šè¡¨æŸ¥è¯¢ã€‘"><a href="#15-1-ç»¼åˆç»ƒä¹ 1-ã€å¤šè¡¨æŸ¥è¯¢ã€‘" class="headerlink" title="15.1 ç»¼åˆç»ƒä¹ 1-ã€å¤šè¡¨æŸ¥è¯¢ã€‘"></a>15.1 ç»¼åˆç»ƒä¹ 1-ã€å¤šè¡¨æŸ¥è¯¢ã€‘</h3><ol><li><p>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„è®¢å•</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„è®¢å•</span><br><span class="line"># ç”¨æˆ·è®¢å•è¡¨</span><br><span class="line">SELECT * FROM USER INNER JOIN orders ON orders.`userId` = user.`userId`;</span><br></pre></td></tr></tbody></table></figure></li></ol><ol start="2"><li><p>æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„æ‰€æœ‰è®¢å•è¯¦æƒ…</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„æ‰€æœ‰è®¢å•è¯¦æƒ…</span><br><span class="line"># ç”¨æˆ· è®¢å• è®¢å•è¯¦æƒ…è¡¨</span><br><span class="line">SELECT * FROM USER</span><br><span class="line">INNER JOIN orders</span><br><span class="line">ON orders.`userId` = user.`userId`</span><br><span class="line">INNER JOIN orderitem</span><br><span class="line">ON orders.`oid` = orderitem.`oid`</span><br><span class="line">WHERE user.`userId` = 1;</span><br></pre></td></tr></tbody></table></figure></li></ol><h3 id="15-2-ç»¼åˆç»ƒä¹ 2-ã€å­æŸ¥è¯¢ã€‘"><a href="#15-2-ç»¼åˆç»ƒä¹ 2-ã€å­æŸ¥è¯¢ã€‘" class="headerlink" title="15.2  ç»¼åˆç»ƒä¹ 2-ã€å­æŸ¥è¯¢ã€‘"></a>15.2  ç»¼åˆç»ƒä¹ 2-ã€å­æŸ¥è¯¢ã€‘</h3><ol><li><p>æŸ¥çœ‹ç”¨æˆ·ä¸ºå¼ ä¸‰çš„è®¢å•</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥çœ‹ç”¨æˆ·ä¸ºå¼ ä¸‰çš„è®¢å•</span><br><span class="line"># å­æŸ¥è¯¢å•è¡Œå•åˆ—</span><br><span class="line">SELECT userId FROM USER WHERE username='å¼ ä¸‰';</span><br><span class="line">SELECT * FROM orders WHERE userId=(SELECT userId FROM USER WHERE username='å¼ ä¸‰');</span><br></pre></td></tr></tbody></table></figure></li></ol><ol start="2"><li><p>æŸ¥è¯¢å‡ºè®¢å•çš„ä»·æ ¼å¤§äº800çš„æ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å‡ºè®¢å•çš„ä»·æ ¼å¤§äº800çš„æ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line"># å­æŸ¥è¯¢å¤šè¡Œå•åˆ—æšä¸¾æŸ¥è¯¢</span><br><span class="line">SELECT DISTINCT userId FROM orders WHERE totalprice &gt; 800;</span><br><span class="line">SELECT * FROM USER WHERE userId IN (SELECT DISTINCT userId FROM orders WHERE totalprice &gt; 800);</span><br></pre></td></tr></tbody></table></figure></li></ol><h3 id="15-3-ç»¼åˆç»ƒä¹ 3-ã€åˆ†é¡µæŸ¥è¯¢ã€‘"><a href="#15-3-ç»¼åˆç»ƒä¹ 3-ã€åˆ†é¡µæŸ¥è¯¢ã€‘" class="headerlink" title="15.3  ç»¼åˆç»ƒä¹ 3-ã€åˆ†é¡µæŸ¥è¯¢ã€‘"></a>15.3  ç»¼åˆç»ƒä¹ 3-ã€åˆ†é¡µæŸ¥è¯¢ã€‘</h3><ol><li><p>æŸ¥è¯¢æ‰€æœ‰è®¢å•ä¿¡æ¯ï¼Œæ¯é¡µæ˜¾ç¤º5æ¡æ•°æ®</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢æ‰€æœ‰è®¢å•ä¿¡æ¯ï¼Œæ¯é¡µæ˜¾ç¤º5æ¡æ•°æ®</span><br><span class="line"># æŸ¥è¯¢ç¬¬ä¸€é¡µ</span><br><span class="line">SELECT * FROM orders LIMIT 0, 5;</span><br><span class="line"># æŸ¥è¯¢ç¬¬äºŒé¡µ</span><br><span class="line">SELECT * FROM orders LIMIT 5, 5;</span><br></pre></td></tr></tbody></table></figure></li></ol><h2 id="è‡³æ­¤ï¼ŒMySqlçš„åŸºç¡€å­¦ä¹ å·²ç»å‘Šä¸€æ®µè½ï¼Œç»§ç»­åŠ æ²¹å§ï¼Œåœ¨è®¡ç®—æœºè¿™ç¯‡æ˜Ÿè¾°å¤§æµ·ä¸­ç»§ç»­é¨æ¸¸ã€‚ï¼"><a href="#è‡³æ­¤ï¼ŒMySqlçš„åŸºç¡€å­¦ä¹ å·²ç»å‘Šä¸€æ®µè½ï¼Œç»§ç»­åŠ æ²¹å§ï¼Œåœ¨è®¡ç®—æœºè¿™ç¯‡æ˜Ÿè¾°å¤§æµ·ä¸­ç»§ç»­é¨æ¸¸ã€‚ï¼" class="headerlink" title="è‡³æ­¤ï¼ŒMySqlçš„åŸºç¡€å­¦ä¹ å·²ç»å‘Šä¸€æ®µè½ï¼Œç»§ç»­åŠ æ²¹å§ï¼Œåœ¨è®¡ç®—æœºè¿™ç¯‡æ˜Ÿè¾°å¤§æµ·ä¸­ç»§ç»­é¨æ¸¸ã€‚ï¼"></a>è‡³æ­¤ï¼ŒMySqlçš„åŸºç¡€å­¦ä¹ å·²ç»å‘Šä¸€æ®µè½ï¼Œç»§ç»­åŠ æ²¹å§ï¼Œåœ¨è®¡ç®—æœºè¿™ç¯‡æ˜Ÿè¾°å¤§æµ·ä¸­ç»§ç»­é¨æ¸¸ã€‚ï¼</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;MySQLæ˜¯ä¸€ä¸ª&lt;strong&gt;&lt;a href=&quot;https://baike.baidu.com/item/å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ/696511&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ&lt;/a&gt;**&lt;/strong&gt;ï¼Œ**ç”±ç‘å…¸MySQL AB å…¬å¸å¼€å‘ï¼Œå±äº &lt;a href=&quot;https://baike.baidu.com/item/Oracle&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Oracle&lt;/a&gt; æ——ä¸‹äº§å“ã€‚MySQL æ˜¯æœ€æµè¡Œçš„&lt;a href=&quot;https://baike.baidu.com/item/å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ/696511&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ&lt;/a&gt;ä¹‹ä¸€ï¼Œåœ¨ WEB åº”ç”¨æ–¹é¢ï¼ŒMySQLæ˜¯æœ€å¥½çš„ &lt;a href=&quot;https://baike.baidu.com/item/RDBMS/1048260&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;RDBMS&lt;/a&gt; (Relational Database Management Systemï¼Œå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ) åº”ç”¨è½¯ä»¶ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="åç«¯" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://liudufu.github.io/categories/%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="MySql" scheme="https://liudufu.github.io/tags/MySql/"/>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://liudufu.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡_é¢è¯•é¢˜.03.01.ä¸‰åˆä¸€</title>
    <link href="https://liudufu.github.io/Three_in_one/"/>
    <id>https://liudufu.github.io/Three_in_one/</id>
    <published>2020-12-08T09:39:26.000Z</published>
    <updated>2020-12-08T09:42:02.018Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ä¸‰åˆä¸€ã€‚æè¿°å¦‚ä½•åªç”¨ä¸€ä¸ªæ•°ç»„æ¥å®ç°ä¸‰ä¸ªæ ˆã€‚</p><p>ä½ åº”è¯¥å®ç°push(stackNum, value)ã€pop(stackNum)ã€isEmpty(stackNum)ã€peek(stackNum)æ–¹æ³•ã€‚stackNumè¡¨ç¤ºæ ˆä¸‹æ ‡ï¼Œvalueè¡¨ç¤ºå‹å…¥çš„å€¼ã€‚</p><p>æ„é€ å‡½æ•°ä¼šä¼ å…¥ä¸€ä¸ªstackSizeå‚æ•°ï¼Œä»£è¡¨æ¯ä¸ªæ ˆçš„å¤§å°ã€‚</p><p>ç¤ºä¾‹1:</p><a id="more"></a><p> è¾“å…¥ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">["TripleInOne", "push", "push", "pop", "pop", "pop", "isEmpty"]</span><br><span class="line">[[1], [0, 1], [0, 2], [0], [0], [0], [0]]</span><br></pre></td></tr></tbody></table></figure><p> è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[null, null, null, 1, -1, -1, true]</span><br><span class="line">è¯´æ˜ï¼šå½“æ ˆä¸ºç©ºæ—¶`pop, peek`è¿”å›-1ï¼Œå½“æ ˆæ»¡æ—¶`push`ä¸å‹å…¥å…ƒç´ ã€‚</span><br></pre></td></tr></tbody></table></figure><p>ç¤ºä¾‹2:</p><p> è¾“å…¥ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">["TripleInOne", "push", "push", "push", "pop", "pop", "pop", "peek"]</span><br><span class="line">[[2], [0, 1], [0, 2], [0, 3], [0], [0], [0], [0]]</span><br><span class="line"> è¾“å‡ºï¼š</span><br><span class="line">[null, null, null, null, 2, 1, -1, -1]</span><br></pre></td></tr></tbody></table></figure><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>ä¸€å¼€å§‹ç›´æ¥æ‡µé€¼ï¼Œçœ‹äº†åˆ«äººçš„æ‰æ‡‚é¢˜æ„</p><ol><li><p>é¦–å…ˆå¼€å§‹åˆ›å»ºç±»æ—¶æ„é€ å‡½æ•°é‡Œé¢åˆ›å…¥çš„å¤§å°æ˜¯æ ˆçš„å¤§å° ( stackSize )</p></li><li><p>å…¶æ¬¡ä¸ç®¡æ˜¯pushè¿˜æ˜¯popè¿˜æ˜¯peekæˆ–è€…isEmpty çš„å‚æ•° (stackNum)</p><ul><li>stackNumè¾“å…¥çš„å€¼,ä»£è¡¨çš„æ˜¯å“ªä¸ªæ ˆ!!!!</li><li>è¿™ä¸ªé¢˜å«ä¸‰åˆä¸€å°±æ˜¯è¯´ ä¸‰ä¸ªæ ˆä»£è¡¨å…¨éƒ¨æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢</li><li>ä¾‹å¦‚: å‚æ•°stackNum ä¸º 0 æ—¶å°±ä»£è¡¨ç¬¬ä¸€ä¸ªæ ˆ</li><li>å‚æ•°stackNum ä¸º 1 æ—¶å°±ä»£è¡¨ç¬¬äºŒä¸ªæ ˆ</li><li>å‚æ•°stackNum ä¸º 2 æ—¶å°±ä»£è¡¨ç¬¬ä¸‰ä¸ªæ ˆ</li></ul></li><li><p>ç”±äºæ˜¯ä¸€ä¸ªæ•°ç»„ç›¸å½“äº3ä¸ªæ ˆ,æ‰€ä»¥åˆ›å»ºçš„æ—¶å€™å°± ä¹˜ 3</p></li></ol><p><img src="https://pic.leetcode-cn.com/1600592347-fAjxIk-image.png" alt=""></p><p><img src="https://pic.leetcode-cn.com/1600592358-oHsaSG-image.png" alt=""></p><ol start="4"><li><p>æ¯æ¬¡pushçš„æ—¶å€™ éœ€è¦å…ˆåˆ¤æ–­å¤´æŒ‡é’ˆæ˜¯å¦å°äºæ•°ç»„çš„é•¿åº¦</p><ul><li>å¦‚æœå°äºéœ€è¦æ·»åŠ å€¼,è€Œä¸”éœ€è¦æŠŠtopèŠ‚ç‚¹åŠ 3</li><li>ä¾‹å¦‚: æ·»åŠ æ ˆ0 2, æ·»åŠ æ ˆ0 8, æ·»åŠ æ ˆ0 7</li></ul><p><img src="https://pic.leetcode-cn.com/1600592511-jiDDdY-image.png" alt=""></p><p><img src="https://pic.leetcode-cn.com/1600592610-evbIQM-image.png" alt=""></p><p>æ­¤æ—¶top[0] = 0 å‡3ä¹‹åå°±æ˜¯ -3 æ‰€ä»¥å®ƒæ˜¯ç©ºçš„è¿”å›-1</p></li><li><p>æ¯æ¬¡peekçš„æ—¶å€™, å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç©º ç©ºç›´æ¥è¿”å›-1, ä¸ä¸ºç©ºè¯å°±æŠŠtop â€“ 3 çš„ä¸‹æ ‡ç»™å®ƒå°±å¯ä»¥äº†,æ­¤æ—¶ä¸æ˜¯æŠ›å‡ºæ‰€ä»¥ä¸éœ€è¦æ”¹å˜åŸæ¥çš„topçš„å€¼</p></li></ol><p>å‚è€ƒä»£ç ï¼š </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TripleInOne</span> </span>{</span><br><span class="line"><span class="comment">//å®šä¹‰æ•°ç»„æ ˆ</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span>[] stack;</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªå¤´æŒ‡é’ˆçš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span>[] stackTop;</span><br><span class="line"><span class="comment">//å®šä¹‰æ ˆçš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> stackSize;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TripleInOne</span><span class="params">(<span class="keyword">int</span> stackSize)</span> </span>{</span><br><span class="line">    <span class="keyword">this</span>.stackSize = stackSize;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–ä¸‰åˆä¸€çš„æ ˆ</span></span><br><span class="line">    stack = <span class="keyword">new</span> <span class="keyword">int</span>[stackSize * <span class="number">3</span>];</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–ä¸‰ä¸ªæ ˆçš„å¤´ç»“ç‚¹</span></span><br><span class="line">    stackTop = <span class="keyword">new</span> <span class="keyword">int</span>[] {<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>};</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> stackNum, <span class="keyword">int</span> value)</span> </span>{</span><br><span class="line">    <span class="comment">//pushé¦–å…ˆéœ€è¦åˆ¤æ–­æ ˆæ˜¯å¦æ»¡äº†ï¼Œ</span></span><br><span class="line">    <span class="keyword">int</span> curStackTop = stackTop[stackNum];</span><br><span class="line">    <span class="keyword">if</span>(curStackTop &lt; stackSize * <span class="number">3</span>) {</span><br><span class="line">    <span class="comment">//èµ‹å€¼</span></span><br><span class="line">    stack[curStackTop] = value;</span><br><span class="line">    <span class="comment">//å¤´ç»“ç‚¹ + 3</span></span><br><span class="line">    stackTop[stackNum] += <span class="number">3</span>;</span><br><span class="line">    }<span class="keyword">else</span> {<span class="comment">//æ ˆæ»¡äº†</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pop</span><span class="params">(<span class="keyword">int</span> stackNum)</span> </span>{</span><br><span class="line">    <span class="comment">//æ ˆé¡¶å‡ºæ ˆé¦–å…ˆéœ€è¦åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span>(isEmpty(stackNum)) {</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åŸæœ¬å› ä¸ºæ¯æ¬¡è¿›æ ˆåæ ˆé¡¶å…ƒç´ çš„ä¸‹æ ‡çš„éƒ½ä¼šåŠ 3ï¼Œå‡ºæ ˆéœ€è¦å…ˆå‡ä¸‰</span></span><br><span class="line">    stackTop[stackNum] -= <span class="number">3</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> stack[stackTop[stackNum]];</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">peek</span><span class="params">(<span class="keyword">int</span> stackNum)</span> </span>{</span><br><span class="line">    <span class="comment">//åŒç†ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span>(isEmpty(stackNum)) {</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å› ä¸ºæ˜¯peekï¼Œæ‰€ä»¥ä¸ç”¨æ”¹å˜æ ˆé¡¶æŒ‡é’ˆçš„å€¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> stack[stackTop[stackNum] - <span class="number">3</span>];</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">(<span class="keyword">int</span> stackNum)</span> </span>{</span><br><span class="line">    <span class="comment">//åˆ¤æ–­è¿™ä¸ªæ ˆæ˜¯å¦ä¸ºç©ºï¼Œå› ä¸ºæ¯æ¬¡è¿›æ ˆåæ ˆé¡¶å…ƒç´ çš„ä¸‹æ ‡çš„éƒ½ä¼šåŠ 3ï¼Œæ‰€ä»¥åˆ¤ç©ºæ—¶éœ€è¦å…ˆå‡ä¸‰åˆ¤æ–­æ˜¯å¦å°äº90</span></span><br><span class="line">    <span class="keyword">return</span> stackTop[stackNum] - <span class="number">3</span> &lt; <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"><a href="#æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"></a><strong>æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼</strong></h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;é¢˜ç›®&quot;&gt;&lt;a href=&quot;#é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®&quot;&gt;&lt;/a&gt;é¢˜ç›®&lt;/h2&gt;&lt;p&gt;ä¸‰åˆä¸€ã€‚æè¿°å¦‚ä½•åªç”¨ä¸€ä¸ªæ•°ç»„æ¥å®ç°ä¸‰ä¸ªæ ˆã€‚&lt;/p&gt;
&lt;p&gt;ä½ åº”è¯¥å®ç°push(stackNum, value)ã€pop(stackNum)ã€isEmpty(stackNum)ã€peek(stackNum)æ–¹æ³•ã€‚stackNumè¡¨ç¤ºæ ˆä¸‹æ ‡ï¼Œvalueè¡¨ç¤ºå‹å…¥çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;æ„é€ å‡½æ•°ä¼šä¼ å…¥ä¸€ä¸ªstackSizeå‚æ•°ï¼Œä»£è¡¨æ¯ä¸ªæ ˆçš„å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹1:&lt;/p&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="LeetCode" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/LeetCode/"/>
    
    
      <category term="æ•°ç»„" scheme="https://liudufu.github.io/tags/%E6%95%B0%E7%BB%84/"/>
    
      <category term="æ ˆ" scheme="https://liudufu.github.io/tags/%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>è“æ¡¥ç®—æ³•å›½èµ›çœŸé¢˜æ€»ç»“</title>
    <link href="https://liudufu.github.io/A_summary_of_the_National_Games/"/>
    <id>https://liudufu.github.io/A_summary_of_the_National_Games/</id>
    <published>2020-11-08T13:43:33.000Z</published>
    <updated>2020-11-08T13:46:05.447Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸŒ¸è®°å½•è“æ¡¥æ¯javaBç»„å†å±Šå†³èµ›çœŸé¢˜è§£é¢˜ç®—æ³•æ€»ç»“ä¸å¯¹æ¯”</p><a id="more"></a><h2 id="ğŸŒ¸è§£é¢˜æ–¹æ³•æ±‡æ€»ï¼ˆjava-Bç»„å†³èµ›ï¼‰"><a href="#ğŸŒ¸è§£é¢˜æ–¹æ³•æ±‡æ€»ï¼ˆjava-Bç»„å†³èµ›ï¼‰" class="headerlink" title="ğŸŒ¸è§£é¢˜æ–¹æ³•æ±‡æ€»ï¼ˆjava Bç»„å†³èµ›ï¼‰"></a>ğŸŒ¸è§£é¢˜æ–¹æ³•æ±‡æ€»ï¼ˆjava Bç»„å†³èµ›ï¼‰</h2><table><thead><tr><th></th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th></tr></thead><tbody><tr><td>ç¬¬å››å±Š</td><td>æš´åŠ›æšä¸¾</td><td>æš´åŠ›æšä¸¾</td><td>å¿«é€Ÿæ’åº</td><td>BFSã€åŒå‘BFSã€å…«æ•°ç é—®é¢˜ã€åº·æ‰˜å±•å¼€ç­‰</td><td>åŠ¨æ€è§„åˆ’ã€æ¨¡æ‹Ÿ</td><td>-1</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>ç¬¬äº”å±Š</td><td>æš´åŠ›æšä¸¾</td><td>å…¨æ’åˆ—+å‰ªæï¼ˆæˆ–è€…ç›´æ¥æš´åŠ›ä½†æ˜¯ä»£ç å‰ªæé‡å¾ˆå¤§ï¼‰</td><td>è¯»é¢˜ã€ç»†å¿ƒã€é€»è¾‘æ¨¡æ‹Ÿ</td><td>åº·æ‰˜å±•å¼€å¼ï¼ˆä¸ä¼šåˆ™ç›´æ¥æš´åŠ›å…¨æ’ï¼Œä½†æ˜¯åˆ†ä¸é«˜ï¼Œå¯èƒ½ä¸€åŠéƒ½æ²¡æœ‰è€Œä¸”è¶…æ—¶ï¼‰ã€é˜¶ä¹˜</td><td>è¡Œåˆ—å¼ã€çŸ©é˜µä¹˜æ³•ã€æ¨¡æ‹Ÿã€æ‰©å±•æ¬§å‡ é‡Œå¾—</td><td>-1</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>ç¬¬å…­å±Š</td><td>è„‘ç­‹è½¬å¼¯+æš´åŠ›è®¡ç®—</td><td>å…¨æ’åˆ—+åˆ¤æ–­</td><td>è‡ªå·±çš„æ–¹æ³•æ˜¯<strong>â€œçŒœâ€â€œè¯•å‡ºæ¥â€</strong></td><td>æ·±åº¦ä¼˜å…ˆæœç´¢</td><td>-1</td><td>-1</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>ç¬¬ä¸ƒå±Š</td><td>ç”»å›¾æ‰¾å‡ºè§„å¾‹åä½¿ç”¨é€’å½’æ¨¡æ‹Ÿè¿‡ç¨‹</td><td>å…¨æ’åˆ—</td><td>ä»£ç åˆ†æï¼Œè€ƒä½ èƒ½ä¸èƒ½è¯»æ‡‚ä»£ç </td><td>å›æº¯+å‰ªæ</td><td>æš´åŠ›æœç´¢ï¼ˆè¶…æ—¶ï¼‰ï¼›DFS+å‰ªæå›æº¯ï¼ˆ60ï¼‰ï¼›åŠ¨æ€è§„åˆ’ï¼ˆ80ï¼‰ï¼›æ•°æ®ç»“æ„ï¼ˆ100ï¼‰</td><td>-1</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>ç¬¬å…«å±Š</td><td>ç›´æ¥æš´åŠ›å¾ªç¯</td><td>ä½¿ç”¨å¦ä¸€ä¸ªæ•°ç»„è¿›è¡Œæ¨¡æ‹Ÿç»†èƒå¢æ®–çš„è¿‡ç¨‹æˆ–è€…ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæ¨¡æ‹Ÿ</td><td>è¯»ä»£ç æ‰¾è§„å¾‹ï¼ˆçœ‹è‡ªå·±çš„ç»†å¿ƒç¨‹åº¦å§ï¼‰</td><td>ç›´æ¥æ¨¡æ‹Ÿè®¡ç®—çš„è¿‡ç¨‹ï¼Œæ³¨æ„ä½¿ç”¨æ•°æ®èŒƒå›´è¾ƒå¤§çš„Longï¼Œè€Œä¸”éœ€è¦ç†Ÿç»ƒä½¿ç”¨Longã€Integerç­‰ç±»çš„API</td><td>åšå¼ˆé—®é¢˜ã€æ·±åº¦ä¼˜å…ˆã€å‰ªæï¼Œå›æº¯ã€æ¨¡æ‹Ÿ</td><td>-1</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>ç¬¬ä¹å±Š</td><td>æµ·ä¼¦å…¬å¼</td><td>å…¨æ’åˆ—ã€å‰ªæåˆ¤æ–­</td><td>å…¨æ’åˆ—ã€å›æº¯</td><td>å¹¶æŸ¥é›†ã€è¿é€šåˆ†é‡ã€é€’å½’</td><td>æ„é€ æ ‘æˆ–è€…é€’å½’ä¼˜åŒ–</td><td>-1</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>ç¬¬åå±Šæ¨¡æ‹Ÿ</td><td>æš´åŠ›+ç†Ÿæ‚‰é™¤æ¨¡è¿ç®—çš„å®è´¨</td><td>æš´åŠ›æˆ–è€…æ·±æœæ±‚å­ä¸²</td><td>æš´åŠ›ï¼ˆæ—¶é—´é•¿ï¼‰ã€æ‰¾è§„å¾‹åˆ†æé¢˜ï¼Œå°†é™¤æ¨¡è½¬æ¢æˆæ¬¡æ–¹</td><td>æš´åŠ›æ·±æœï¼ˆè€—æ—¶åŠ åˆ†ä½ï¼‰ã€æ‰¾è§„å¾‹ç†è§£æœ€å¤§å…¬çº¦æ•°çš„å«ä¹‰</td><td>å¹¶æŸ¥é›†ã€è”é€šåˆ†é‡æ‰¾ç¯</td><td>-1ï¼ˆæš´åŠ›åªèƒ½30ï¼‰</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>ç¬¬åå±Š</td><td>æš´åŠ›</td><td>ç´ æ•°ç­›ã€è®°å¿†åŒ–æ·±æœæˆ–è€…dp</td><td>æ‰¾è§„å¾‹</td><td>ç´ å› å­åˆ†è§£ã€æ‰¾è§„å¾‹</td><td>æ·±æœ+åˆ¤é‡</td><td>dp+è´ªå¿ƒ</td><td>æš´åŠ›æˆ–è€…dp</td><td>-1ï¼ˆæ‰¾è§„å¾‹ï¼‰</td><td>çº¿æ®µæ ‘ã€ä¸»å¸­æ ‘ã€æ ‘çŠ¶æ•°ç»„</td><td>-1</td></tr></tbody></table><ul><li><a href="">javaBç»„å†å±Šå†³èµ›çœŸé¢˜æ±‡æ€»</a></li><li><a href="">javaBç»„å†å±Šçœèµ›èµ›çœŸé¢˜æ±‡æ€»</a></li></ul><h2 id="ğŸŒ¸åº·æ‰˜å±•å¼€"><a href="#ğŸŒ¸åº·æ‰˜å±•å¼€" class="headerlink" title="ğŸŒ¸åº·æ‰˜å±•å¼€"></a>ğŸŒ¸åº·æ‰˜å±•å¼€</h2><p><strong>åº·æ‰˜å±•å¼€</strong>æ˜¯ä¸€ä¸ªå…¨æ’åˆ—åˆ°ä¸€ä¸ª<a href="https://baike.baidu.com/item/è‡ªç„¶æ•°" target="_blank" rel="noopener">è‡ªç„¶æ•°</a>çš„<a href="https://baike.baidu.com/item/åŒå°„" target="_blank" rel="noopener">åŒå°„</a>ï¼Œå¸¸ç”¨äºæ„å»º<a href="https://baike.baidu.com/item/å“ˆå¸Œè¡¨" target="_blank" rel="noopener">å“ˆå¸Œè¡¨</a>æ—¶çš„ç©ºé—´å‹ç¼©ã€‚ åº·æ‰˜å±•å¼€çš„å®è´¨æ˜¯è®¡ç®—å½“å‰æ’åˆ—åœ¨æ‰€æœ‰ç”±å°åˆ°å¤§å…¨æ’åˆ—ä¸­çš„é¡ºåºï¼Œå› æ­¤æ˜¯å¯é€†çš„ã€‚</p><p><strong>é€šä¿—ç®€ä»‹ï¼š</strong></p><p>åº·æ‰˜å±•å¼€å¯ä»¥æ±‚è§£ä¸€ä¸ªæ’åˆ—çš„åºå·ï¼Œæ¯”å¦‚ï¼š12345 åºå·ä¸º 1 ï¼Œ12354åºå·ä¸º2ï¼ŒæŒ‰å­—å…¸åºå¢åŠ ç¼–å·é€’å¢ï¼Œä¾æ¬¡ç±»æ¨ã€‚<br>åº·æ‰˜é€†å±•å¼€å¯ä»¥æ±‚è§£ä¸€ä¸ªåºå·å®ƒå¯¹åº”çš„æ’åˆ—æ˜¯ä»€ä¹ˆã€‚</p><p>å…ˆç»™å‡ºåº·æ‰˜å±•å¼€çš„å…¬å¼ï¼š</p><p>$X = a_n(n - 1)!+ a_{n-1}(n-2)!+â€¦.+a_1\cdot0!$</p><p>å…ˆå¯¹è¿™ä¸ªå…¬å¼é‡Œå˜é‡è¿›è¡Œè§£é‡Šï¼Œå¤§å®¶ä¸ç†è§£è¿™ä¸ªå…¬å¼æ²¡å…³ç³»ï¼Œæ…¢æ…¢å¾€åçœ‹ï¼Œå¾ˆç®€å•çš„ã€‚<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9nc3MzLmJkc3RhdGljLmNvbS83UG8zZFNhZ194STRraEdrcG9XSzFIRjZoaHkvYmFpa2UvcyUzRDEyL3NpZ249N2NlMGY3ZmFkODA3MzVmYTk1ZjA0YWJiOWM1MTQ4ZmEvMGRmM2Q3Y2E3YmNiMGE0NjI1ZTdkZWQ4Njc2M2Y2MjQ2YTYwYWYwZS5qcGc?x-oss-process=image/format,png" alt="img"> çš„æ„æ€æ˜¯ä»å³å¾€å·¦æ•°ç¬¬ i ä½è¿™ä¸ªæ•°æ˜¯è¿™ä¸ªæ•°å‰æœªå‡ºç°çš„æ•°ï¼Œç¬¬<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9nc3MzLmJkc3RhdGljLmNvbS83UG8zZFNhZ194STRraEdrcG9XSzFIRjZoaHkvYmFpa2UvcyUzRDEyL3NpZ249N2NlMGY3ZmFkODA3MzVmYTk1ZjA0YWJiOWM1MTQ4ZmEvMGRmM2Q3Y2E3YmNiMGE0NjI1ZTdkZWQ4Njc2M2Y2MjQ2YTYwYWYwZS5qcGc?x-oss-process=image/format,png" alt="img"> å¤§ã€‚ä¸¾ä¸ªä¾‹å­å°±æ˜ç™½è¿™ä¸ªå…¬å¼äº†ï¼š</p><p>æ³¨æ„ï¼šè®¡ç®—çš„æ—¶å€™ 12345 åºåˆ—åº”è§†ä¸ºç¬¬0ä¸ªåºåˆ—ï¼Œåé¢ä¼šè§£é‡Šä¸ºä»€ä¹ˆã€‚</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ç™¾åº¦ç™¾ç§‘çš„ä¾‹å­</span><br><span class="line">åœ¨ï¼ˆ1,2,3ï¼Œ4ï¼Œ5ï¼‰5ä¸ªæ•°çš„æ’åˆ—ç»„åˆä¸­ï¼Œè®¡ç®— 34152çš„åº·æ‰˜å±•å¼€å€¼ã€‚</span><br><span class="line">é¦–ä½æ˜¯3ï¼Œåˆ™å°äº3çš„æ•°æœ‰ä¸¤ä¸ªï¼Œä¸º1å’Œ2ï¼Œï¼Œåˆ™é¦–ä½å°äº3çš„æ‰€æœ‰æ’åˆ—ç»„åˆä¸º</span><br><span class="line">ç¬¬äºŒä½æ˜¯4ï¼Œç”±äºç¬¬ä¸€ä½å°äº4ï¼Œ1ã€2ã€3ä¸­ä¸€å®šä¼šæœ‰1ä¸ªå……å½“ç¬¬ä¸€ä½ï¼Œæ‰€ä»¥æ’åœ¨4ä¹‹ä¸‹çš„åªå‰©2ä¸ªï¼Œæ‰€ä»¥å…¶å®è®¡ç®—çš„æ˜¯åœ¨ç¬¬äºŒä½ä¹‹åå°äº4çš„ä¸ªæ•°ã€‚å› æ­¤ã€‚</span><br><span class="line">ç¬¬ä¸‰ä½æ˜¯1ï¼Œåˆ™åœ¨å…¶ä¹‹åå°äº1çš„æ•°æœ‰0ä¸ªï¼Œæ‰€ä»¥ã€‚</span><br><span class="line">ç¬¬å››ä½æ˜¯5ï¼Œåˆ™åœ¨å…¶ä¹‹åå°äº5çš„æ•°æœ‰1ä¸ªï¼Œä¸º2ï¼Œæ‰€ä»¥ã€‚</span><br><span class="line">æœ€åä¸€ä½å°±ä¸ç”¨è®¡ç®—å•¦ï¼Œå› ä¸ºåœ¨å®ƒä¹‹åå·²ç»æ²¡æœ‰æ•°äº†ï¼Œæ‰€ä»¥å›ºå®šä¸º0</span><br><span class="line">æ ¹æ®å…¬å¼ï¼š</span><br><span class="line">X = 2 x 4! + 2 x 3! + 0 x 2! + 1 x 1! + 0 x 0ï¼</span><br><span class="line">ã€€ã€€æ‰€ä»¥æ¯”34152å°çš„ç»„åˆæœ‰61ä¸ªï¼Œå³34152æ˜¯æ’ç¬¬62ã€‚</span><br></pre></td></tr></tbody></table></figure><p>æ‹¿52413ä¸¾ä¾‹å­ï¼š</p><p>1ã€é¦–å…ˆçœ‹ç¬¬ä¸€ä¸ªæ•° 5ï¼Œä¸ç®¡ç¬¬ä¸€ä½æ˜¯ä»€ä¹ˆæ•°ï¼Œåé¢éƒ½æœ‰å››ä½æ•°ï¼Œé‚£ä¹ˆè¿™å››ä½æ•°å…¨æ’åˆ—çš„æ–¹å¼æœ‰ 4ï¼ç§ï¼Œè€Œå¦‚æœç¬¬ä¸€ä½æ˜¯ 1 æˆ– 2 æˆ– 3 æˆ– 4 éƒ½ä¼šæ¯”5å¼€å¤´çš„å­—å…¸åºè¦å°ï¼Œæ‰€ä»¥å¯ä»¥ä»¤1ï¼Œ2ï¼Œ3ï¼Œ4åˆ†åˆ«ä½œä¸ºå¼€å¤´ï¼Œè¿™æ ·çš„è¯å°±ä¼šæœ‰ 4 * 4ï¼ç§æ’æ³•è¦æ¯” 52413è¿™ç§æ’æ³•çš„å­—å…¸åºè¦å°ã€‚</p><p>é‚£ä¹ˆç¬¬ä¸€ä¸ªæ•°æ˜¯1ï¼Œ2ï¼Œ3ï¼Œ4æ—¶å€™çš„å­—å…¸åºçš„ä¸ªæ•°æ•°å®Œäº†æ˜¯ 4 * 4ï¼ ç§ï¼Œä¸”è¿™äº›å­—å…¸åºéƒ½è¦æ¯”52413çš„å­—å…¸åºè¦å°ã€‚</p><p>è¿˜æœ‰å…¶ä»–çš„æ’åˆ—æ–¹å¼æ¯”52413çš„å­—å…¸åºè¦å°çš„å—ï¼Ÿ</p><p>2ã€é‚£ä¹ˆå°±å¯ä»¥å›ºå®šç¬¬ä¸€ä½5ï¼Œæ‰¾ä¸‹ä¸€ä½2ï¼Œè¿™æ—¶5å·²ç»ç”¨è¿‡äº†ï¼Œæ‰€ä»¥ä»å‰©ä¸‹çš„ 1ï¼Œ2ï¼Œ3ï¼Œ4 é‡ŒæŒ‘é€‰æ¯”2å°çš„æ•°ï¼Œä¸€å…±1ä¸ªï¼Œåé¢è¿˜å‰©ä¸‰ä½ï¼Œä¹Ÿå°±æ˜¯3ï¼ç§æ’åˆ—æ–¹å¼ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æ¯” 52413 å­—å…¸åºè¦å°çš„åˆæœ‰ 1 * 3ï¼ç§ï¼Œä¹Ÿå°±æ˜¯å½“5åœ¨ç¬¬ä¸€ä½ï¼Œ1åœ¨ç¬¬äºŒä½çš„æ—¶å€™ã€‚</p><p>3ã€å†çœ‹ç¬¬ä¸‰ä½4ï¼Œè¿™æ—¶5ï¼Œ2éƒ½ç”¨äº†ï¼Œæ‰€ä»¥ä»å‰©ä¸‹çš„ 1ï¼Œ3ï¼Œ4ä¸‰ä¸ªæ•°ä¸­æ‰¾æ¯”4å°çš„æ•°çš„ä¸ªæ•°ï¼Œæœ‰ä¸¤ä¸ªæ¯”4å°åŸç†åŒä¸Šï¼Œæ‰€ä»¥è¿™æ—¶å€™ä¹Ÿå¯ä»¥æœ‰ 2 * 2!ç§æ’åˆ—æ–¹å¼çš„å­—å…¸åºå°äº 52413</p><p>4ã€å†çœ‹ç¬¬å››ä½1ï¼Œè¿™æ—¶å€™ä¼šæœ‰ 0 * 1ï¼ç§</p><p>5ã€å†çœ‹ç¬¬äº”ä½3ï¼Œè¿™æ—¶å€™ä¼šæœ‰0 * 0ï¼ç§</p><p>ç»¼ä¸Šæ‰€è¿°ï¼š<br>å¯¹äºåºåˆ—ï¼š 52413 è¯¥åºåˆ—å±•å¼€åä¸ºï¼š 4 * 4! + 1 * 3! + 2 * 2! + 0 * 1! + 0 * 0! ï¼Œè®¡ç®—ç»“æœæ˜¯ï¼š 106<br>ç”±äºæ˜¯ä»0å¼€å§‹è®¡æ•°çš„ï¼Œæ‰€ä»¥æœ€å 52413 çš„ç¼–å·ä¸º 107</p><p>ä¸ºä»€ä¹ˆä»0å¼€å§‹è®¡æ•°ï¼Ÿ<br>å¯ä»¥è¿™æ ·çœ‹ï¼šæˆ‘ç°åœ¨è®©ä½ æ±‚12345çš„åº·æ‰˜å±•å¼€å€¼ï¼Œä¹Ÿå°±æ˜¯ï¼š0<em>4ï¼+ 0</em>3ï¼+ 0<em>2ï¼+ 0</em>1ï¼+0*0ï¼ = 0 æ‰€ä»¥æ˜ç™½äº†å§~~<br>åº·æ‰˜å…¬å¼æœ€å°å­—å…¸åºçš„ç¼–å·å°±æ˜¯0ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***** è¿™é‡Œä»¥å­—ç¬¦ä¸²è¿›è¡Œå±•ç¤º  å­—ç¬¦ä¸²å¯æ³›åŒ–æ€§å¥½ ******/</span></span><br><span class="line"> </span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*******æ‰“å‡º1-nçš„é˜¶ä¹˜è¡¨*******/</span></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">20</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">jie_cheng</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    f[<span class="number">0</span>] = f[<span class="number">1</span>] = <span class="number">1</span>; <span class="comment">// 0çš„é˜¶ä¹˜ä¸º1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) f[i] = f[i - <span class="number">1</span>] * i;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**************åº·æ‰˜å±•å¼€****************/</span></span><br><span class="line">string str;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kangtuo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">1</span>;  <span class="comment">//æ³¨æ„ï¼Œå› ä¸º 12345 æ˜¯ç®—ä½œ0å¼€å§‹è®¡ç®—çš„ï¼Œæœ€åç»“æœè¦æŠŠ12345çœ‹ä½œæ˜¯ç¬¬ä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">int</span> len = str.length();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++){</span><br><span class="line">        <span class="keyword">int</span> tmp = <span class="number">0</span>;<span class="comment">//ç”¨æ¥è®¡æ•°çš„</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; len; j++){</span><br><span class="line">            <span class="keyword">if</span>(str[i] &gt; str[j]) tmp++;</span><br><span class="line">            <span class="comment">//è®¡ç®—str[i]æ˜¯ç¬¬å‡ å¤§çš„æ•°ï¼Œæˆ–è€…è¯´è®¡ç®—æœ‰å‡ ä¸ªæ¯”ä»–å°çš„æ•°</span></span><br><span class="line">        }</span><br><span class="line"> </span><br><span class="line">        ans += tmp * f[len - i - <span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    jie_cheng(<span class="number">10</span>);</span><br><span class="line">    string str = <span class="string">"52413"</span>;</span><br><span class="line">    cout&lt;&lt;kangtuo()&lt;&lt;endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸åº·æ‰˜é€†å±•å¼€"><a href="#ğŸŒ¸åº·æ‰˜é€†å±•å¼€" class="headerlink" title="ğŸŒ¸åº·æ‰˜é€†å±•å¼€"></a>ğŸŒ¸åº·æ‰˜é€†å±•å¼€</h2><p>ç›´æ¥å¼€æ —å­ï¼š</p><p>å¦‚æœåˆå§‹åºåˆ—æ˜¯12345ï¼ˆç¬¬ä¸€ä¸ªï¼‰ï¼Œè®©ä½ æ±‚ç¬¬107ä¸ªåºåˆ—æ˜¯ä»€ä¹ˆã€‚ï¼ˆæŒ‰å­—å…¸åºé€’å¢ï¼‰</p><p>è¿™æ ·è®¡ç®—ï¼š</p><p>å…ˆæŠŠ107å‡1ï¼Œå› ä¸ºåº·æ‰˜å±•å¼€é‡Œçš„åˆå§‹åºåˆ—ç¼–å·ä¸º0<br>ç„¶åè®¡ç®—ä¸‹åç¼€ç§¯ï¼š<br> 1    2    3   4   5<br> 5ï¼ 4ï¼ 3ï¼ 2ï¼1ï¼ 0ï¼<br>120  24   6   2   1   1</p><p>106 / 4! = 4 Â·Â·Â·Â·Â·Â· 10 æœ‰4ä¸ªæ¯”å®ƒå°çš„æ‰€ä»¥å› è¯¥æ˜¯5  ä»ï¼ˆ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼‰é‡Œé€‰<br>10  / 3! = 1 Â·Â·Â·Â·Â·Â· 4  æœ‰1ä¸ªæ¯”å®ƒå°çš„æ‰€ä»¥å› è¯¥æ˜¯2  ä»ï¼ˆ1ï¼Œ 2ï¼Œ 3ï¼Œ 4ï¼‰é‡Œé€‰<br> 4   / 2! = 2 Â·Â·Â·Â·Â·Â· 0  æœ‰2ä¸ªæ¯”å®ƒå°çš„æ‰€ä»¥å› è¯¥æ˜¯4  ä»ï¼ˆ1ï¼Œ 3ï¼Œ 4ï¼‰é‡Œé€‰<br> 0   / 1! = 0 Â·Â·Â·Â·Â·Â· 0  æœ‰0ä¸ªæ¯”å®ƒå°çš„æ‰€ä»¥å› è¯¥æ˜¯1  ä»ï¼ˆ1ï¼Œ3ï¼‰é‡Œé€‰<br> 0   / 0! = 0 Â·Â·Â·Â·Â·Â· 0  æœ‰0ä¸ªæ¯”å®ƒå°çš„æ‰€ä»¥å› è¯¥æ˜¯3  ä»ï¼ˆ3ï¼‰é‡Œé€‰</p><p>æ‰€ä»¥ç¼–å·107çš„æ˜¯ 52413</p><h3 id="åº·æ‰˜é€†å±•å¼€ä»£ç ï¼š"><a href="#åº·æ‰˜é€†å±•å¼€ä»£ç ï¼š" class="headerlink" title="åº·æ‰˜é€†å±•å¼€ä»£ç ï¼š"></a>åº·æ‰˜é€†å±•å¼€ä»£ç ï¼š</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***** è¿™é‡Œä»¥å­—ç¬¦ä¸²è¿›è¡Œå±•ç¤º  å­—ç¬¦ä¸²å¯æ³›åŒ–æ€§å¥½ ******/</span></span><br><span class="line"> </span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*******æ‰“å‡º1-nçš„é˜¶ä¹˜è¡¨*******/</span></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> x, num;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">jie_cheng</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    f[<span class="number">0</span>] = f[<span class="number">1</span>] = <span class="number">1</span>; <span class="comment">// 0çš„é˜¶ä¹˜ä¸º1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) f[i] = f[i - <span class="number">1</span>] * i;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**************åº·æ‰˜é€†å±•å¼€**************/</span></span><br><span class="line"> </span><br><span class="line">vector&lt;<span class="keyword">char</span>&gt; vec; <span class="comment">//å­˜éœ€è¦æ’åˆ—çš„å­—ç¬¦</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rev_kangtuo</span><span class="params">(<span class="keyword">int</span> k)</span> <span class="comment">//è¾“å‡ºåºå·ä¸º k çš„å­—ç¬¦åºåˆ—</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> n = vec.size(), len = <span class="number">0</span>;</span><br><span class="line">    string ans = <span class="string">""</span>;</span><br><span class="line">    k--; <span class="comment">// ç®—çš„æ—¶å€™æ˜¯æŒ‰ 12345 æ˜¯ç¬¬0ä½</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++){</span><br><span class="line">        <span class="keyword">int</span> t = k / f[n - i]; <span class="comment">// ç¬¬ i ä½éœ€è¦ ç¬¬ t + 1 å¤§çš„æ•°</span></span><br><span class="line">        k %= f[n - i];        <span class="comment">//å‰©ä¸‹çš„å‡ ä½éœ€è¦æä¾›çš„æ’åˆ—æ•°</span></span><br><span class="line">        ans += vec[t] ; <span class="comment">//  vec[t] å°±æ˜¯ç¬¬ t + 1 å¤§çš„æ•°</span></span><br><span class="line">        vec.erase(vec.begin() + t); </span><br><span class="line"><span class="comment">//ç”¨è¿‡å°±åˆ äº†ï¼Œä¸ç”¨vectorç”¨æš´åŠ›ä¹Ÿå¯ä»¥ï¼Œå°±æ˜¯è¯´æšä¸¾ï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªçš„æ¯”è¾ƒå¤§å°ï¼Œå¹¶è®°å½•æœ‰å‡ ä¸ªæ²¡ç”¨è¿‡çš„å­—ç¬¦ä¸”å­—å…¸åºæ¯”å®ƒå°</span></span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="comment">/***************************************/</span></span><br><span class="line"><span class="comment">// å‡è®¾å±•å¼€åä¸è¶…è¿‡10ä½</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    jie_cheng(<span class="number">10</span>); <span class="comment">// é¢„å¤„é‡Œå¥½é˜¶ä¹˜</span></span><br><span class="line">    scanf(<span class="string">"%d"</span>, &amp;x); <span class="comment">// è¾“å…¥éœ€è¦é€†å±•å¼€çš„æ•°å­—</span></span><br><span class="line">    <span class="comment">/************åº·æ‰˜é€†å±•å¼€***********/</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">    {</span><br><span class="line">    <span class="keyword">if</span>(x / f[i] == <span class="number">0</span>) <span class="comment">// æ±‚å‡º x é€†å±•å¼€æ‰€éœ€çš„æœ€å°çš„ä½æ•°ï¼Œæ–¹ä¾¿ä¸‹é¢çš„åˆå§‹åŒ–</span></span><br><span class="line">    {</span><br><span class="line">    num = i;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= num; i++) vec.push_back(i + <span class="string">'0'</span>); <span class="comment">//è¾“å…¥çš„ä½æ•°åªè¦ä¸å°äºnumå°±å¯ä»¥</span></span><br><span class="line">    rev_kangtuo(x);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸å‰å§†æ‹‰å°”æ£®å…¬å¼"><a href="#ğŸŒ¸å‰å§†æ‹‰å°”æ£®å…¬å¼" class="headerlink" title="ğŸŒ¸å‰å§†æ‹‰å°”æ£®å…¬å¼"></a>ğŸŒ¸å‰å§†æ‹‰å°”æ£®å…¬å¼</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">whatday</span><span class="params">(<span class="keyword">int</span> y, <span class="keyword">int</span> m, <span class="keyword">int</span> d)</span> </span>{</span><br><span class="line"><span class="keyword">if</span>(m == <span class="number">1</span>) {</span><br><span class="line">y--;</span><br><span class="line">m = <span class="number">13</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(m == <span class="number">2</span>) {</span><br><span class="line">y--;</span><br><span class="line">m = <span class="number">14</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> (d + <span class="number">2</span> * m + <span class="number">3</span> * (m + <span class="number">1</span>) / <span class="number">5</span> + y + y / <span class="number">4</span> - y / <span class="number">100</span> + y / <span class="number">400</span>) % <span class="number">7</span> + <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸æµ·ä¼¦å…¬å¼"><a href="#ğŸŒ¸æµ·ä¼¦å…¬å¼" class="headerlink" title="ğŸŒ¸æµ·ä¼¦å…¬å¼"></a>ğŸŒ¸æµ·ä¼¦å…¬å¼</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¸‰è§’å½¢ä¸‰è¾¹é•¿a, b, c</span><br><span class="line">p = (a + b + c) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">area = Math.sqrt(p * (p - a) * (p - b) * (p - c))</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸ç´ æ•°"><a href="#ğŸŒ¸ç´ æ•°" class="headerlink" title="ğŸŒ¸ç´ æ•°"></a>ğŸŒ¸ç´ æ•°</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ©ç”¨API</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">n_prime</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">BigInteger in = <span class="keyword">new</span> BigInteger(<span class="string">"2"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) {</span><br><span class="line">in = in.nextProbablePrime();</span><br><span class="line">}</span><br><span class="line">System.out.println(in);</span><br><span class="line">}</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸¸è§„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">n_prime1</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">List&lt;Long&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">long</span> i = <span class="number">2</span>; list.size() &lt; n; i++) {</span><br><span class="line"><span class="keyword">if</span>(prime(i)) {</span><br><span class="line">list.add(i);</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">System.out.println(list.get(n - <span class="number">1</span>));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">prime</span><span class="params">(<span class="keyword">long</span> n)</span> </span>{</span><br><span class="line"><span class="keyword">if</span>(n &lt; <span class="number">2</span>) {</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(n == <span class="number">2</span>) {</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(n % <span class="number">2</span> == <span class="number">0</span>) {</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">3</span>; i * i &lt;= n;i += <span class="number">2</span>) {</span><br><span class="line"><span class="keyword">if</span>(n % i == <span class="number">0</span>) {</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">n_prime2</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line"><span class="keyword">int</span> arr[] = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) {</span><br><span class="line">arr[i] = <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i * i &lt;= n; i++) {<span class="comment">//å¯ä»¥åªç”¨æ ¹å·nä¹‹å‰çš„æ•°å­—å»ç­›é€‰</span></span><br><span class="line"><span class="keyword">if</span>(arr[i] == <span class="number">1</span>) { <span class="comment">//ä¸åŠ åˆ¤æ–­ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¢åŠ å¤æ‚åº¦äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æˆ‘ä»¬æ‰€è®¤ä¸ºçš„â€œç´ æ•°â€ä¸­ç­›é€‰å°±å¯ä»¥äº†ï¼Œ æ¯ä¸ªåˆæ•°å¿…æœ‰è´¨å› å­</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = i * i; j &lt;= n; j += i) { <span class="comment">//æ¯”å¦‚j = i * k(k &lt; i),é‚£ä¹ˆjè‚¯å®šè¢«kç­›æ‰äº†</span></span><br><span class="line">arr[j] = <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">int</span> k = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) {</span><br><span class="line"><span class="keyword">if</span>(arr[i] == <span class="number">1</span>) {</span><br><span class="line"><span class="keyword">if</span>(k == <span class="number">100002</span>) {</span><br><span class="line">System.out.println(<span class="string">"-&gt;"</span>+i);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">k++;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸æ—¥æœŸç±»ï¼ˆSimpleDateFormat-Date"><a href="#ğŸŒ¸æ—¥æœŸç±»ï¼ˆSimpleDateFormat-Date" class="headerlink" title="ğŸŒ¸æ—¥æœŸç±»ï¼ˆSimpleDateFormat +Date)"></a>ğŸŒ¸æ—¥æœŸç±»ï¼ˆSimpleDateFormat +Date)</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">        SimpleDateFormat format = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-mm-dd"</span>);</span><br><span class="line">        Date date1 = format.parse(<span class="string">"1921-7-23"</span>);</span><br><span class="line">        Date date2 = format.parse(<span class="string">"2020- 7-1"</span>);</span><br><span class="line">        <span class="keyword">int</span> a = (<span class="keyword">int</span>)((date2.getTime() - date1.getTime()) / <span class="number">1000</span> * <span class="number">60</span>);<span class="comment">//ç›¸éš”å¤šå°‘åˆ†é’Ÿ</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›´æ¥ä½¿ç”¨ Date</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">36138</span> * <span class="number">24</span> * <span class="number">60L</span>;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">        System.out.println(<span class="number">36138</span> * <span class="number">24</span> * <span class="number">60</span>);</span><br><span class="line">        <span class="comment">// longå‹å˜é‡åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œå¦‚æœä¸åŠ â€œLâ€,åˆ™é»˜è®¤ä¸ºintå‹å˜é‡</span></span><br><span class="line">        Date date1 = <span class="keyword">new</span> Date(<span class="number">21</span>, <span class="number">7</span>, <span class="number">23</span>, <span class="number">12</span>, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// 1921</span></span><br><span class="line">        Date date2 = <span class="keyword">new</span> Date(<span class="number">120</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">12</span>, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// 2020</span></span><br><span class="line">        <span class="keyword">long</span> time = date2.getTime() - date1.getTime();</span><br><span class="line">        System.out.println(time / (<span class="number">60000</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸ"><a href="#ğŸ" class="headerlink" title="ğŸ"></a>ğŸ</h3><h4 id="ğŸ‚"><a href="#ğŸ‚" class="headerlink" title="ğŸ‚"></a>ğŸ‚</h4><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸŒ¸è®°å½•è“æ¡¥æ¯javaBç»„å†å±Šå†³èµ›çœŸé¢˜è§£é¢˜ç®—æ³•æ€»ç»“ä¸å¯¹æ¯”&lt;/p&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="è“æ¡¥æ¯" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    
    
      <category term="æ€»ç»“" scheme="https://liudufu.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
      <category term="è“æ¡¥æ¯å›½èµ›çœŸé¢˜" scheme="https://liudufu.github.io/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E7%9C%9F%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>è“æ¡¥ç®—æ³•çœèµ›çœŸé¢˜æ€»ç»“</title>
    <link href="https://liudufu.github.io/Summary_of_provincial_competition/"/>
    <id>https://liudufu.github.io/Summary_of_provincial_competition/</id>
    <published>2020-11-08T13:39:55.000Z</published>
    <updated>2020-11-08T13:43:13.791Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸŒ¸<strong>è®°å½•è“æ¡¥æ¯javaBç»„çœèµ›é¢˜ç›®è§£é¢˜æ–¹æ³•æ€»ç»“å¯¹æ¯”</strong></p><a id="more"></a><h2 id="ğŸŒ¸è§£é¢˜æ–¹æ³•æ±‡æ€»ï¼ˆjava-Bç»„çœèµ›ï¼‰"><a href="#ğŸŒ¸è§£é¢˜æ–¹æ³•æ±‡æ€»ï¼ˆjava-Bç»„çœèµ›ï¼‰" class="headerlink" title="ğŸŒ¸è§£é¢˜æ–¹æ³•æ±‡æ€»ï¼ˆjava Bç»„çœèµ›ï¼‰"></a>ğŸŒ¸è§£é¢˜æ–¹æ³•æ±‡æ€»ï¼ˆjava Bç»„çœèµ›ï¼‰</h2><table><thead><tr><th></th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th></tr></thead><tbody><tr><td>ç¬¬å››å±Š</td><td>æ—¥æœŸ(API)ã€å‰å§†æ‹‰å°”æ£®å…¬å¼</td><td>æš´åŠ›æšä¸¾</td><td>æš´åŠ›æ·±æœ</td><td>é€’å½’ã€å¤§æ•°ç±»</td><td>é€»è¾‘æ¨¡æ‹Ÿ</td><td>é€»è¾‘æ¨¡æ‹Ÿ</td><td>æš´åŠ›æŸ¥æ‰¾(ç±»é›†æ¡†æ¶)</td><td>æ¨¡æ‹Ÿè¿‡ç¨‹</td><td>å…¨æ’åˆ—ã€é€»è¾‘åˆ¤æ–­ã€é€»è¾‘æšä¸¾çš„æ¡ä»¶åˆ¤æ–­ï¼Œæšä¸¾æ‰€æœ‰æƒ…å†µ</td><td>é¢˜æ„ç†è§£ï¼Œæ€ç»´çš„å·§å¦™è¿ç”¨</td></tr><tr><td>ç¬¬äº”å±Š</td><td>æ•°å­¦é€»è¾‘</td><td>æ•°å­¦é€»è¾‘</td><td>å­—ç¬¦ä¸²ã€æš´åŠ›æ¨¡æ‹Ÿ</td><td>æ•°å­¦ã€å¥‡å¶æ•°</td><td>æ•°å­¦é€»è¾‘</td><td>æš´åŠ›æšä¸¾</td><td>å…¨æ’åˆ—ã€é€»è¾‘æ£€æŸ¥</td><td>æ¨¡æ‹Ÿè¿‡ç¨‹</td><td>æ·±åº¦ä¼˜å…ˆã€è¿‡ç¨‹æ¨¡æ‹Ÿæœç´¢ã€è®°å¿†åŒ–é€’å½’</td><td>-1</td></tr><tr><td>ç¬¬å…­å±Š</td><td>ç®€å•æ•°å­¦è®¡ç®—</td><td>æš´åŠ›æšä¸¾</td><td>æš´åŠ›æšä¸¾</td><td>æ¨¡æ‹Ÿè¿‡ç¨‹å‘ç°å°æŠ€å·§</td><td>å…¨æ’åˆ—</td><td>æ•°å­¦è§„å¾‹</td><td>é€’å½’</td><td>æ¨¡æ‹Ÿè¿‡ç¨‹</td><td>é€’å½’ã€åŠ¨æ€è§„åˆ’ã€çŸ©é˜µå¿«é€Ÿå¹‚</td><td>é€’å½’æœ€å¤šä¸€ä¸‡å±‚</td></tr><tr><td>ç¬¬ä¸ƒå±Š</td><td>æ•°å­¦è§„å¾‹</td><td>æš´åŠ›æšä¸¾</td><td>æš´åŠ›å…¨æ’åˆ—</td><td>ç»„åˆï¼Œè§„å¾‹</td><td>é€’å½’ã€ç»„åˆ</td><td>æš´åŠ›ã€å…¨æ’åˆ—</td><td>ç»„åˆã€æ·±æœã€å›¾ã€è”é€šåˆ†é‡</td><td>é¦–å…ˆæš´åŠ›ã€æš´åŠ›ä¼˜åŒ–ï¼ˆå››å±‚åˆ°ä¸¤å±‚ï¼‰å“ˆå¸Œ</td><td>é€’å½’æ¨¡æ‹Ÿè¿‡ç¨‹ã€ç»†èŠ‚å¾ˆé‡è¦</td><td>-1</td></tr><tr><td>ç¬¬å…«å±Š</td><td>Excelã€è€å¿ƒæ•²ä»£ç è®¡ç®—ã€æš´åŠ›è®¡ç®—å™¨ã€</td><td>å…¨æ’åˆ—</td><td>äºŒç»´æ•°ç»„æ‰¾è§„å¾‹</td><td>-1</td><td>è¿‡ç¨‹æ¨¡æ‹Ÿåˆ†æ</td><td>åŠ¨æ€è§„åˆ’</td><td>APIã€æ—¥æœŸçš„ç»†å¿ƒåˆ¤æ–­ï¼ˆä¸»è¦æ˜¯ç»†å¿ƒæ‰¾åˆ°æ¯ä¸€ä¸ªæ»¡è¶³çš„æ¡ä»¶ï¼‰</td><td>åŠ¨æ€è§„åˆ’ã€æ‰©å±•æ¬§å‡ é‡Œå¾—ã€å®Œå…¨èƒŒåŒ…</td><td>æ•°å­¦è§„å¾‹ã€æ¨¡æ‹Ÿè¿‡ç¨‹</td><td>æš´åŠ›ã€å‰ç¼€å’Œä¼˜åŒ–ã€å–æ¨¡è¿ç®—</td></tr><tr><td>ç¬¬ä¹å±Š</td><td>æ—¥æœŸã€è®¡ç®—å™¨ï¼ˆæ³¨æ„åŠ ä¸€å¤©ï¼‰</td><td>æš´åŠ›è®¡ç®—ã€å‹¾è‚¡å®šç†</td><td>å¤§æ•°ç±»ã€æ•°å¾ˆå¤§è¾“å…¥åˆ°æ–‡ä»¶</td><td>åŠ¨æ€è§„åˆ’ã€é€’å½’ã€äºŒåˆ†</td><td>éšæœºå¿«é€Ÿæ’åºã€é€’å½’</td><td>æš´åŠ›ã€ä¼˜åŒ–ï¼ˆäºŒåˆ†ï¼‰ã€ï¼ˆåŒæŒ‡é’ˆï¼‰</td><td>ç”»å›¾ã€ç”»è¿‡ç¨‹æ¨¡æ‹Ÿã€æ‰¾å‡ºæ•°å­¦è§„å¾‹ã€ç­‰å·®æ•°åˆ—æ±‚å’Œã€ç»å¯¹å€¼çš„æ¶ˆå»</td><td>é¢å‘å¯¹è±¡çš„æ€ç»´æ¨¡æ‹Ÿã€ç±»çš„è‡ªå®šä¹‰æ’åºã€æ€ç»´é€»è¾‘çš„ä¸¥å¯†æ€§</td><td>æš´åŠ›æ·±æœã€DFSæŸ¥æ‰¾è”é€šåˆ†é‡çš„ä¸ªæ•°</td><td>-1ï¼ˆä¹˜æ³•é€†å…ƒï¼‰</td></tr><tr><td>ç¬¬åå±Š</td><td>ç»¼åˆåˆ†æã€æ±‚æœ€å¤§å€¼</td><td>æš´åŠ›æ±‚å­ä¸²ã€Seté›†åˆ</td><td>æš´åŠ›æ±‚å€¼ã€æœ‰å‘ï¼ˆåªéœ€è¦å…³æ³¨æ•°çš„åå››ä½ï¼Œä¸ç„¶æ•°å­—å¤ªå¤§å­˜ä¸äº†ï¼‰</td><td>æš´åŠ›åˆ†è§£ã€æ¡ä»¶åˆ¤æ–­</td><td>æ±‚æœ€çŸ­è·¯å¾„ã€å¹¿åº¦ä¼˜å…ˆã€æ·±åº¦ä¼˜å…ˆã€èŠ‚ç‚¹åˆ¤æ–­</td><td>æš´åŠ›ç ´è§£</td><td>æ¨¡æ‹Ÿè¿‡ç¨‹ã€æ³¨æ„åˆç†è¿ç”¨å˜é‡å’Œæ•°ç»„ï¼Œåˆ©ç”¨äºŒç»´æ•°ç»„å’Œå¤šä¸ªä¸€ç»´æ•°ç»„å¯ä»¥ä»£æ›¿å¤æ‚çš„æ•°æ®ç»“æ„</td><td>é€»è¾‘åˆ†æä¸ä¸¥å¯†æ€§ã€å­—ç¬¦ä¸²æ­£åˆ™ä»¥åŠAPIçš„ä½¿ç”¨</td><td>é€»è¾‘æ€ç»´çš„åˆ†æä¸ä¸¥å¯†æ€§ã€éœ€è¦å»è€ƒè™‘ç¹æ‚çš„æ‰€æœ‰å¯èƒ½çš„æƒ…å†µç„¶åå†™å‡ºç»“æœ</td><td>-1</td></tr><tr><td>ç¬¬åä¸€å±Š</td><td>æ‰‹å·¥è®¡ç®—ã€ä»£ç è®¡ç®—æ—¶æ³¨æ„å‡æ³•æ—¶çš„è¾¹ç•Œä¸èƒ½å‡åˆ°è´Ÿæ•°</td><td>æ—¥æœŸã€è®¡ç®—å™¨ã€æ—¥æœŸç±»</td><td>æ•°å­¦æ±‚æœ€å€¼ã€æ±‚ç®—æ•°ä¸ç­‰å¼ç›¸ç­‰æ—¶çš„è¾¹ç•Œæƒ…å†µ</td><td>-1ï¼ˆæ‰¾è§„å¾‹ï¼Œç”¨ä»£ç å»æ¨¡æ‹Ÿé¢˜ç›®è¦æ±‚ç¨‹åºè®¡ç®—çš„è¿‡ç¨‹ï¼‰</td><td>åŠ¨æ€è§„åˆ’ã€æ‰¾å‡ºå­˜æ”¾è§„å¾‹ä¸çŠ¶æ€çš„è½¬ç§»æ–¹ç¨‹</td><td>æš´åŠ›å–æ¨¡ã€ä¼˜åŒ–ï¼ˆä½è¿ç®—&gt;&gt;å–ä»£ / ï¼‰(å³n = n&gt;&gt; 1 ç›¸å½“äº n = n / 2)</td><td>ç†Ÿç»ƒä½¿ç”¨APIã€StringBuilderä»¥åŠå­—ç¬¦ä¸²çš„åˆ¤æ–­ã€æ€»çš„æ¥è¯´å°±æ˜¯æš´åŠ›æ¨¡æ‹Ÿ</td><td>æ·±åº¦ä¼˜å…ˆæœç´¢ã€åŠ¨æ€è§„åˆ’</td><td>æš´åŠ›æ‹¼æ¥ï¼ˆåŒé‡forï¼‰ã€ä¼˜åŒ–ï¼ˆäºŒç»´æ•°ç»„ã€ä½æ•°å–å–ä½™ç­‰ï¼‰</td><td>-1</td></tr><tr><td>ç¬¬åäºŒå±Š</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><h2 id="ğŸŒ¸é»„é‡‘åˆ†å‰²æ•°ä¸æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å…³ç³»"><a href="#ğŸŒ¸é»„é‡‘åˆ†å‰²æ•°ä¸æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å…³ç³»" class="headerlink" title="ğŸŒ¸é»„é‡‘åˆ†å‰²æ•°ä¸æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å…³ç³»"></a>ğŸŒ¸é»„é‡‘åˆ†å‰²æ•°ä¸æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å…³ç³»</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">æ¯”è¾ƒç®€å•çš„ä¸€ç§æ˜¯ç”¨è¿åˆ†æ•°ï¼š</span><br><span class="line">                                   1</span><br><span class="line">    é»„é‡‘æ•° = ------------------------------</span><br><span class="line">                                     1</span><br><span class="line">                    1 + ---------------------</span><br><span class="line">                                        1</span><br><span class="line">                           1 + -------------</span><br><span class="line">                                          1</span><br><span class="line">                                 1 + -------</span><br><span class="line">                                       1 + ...</span><br><span class="line">                         </span><br><span class="line">    è¿™ä¸ªè¿åˆ†æ•°è®¡ç®—çš„â€œå±‚æ•°â€è¶Šå¤šï¼Œå®ƒçš„å€¼è¶Šæ¥è¿‘é»„é‡‘åˆ†å‰²æ•°ã€‚</span><br><span class="line">    è¯·ä½ åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œæ±‚å‡ºé»„é‡‘åˆ†å‰²æ•°çš„è¶³å¤Ÿç²¾ç¡®å€¼ï¼Œè¦æ±‚å››èˆäº”å…¥åˆ°å°æ•°ç‚¹å100ä½ã€‚</span><br><span class="line">    å°æ•°ç‚¹å3ä½çš„å€¼ä¸ºï¼š0.618</span><br><span class="line">    å°æ•°ç‚¹å4ä½çš„å€¼ä¸ºï¼š0.6180</span><br><span class="line">    å°æ•°ç‚¹å5ä½çš„å€¼ä¸ºï¼š0.61803</span><br><span class="line">    å°æ•°ç‚¹å7ä½çš„å€¼ä¸ºï¼š0.6180340</span><br></pre></td></tr></tbody></table></figure><p>å¯ä»¥åˆ†æå¾—å‡º</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬äºŒå±‚      1/2    åä¸¤ä½</span><br><span class="line">ç¬¬ä¸‰å±‚      2/3    åä¸‰ä½</span><br><span class="line">ç¬¬å››å±‚      3/5åå››ä½</span><br><span class="line">ç¬¬äº”å±‚      5/8åäº”ä½</span><br><span class="line">.....</span><br><span class="line">ä»¥æ­¤ç±»æ¨</span><br><span class="line">å³å100ä½ä¸ºç¨³å®šçš„100å¤šä½çš„æ–æ³¢é‚£å¥‘æ•°ç›¸é™¤ï¼Œåˆ™å¯ä»¥å¾—å‡ºä»£ç </span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">          </span><br><span class="line">        BigInteger a = BigInteger.ONE;</span><br><span class="line">        BigInteger b = BigInteger.ONE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">3</span>; i &lt; <span class="number">500</span>; i++) {</span><br><span class="line">        BigInteger t = b;</span><br><span class="line">        b = a.add(b);</span><br><span class="line">        a = t;</span><br><span class="line">        }</span><br><span class="line">        BigDecimal divide = <span class="keyword">new</span> BigDecimal(a, <span class="number">110</span>).divide(<span class="keyword">new</span> BigDecimal(b, <span class="number">110</span>), BigDecimal.ROUND_HALF_DOWN);</span><br><span class="line">        System.out.println(divide.toPlainString().substring(<span class="number">0</span>, <span class="number">103</span>));</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">    <span class="comment">//æ±‚æ–æ³¢é‚£å¥‘</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> BigDecimal <span class="title">fb</span><span class="params">(<span class="keyword">int</span> n)</span></span>{</span><br><span class="line">        BigDecimal a = BigDecimal.ONE;</span><br><span class="line">        BigDecimal b = BigDecimal.ONE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {</span><br><span class="line">            BigDecimal t = b;</span><br><span class="line">            b = a.add(b);</span><br><span class="line">            a=t;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸åœ†å‘¨ç‡ä¸è¿åˆ†æ•°"><a href="#ğŸŒ¸åœ†å‘¨ç‡ä¸è¿åˆ†æ•°" class="headerlink" title="ğŸŒ¸åœ†å‘¨ç‡ä¸è¿åˆ†æ•°"></a>ğŸŒ¸åœ†å‘¨ç‡ä¸è¿åˆ†æ•°</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> 4                               1</span><br><span class="line">----   = 1 +  ------------------------------</span><br><span class="line"> N(åœ†å‘¨ç‡)                            9</span><br><span class="line">                 1 + ---------------------</span><br><span class="line">                                       25</span><br><span class="line">                        2 + -----------------</span><br><span class="line">                                         </span><br><span class="line">                              2 + .............</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> x = <span class="number">111</span>; </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n = <span class="number">10000</span>; n&gt;=<span class="number">0</span>; n--){</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">2</span> * n + <span class="number">1</span>;</span><br><span class="line">        x = <span class="number">2</span> + (i*i / x);</span><br><span class="line">    }</span><br><span class="line">   </span><br><span class="line">    System.out.println(String.format(<span class="string">"%.4f"</span>, <span class="number">4</span>/ (x - <span class="number">1</span>)));</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸å‰å§†æ‹‰å°”æ£®å…¬å¼"><a href="#ğŸŒ¸å‰å§†æ‹‰å°”æ£®å…¬å¼" class="headerlink" title="ğŸŒ¸å‰å§†æ‹‰å°”æ£®å…¬å¼"></a>ğŸŒ¸å‰å§†æ‹‰å°”æ£®å…¬å¼</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">whatday</span><span class="params">(<span class="keyword">int</span> y, <span class="keyword">int</span> m, <span class="keyword">int</span> d)</span> </span>{</span><br><span class="line"><span class="keyword">if</span>(m == <span class="number">1</span>) {</span><br><span class="line">y--;</span><br><span class="line">m = <span class="number">13</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(m == <span class="number">2</span>) {</span><br><span class="line">y--;</span><br><span class="line">m = <span class="number">14</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> (d + <span class="number">2</span> * m + <span class="number">3</span> * (m + <span class="number">1</span>) / <span class="number">5</span> + y + y / <span class="number">4</span> - y / <span class="number">100</span> + y / <span class="number">400</span>) % <span class="number">7</span> + <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸å¤æ•°å¹‚ï¼ˆå¤æ•°çš„é˜¶ä¹˜ï¼‰-äº†è§£æ‰“å°æµçš„ä½¿ç”¨æ–‡æœ¬"><a href="#ğŸŒ¸å¤æ•°å¹‚ï¼ˆå¤æ•°çš„é˜¶ä¹˜ï¼‰-äº†è§£æ‰“å°æµçš„ä½¿ç”¨æ–‡æœ¬" class="headerlink" title="ğŸŒ¸å¤æ•°å¹‚ï¼ˆå¤æ•°çš„é˜¶ä¹˜ï¼‰(äº†è§£æ‰“å°æµçš„ä½¿ç”¨æ–‡æœ¬)"></a>ğŸŒ¸å¤æ•°å¹‚ï¼ˆå¤æ•°çš„é˜¶ä¹˜ï¼‰(äº†è§£æ‰“å°æµçš„ä½¿ç”¨æ–‡æœ¬)</h2><p>å¤æ•°è®¡ç®—çš„è§„å¾‹  å°è¯•ç”¨ (a+bi)<em>(c+di) = (a</em>c - b<em>d) + (a</em>d + b*c)i </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException </span>{</span><br><span class="line"><span class="comment">//System.out.println(getNum(new BigInteger("2"), new BigInteger("3"), new BigInteger("2"), new BigInteger("3")));</span></span><br><span class="line"></span><br><span class="line">BigInteger a = <span class="keyword">new</span> BigInteger(<span class="string">"2"</span>);</span><br><span class="line">BigInteger b = <span class="keyword">new</span> BigInteger(<span class="string">"3"</span>);</span><br><span class="line">BigInteger c = <span class="keyword">new</span> BigInteger(<span class="string">"2"</span>);</span><br><span class="line">BigInteger d = <span class="keyword">new</span> BigInteger(<span class="string">"3"</span>);</span><br><span class="line"><span class="keyword">int</span> n = <span class="number">1</span>;</span><br><span class="line">BigInteger shi;</span><br><span class="line">BigInteger xu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(n &lt; <span class="number">123456</span>) {</span><br><span class="line">shi = a.multiply(c).subtract((b.multiply(d)));</span><br><span class="line">xu = a.multiply(d).add(b.multiply(c));</span><br><span class="line">n++;</span><br><span class="line">a = shi;</span><br><span class="line">b = xu;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(b.compareTo(<span class="keyword">new</span> BigInteger(<span class="string">"0"</span>)) == <span class="number">1</span>) {</span><br><span class="line">System.out.println(a + <span class="string">"+"</span> + b + <span class="string">"i"</span>);</span><br><span class="line">}<span class="keyword">else</span> <span class="keyword">if</span>(b.compareTo(<span class="keyword">new</span> BigInteger(<span class="string">"0"</span>)) == <span class="number">0</span>) {</span><br><span class="line">System.out.println(a + <span class="string">""</span>);</span><br><span class="line">}<span class="keyword">else</span> {</span><br><span class="line">System.out.println(a + <span class="string">""</span> + b + <span class="string">"i"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">PrintStream out = System.out;</span><br><span class="line">PrintStream ps = <span class="keyword">new</span> PrintStream(<span class="keyword">new</span> File(<span class="string">"ans.txt"</span>));</span><br><span class="line">System.setOut(ps);;<span class="comment">//è¾“å‡ºåœ¨ans.txt</span></span><br><span class="line">System.out.println(a.toString() +b.toString() + <span class="string">"i"</span>);</span><br><span class="line">System.setOut(out);</span><br><span class="line">System.out.println(a.toString() + b.toString() + <span class="string">"i"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸æ‰”é¸¡è›‹é—®é¢˜ï¼ˆæ‘”æ‰‹æœºï¼‰ï¼ˆé¢è¯•é¢˜ï¼‰ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰"><a href="#ğŸŒ¸æ‰”é¸¡è›‹é—®é¢˜ï¼ˆæ‘”æ‰‹æœºï¼‰ï¼ˆé¢è¯•é¢˜ï¼‰ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰" class="headerlink" title="ğŸŒ¸æ‰”é¸¡è›‹é—®é¢˜ï¼ˆæ‘”æ‰‹æœºï¼‰ï¼ˆé¢è¯•é¢˜ï¼‰ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰"></a>ğŸŒ¸æ‰”é¸¡è›‹é—®é¢˜ï¼ˆæ‘”æ‰‹æœºï¼‰ï¼ˆé¢è¯•é¢˜ï¼‰ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰</h2><p>ä½ å°†è·å¾— K ä¸ªé¸¡è›‹ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ä¸€æ ‹ä» 1 åˆ° N  å…±æœ‰ N å±‚æ¥¼çš„å»ºç­‘ã€‚</p><p>æ¯ä¸ªè›‹çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœä¸€ä¸ªè›‹ç¢äº†ï¼Œä½ å°±ä¸èƒ½å†æŠŠå®ƒæ‰ä¸‹å»ã€‚</p><p>ä½ çŸ¥é“å­˜åœ¨æ¥¼å±‚ F ï¼Œæ»¡è¶³ 0 &lt;= F &lt;= N ä»»ä½•ä»é«˜äº F çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¼šç¢ï¼Œä» F æ¥¼å±‚æˆ–æ¯”å®ƒä½çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¸ä¼šç ´ã€‚</p><p>æ¯æ¬¡ç§»åŠ¨ï¼Œä½ å¯ä»¥å–ä¸€ä¸ªé¸¡è›‹ï¼ˆå¦‚æœä½ æœ‰å®Œæ•´çš„é¸¡è›‹ï¼‰å¹¶æŠŠå®ƒä»ä»»ä¸€æ¥¼å±‚ X æ‰”ä¸‹ï¼ˆæ»¡è¶³ 1 &lt;= X &lt;= Nï¼‰ã€‚</p><p>ä½ çš„ç›®æ ‡æ˜¯ç¡®åˆ‡åœ°çŸ¥é“ F çš„å€¼æ˜¯å¤šå°‘ã€‚</p><p>æ— è®º F çš„åˆå§‹å€¼å¦‚ä½•ï¼Œä½ ç¡®å®š F çš„å€¼çš„æœ€å°ç§»åŠ¨æ¬¡æ•°æ˜¯å¤šå°‘ï¼Ÿ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> é¸¡è›‹è§£æ³•åŠ›æ‰£ </span>{</span><br><span class="line">    <span class="keyword">static</span> Integer[][] memo = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">superEggDrop</span><span class="params">(<span class="keyword">int</span> K, <span class="keyword">int</span> N)</span> </span>{</span><br><span class="line">        memo = <span class="keyword">new</span> Integer[K+<span class="number">1</span>][N+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">return</span> dp(K,N);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *å½“å‰Kä¸ªé¸¡è›‹å…±æœ‰Nå±‚æ¥¼çŠ¶æ€æ—¶ è¿”å›è¿™ä¸ªçŠ¶æ€ä¸‹ç¡®å®š Fçš„å€¼çš„æœ€å°ç§»åŠ¨æ¬¡æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">private</span> <span class="keyword">int</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> k,<span class="keyword">int</span> n)</span></span>{</span><br><span class="line">        <span class="comment">//base case å±‚æ•°Nç­‰äº0æ—¶ä¸éœ€è¦æ‰”é¸¡è›‹,å½“é¸¡è›‹æ•°Kä¸º1æ—¶ï¼Œåªèƒ½æ¯å±‚é€ä¸ªå°è¯•å‰©ä¸‹æ‰€æœ‰æ¥¼å±‚</span></span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">1</span>)<span class="keyword">return</span> n;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;=<span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ ä¸€ä¸ªå¤‡å¿˜å½• æ¶ˆé™¤ä¹‹å‰ç®—è¿‡çš„é‡å å­é—®é¢˜</span></span><br><span class="line">        <span class="keyword">if</span>(memo[k][n]!=<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> memo[k][n];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> tmp = Integer.MAX_VALUE;</span><br><span class="line"></span><br><span class="line">         <span class="comment">//ç¬¬ä¸€ç§ ä»ç¬¬1å±‚æ¥¼åˆ°ç¬¬nå±‚æ¥¼æ¯å±‚æ¥¼å¼€å§‹é€ä¸ªå°è¯•ä½œä¸ºåˆ‡å…¥ç‚¹ (ä¼šè¶…æ—¶)</span></span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i++){</span><br><span class="line">             <span class="comment">//å½“é€‰æ‹©åœ¨ç¬¬iå±‚æ¥¼æ‰”äº†é¸¡è›‹ä¹‹å å¯èƒ½å‡ºç°é¸¡è›‹ç¢äº†å’Œé¸¡è›‹æ²¡ç¢ä¸¤ç§æƒ…å†µï¼š</span></span><br><span class="line">             <span class="comment">//å½“é¸¡è›‹ç¢äº† é—®é¢˜çŠ¶æ€è½¬å«ä¸ºæ±‚k-1ä¸ªé¸¡è›‹ æœç´¢çš„æ¥¼å±‚åŒºé—´å˜ä¸º1~i-1å…±i-1å±‚æ¥¼æ—¶æ±‚è§£</span></span><br><span class="line">             <span class="keyword">int</span> eggBreak=dp(k-<span class="number">1</span>,i-<span class="number">1</span>);</span><br><span class="line">             <span class="comment">//å½“é¸¡è›‹æ²¡ç¢ é—®é¢˜çŠ¶æ€è½¬å«ä¸ºé¸¡è›‹çš„ä¸ªæ•°Kä¸å˜ æœç´¢æ¥¼å±‚åŒºé—´å˜ä¸ºi+1~Nå…±N-iå±‚æ¥¼æ—¶æ±‚è§£</span></span><br><span class="line">             <span class="keyword">int</span> eggUnBreak=dp(k,n-i);</span><br><span class="line">             <span class="comment">//æœ€ç»ˆä»¥iå±‚ä¸ºåˆ‡å…¥ç‚¹æ±‚è§£çš„ç­”æ¡ˆ ä¸ºä¸¤ç§çŠ¶æ€çš„æœ€åæƒ…å†µ å¹¶åŠ ä¸Šiå±‚æ—¶æ“ä½œ1 å¹¶æ›´æ–°æœ€å°å€¼</span></span><br><span class="line">             tmp = Math.min(tmp,Math.max(eggBreak,eggUnBreak)+<span class="number">1</span>);</span><br><span class="line">         }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¬¬äºŒç§ åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼ç›´æ¥æ‰¾åˆ°å¯¹åº”ç‚¹(ACé€šè¿‡)</span></span><br><span class="line">        <span class="comment">//ç¬¬ä¸€ç§çº¿æ€§é€ä¸ªå°è¯•åˆ‡å…¥ç‚¹ ç„¶åæ±‚æ¯ä¸ªåˆ‡å…¥ç‚¹ä¸¤ç§çŠ¶æ€çš„è¾ƒå¤§å€¼ å†æ±‚è¿™äº›æœ€å¤§å€¼ä¹‹ä¸­çš„æœ€å°å€¼ å…¶å®å°±æ˜¯æ±‚è¿™ä¸¤æ¡å•è°ƒé€’å¢å’Œå•è°ƒé€’å‡ç›´çº¿çš„äº¤ç‚¹ ç›¸å½“äºæ±‚ä¸ŠåŠéƒ¨Vå½¢å±±è°·å€¼ äºŒåˆ†æŸ¥æ‰¾æ¥å¿«é€Ÿå¯»æ‰¾è¿™ä¸ªç‚¹</span></span><br><span class="line"><span class="comment">//        int lo=1,hi =n;</span></span><br><span class="line"><span class="comment">//        while(lo&lt;=hi){</span></span><br><span class="line"><span class="comment">//            int mid =(lo+hi)/2;</span></span><br><span class="line"><span class="comment">//            int eggBreak = dp(k-1,mid-1);</span></span><br><span class="line"><span class="comment">//            int eggUnBreak = dp(k,n-mid);</span></span><br><span class="line"><span class="comment">//            if(eggBreak&gt;eggUnBreak){</span></span><br><span class="line"><span class="comment">//                hi = mid-1;</span></span><br><span class="line"><span class="comment">//                tmp = Math.min(tmp,eggBreak+1);</span></span><br><span class="line"><span class="comment">//            }else{</span></span><br><span class="line"><span class="comment">//                lo = mid+1;</span></span><br><span class="line"><span class="comment">//                tmp = Math.min(tmp,eggUnBreak+1);</span></span><br><span class="line"><span class="comment">//            }</span></span><br><span class="line">    <span class="comment">//    }</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ åˆ°å¤‡å¿˜å½•é‡Œ</span></span><br><span class="line">        memo[k][n]=tmp;</span><br><span class="line">        <span class="comment">//è¿”å›å½“å‰kä¸ªé¸¡è›‹nå±‚æ¥¼æ—¶æ±‚è§£çš„å­é—®é¢˜çš„ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> tmp;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        System.out.println(dp(<span class="number">3</span>,<span class="number">1000</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>xæ˜Ÿçƒçš„å±…æ°‘è„¾æ°”ä¸å¤ªå¥½ï¼Œä½†å¥½åœ¨ä»–ä»¬ç”Ÿæ°”çš„æ—¶å€™å”¯ä¸€çš„å¼‚å¸¸ä¸¾åŠ¨æ˜¯ï¼šæ‘”æ‰‹æœºã€‚</p><p>å„å¤§å‚å•†ä¹Ÿå°±çº·çº·æ¨å‡ºå„ç§è€æ‘”å‹æ‰‹æœºã€‚xæ˜Ÿçƒçš„è´¨ç›‘å±€è§„å®šäº†æ‰‹æœºå¿…é¡»ç»è¿‡è€æ‘”æµ‹è¯•ï¼Œå¹¶ä¸”è¯„å®šå‡ºä¸€ä¸ªè€æ‘”æŒ‡æ•°æ¥ï¼Œä¹‹åæ‰å…è®¸ä¸Šå¸‚æµé€šã€‚</p><p>xæ˜Ÿçƒæœ‰å¾ˆå¤šé«˜è€¸å…¥äº‘çš„é«˜å¡”ï¼Œåˆšå¥½å¯ä»¥ç”¨æ¥åšè€æ‘”æµ‹è¯•ã€‚å¡”çš„æ¯ä¸€å±‚é«˜åº¦éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸åœ°çƒä¸Šç¨æœ‰ä¸åŒçš„æ˜¯ï¼Œä»–ä»¬çš„ç¬¬ä¸€å±‚ä¸æ˜¯åœ°é¢ï¼Œè€Œæ˜¯ç›¸å½“äºæˆ‘ä»¬çš„2æ¥¼ã€‚</p><p>å¦‚æœæ‰‹æœºä»ç¬¬7å±‚æ‰”ä¸‹å»æ²¡æ‘”åï¼Œä½†ç¬¬8å±‚æ‘”åäº†ï¼Œåˆ™æ‰‹æœºè€æ‘”æŒ‡æ•°=7ã€‚</p><p>ç‰¹åˆ«åœ°ï¼Œå¦‚æœæ‰‹æœºä»ç¬¬1å±‚æ‰”ä¸‹å»å°±åäº†ï¼Œåˆ™è€æ‘”æŒ‡æ•°=0ã€‚</p><p>å¦‚æœåˆ°äº†å¡”çš„æœ€é«˜å±‚ç¬¬nå±‚æ‰”æ²¡æ‘”åï¼Œåˆ™è€æ‘”æŒ‡æ•°=n</p><p>ä¸ºäº†å‡å°‘æµ‹è¯•æ¬¡æ•°ï¼Œä»æ¯ä¸ªå‚å®¶æŠ½æ ·3éƒ¨æ‰‹æœºå‚åŠ æµ‹è¯•ã€‚</p><p>æŸæ¬¡æµ‹è¯•çš„å¡”é«˜ä¸º1000å±‚ï¼Œå¦‚æœæˆ‘ä»¬æ€»æ˜¯é‡‡ç”¨æœ€ä½³ç­–ç•¥ï¼Œåœ¨æœ€åçš„è¿æ°”ä¸‹æœ€å¤šéœ€è¦æµ‹è¯•å¤šå°‘æ¬¡æ‰èƒ½ç¡®å®šæ‰‹æœºçš„è€æ‘”æŒ‡æ•°å‘¢ï¼Ÿ</p><p>è¯·å¡«å†™è¿™ä¸ªæœ€å¤šæµ‹è¯•æ¬¡æ•°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>{</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10000</span>;j++)</span><br><span class="line">                memo[i][j] = <span class="number">99999999</span>;<span class="comment">//æ‰¾æœ€å°,åˆå§‹åŒ–INF</span></span><br><span class="line">        System.out.println(f(<span class="number">3</span>,<span class="number">1000</span>));</span><br><span class="line">        <span class="comment">//f(k,n)  å½“å‰çš„é¸¡è›‹æ•°  k</span></span><br><span class="line">        <span class="comment">//        éœ€è¦æµ‹è¯•çš„æ¥¼å±‚æ•°  n</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span>[][] memo = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>][<span class="number">10000</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> k,<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">1</span>) <span class="comment">//å½“é¸¡è›‹æ•°åªæœ‰1æ—¶ï¼Œåªèƒ½çº¿æ€§æ‰«ææ‰€æœ‰çš„æ¥¼å±‚ n æœ‰å¤šå°‘å±‚å°±å¾—æ‰”å¤šå°‘æ¬¡ æ³¨æ„é¢˜ç›®æ¡ä»¶æ˜¯è¿æ°”å·®ã€‚</span></span><br><span class="line">            <span class="keyword">return</span> n;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(n&lt;=<span class="number">0</span>) <span class="comment">//å½“æ¥¼å±‚æ•°0æ˜¯ æ²¡æ³•æ‰”é¸¡è›‹</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(memo[k][n]!=<span class="number">99999999</span>)  <span class="comment">//é¿å…é‡å¤è®¡ç®—</span></span><br><span class="line">            <span class="keyword">return</span> memo[k][n];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> result=<span class="number">99999999</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {  <span class="comment">//ç©·ä¸¾æ‰€æœ‰çš„å¯èƒ½é€‰æ‹©</span></span><br><span class="line">            <span class="comment">//å½“é€‰æ‹©åœ¨ç¬¬iå±‚æ¥¼æ‰”äº†é¸¡è›‹ä¹‹å å¯èƒ½å‡ºç°é¸¡è›‹ç¢äº†å’Œé¸¡è›‹æ²¡ç¢ä¸¤ç§æƒ…å†µï¼š</span></span><br><span class="line">            <span class="comment">//å½“é¸¡è›‹ç¢äº† é—®é¢˜çŠ¶æ€è½¬å«ä¸ºæ±‚k-1ä¸ªé¸¡è›‹ æœç´¢çš„æ¥¼å±‚åŒºé—´å˜ä¸º1~i-1å…±i-1å±‚æ¥¼æ—¶æ±‚è§£</span></span><br><span class="line">            <span class="keyword">int</span> eggBreak=f(k-<span class="number">1</span>,i-<span class="number">1</span>);</span><br><span class="line">            <span class="comment">//å½“é¸¡è›‹æ²¡ç¢ é—®é¢˜çŠ¶æ€è½¬å«ä¸ºé¸¡è›‹çš„ä¸ªæ•°Kä¸å˜ æœç´¢æ¥¼å±‚åŒºé—´å˜ä¸ºi+1~Nå…±N-iå±‚æ¥¼æ—¶æ±‚è§£</span></span><br><span class="line">            <span class="keyword">int</span> eggUnBreak=f(k,n-i);</span><br><span class="line">            <span class="comment">//æœ€ç»ˆä»¥iå±‚ä¸ºåˆ‡å…¥ç‚¹æ±‚è§£çš„ç­”æ¡ˆ ä¸ºä¸¤ç§çŠ¶æ€çš„æœ€åæƒ…å†µ å¹¶åŠ ä¸Šiå±‚æ—¶æ“ä½œ1 å¹¶æ›´æ–°æœ€å°å€¼</span></span><br><span class="line"></span><br><span class="line">            result= Math.min(result,</span><br><span class="line">                    Math.max(</span><br><span class="line">                            eggBreak,eggUnBreak</span><br><span class="line">                    )+<span class="number">1</span>    <span class="comment">//1è¡¨ç¤ºåœ¨iå±‚æ—¶è¦æ‰”ä¸€æ¬¡</span></span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line">        memo[k][n]=result;</span><br><span class="line">        <span class="keyword">return</span> memo[k][n];</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸æ—¥æœŸç±»ï¼ˆSimpleDateFormat-Date"><a href="#ğŸŒ¸æ—¥æœŸç±»ï¼ˆSimpleDateFormat-Date" class="headerlink" title="ğŸŒ¸æ—¥æœŸç±»ï¼ˆSimpleDateFormat +Date)"></a>ğŸŒ¸æ—¥æœŸç±»ï¼ˆSimpleDateFormat +Date)</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">        SimpleDateFormat format = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-mm-dd"</span>);</span><br><span class="line">        Date date1 = format.parse(<span class="string">"1921-7-23"</span>);</span><br><span class="line">        Date date2 = format.parse(<span class="string">"2020- 7-1"</span>);</span><br><span class="line">        <span class="keyword">int</span> a = (<span class="keyword">int</span>)((date2.getTime() - date1.getTime()) / <span class="number">1000</span> * <span class="number">60</span>);<span class="comment">//ç›¸éš”å¤šå°‘åˆ†é’Ÿ</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›´æ¥ä½¿ç”¨ Date</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">36138</span> * <span class="number">24</span> * <span class="number">60L</span>;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">        System.out.println(<span class="number">36138</span> * <span class="number">24</span> * <span class="number">60</span>);</span><br><span class="line">        <span class="comment">// longå‹å˜é‡åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œå¦‚æœä¸åŠ â€œLâ€,åˆ™é»˜è®¤ä¸ºintå‹å˜é‡</span></span><br><span class="line">        Date date1 = <span class="keyword">new</span> Date(<span class="number">21</span>, <span class="number">7</span>, <span class="number">23</span>, <span class="number">12</span>, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// 1921</span></span><br><span class="line">        Date date2 = <span class="keyword">new</span> Date(<span class="number">120</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">12</span>, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// 2020</span></span><br><span class="line">        <span class="keyword">long</span> time = date2.getTime() - date1.getTime();</span><br><span class="line">        System.out.println(time / (<span class="number">60000</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸ"><a href="#ğŸ" class="headerlink" title="ğŸ"></a>ğŸ</h3><h4 id="ğŸ‚-fff"><a href="#ğŸ‚-fff" class="headerlink" title="ğŸ‚ fff"></a>ğŸ‚ fff</h4><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸŒ¸&lt;strong&gt;è®°å½•è“æ¡¥æ¯javaBç»„çœèµ›é¢˜ç›®è§£é¢˜æ–¹æ³•æ€»ç»“å¯¹æ¯”&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="è“æ¡¥æ¯" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    
    
      <category term="æ€»ç»“" scheme="https://liudufu.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
      <category term="è“æ¡¥æ¯javaBç»„çœèµ›" scheme="https://liudufu.github.io/tags/%E8%93%9D%E6%A1%A5%E6%9D%AFjavaB%E7%BB%84%E7%9C%81%E8%B5%9B/"/>
    
  </entry>
  
  <entry>
    <title>LeetCodeè‚¡ç¥¨é—®é¢˜ç³»åˆ—é€šè§£</title>
    <link href="https://liudufu.github.io/general_solutions_to_stock_problems/"/>
    <id>https://liudufu.github.io/general_solutions_to_stock_problems/</id>
    <published>2020-11-08T13:37:04.000Z</published>
    <updated>2020-11-08T13:39:03.215Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ğŸè¯´æ˜"><a href="#ğŸè¯´æ˜" class="headerlink" title="ğŸè¯´æ˜"></a>ğŸè¯´æ˜</h3><p>åŸæ–‡å‡ºå¤„ï¼š<a href="https://leetcode-cn.com/circle/article/qiAgHn/" target="_blank" rel="noopener">è‚¡ç¥¨é—®é¢˜</a></p><h2 id="ğŸŒ¸å‰è¨€"><a href="#ğŸŒ¸å‰è¨€" class="headerlink" title="ğŸŒ¸å‰è¨€"></a>ğŸŒ¸å‰è¨€</h2><p>è‚¡ç¥¨é—®é¢˜ä¸€å…±æœ‰å…­é“é¢˜ï¼Œé“¾æ¥å¦‚ä¸‹ï¼š</p><ul><li><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener">121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a></li><li><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank" rel="noopener">122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</a></li><li><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank" rel="noopener">123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III</a></li><li><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iv/" target="_blank" rel="noopener">124.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV</a></li><li><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/" target="_blank" rel="noopener">125.æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ</a></li><li><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/" target="_blank" rel="noopener">126.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹</a></li></ul><a id="more"></a><p>æ¯ä¸ªé—®é¢˜éƒ½æœ‰ä¼˜è´¨çš„é¢˜è§£ï¼Œä½†æ˜¯å¤§å¤šæ•°é¢˜è§£æ²¡æœ‰å»ºç«‹èµ·è¿™äº›é—®é¢˜ä¹‹é—´çš„è”ç³»ï¼Œä¹Ÿæ²¡æœ‰ç»™å‡ºè‚¡ç¥¨é—®é¢˜ç³»åˆ—çš„é€šè§£ã€‚è¿™ç¯‡æ–‡ç« ç»™å‡ºé€‚ç”¨äºå…¨éƒ¨è‚¡ç¥¨é—®é¢˜çš„é€šè§£ï¼Œä»¥åŠå¯¹äºæ¯ä¸ªç‰¹å®šé—®é¢˜çš„ç‰¹è§£ã€‚</p><h2 id="ğŸé€šç”¨æƒ…å†µ"><a href="#ğŸé€šç”¨æƒ…å†µ" class="headerlink" title="ğŸé€šç”¨æƒ…å†µ"></a>ğŸé€šç”¨æƒ…å†µ</h2><p>è¿™ä¸ªæƒ³æ³•åŸºäºå¦‚ä¸‹é—®é¢˜ï¼š<strong>ç»™å®šä¸€ä¸ªè¡¨ç¤ºæ¯å¤©è‚¡ç¥¨ä»·æ ¼çš„æ•°ç»„ï¼Œä»€ä¹ˆå› ç´ å†³å®šäº†å¯ä»¥è·å¾—çš„æœ€å¤§æ”¶ç›Šï¼Ÿ</strong></p><p>ç›¸ä¿¡å¤§å¤šæ•°äººå¯ä»¥å¾ˆå¿«ç»™å‡ºç­”æ¡ˆï¼Œä¾‹å¦‚ã€Œåœ¨å“ªäº›å¤©è¿›è¡Œäº¤æ˜“ä»¥åŠå…è®¸å¤šå°‘æ¬¡äº¤æ˜“ã€ã€‚è¿™äº›å› ç´ å½“ç„¶é‡è¦ï¼Œåœ¨é—®é¢˜æè¿°ä¸­ä¹Ÿæœ‰è¿™äº›å› ç´ ã€‚ç„¶è€Œè¿˜æœ‰ä¸€ä¸ªéšè—ä½†æ˜¯å…³é”®çš„å› ç´ å†³å®šäº†æœ€å¤§æ”¶ç›Šï¼Œä¸‹æ–‡å°†é˜è¿°è¿™ä¸€ç‚¹ã€‚</p><p>é¦–å…ˆä»‹ç»ä¸€äº›ç¬¦å·ï¼š</p><ul><li>ç”¨ <code>n</code> è¡¨ç¤ºè‚¡ç¥¨ä»·æ ¼æ•°ç»„çš„é•¿åº¦ï¼›<br>ç”¨ <code>i</code> è¡¨ç¤ºç¬¬ i å¤©ï¼ˆi çš„å–å€¼èŒƒå›´æ˜¯ 0 åˆ° n - 1ï¼‰ï¼›<br>ç”¨ <code>k</code> è¡¨ç¤ºå…è®¸çš„æœ€å¤§äº¤æ˜“æ¬¡æ•°ï¼›<br>ç”¨ <code>T[i][k]</code> è¡¨ç¤ºåœ¨ç¬¬ <code>i</code> å¤©ç»“æŸæ—¶ï¼Œæœ€å¤šè¿›è¡Œ <code>k</code> æ¬¡äº¤æ˜“çš„æƒ…å†µä¸‹å¯ä»¥è·å¾—çš„æœ€å¤§æ”¶ç›Šã€‚</li></ul><p>åŸºå‡†æƒ…å†µæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š<code>T[-1][k] = T[i][0] = 0</code>ï¼Œè¡¨ç¤ºæ²¡æœ‰è¿›è¡Œè‚¡ç¥¨äº¤æ˜“æ—¶æ²¡æœ‰æ”¶ç›Šï¼ˆæ³¨æ„ç¬¬ä¸€å¤©å¯¹åº” <code>i = 0</code>ï¼Œå› æ­¤ <code>i = -1</code> è¡¨ç¤ºæ²¡æœ‰è‚¡ç¥¨äº¤æ˜“ï¼‰ã€‚ç°åœ¨å¦‚æœå¯ä»¥å°† <code>T[i][k]</code> å…³è”åˆ°å­é—®é¢˜ï¼Œä¾‹å¦‚ <code>T[i - 1][k]ã€T[i][k - 1]ã€T[i - 1][k - 1]</code> ç­‰å­é—®é¢˜ï¼Œå°±èƒ½å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¹¶å¯¹è¿™ä¸ªé—®é¢˜æ±‚è§£ã€‚å¦‚ä½•å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹å‘¢ï¼Ÿ</p><p>æœ€ç›´æ¥çš„åŠæ³•æ˜¯çœ‹ç¬¬ <code>i</code> å¤©å¯èƒ½çš„æ“ä½œã€‚æœ‰å¤šå°‘ä¸ªé€‰é¡¹ï¼Ÿç­”æ¡ˆæ˜¯ä¸‰ä¸ªï¼š<strong>ä¹°å…¥ã€å–å‡ºã€ä¼‘æ¯</strong>ã€‚åº”è¯¥é€‰æ‹©å“ªä¸ªæ“ä½œï¼Ÿç­”æ¡ˆæ˜¯ï¼šå¹¶ä¸çŸ¥é“å“ªä¸ªæ“ä½œæ˜¯æœ€å¥½çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡è®¡ç®—å¾—åˆ°é€‰æ‹©æ¯ä¸ªæ“ä½œå¯ä»¥å¾—åˆ°çš„æœ€å¤§æ”¶ç›Šã€‚å‡è®¾æ²¡æœ‰åˆ«çš„é™åˆ¶æ¡ä»¶ï¼Œåˆ™å¯ä»¥å°è¯•æ¯ä¸€ç§æ“ä½œï¼Œå¹¶é€‰æ‹©å¯ä»¥æœ€å¤§åŒ–æ”¶ç›Šçš„ä¸€ç§æ“ä½œã€‚ä½†æ˜¯ï¼Œé¢˜ç›®ä¸­ç¡®å®æœ‰é™åˆ¶æ¡ä»¶ï¼Œè§„å®šä¸èƒ½åŒæ—¶è¿›è¡Œå¤šæ¬¡äº¤æ˜“ï¼Œå› æ­¤å¦‚æœå†³å®šåœ¨ç¬¬ <code>i</code> å¤©<strong>ä¹°å…¥</strong>ï¼Œåœ¨ä¹°å…¥ä¹‹å‰å¿…é¡»æŒæœ‰ 0 ä»½è‚¡ç¥¨ï¼Œå¦‚æœå†³å®šåœ¨ç¬¬ <code>i</code> å¤©<strong>å–å‡º</strong>ï¼Œåœ¨å–å‡ºä¹‹å‰å¿…é¡»æ°å¥½æŒæœ‰ 1 ä»½è‚¡ç¥¨ã€‚æŒæœ‰è‚¡ç¥¨çš„æ•°é‡æ˜¯ä¸Šæ–‡æåŠåˆ°çš„éšè—å› ç´ ï¼Œè¯¥å› ç´ å½±å“ç¬¬ i å¤©å¯ä»¥è¿›è¡Œçš„æ“ä½œï¼Œè¿›è€Œå½±å“æœ€å¤§æ”¶ç›Šã€‚</p><p>å› æ­¤å¯¹ <code>T[i][k]</code> çš„å®šä¹‰éœ€è¦åˆ†æˆä¸¤é¡¹ï¼š</p><ul><li><code>T[i][k][0]</code> è¡¨ç¤ºåœ¨ç¬¬ <code>i</code> å¤©ç»“æŸæ—¶ï¼Œ<strong>æœ€å¤š</strong>è¿›è¡Œ <code>k</code> æ¬¡äº¤æ˜“ä¸”åœ¨è¿›è¡Œæ“ä½œåæŒæœ‰ 0 ä»½è‚¡ç¥¨çš„æƒ…å†µä¸‹å¯ä»¥è·å¾—çš„æœ€å¤§æ”¶ç›Šï¼›</li><li><code>T[i][k][1]</code> è¡¨ç¤ºåœ¨ç¬¬ <code>i</code> å¤©ç»“æŸæ—¶ï¼Œ<strong>æœ€å¤š</strong>è¿›è¡Œ <code>k</code> æ¬¡äº¤æ˜“ä¸”åœ¨è¿›è¡Œæ“ä½œåæŒæœ‰ 1 ä»½è‚¡ç¥¨çš„æƒ…å†µä¸‹å¯ä»¥è·å¾—çš„æœ€å¤§æ”¶ç›Šã€‚</li></ul><p>ä½¿ç”¨æ–°çš„çŠ¶æ€è¡¨ç¤ºä¹‹åï¼Œå¯ä»¥å¾—åˆ°åŸºå‡†æƒ…å†µå’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚</p><p>åŸºå‡†æƒ…å†µï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T[-1][k][0] = 0, T[-1][k][1] = -Infinity</span><br><span class="line">T[i][0][0] = 0, T[i][0][1] = -Infinity</span><br></pre></td></tr></tbody></table></figure><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T[i][k][0] = max(T[i - 1][k][0], T[i - 1][k][1] + prices[i])</span><br><span class="line">T[i][k][1] = max(T[i - 1][k][1], T[i - 1][k - 1][0] - prices[i])</span><br></pre></td></tr></tbody></table></figure><p>åŸºå‡†æƒ…å†µä¸­ï¼Œ<code>T[-1][k][0] = T[i][0][0] = 0</code> çš„å«ä¹‰å’Œä¸Šæ–‡ç›¸åŒï¼Œ<code>T[-1][k][1] = T[i][0][1] = -Infinity</code> çš„å«ä¹‰æ˜¯åœ¨æ²¡æœ‰è¿›è¡Œè‚¡ç¥¨äº¤æ˜“æ—¶ä¸å…è®¸æŒæœ‰è‚¡ç¥¨ã€‚</p><p>å¯¹äºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­çš„ <code>T[i][k][0]</code>ï¼Œç¬¬ <code>i</code> å¤©è¿›è¡Œçš„æ“ä½œåªèƒ½æ˜¯ä¼‘æ¯æˆ–å–å‡ºï¼Œå› ä¸ºåœ¨ç¬¬ <code>i</code> å¤©ç»“æŸæ—¶æŒæœ‰çš„è‚¡ç¥¨æ•°é‡æ˜¯ 0ã€‚<code>T[i - 1][k][0]</code> æ˜¯ä¼‘æ¯æ“ä½œå¯ä»¥å¾—åˆ°çš„æœ€å¤§æ”¶ç›Šï¼Œ<code>T[i - 1][k][1] + prices[i]</code> æ˜¯å–å‡ºæ“ä½œå¯ä»¥å¾—åˆ°çš„æœ€å¤§æ”¶ç›Šã€‚æ³¨æ„åˆ°å…è®¸çš„æœ€å¤§äº¤æ˜“æ¬¡æ•°æ˜¯ä¸å˜çš„ï¼Œå› ä¸ºæ¯æ¬¡äº¤æ˜“åŒ…å«ä¸¤æ¬¡æˆå¯¹çš„æ“ä½œï¼Œä¹°å…¥å’Œå–å‡ºã€‚åªæœ‰ä¹°å…¥æ“ä½œä¼šæ”¹å˜å…è®¸çš„æœ€å¤§äº¤æ˜“æ¬¡æ•°ã€‚</p><p>å¯¹äºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­çš„ <code>T[i][k][1]</code>ï¼Œç¬¬ <code>i</code> å¤©è¿›è¡Œçš„æ“ä½œåªèƒ½æ˜¯ä¼‘æ¯æˆ–ä¹°å…¥ï¼Œå› ä¸ºåœ¨ç¬¬ <code>i</code> å¤©ç»“æŸæ—¶æŒæœ‰çš„è‚¡ç¥¨æ•°é‡æ˜¯ 1ã€‚<code>T[i - 1][k][1]</code> æ˜¯ä¼‘æ¯æ“ä½œå¯ä»¥å¾—åˆ°çš„æœ€å¤§æ”¶ç›Šï¼Œ<code>T[i - 1][k - 1][0] - prices[i]</code> æ˜¯ä¹°å…¥æ“ä½œå¯ä»¥å¾—åˆ°çš„æœ€å¤§æ”¶ç›Šã€‚æ³¨æ„åˆ°å…è®¸çš„æœ€å¤§äº¤æ˜“æ¬¡æ•°å‡å°‘äº†ä¸€æ¬¡ï¼Œå› ä¸ºæ¯æ¬¡ä¹°å…¥æ“ä½œä¼šä½¿ç”¨ä¸€æ¬¡äº¤æ˜“ã€‚</p><p>ä¸ºäº†å¾—åˆ°æœ€åä¸€å¤©ç»“æŸæ—¶çš„æœ€å¤§æ”¶ç›Šï¼Œå¯ä»¥éå†è‚¡ç¥¨ä»·æ ¼æ•°ç»„ï¼Œæ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹è®¡ç®— <code>T[i][k][0]</code> å’Œ <code>T[i][k][1]</code> çš„å€¼ã€‚æœ€ç»ˆç­”æ¡ˆæ˜¯ <code>T[n - 1][k][0]</code>ï¼Œå› ä¸ºç»“æŸæ—¶æŒæœ‰ 0 ä»½è‚¡ç¥¨çš„æ”¶ç›Šä¸€å®šå¤§äºæŒæœ‰ 1 ä»½è‚¡ç¥¨çš„æ”¶ç›Šã€‚</p><h2 id="ğŸåº”ç”¨äºç‰¹æ®Šæƒ…å†µ"><a href="#ğŸåº”ç”¨äºç‰¹æ®Šæƒ…å†µ" class="headerlink" title="ğŸåº”ç”¨äºç‰¹æ®Šæƒ…å†µ"></a>ğŸåº”ç”¨äºç‰¹æ®Šæƒ…å†µ</h2><p>ä¸Šè¿°å…­ä¸ªè‚¡ç¥¨é—®é¢˜æ˜¯æ ¹æ® <code>k</code> çš„å€¼è¿›è¡Œåˆ†ç±»çš„ï¼Œå…¶ä¸­ <code>k</code> æ˜¯å…è®¸çš„æœ€å¤§äº¤æ˜“æ¬¡æ•°ã€‚æœ€åä¸¤ä¸ªé—®é¢˜æœ‰é™„åŠ é™åˆ¶ï¼ŒåŒ…æ‹¬ã€Œå†·å†»æœŸã€å’Œã€Œæ‰‹ç»­è´¹ã€ã€‚é€šè§£å¯ä»¥åº”ç”¨äºæ¯ä¸ªè‚¡ç¥¨é—®é¢˜ã€‚</p><h4 id="æƒ…å†µä¸€ï¼šk-1"><a href="#æƒ…å†µä¸€ï¼šk-1" class="headerlink" title="æƒ…å†µä¸€ï¼šk = 1"></a><strong>æƒ…å†µä¸€ï¼šk = 1</strong></h4><p>æƒ…å†µä¸€å¯¹åº”çš„é¢˜ç›®æ˜¯<strong>ã€Œ121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºã€</strong>ã€‚</p><p>å¯¹äºæƒ…å†µä¸€ï¼Œæ¯å¤©æœ‰ä¸¤ä¸ªæœªçŸ¥å˜é‡ï¼š<code>T[i][1][0]</code> å’Œ <code>T[i][1][1]</code>ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T[i][1][0] = max(T[i - 1][1][0], T[i - 1][1][1] + prices[i])</span><br><span class="line">T[i][1][1] = max(T[i - 1][1][1], T[i - 1][0][0] - prices[i]) = max(T[i - 1][1][1], -prices[i])</span><br></pre></td></tr></tbody></table></figure><p>ç¬¬äºŒä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹åˆ©ç”¨äº† <code>T[i][0][0] = 0</code>ã€‚</p><p>æ ¹æ®ä¸Šè¿°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¯ä»¥å†™å‡ºæ—¶é—´å¤æ‚åº¦ä¸º O(n)å’Œç©ºé—´å¤æ‚åº¦ä¸º O(n) çš„è§£æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], -prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[length - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ³¨æ„åˆ°ç¬¬ <code>i</code> å¤©çš„æœ€å¤§æ”¶ç›Šåªå’Œç¬¬ <code>i - 1</code> å¤©çš„æœ€å¤§æ”¶ç›Šç›¸å…³ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥é™åˆ° O(1)ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> profit0 = <span class="number">0</span>, profit1 = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            profit0 = Math.max(profit0, profit1 + prices[i]);</span><br><span class="line">            profit1 = Math.max(profit1, -prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> profit0;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç°åœ¨å¯¹ä¸Šè¿°è§£æ³•è¿›è¡Œåˆ†æã€‚å¯¹äºå¾ªç¯ä¸­çš„éƒ¨åˆ†ï¼Œ<code>profit1</code> å®é™…ä¸Šåªæ˜¯è¡¨ç¤ºåˆ°ç¬¬ <code>i</code> å¤©çš„è‚¡ç¥¨ä»·æ ¼çš„ç›¸åæ•°ä¸­çš„æœ€å¤§å€¼ï¼Œæˆ–è€…ç­‰ä»·åœ°è¡¨ç¤ºåˆ°ç¬¬ <code>i</code> å¤©çš„è‚¡ç¥¨ä»·æ ¼çš„æœ€å°å€¼ã€‚å¯¹äº <code>profit0</code>ï¼Œåªéœ€è¦å†³å®šå–å‡ºå’Œä¼‘æ¯ä¸­çš„å“ªé¡¹æ“ä½œå¯ä»¥å¾—åˆ°æ›´é«˜çš„æ”¶ç›Šã€‚å¦‚æœè¿›è¡Œå–å‡ºæ“ä½œï¼Œåˆ™ä¹°å…¥è‚¡ç¥¨çš„ä»·æ ¼ä¸º <code>profit1</code>ï¼Œå³ç¬¬ i å¤©ä¹‹å‰ï¼ˆä¸å«ç¬¬ <code>i</code> å¤©ï¼‰çš„æœ€ä½è‚¡ç¥¨ä»·æ ¼ã€‚è¿™æ­£æ˜¯ç°å®ä¸­ä¸ºäº†è·å¾—æœ€å¤§æ”¶ç›Šä¼šåšçš„äº‹æƒ…ã€‚ä½†æ˜¯è¿™ç§åšæ³•ä¸æ˜¯å”¯ä¸€é€‚ç”¨äºè¿™ç§æƒ…å†µçš„è§£å†³æ–¹æ¡ˆã€‚è¯»è€…å¯èƒ½åœ¨ è¿™é‡Œ æ‰¾åˆ°åˆ«çš„å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p><h4 id="æƒ…å†µäºŒï¼šk-ä¸ºæ­£æ— ç©·"><a href="#æƒ…å†µäºŒï¼šk-ä¸ºæ­£æ— ç©·" class="headerlink" title="æƒ…å†µäºŒï¼šk ä¸ºæ­£æ— ç©·"></a><strong>æƒ…å†µäºŒï¼šk ä¸ºæ­£æ— ç©·</strong></h4><p>æƒ…å†µäºŒå¯¹åº”çš„é¢˜ç›®æ˜¯<strong>ã€Œ122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIã€ã€‚</strong></p><p>å¦‚æœ k ä¸ºæ­£æ— ç©·ï¼Œåˆ™ <code>k</code> å’Œ k - 1 å¯ä»¥çœ‹æˆæ˜¯ç›¸åŒçš„ï¼Œå› æ­¤æœ‰ <code>T[i - 1][k - 1][0] = T[i - 1][k][0]</code> å’Œ <code>T[i - 1][k - 1][1] = T[i - 1][k][1]</code>ã€‚æ¯å¤©ä»æœ‰ä¸¤ä¸ªæœªçŸ¥å˜é‡ï¼š<code>T[i][k][0]</code> å’Œ <code>T[i][k][1]</code>ï¼Œå…¶ä¸­ <code>~k~</code> ä¸ºæ­£æ— ç©·ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T[i][k][0] = max(T[i - 1][k][0], T[i - 1][k][1] + prices[i])</span><br><span class="line">T[i][k][1] = max(T[i - 1][k][1], T[i - 1][k - 1][0] - prices[i]) = max(T[i - 1][k][1], T[i - 1][k][0] - prices[i])</span><br></pre></td></tr></tbody></table></figure><p>ç¬¬äºŒä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹åˆ©ç”¨äº† <code>T[i - 1][k - 1][0] = T[i - 1][k][0]</code>ã€‚</p><p>æ ¹æ®ä¸Šè¿°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¯ä»¥å†™å‡ºæ—¶é—´å¤æ‚åº¦ä¸º O(n) å’Œç©ºé—´å¤æ‚åº¦ä¸º O(n) çš„è§£æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[length - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ³¨æ„åˆ°ç¬¬ <code>i</code> å¤©çš„æœ€å¤§æ”¶ç›Šåªå’Œç¬¬ <code>i - 1</code> å¤©çš„æœ€å¤§æ”¶ç›Šç›¸å…³ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥é™åˆ° O(1)ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> profit0 = <span class="number">0</span>, profit1 = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            <span class="keyword">int</span> newProfit0 = Math.max(profit0, profit1 + prices[i]);</span><br><span class="line">            <span class="keyword">int</span> newProfit1 = Math.max(profit1, profit0 - prices[i]);</span><br><span class="line">            profit0 = newProfit0;</span><br><span class="line">            profit1 = newProfit1;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> profit0;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™ä¸ªè§£æ³•æä¾›äº†è·å¾—æœ€å¤§æ”¶ç›Šçš„è´ªå¿ƒç­–ç•¥ï¼šå¯èƒ½çš„æƒ…å†µä¸‹ï¼Œåœ¨æ¯ä¸ªå±€éƒ¨æœ€å°å€¼ä¹°å…¥è‚¡ç¥¨ï¼Œç„¶ååœ¨ä¹‹åé‡åˆ°çš„ç¬¬ä¸€ä¸ªå±€éƒ¨æœ€å¤§å€¼å–å‡ºè‚¡ç¥¨ã€‚è¿™ä¸ªåšæ³•ç­‰ä»·äºæ‰¾åˆ°è‚¡ç¥¨ä»·æ ¼æ•°ç»„ä¸­çš„é€’å¢å­æ•°ç»„ï¼Œå¯¹äºæ¯ä¸ªé€’å¢å­æ•°ç»„ï¼Œåœ¨å¼€å§‹ä½ç½®ä¹°å…¥å¹¶åœ¨ç»“æŸä½ç½®å–å‡ºã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™å’Œç´¯è®¡æ”¶ç›Šæ˜¯ç›¸åŒçš„ï¼Œåªè¦è¿™æ ·çš„æ“ä½œçš„æ”¶ç›Šä¸ºæ­£ã€‚</p><h4 id="æƒ…å†µä¸‰ï¼šk-2"><a href="#æƒ…å†µä¸‰ï¼šk-2" class="headerlink" title="æƒ…å†µä¸‰ï¼šk = 2"></a>æƒ…å†µä¸‰ï¼šk = 2</h4><p>æƒ…å†µä¸‰å¯¹åº”çš„é¢˜ç›®æ˜¯<strong>ã€Œ123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIIã€</strong>ã€‚</p><p>æƒ…å†µä¸‰å’Œæƒ…å†µä¸€ç›¸ä¼¼ï¼ŒåŒºåˆ«ä¹‹å¤„æ˜¯ï¼Œå¯¹äºæƒ…å†µä¸‰ï¼Œæ¯å¤©æœ‰å››ä¸ªæœªçŸ¥å˜é‡ï¼š<code>T[i][1][0]ã€T[i][1][1]ã€T[i][2][0]ã€T[i][2][1]</code>ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">T[i][2][0] = max(T[i - 1][2][0], T[i - 1][2][1] + prices[i])</span><br><span class="line">T[i][2][1] = max(T[i - 1][2][1], T[i - 1][1][0] - prices[i])</span><br><span class="line">T[i][1][0] = max(T[i - 1][1][0], T[i - 1][1][1] + prices[i])</span><br><span class="line">T[i][1][1] = max(T[i - 1][1][1], T[i - 1][0][0] - prices[i]) = max(T[i - 1][1][1], -prices[i])</span><br></pre></td></tr></tbody></table></figure><p>ç¬¬å››ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹åˆ©ç”¨äº† <code>T[i][0][0] = 0</code>ã€‚</p><p>æ ¹æ®ä¸Šè¿°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¯ä»¥å†™å‡ºæ—¶é—´å¤æ‚åº¦ä¸º O(n)å’Œç©ºé—´å¤æ‚åº¦ä¸º O(n)çš„è§£æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">int</span>[][][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][<span class="number">3</span>][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">2</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">2</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            dp[i][<span class="number">2</span>][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">2</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">2</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][<span class="number">2</span>][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">2</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">            dp[i][<span class="number">1</span>][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][<span class="number">1</span>][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">0</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[length - <span class="number">1</span>][<span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ³¨æ„åˆ°ç¬¬ <code>i</code> å¤©çš„æœ€å¤§æ”¶ç›Šåªå’Œç¬¬ <code>i - 1</code> å¤©çš„æœ€å¤§æ”¶ç›Šç›¸å…³ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥é™åˆ° O(1)ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> profitOne0 = <span class="number">0</span>, profitOne1 = -prices[<span class="number">0</span>], profitTwo0 = <span class="number">0</span>, profitTwo1 = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            profitTwo0 = Math.max(profitTwo0, profitTwo1 + prices[i]);</span><br><span class="line">            profitTwo1 = Math.max(profitTwo1, profitOne0 - prices[i]);</span><br><span class="line">            profitOne0 = Math.max(profitOne0, profitOne1 + prices[i]);</span><br><span class="line">            profitOne1 = Math.max(profitOne1, -prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> profitTwo0;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="æƒ…å†µå››ï¼šk-ä¸ºä»»æ„å€¼"><a href="#æƒ…å†µå››ï¼šk-ä¸ºä»»æ„å€¼" class="headerlink" title="æƒ…å†µå››ï¼šk ä¸ºä»»æ„å€¼"></a>æƒ…å†µå››ï¼šk ä¸ºä»»æ„å€¼</h4><p>æƒ…å†µå››å¯¹åº”çš„é¢˜ç›®æ˜¯<strong>ã€Œ188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IVã€ã€‚</strong></p><p>æƒ…å†µå››æ˜¯æœ€é€šç”¨çš„æƒ…å†µï¼Œå¯¹äºæ¯ä¸€å¤©éœ€è¦ä½¿ç”¨ä¸åŒçš„ <code>k</code> å€¼æ›´æ–°æ‰€æœ‰çš„æœ€å¤§æ”¶ç›Šï¼Œå¯¹åº”æŒæœ‰ 0 ä»½è‚¡ç¥¨æˆ– 1 ä»½è‚¡ç¥¨ã€‚å¦‚æœ <code>k</code> è¶…è¿‡ä¸€ä¸ªä¸´ç•Œå€¼ï¼Œæœ€å¤§æ”¶ç›Šå°±ä¸å†å–å†³äºå…è®¸çš„æœ€å¤§äº¤æ˜“æ¬¡æ•°ï¼Œè€Œæ˜¯å–å†³äºè‚¡ç¥¨ä»·æ ¼æ•°ç»„çš„é•¿åº¦ï¼Œå› æ­¤å¯ä»¥è¿›è¡Œä¼˜åŒ–ã€‚é‚£ä¹ˆè¿™ä¸ªä¸´ç•Œå€¼æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ä¸€ä¸ªæœ‰æ”¶ç›Šçš„äº¤æ˜“è‡³å°‘éœ€è¦ä¸¤å¤©ï¼ˆåœ¨å‰ä¸€å¤©ä¹°å…¥ï¼Œåœ¨åä¸€å¤©å–å‡ºï¼Œå‰ææ˜¯ä¹°å…¥ä»·æ ¼ä½äºå–å‡ºä»·æ ¼ï¼‰ã€‚å¦‚æœè‚¡ç¥¨ä»·æ ¼æ•°ç»„çš„é•¿åº¦ä¸º nï¼Œåˆ™æœ‰æ”¶ç›Šçš„äº¤æ˜“çš„æ•°é‡æœ€å¤šä¸º n / 2ï¼ˆæ•´æ•°é™¤æ³•ï¼‰ã€‚å› æ­¤ k çš„ä¸´ç•Œå€¼æ˜¯ <code>n / 2</code>ã€‚å¦‚æœç»™å®šçš„ k ä¸å°äºä¸´ç•Œå€¼ï¼Œå³ <code>k &gt;= n / 2</code>ï¼Œåˆ™å¯ä»¥å°† k æ‰©å±•ä¸ºæ­£æ— ç©·ï¼Œæ­¤æ—¶é—®é¢˜ç­‰ä»·äºæƒ…å†µäºŒã€‚</p><p>æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¯ä»¥å†™å‡ºæ—¶é—´å¤æ‚åº¦ä¸º O(nk) å’Œç©ºé—´å¤æ‚åº¦ä¸º O(nk) çš„è§£æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">if</span> (k &gt;= length / <span class="number">2</span>) {</span><br><span class="line">            <span class="keyword">return</span> maxProfit(prices);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span>[][][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][k + <span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; i++) {</span><br><span class="line">            dp[<span class="number">0</span>][i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">            dp[<span class="number">0</span>][i][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = k; j &gt; <span class="number">0</span>; j--) {</span><br><span class="line">                dp[i][j][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][j][<span class="number">0</span>], dp[i - <span class="number">1</span>][j][<span class="number">1</span>] + prices[i]);</span><br><span class="line">                dp[i][j][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][j][<span class="number">1</span>], dp[i - <span class="number">1</span>][j - <span class="number">1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[length - <span class="number">1</span>][k][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[length - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ³¨æ„åˆ°ç¬¬ <code>i</code> å¤©çš„æœ€å¤§æ”¶ç›Šåªå’Œç¬¬ <code>i - 1</code> å¤©çš„æœ€å¤§æ”¶ç›Šç›¸å…³ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥é™åˆ° O(k)ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">if</span> (k &gt;= length / <span class="number">2</span>) {</span><br><span class="line">            <span class="keyword">return</span> maxProfit(prices);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[k + <span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; i++) {</span><br><span class="line">            dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">            dp[i][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = k; j &gt; <span class="number">0</span>; j--) {</span><br><span class="line">                dp[j][<span class="number">0</span>] = Math.max(dp[j][<span class="number">0</span>], dp[j][<span class="number">1</span>] + prices[i]);</span><br><span class="line">                dp[j][<span class="number">1</span>] = Math.max(dp[j][<span class="number">1</span>], dp[j - <span class="number">1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[k][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> profit0 = <span class="number">0</span>, profit1 = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            <span class="keyword">int</span> newProfit0 = Math.max(profit0, profit1 + prices[i]);</span><br><span class="line">            <span class="keyword">int</span> newProfit1 = Math.max(profit1, profit0 - prices[i]);</span><br><span class="line">            profit0 = newProfit0;</span><br><span class="line">            profit1 = newProfit1;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> profit0;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœä¸æ ¹æ® <code>k</code> çš„å€¼è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨ <code>k</code> çš„å€¼å¾ˆå¤§çš„æ—¶å€™ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶ã€‚</p><p>è¯¥è§£æ³•ä¸ <a href="https://discuss.leetcode.com/topic/8984/a-concise-dp-solution-in-java" target="_blank" rel="noopener">è¿™é‡Œ</a> çš„è§£æ³•ç›¸ä¼¼ã€‚å¯¹äº¤æ˜“æ¬¡æ•°çš„å¾ªç¯ä½¿ç”¨åå‘å¾ªç¯æ˜¯ä¸ºäº†é¿å…ä½¿ç”¨ä¸´æ—¶å˜é‡ã€‚</p><h4 id="æƒ…å†µäº”ï¼šk-ä¸ºæ­£æ— ç©·ä½†æœ‰å†·å´æ—¶é—´"><a href="#æƒ…å†µäº”ï¼šk-ä¸ºæ­£æ— ç©·ä½†æœ‰å†·å´æ—¶é—´" class="headerlink" title="æƒ…å†µäº”ï¼šk ä¸ºæ­£æ— ç©·ä½†æœ‰å†·å´æ—¶é—´"></a>æƒ…å†µäº”ï¼šk ä¸ºæ­£æ— ç©·ä½†æœ‰å†·å´æ—¶é—´</h4><p>æƒ…å†µäº”å¯¹åº”çš„é¢˜ç›®æ˜¯<strong>ã€Œ309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸã€ã€‚</strong></p><p>ç”±äºå…·æœ‰ç›¸åŒçš„ <code>k</code> å€¼ï¼Œå› æ­¤æƒ…å†µäº”å’Œæƒ…å†µäºŒéå¸¸ç›¸ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºæƒ…å†µäº”æœ‰ã€Œå†·å´æ—¶é—´ã€çš„é™åˆ¶ï¼Œå› æ­¤éœ€è¦å¯¹çŠ¶æ€è½¬ç§»æ–¹ç¨‹è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚</p><p>æƒ…å†µäºŒçš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T[i][k][0] = max(T[i - 1][k][0], T[i - 1][k][1] + prices[i])</span><br><span class="line">T[i][k][1] = max(T[i - 1][k][1], T[i - 1][k][0] - prices[i])</span><br></pre></td></tr></tbody></table></figure><p>ä½†æ˜¯åœ¨æœ‰ã€Œå†·å´æ—¶é—´ã€çš„æƒ…å†µä¸‹ï¼Œå¦‚æœåœ¨ç¬¬ <code>i - 1</code> å¤©å–å‡ºäº†è‚¡ç¥¨ï¼Œå°±ä¸èƒ½åœ¨ç¬¬ i å¤©ä¹°å…¥è‚¡ç¥¨ã€‚å› æ­¤ï¼Œå¦‚æœè¦åœ¨ç¬¬ i å¤©ä¹°å…¥è‚¡ç¥¨ï¼Œç¬¬äºŒä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­å°±ä¸èƒ½ä½¿ç”¨ <code>T[i - 1][k][0]</code>ï¼Œè€Œåº”è¯¥ä½¿ç”¨ <code>T[i - 2][k][0]</code>ã€‚çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­çš„åˆ«çš„é¡¹ä¿æŒä¸å˜ï¼Œæ–°çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T[i][k][0] = max(T[i - 1][k][0], T[i - 1][k][1] + prices[i])</span><br><span class="line">T[i][k][1] = max(T[i - 1][k][1], T[i - 2][k][0] - prices[i])</span><br></pre></td></tr></tbody></table></figure><p>æ ¹æ®ä¸Šè¿°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¯ä»¥å†™å‡ºæ—¶é—´å¤æ‚åº¦ä¸º O(n) å’Œç©ºé—´å¤æ‚åº¦ä¸º O(n)çš„è§£æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], (i &gt;= <span class="number">2</span> ? dp[i - <span class="number">2</span>][<span class="number">0</span>] : <span class="number">0</span>) - prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[length - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ³¨æ„åˆ°ç¬¬ <code>i</code> å¤©çš„æœ€å¤§æ”¶ç›Šåªå’Œç¬¬ <code>i - 1</code> å¤©å’Œç¬¬ <code>i - 2</code> å¤©çš„æœ€å¤§æ”¶ç›Šç›¸å…³ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥é™åˆ° O(1)ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> prevProfit0 = <span class="number">0</span>, profit0 = <span class="number">0</span>, profit1 = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            <span class="keyword">int</span> nextProfit0 = Math.max(profit0, profit1 + prices[i]);</span><br><span class="line">            <span class="keyword">int</span> nextProfit1 = Math.max(profit1, prevProfit0 - prices[i]);</span><br><span class="line">            prevProfit0 = profit0;</span><br><span class="line">            profit0 = nextProfit0;</span><br><span class="line">            profit1 = nextProfit1;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> profit0;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><a href="https://leetcode.com/dietpepsi" target="_blank" rel="noopener">dietpepsi</a> åœ¨ <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/discuss/75927/share-my-thinking-process" target="_blank" rel="noopener">è¿™é‡Œ</a> åˆ†äº«äº†ä¸€ä¸ªå¾ˆå¥½çš„è§£æ³•ï¼Œå¹¶åŠ å…¥äº†æ€è€ƒè¿‡ç¨‹ï¼Œè¯¥è§£æ³•å’Œä¸Šé¢çš„è§£æ³•æ˜¯ç›¸åŒçš„ã€‚</p><h4 id="æƒ…å†µå…­ï¼šk-ä¸ºæ­£æ— ç©·ä½†æœ‰æ‰‹ç»­è´¹"><a href="#æƒ…å†µå…­ï¼šk-ä¸ºæ­£æ— ç©·ä½†æœ‰æ‰‹ç»­è´¹" class="headerlink" title="æƒ…å†µå…­ï¼šk ä¸ºæ­£æ— ç©·ä½†æœ‰æ‰‹ç»­è´¹"></a>æƒ…å†µå…­ï¼šk ä¸ºæ­£æ— ç©·ä½†æœ‰æ‰‹ç»­è´¹</h4><p>æƒ…å†µå…­å¯¹åº”çš„é¢˜ç›®æ˜¯<strong>ã€Œ714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ã€ã€‚</strong></p><p>ç”±äºå…·æœ‰ç›¸åŒçš„ <code>k</code> å€¼ï¼Œå› æ­¤æƒ…å†µå…­å’Œæƒ…å†µäºŒéå¸¸ç›¸ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºæƒ…å†µå…­æœ‰ã€Œæ‰‹ç»­è´¹ã€ï¼Œå› æ­¤éœ€è¦å¯¹çŠ¶æ€è½¬ç§»æ–¹ç¨‹è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚</p><p>æƒ…å†µäºŒçš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T[i][k][0] = max(T[i - 1][k][0], T[i - 1][k][1] + prices[i])</span><br><span class="line">T[i][k][1] = max(T[i - 1][k][1], T[i - 1][k][0] - prices[i])</span><br></pre></td></tr></tbody></table></figure><p>ç”±äºéœ€è¦å¯¹æ¯æ¬¡äº¤æ˜“ä»˜æ‰‹ç»­è´¹ï¼Œå› æ­¤åœ¨æ¯æ¬¡ä¹°å…¥æˆ–å–å‡ºè‚¡ç¥¨ä¹‹åçš„æ”¶ç›Šéœ€è¦æ‰£é™¤æ‰‹ç»­è´¹ï¼Œæ–°çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ã€‚</p><p>ç¬¬ä¸€ç§è¡¨ç¤ºæ–¹æ³•ï¼Œåœ¨æ¯æ¬¡ä¹°å…¥è‚¡ç¥¨æ—¶æ‰£é™¤æ‰‹ç»­è´¹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T[i][k][0] = max(T[i - 1][k][0], T[i - 1][k][1] + prices[i])</span><br><span class="line">T[i][k][1] = max(T[i - 1][k][1], T[i - 1][k][0] - prices[i] - fee)</span><br></pre></td></tr></tbody></table></figure><p>ç¬¬äºŒç§è¡¨ç¤ºæ–¹æ³•ï¼Œåœ¨æ¯æ¬¡å–å‡ºè‚¡ç¥¨æ—¶æ‰£é™¤æ‰‹ç»­è´¹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T[i][k][0] = max(T[i - 1][k][0], T[i - 1][k][1] + prices[i] - fee)</span><br><span class="line">T[i][k][1] = max(T[i - 1][k][1], T[i - 1][k][0] - prices[i])</span><br></pre></td></tr></tbody></table></figure><p>æ ¹æ®ä¸Šè¿°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¯ä»¥å†™å‡ºæ—¶é—´å¤æ‚åº¦ä¸º O(n) å’Œç©ºé—´å¤æ‚åº¦ä¸º O(n)çš„è§£æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices, <span class="keyword">int</span> fee)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>] - fee;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">0</span>] - prices[i] - fee);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[length - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ³¨æ„åˆ°ç¬¬ <code>i</code> å¤©çš„æœ€å¤§æ”¶ç›Šåªå’Œç¬¬ <code>i - 1</code> å¤©çš„æœ€å¤§æ”¶ç›Šç›¸å…³ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥é™åˆ° O(1)ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> profit0 = <span class="number">0</span>, profit1 = -prices[<span class="number">0</span>] - fee;</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            <span class="keyword">int</span> newProfit0 = Math.max(profit0, profit1 + prices[i]);</span><br><span class="line">            <span class="keyword">int</span> newProfit1 = Math.max(profit1, profit0 - prices[i] - fee);</span><br><span class="line">            profit0 = newProfit0;</span><br><span class="line">            profit1 = newProfit1;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> profit0;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> profit0 = <span class="number">0</span>, profit1 = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> length = prices.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) {</span><br><span class="line">            <span class="keyword">int</span> newProfit0 = Math.max(profit0, profit1 + prices[i] - fee);</span><br><span class="line">            <span class="keyword">int</span> newProfit1 = Math.max(profit1, profit0 - prices[i]);</span><br><span class="line">            profit0 = newProfit0;</span><br><span class="line">            profit1 = newProfit1;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> profit0;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ğŸä¸‰ã€æ€»ç»“"><a href="#ğŸä¸‰ã€æ€»ç»“" class="headerlink" title="ğŸä¸‰ã€æ€»ç»“"></a>ğŸä¸‰ã€æ€»ç»“</h3><p>æ€»è€Œè¨€ä¹‹ï¼Œè‚¡ç¥¨é—®é¢˜æœ€é€šç”¨çš„æƒ…å†µç”±ä¸‰ä¸ªç‰¹å¾å†³å®šï¼šå½“å‰çš„å¤©æ•° <code>i</code>ã€å…è®¸çš„æœ€å¤§äº¤æ˜“æ¬¡æ•° <code>k</code> ä»¥åŠæ¯å¤©ç»“æŸæ—¶æŒæœ‰çš„è‚¡ç¥¨æ•°ã€‚è¿™ç¯‡æ–‡ç« é˜è¿°äº†æœ€å¤§åˆ©æ¶¦çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å’Œç»ˆæ­¢æ¡ä»¶ï¼Œç”±æ­¤å¯ä»¥å¾—åˆ°æ—¶é—´å¤æ‚åº¦ä¸º O(nk) å’Œç©ºé—´å¤æ‚åº¦ä¸º O(k) çš„è§£æ³•ã€‚è¯¥è§£æ³•å¯ä»¥åº”ç”¨äºå…­ä¸ªé—®é¢˜ï¼Œå¯¹äºæœ€åä¸¤ä¸ªé—®é¢˜ï¼Œéœ€è¦å°†çŠ¶æ€è½¬ç§»æ–¹ç¨‹è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚è¿™é‡Œæ¨è <a href="https://leetcode.com/peterleetcode/" target="_blank" rel="noopener">peterleetcode</a> çš„ <a href="https://discuss.leetcode.com/topic/4766/a-clean-dp-solution-which-generalizes-to-k-transactions" target="_blank" rel="noopener">è§£æ³•</a>ï¼Œè¯¥è§£æ³•å¯ä»¥æ¨å¹¿åˆ°ä»»æ„çš„ <code>k</code> å€¼ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è¿›è¡Œé˜…è¯»ã€‚</p><h2 id="æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"><a href="#æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"></a><strong>æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼</strong></h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ğŸè¯´æ˜&quot;&gt;&lt;a href=&quot;#ğŸè¯´æ˜&quot; class=&quot;headerlink&quot; title=&quot;ğŸè¯´æ˜&quot;&gt;&lt;/a&gt;ğŸè¯´æ˜&lt;/h3&gt;&lt;p&gt;åŸæ–‡å‡ºå¤„ï¼š&lt;a href=&quot;https://leetcode-cn.com/circle/article/qiAgHn/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è‚¡ç¥¨é—®é¢˜&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;ğŸŒ¸å‰è¨€&quot;&gt;&lt;a href=&quot;#ğŸŒ¸å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ğŸŒ¸å‰è¨€&quot;&gt;&lt;/a&gt;ğŸŒ¸å‰è¨€&lt;/h2&gt;&lt;p&gt;è‚¡ç¥¨é—®é¢˜ä¸€å…±æœ‰å…­é“é¢˜ï¼Œé“¾æ¥å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iv/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;124.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;125.æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;126.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="LeetCode" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/LeetCode/"/>
    
    
      <category term="åŠ¨æ€è§„åˆ’" scheme="https://liudufu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="è‚¡ç¥¨é—®é¢˜" scheme="https://liudufu.github.io/tags/%E8%82%A1%E7%A5%A8%E9%97%AE%E9%A2%98/"/>
    
      <category term="åŠ¨æ€è§„åˆ’çš„ä¼˜åŒ–" scheme="https://liudufu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%9A%84%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€è§„åˆ’_leetcode.121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœŸ</title>
    <link href="https://liudufu.github.io/The_best_time_to_buy_and_sell_stocks/"/>
    <id>https://liudufu.github.io/The_best_time_to_buy_and_sell_stocks/</id>
    <published>2020-11-08T13:34:39.000Z</published>
    <updated>2020-11-08T13:36:44.308Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p><p>å¦‚æœä½ æœ€å¤šåªå…è®¸å®Œæˆä¸€ç¬”äº¤æ˜“ï¼ˆå³ä¹°å…¥å’Œå–å‡ºä¸€æ”¯è‚¡ç¥¨ä¸€æ¬¡ï¼‰ï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚</p><p>æ³¨æ„ï¼šä½ ä¸èƒ½åœ¨ä¹°å…¥è‚¡ç¥¨å‰å–å‡ºè‚¡ç¥¨ã€‚</p><a id="more"></a><p>ç¤ºä¾‹ 1:</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: [7,1,5,3,6,4]</span><br><span class="line">è¾“å‡º: 5</span><br><span class="line">è§£é‡Š: åœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ = 6-1 = 5 ã€‚</span><br><span class="line">     æ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ 7-1 = 6, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ï¼›åŒæ—¶ï¼Œä½ ä¸èƒ½åœ¨ä¹°å…¥å‰å–å‡ºè‚¡ç¥¨ã€‚</span><br></pre></td></tr></tbody></table></figure><p>ç¤ºä¾‹ 2:</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: [7,6,4,3,1]</span><br><span class="line">è¾“å‡º: 0</span><br><span class="line">è§£é‡Š: åœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0</span><br></pre></td></tr></tbody></table></figure><h2 id="è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•"><a href="#è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•" class="headerlink" title="è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•"></a>è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•</h2><blockquote><p>æš´åŠ›æ±‚è§£ï¼Œä¸è§£é‡Šã€‚</p><p>æšä¸¾æ‰€æœ‰å‘ç”Ÿä¸€æ¬¡äº¤æ˜“çš„è‚¡ä»·å·®</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> len = prices.length;</span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">2</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ‰å¯èƒ½ä¸å‘ç”Ÿäº¤æ˜“ï¼Œå› æ­¤ç»“æœé›†çš„åˆå§‹å€¼è®¾ç½®ä¸º 0</span></span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æšä¸¾æ‰€æœ‰å‘ç”Ÿä¸€æ¬¡äº¤æ˜“çš„è‚¡ä»·å·®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; len; j++) {</span><br><span class="line">            res = Math.max(res, prices[j] - prices[i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’"><a href="#è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’"></a>è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’</h2><p>é¢˜ç›®åªé—®æœ€å¤§åˆ©æ¶¦ï¼Œæ²¡æœ‰é—®è¿™å‡ å¤©å…·ä½“å“ªä¸€å¤©ä¹°ã€å“ªä¸€å¤©å–ï¼Œå› æ­¤å¯ä»¥è€ƒè™‘ä½¿ç”¨ åŠ¨æ€è§„åˆ’ çš„æ–¹æ³•æ¥è§£å†³ã€‚</p><p>ä¹°å–è‚¡ç¥¨æœ‰çº¦æŸï¼Œæ ¹æ®é¢˜ç›®æ„æ€ï¼Œæœ‰ä»¥ä¸‹ä¸¤ä¸ªçº¦æŸæ¡ä»¶ï¼š</p><ul><li>æ¡ä»¶ 1ï¼šä½ ä¸èƒ½åœ¨ä¹°å…¥è‚¡ç¥¨å‰å–å‡ºè‚¡ç¥¨ï¼›</li><li>æ¡ä»¶ 2ï¼šæœ€å¤šåªå…è®¸å®Œæˆä¸€ç¬”äº¤æ˜“ã€‚</li></ul><p>å› æ­¤ <strong>å½“å¤©æ˜¯å¦æŒè‚¡</strong> æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„å› ç´ ï¼Œè€Œå½“å‰æ˜¯å¦æŒè‚¡å’Œæ˜¨å¤©æ˜¯å¦æŒè‚¡æœ‰å…³ç³»ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦æŠŠ <strong>æ˜¯å¦æŒè‚¡</strong> è®¾è®¡åˆ°çŠ¶æ€æ•°ç»„ä¸­ã€‚</p><p><strong>çŠ¶æ€å®šä¹‰ï¼š</strong></p><p><code>dp[i] [j]</code>ï¼šä¸‹æ ‡ä¸º <code>i</code> è¿™ä¸€å¤©ç»“æŸçš„æ—¶å€™ï¼Œæ‰‹ä¸ŠæŒè‚¡çŠ¶æ€ä¸º j æ—¶ï¼Œæˆ‘ä»¬æŒæœ‰çš„ç°é‡‘æ•°ã€‚</p><ul><li>j = 0ï¼Œè¡¨ç¤ºå½“å‰ä¸æŒè‚¡ï¼›</li><li>j = 1ï¼Œè¡¨ç¤ºå½“å‰æŒè‚¡ã€‚</li></ul><p><strong>æ³¨æ„</strong>ï¼šè¿™ä¸ªçŠ¶æ€å…·æœ‰å‰ç¼€æ€§è´¨ï¼Œä¸‹æ ‡ä¸º i çš„è¿™ä¸€å¤©çš„è®¡ç®—ç»“æœåŒ…å«äº†åŒºé—´ [0, i] æ‰€æœ‰çš„ä¿¡æ¯ï¼Œå› æ­¤æœ€åè¾“å‡º dp[len - 1] [0]ã€‚</p><p><strong>è¯´æ˜ï¼š</strong></p><ul><li>ä½¿ç”¨ã€Œç°é‡‘æ•°ã€è¿™ä¸ªè¯´æ³•ä¸»è¦æ˜¯ä¸ºäº†ä½“ç° ä¹°å…¥è‚¡ç¥¨æ‰‹ä¸Šçš„ç°é‡‘æ•°å‡å°‘ï¼Œå–å‡ºè‚¡ç¥¨æ‰‹ä¸Šçš„ç°é‡‘æ•°å¢åŠ  è¿™ä¸ªäº‹å®ï¼›</li><li>ã€Œç°é‡‘æ•°ã€ç­‰ä»·äºé¢˜ç›®ä¸­è¯´çš„ã€Œåˆ©æ¶¦ã€ï¼Œå³å…ˆä¹°å…¥è¿™åªè‚¡ç¥¨ï¼Œåä¹°å…¥è¿™åªè‚¡ç¥¨çš„å·®ä»·ï¼›</li><li>å› æ­¤åœ¨åˆšå¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„æ‰‹ä¸Šè‚¯å®šæ˜¯æœ‰ä¸€å®šç°é‡‘æ•°èƒ½å¤Ÿä¹°å…¥è¿™åªè‚¡ç¥¨ï¼Œå³åˆšå¼€å§‹çš„æ—¶å€™ç°é‡‘æ•°è‚¯å®šä¸ä¸º 00ï¼Œä½†æ˜¯å†™ä»£ç çš„æ—¶å€™å¯ä»¥è®¾ç½®ä¸º 0ã€‚æç«¯æƒ…å†µä¸‹ï¼ˆè‚¡ä»·æ•°ç»„ä¸º [5, 4, 3, 2, 1]ï¼‰ï¼Œæ­¤æ—¶ä¸å‘ç”Ÿäº¤æ˜“æ˜¯æœ€å¥½çš„ï¼ˆè¿™ä¸€ç‚¹æ˜¯è¡¥å……è¯´æ˜ï¼Œé™äºæˆ‘çš„è¡¨è¾¾ï¼Œå¸Œæœ›ä¸è¦ç»™å¤§å®¶é€ æˆè¿·æƒ‘ï¼‰ã€‚</li></ul><p><strong>æ¨å¯¼çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</strong></p><p>dp[i] [0]ï¼šè§„å®šäº†ä»Šå¤©ä¸æŒè‚¡ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ul><li><p>æ˜¨å¤©ä¸æŒè‚¡ï¼Œä»Šå¤©ä»€ä¹ˆéƒ½ä¸åšï¼›</p></li><li><p>æ˜¨å¤©æŒè‚¡ï¼Œä»Šå¤©å–å‡ºè‚¡ç¥¨ï¼ˆç°é‡‘æ•°å¢åŠ ï¼‰ï¼Œ<br>dp[i] [1]ï¼šè§„å®šäº†ä»Šå¤©æŒè‚¡ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p></li><li><p>æ˜¨å¤©æŒè‚¡ï¼Œä»Šå¤©ä»€ä¹ˆéƒ½ä¸åšï¼ˆç°é‡‘æ•°å¢åŠ ï¼‰ï¼›</p></li><li><p>æ˜¨å¤©ä¸æŒè‚¡ï¼Œä»Šå¤©ä¹°å…¥è‚¡ç¥¨ï¼ˆæ³¨æ„ï¼šåªå…è®¸äº¤æ˜“ä¸€æ¬¡ï¼Œå› æ­¤æ‰‹ä¸Šçš„ç°é‡‘æ•°å°±æ˜¯å½“å¤©çš„è‚¡ä»·çš„ç›¸åæ•°ï¼‰ã€‚<br>çŠ¶æ€è½¬ç§»æ–¹ç¨‹è¯·è§ å‚è€ƒä»£ç  2ã€‚</p></li></ul><p>çŸ¥è¯†ç‚¹ï¼š</p><ul><li>å¤šé˜¶æ®µå†³ç­–é—®é¢˜ï¼šåŠ¨æ€è§„åˆ’å¸¸å¸¸ç”¨äºæ±‚è§£å¤šé˜¶æ®µå†³ç­–é—®é¢˜ï¼›</li><li>æ— åæ•ˆæ€§ï¼šæ¯ä¸€å¤©æ˜¯å¦æŒè‚¡è®¾è®¡æˆçŠ¶æ€å˜é‡çš„ä¸€ç»´ã€‚çŠ¶æ€è®¾ç½®å…·ä½“ï¼Œæ¨å¯¼çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ–¹ä¾¿</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = prices.length;</span><br><span class="line">        <span class="comment">// ç‰¹æ®Šåˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (len &lt; <span class="number">2</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// dp[i][0] ä¸‹æ ‡ä¸º i è¿™å¤©ç»“æŸçš„æ—¶å€™ï¼Œä¸æŒè‚¡ï¼Œæ‰‹ä¸Šæ‹¥æœ‰çš„ç°é‡‘æ•°</span></span><br><span class="line">        <span class="comment">// dp[i][1] ä¸‹æ ‡ä¸º i è¿™å¤©ç»“æŸçš„æ—¶å€™ï¼ŒæŒè‚¡ï¼Œæ‰‹ä¸Šæ‹¥æœ‰çš„ç°é‡‘æ•°</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ï¼šä¸æŒè‚¡æ˜¾ç„¶ä¸º 0ï¼ŒæŒè‚¡å°±éœ€è¦å‡å»ç¬¬ 1 å¤©ï¼ˆä¸‹æ ‡ä¸º 0ï¼‰çš„è‚¡ä»·</span></span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»ç¬¬ 2 å¤©å¼€å§‹éå†</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++) {</span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], -prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[len - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="è§£æ³•ä¸‰ï¼š-æ»šåŠ¨æ•°ç»„ä¼˜åŒ–"><a href="#è§£æ³•ä¸‰ï¼š-æ»šåŠ¨æ•°ç»„ä¼˜åŒ–" class="headerlink" title="è§£æ³•ä¸‰ï¼š æ»šåŠ¨æ•°ç»„ä¼˜åŒ–"></a>è§£æ³•ä¸‰ï¼š æ»šåŠ¨æ•°ç»„ä¼˜åŒ–</h2><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p><strong>java</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = prices.length;</span><br><span class="line">        <span class="keyword">if</span> (len &lt; <span class="number">2</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++) {</span><br><span class="line">            dp[i % <span class="number">2</span>][<span class="number">0</span>] = Math.max(dp[(i - <span class="number">1</span>) % <span class="number">2</span>][<span class="number">0</span>], dp[(i - <span class="number">1</span>) % <span class="number">2</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i % <span class="number">2</span>][<span class="number">1</span>] = Math.max(dp[(i - <span class="number">1</span>) % <span class="number">2</span>][<span class="number">1</span>], -prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[(len - <span class="number">1</span>) &amp; <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>% 2</code> è¿˜å¯ä»¥å†™æˆ <code>&amp; 1</code>ï¼Œè¿™é‡Œä¸ºäº†ä¿è¯å¯è¯»æ€§ï¼Œé€‰ç”¨ <code>% 2</code>ã€‚</p><h2 id="è§£æ³•å››ï¼š-ç©ºé—´ä¼˜åŒ–"><a href="#è§£æ³•å››ï¼š-ç©ºé—´ä¼˜åŒ–" class="headerlink" title="è§£æ³•å››ï¼š ç©ºé—´ä¼˜åŒ–"></a>è§£æ³•å››ï¼š ç©ºé—´ä¼˜åŒ–</h2><p>ç©ºé—´ä¼˜åŒ–åªçœ‹çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚</p><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹é‡Œä¸‹æ ‡ä¸º i çš„è¡Œåªå‚è€ƒä¸‹æ ‡ä¸º i - 1 çš„è¡Œï¼ˆå³åªå‚è€ƒä¸Šä¸€è¡Œï¼‰ï¼Œå¹¶ä¸”ï¼š</p><ul><li>ä¸‹æ ‡ä¸º i çš„è¡Œå¹¶ä¸”çŠ¶æ€ä¸º 0 çš„è¡Œå‚è€ƒäº†ä¸Šä¸€è¡ŒçŠ¶æ€ä¸º 0 å’Œ 1 çš„è¡Œï¼›</li><li>ä¸‹æ ‡ä¸º i çš„è¡Œå¹¶ä¸”çŠ¶æ€ä¸º 1 çš„è¡Œåªå‚è€ƒäº†ä¸Šä¸€è¡ŒçŠ¶æ€ä¸º 1 çš„è¡Œã€‚</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = prices.length;</span><br><span class="line">        <span class="keyword">if</span> (len &lt; <span class="number">2</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++) {</span><br><span class="line">            dp[<span class="number">0</span>] = Math.max(dp[<span class="number">0</span>], dp[<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[<span class="number">1</span>] = Math.max(dp[<span class="number">1</span>], -prices[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"><a href="#æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"></a><strong>æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼</strong></h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;é¢˜ç›®&quot;&gt;&lt;a href=&quot;#é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®&quot;&gt;&lt;/a&gt;é¢˜ç›®&lt;/h2&gt;&lt;p&gt;ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æœ€å¤šåªå…è®¸å®Œæˆä¸€ç¬”äº¤æ˜“ï¼ˆå³ä¹°å…¥å’Œå–å‡ºä¸€æ”¯è‚¡ç¥¨ä¸€æ¬¡ï¼‰ï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šä½ ä¸èƒ½åœ¨ä¹°å…¥è‚¡ç¥¨å‰å–å‡ºè‚¡ç¥¨ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="LeetCode" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/LeetCode/"/>
    
    
      <category term="åŠ¨æ€è§„åˆ’" scheme="https://liudufu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="æš´åŠ›è§£æ³•" scheme="https://liudufu.github.io/tags/%E6%9A%B4%E5%8A%9B%E8%A7%A3%E6%B3%95/"/>
    
      <category term="æ»šåŠ¨æ•°ç»„" scheme="https://liudufu.github.io/tags/%E6%BB%9A%E5%8A%A8%E6%95%B0%E7%BB%84/"/>
    
      <category term="å¸¸æ•°ä¼˜åŒ–" scheme="https://liudufu.github.io/tags/%E5%B8%B8%E6%95%B0%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>é«˜çº§æ ‘_LeetCode.327_åŒºé—´å’Œçš„ä¸ªæ•°</title>
    <link href="https://liudufu.github.io/The_number_of_interval_sums/"/>
    <id>https://liudufu.github.io/The_number_of_interval_sums/</id>
    <published>2020-11-08T13:32:11.000Z</published>
    <updated>2020-11-08T13:34:19.295Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ğŸŒ¸é¢˜ç›®"><a href="#ğŸŒ¸é¢˜ç›®" class="headerlink" title="ğŸŒ¸é¢˜ç›®"></a>ğŸŒ¸é¢˜ç›®</h2><p>ğŸç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œè¿”å›åŒºé—´å’Œåœ¨ [lower, upper] ä¹‹é—´çš„ä¸ªæ•°ï¼ŒåŒ…å« lower å’Œ upperã€‚<br>åŒºé—´å’Œ S(i, j) è¡¨ç¤ºåœ¨ nums ä¸­ï¼Œä½ç½®ä» i åˆ° j çš„å…ƒç´ ä¹‹å’Œï¼ŒåŒ…å« i å’Œ j (i â‰¤ j)ã€‚</p><p>è¯´æ˜:<br>æœ€ç›´è§‚çš„ç®—æ³•å¤æ‚åº¦æ˜¯ O(n2) ï¼Œè¯·åœ¨æ­¤åŸºç¡€ä¸Šä¼˜åŒ–ä½ çš„ç®—æ³•ã€‚</p><a id="more"></a><p>ç¤ºä¾‹:</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: nums = [-2,5,-1], lower = -2, upper = 2,</span><br><span class="line">è¾“å‡º: 3 </span><br><span class="line">è§£é‡Š: 3ä¸ªåŒºé—´åˆ†åˆ«æ˜¯: [0,0], [2,2], [0,2]ï¼Œå®ƒä»¬è¡¨ç¤ºçš„å’Œåˆ†åˆ«ä¸º: -2, -1, 2ã€‚</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸è§£æ³•ä¸€ï¼šå½’å¹¶æ’åº"><a href="#ğŸŒ¸è§£æ³•ä¸€ï¼šå½’å¹¶æ’åº" class="headerlink" title="ğŸŒ¸è§£æ³•ä¸€ï¼šå½’å¹¶æ’åº"></a>ğŸŒ¸è§£æ³•ä¸€ï¼šå½’å¹¶æ’åº</h2><p>è®¾å‰ç¼€å’Œæ•°ç»„ä¸º $\textit{preSum}$ï¼Œåˆ™é—®é¢˜ç­‰ä»·äºæ±‚æ‰€æœ‰çš„ä¸‹æ ‡å¯¹(<em>i</em>,<em>j</em>)ï¼Œæ»¡è¶³</p><p><em>preSum</em>[<em>j</em>]âˆ’<em>preSum</em>[<em>i</em>]âˆˆ[<em>lower</em>,<em>upper</em>]</p><p><code>æˆ‘ä»¬å…ˆè€ƒè™‘å¦‚ä¸‹çš„é—®é¢˜</code>ï¼šç»™å®šä¸¤ä¸ª<strong>å‡åºæ’åˆ—</strong>çš„æ•°ç»„ n1,<em>n</em>2ï¼Œè¯•æ‰¾å‡ºæ‰€æœ‰çš„ä¸‹æ ‡å¯¹ (i,j)ï¼Œæ»¡è¶³<em>n</em>2[<em>j</em>]âˆ’<em>n</em>1[<em>i</em>]âˆˆ[<em>lower</em>,<em>upper</em>]</p><p>åœ¨å·²çŸ¥ä¸¤ä¸ªæ•°ç»„å‡ä¸ºå‡åºçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸€é—®é¢˜æ˜¯ç›¸å¯¹ç®€å•çš„ï¼šæˆ‘ä»¬åœ¨ n2ä¸­ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆ l,rã€‚èµ·åˆï¼Œå®ƒä»¬éƒ½æŒ‡å‘ n 2 çš„èµ·å§‹ä½ç½®ã€‚éšåï¼Œæˆ‘ä»¬è€ƒå¯Ÿ n 1 çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚é¦–å…ˆï¼Œä¸æ–­åœ°å°†æŒ‡é’ˆ l å‘å³ç§»åŠ¨ï¼Œç›´åˆ°$$ n_2[l] \ge n_1[0] + \textit{lower}$$ä¸ºæ­¢ï¼Œæ­¤æ—¶ï¼Œ ll åŠå…¶å³è¾¹çš„å…ƒç´ å‡å¤§äºæˆ–ç­‰äº $n_1[0] + \textit{lower}$ï¼›éšåï¼Œå†ä¸æ–­åœ°å°†æŒ‡é’ˆ r å‘å³ç§»åŠ¨ï¼Œç›´åˆ° $n_2[r] &gt; n_1[0] + \textit{upper}$ä¸ºæ­¢ï¼Œåˆ™ rå·¦è¾¹çš„å…ƒç´ å‡å°äºæˆ–ç­‰äº $n_1[0] + \textit{upper}$,æ•…åŒºé—´ [l,r) ä¸­çš„æ‰€æœ‰ä¸‹æ ‡ jï¼Œéƒ½æ»¡è¶³<em>n</em>2[<em>j</em>]âˆ’<em>n</em>1[0]âˆˆ[<em>lower</em>,<em>upper</em>]</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è€ƒå¯Ÿ n 1 çš„ç¬¬äºŒä¸ªå…ƒç´ ã€‚ç”±äºn1 æ˜¯é€’å¢çš„ï¼Œä¸éš¾å‘ç° l,r åªå¯èƒ½å‘å³ç§»åŠ¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸æ–­åœ°è¿›è¡Œä¸Šè¿°è¿‡ç¨‹ï¼Œå¹¶å¯¹äº n 1ä¸­çš„æ¯ä¸€ä¸ªä¸‹æ ‡ï¼Œéƒ½è®°å½•ç›¸åº”çš„åŒºé—´ [l,r) çš„å¤§å°ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬å°±ç»Ÿè®¡å¾—åˆ°äº†æ»¡è¶³æ¡ä»¶çš„ä¸‹æ ‡å¯¹ (i,j) çš„æ•°é‡ã€‚</p><p>åœ¨è§£å†³è¿™ä¸€é—®é¢˜åï¼ŒåŸé—®é¢˜å°±è¿åˆƒè€Œè§£äº†ï¼šæˆ‘ä»¬é‡‡ç”¨å½’å¹¶æ’åºçš„æ–¹å¼ï¼Œèƒ½å¤Ÿå¾—åˆ°å·¦å³ä¸¤ä¸ªæ•°ç»„æ’åºåçš„å½¢å¼ï¼Œä»¥åŠå¯¹åº”çš„ä¸‹æ ‡å¯¹æ•°é‡ã€‚å¯¹äºåŸæ•°ç»„è€Œè¨€ï¼Œè‹¥è¦æ‰¾å‡ºå…¨éƒ¨çš„ä¸‹æ ‡å¯¹æ•°é‡ï¼Œåªéœ€è¦å†é¢å¤–æ‰¾å‡ºå·¦ç«¯ç‚¹åœ¨å·¦ä¾§æ•°ç»„ï¼ŒåŒæ—¶å³ç«¯ç‚¹åœ¨å³ä¾§æ•°ç»„çš„ä¸‹æ ‡å¯¹æ•°é‡ï¼Œè€Œè¿™æ­£æ˜¯æˆ‘ä»¬æ­¤å‰è®¨è®ºçš„é—®é¢˜ã€‚</p><p>ä»£ç </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countRangeSum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper)</span> </span>{</span><br><span class="line">        <span class="keyword">long</span> s = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span>[] sum = <span class="keyword">new</span> <span class="keyword">long</span>[nums.length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; ++i) {</span><br><span class="line">            s += nums[i];</span><br><span class="line">            sum[i + <span class="number">1</span>] = s;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> countRangeSumRecursive(sum, lower, upper, <span class="number">0</span>, sum.length - <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countRangeSumRecursive</span><span class="params">(<span class="keyword">long</span>[] sum, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (left == right) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> n1 = countRangeSumRecursive(sum, lower, upper, left, mid);</span><br><span class="line">            <span class="keyword">int</span> n2 = countRangeSumRecursive(sum, lower, upper, mid + <span class="number">1</span>, right);</span><br><span class="line">            <span class="keyword">int</span> ret = n1 + n2;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// é¦–å…ˆç»Ÿè®¡ä¸‹æ ‡å¯¹çš„æ•°é‡</span></span><br><span class="line">            <span class="keyword">int</span> i = left;</span><br><span class="line">            <span class="keyword">int</span> l = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> r = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (i &lt;= mid) {</span><br><span class="line">                <span class="keyword">while</span> (l &lt;= right &amp;&amp; sum[l] - sum[i] &lt; lower) {</span><br><span class="line">                    l++;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">while</span> (r &lt;= right &amp;&amp; sum[r] - sum[i] &lt;= upper) {</span><br><span class="line">                    r++;</span><br><span class="line">                }</span><br><span class="line">                ret += r - l;</span><br><span class="line">                i++;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="comment">// éšååˆå¹¶ä¸¤ä¸ªæ’åºæ•°ç»„</span></span><br><span class="line">            <span class="keyword">int</span>[] sorted = <span class="keyword">new</span> <span class="keyword">int</span>[right - left + <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> p1 = left, p2 = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> p = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (p1 &lt;= mid || p2 &lt;= right) {</span><br><span class="line">                <span class="keyword">if</span> (p1 &gt; mid) {</span><br><span class="line">                    sorted[p++] = (<span class="keyword">int</span>) sum[p2++];</span><br><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (p2 &gt; right) {</span><br><span class="line">                    sorted[p++] = (<span class="keyword">int</span>) sum[p1++];</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    <span class="keyword">if</span> (sum[p1] &lt; sum[p2]) {</span><br><span class="line">                        sorted[p++] = (<span class="keyword">int</span>) sum[p1++];</span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        sorted[p++] = (<span class="keyword">int</span>) sum[p2++];</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sorted.length; j++) {</span><br><span class="line">                sum[left + j] = sorted[j];</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸è§£æ³•äºŒï¼šçº¿æ®µæ ‘"><a href="#ğŸŒ¸è§£æ³•äºŒï¼šçº¿æ®µæ ‘" class="headerlink" title="ğŸŒ¸è§£æ³•äºŒï¼šçº¿æ®µæ ‘"></a>ğŸŒ¸è§£æ³•äºŒï¼šçº¿æ®µæ ‘</h2><p>ä¾ç„¶è€ƒè™‘å‰ç¼€å’Œæ•°ç»„$ \textit{preSum}$</p><p>å¯¹äºæ¯ä¸ªä¸‹æ ‡ jï¼Œä»¥ j ä¸ºå³ç«¯ç‚¹çš„ä¸‹æ ‡å¯¹çš„æ•°é‡ï¼Œå°±ç­‰äºæ•°ç»„ $\textit{preSum}$[0..j-1] ä¸­çš„æ‰€æœ‰æ•´æ•°ï¼Œå‡ºç°åœ¨åŒºé—´$ [\textit{preSum}[j]-\textit{upper}, \textit{preSum}[j]-\textit{lower}]$ çš„æ¬¡æ•°ã€‚æ•…å¾ˆå®¹æ˜“æƒ³åˆ°åŸºäºçº¿æ®µæ ‘çš„è§£æ³•ã€‚</p><p>æˆ‘ä»¬ä»å·¦åˆ°å³æ‰«æå‰ç¼€å’Œæ•°ç»„ã€‚æ¯é‡åˆ°ä¸€ä¸ªæ•°$ \textit{preSum}[j]$ï¼Œæˆ‘ä»¬å°±åœ¨çº¿æ®µæ ‘ä¸­æŸ¥è¯¢åŒºé—´$ [\textit{preSum}[j]-\textit{upper}, \textit{preSum}[j]-\textit{lower}]$å†…çš„æ•´æ•°æ•°é‡ï¼Œéšåï¼Œå°† $\textit{preSum}[j]$ æ’å…¥åˆ°çº¿æ®µæ ‘å½“ä¸­ã€‚</p><p>æ³¨æ„åˆ°æ•´æ•°çš„èŒƒå›´å¯èƒ½å¾ˆå¤§ï¼Œæ•…éœ€è¦åˆ©ç”¨å“ˆå¸Œè¡¨å°†æ‰€æœ‰å¯èƒ½å‡ºç°çš„æ•´æ•°ï¼Œæ˜ å°„åˆ°è¿ç»­çš„æ•´æ•°åŒºé—´å†…ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countRangeSum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper)</span> </span>{</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span>[] preSum = <span class="keyword">new</span> <span class="keyword">long</span>[nums.length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; ++i) {</span><br><span class="line">            sum += nums[i];</span><br><span class="line">            preSum[i + <span class="number">1</span>] = sum;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        Set&lt;Long&gt; allNumbers = <span class="keyword">new</span> TreeSet&lt;Long&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> x : preSum) {</span><br><span class="line">            allNumbers.add(x);</span><br><span class="line">            allNumbers.add(x - lower);</span><br><span class="line">            allNumbers.add(x - upper);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// åˆ©ç”¨å“ˆå¸Œè¡¨è¿›è¡Œç¦»æ•£åŒ–</span></span><br><span class="line">        Map&lt;Long, Integer&gt; values = <span class="keyword">new</span> HashMap&lt;Long, Integer&gt;();</span><br><span class="line">        <span class="keyword">int</span> idx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> x : allNumbers) {</span><br><span class="line">            values.put(x, idx);</span><br><span class="line">            idx++;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        SegNode root = build(<span class="number">0</span>, values.size() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> x : preSum) {</span><br><span class="line">            <span class="keyword">int</span> left = values.get(x - upper), right = values.get(x - lower);</span><br><span class="line">            ret += count(root, left, right);</span><br><span class="line">            insert(root, values.get(x));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SegNode <span class="title">build</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>{</span><br><span class="line">        SegNode node = <span class="keyword">new</span> SegNode(left, right);</span><br><span class="line">        <span class="keyword">if</span> (left == right) {</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">        node.lchild = build(left, mid);</span><br><span class="line">        node.rchild = build(mid + <span class="number">1</span>, right);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(SegNode root, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (left &gt; root.hi || right &lt; root.lo) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (left &lt;= root.lo &amp;&amp; root.hi &lt;= right) {</span><br><span class="line">            <span class="keyword">return</span> root.add;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> count(root.lchild, left, right) + count(root.rchild, left, right);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(SegNode root, <span class="keyword">int</span> val)</span> </span>{</span><br><span class="line">        root.add++;</span><br><span class="line">        <span class="keyword">if</span> (root.lo == root.hi) {</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> mid = (root.lo + root.hi) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (val &lt;= mid) {</span><br><span class="line">            insert(root.lchild, val);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            insert(root.rchild, val);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegNode</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> lo, hi, add;</span><br><span class="line">    SegNode lchild, rchild;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SegNode</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>{</span><br><span class="line">        lo = left;</span><br><span class="line">        hi = right;</span><br><span class="line">        add = <span class="number">0</span>;</span><br><span class="line">        lchild = <span class="keyword">null</span>;</span><br><span class="line">        rchild = <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸è§£æ³•ä¸‰ï¼šåŠ¨æ€å¢åŠ èŠ‚ç‚¹çš„çº¿æ®µæ ‘"><a href="#ğŸŒ¸è§£æ³•ä¸‰ï¼šåŠ¨æ€å¢åŠ èŠ‚ç‚¹çš„çº¿æ®µæ ‘" class="headerlink" title="ğŸŒ¸è§£æ³•ä¸‰ï¼šåŠ¨æ€å¢åŠ èŠ‚ç‚¹çš„çº¿æ®µæ ‘"></a>ğŸŒ¸è§£æ³•ä¸‰ï¼šåŠ¨æ€å¢åŠ èŠ‚ç‚¹çš„çº¿æ®µæ ‘</h2><p>ä¸æ–¹æ³•äºŒç±»ä¼¼ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä¸å®ç”¨å“ˆå¸Œè¡¨è¿›è¡Œæ˜ å°„ï¼Œè€Œæ˜¯åªåœ¨çº¿æ®µæ ‘çš„æ’å…¥æ“ä½œè¿‡ç¨‹ä¸­åŠ¨æ€åœ°å¢åŠ æ ‘ä¸­çš„èŠ‚ç‚¹ã€‚è€Œå½“æˆ‘ä»¬è¿›è¡ŒæŸ¥è¯¢æ“ä½œæ—¶ï¼Œå¦‚æœåˆ°è¾¾ä¸€ä¸ªç©ºèŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯´æ˜å¯¹åº”çš„åŒºé—´ä¸­æš‚æ—¶è¿˜æ²¡æœ‰å€¼ï¼Œå°±å¯ä»¥ç›´æ¥è¿”å› 0ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countRangeSum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper)</span> </span>{</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span>[] preSum = <span class="keyword">new</span> <span class="keyword">long</span>[nums.length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; ++i) {</span><br><span class="line">            sum += nums[i];</span><br><span class="line">            preSum[i + <span class="number">1</span>] = sum;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">long</span> lbound = Long.MAX_VALUE, rbound = Long.MIN_VALUE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> x : preSum) {</span><br><span class="line">            lbound = Math.min(Math.min(lbound, x), Math.min(x - lower, x - upper));</span><br><span class="line">            rbound = Math.max(Math.max(rbound, x), Math.max(x - lower, x - upper));</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        SegNode root = <span class="keyword">new</span> SegNode(lbound, rbound);</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> x : preSum) {</span><br><span class="line">            ret += count(root, x - upper, x - lower);</span><br><span class="line">            insert(root, x);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(SegNode root, <span class="keyword">long</span> left, <span class="keyword">long</span> right)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (left &gt; root.hi || right &lt; root.lo) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (left &lt;= root.lo &amp;&amp; root.hi &lt;= right) {</span><br><span class="line">            <span class="keyword">return</span> root.add;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> count(root.lchild, left, right) + count(root.rchild, left, right);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(SegNode root, <span class="keyword">long</span> val)</span> </span>{</span><br><span class="line">        root.add++;</span><br><span class="line">        <span class="keyword">if</span> (root.lo == root.hi) {</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">long</span> mid = (root.lo + root.hi) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (val &lt;= mid) {</span><br><span class="line">            <span class="keyword">if</span> (root.lchild == <span class="keyword">null</span>) {</span><br><span class="line">                root.lchild = <span class="keyword">new</span> SegNode(root.lo, mid);</span><br><span class="line">            }</span><br><span class="line">            insert(root.lchild, val);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">if</span> (root.rchild == <span class="keyword">null</span>) {</span><br><span class="line">                root.rchild = <span class="keyword">new</span> SegNode(mid + <span class="number">1</span>, root.hi);</span><br><span class="line">            }</span><br><span class="line">            insert(root.rchild, val);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegNode</span> </span>{</span><br><span class="line">    <span class="keyword">long</span> lo, hi;</span><br><span class="line">    <span class="keyword">int</span> add;</span><br><span class="line">    SegNode lchild, rchild;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SegNode</span><span class="params">(<span class="keyword">long</span> left, <span class="keyword">long</span> right)</span> </span>{</span><br><span class="line">        lo = left;</span><br><span class="line">        hi = right;</span><br><span class="line">        add = <span class="number">0</span>;</span><br><span class="line">        lchild = <span class="keyword">null</span>;</span><br><span class="line">        rchild = <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸è§£æ³•å››ï¼šæ ‘çŠ¶æ•°ç»„"><a href="#ğŸŒ¸è§£æ³•å››ï¼šæ ‘çŠ¶æ•°ç»„" class="headerlink" title="ğŸŒ¸è§£æ³•å››ï¼šæ ‘çŠ¶æ•°ç»„"></a>ğŸŒ¸è§£æ³•å››ï¼šæ ‘çŠ¶æ•°ç»„</h2><p>æ ‘çŠ¶æ•°ç»„ä¸çº¿æ®µæ ‘åŸºäºç±»ä¼¼çš„æ€æƒ³ï¼Œä¸è¿‡æ ‘çŠ¶æ•°ç»„æ”¯æŒçš„åŸºæœ¬æŸ¥è¯¢ä¸ºæ±‚å‡º $[0, \textit{val}]$ ä¹‹é—´çš„æ•´æ•°æ•°é‡ã€‚ä¸ºäº†æŸ¥è¯¢åŒºé—´$ [\textit{preSum}[j]-\textit{upper}, \textit{preSum}[j]-\textit{lower}]$å†…çš„æ•´æ•°æ•°é‡ï¼Œéœ€è¦æ‰§è¡Œä¸¤æ¬¡æŸ¥è¯¢ï¼Œå³åˆ†åˆ«æŸ¥è¯¢ $[0, \textit{preSum}[j]-\textit{upper}-1]$ åŒºé—´çš„æ•´æ•°æ•°é‡ L å’Œ$[0,\textit{preSum}[j]-\textit{lower}]$ åŒºé—´çš„æ•´æ•°æ•°é‡ Rï¼Œç­”æ¡ˆå³ä¸ºä¸¤è€…ä½œå·® R-Lã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countRangeSum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper)</span> </span>{</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span>[] preSum = <span class="keyword">new</span> <span class="keyword">long</span>[nums.length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; ++i) {</span><br><span class="line">            sum += nums[i];</span><br><span class="line">            preSum[i + <span class="number">1</span>] = sum;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        Set&lt;Long&gt; allNumbers = <span class="keyword">new</span> TreeSet&lt;Long&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> x : preSum) {</span><br><span class="line">            allNumbers.add(x);</span><br><span class="line">            allNumbers.add(x - lower);</span><br><span class="line">            allNumbers.add(x - upper);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// åˆ©ç”¨å“ˆå¸Œè¡¨è¿›è¡Œç¦»æ•£åŒ–</span></span><br><span class="line">        Map&lt;Long, Integer&gt; values = <span class="keyword">new</span> HashMap&lt;Long, Integer&gt;();</span><br><span class="line">        <span class="keyword">int</span> idx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> x: allNumbers) {</span><br><span class="line">            values.put(x, idx);</span><br><span class="line">            idx++;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        BIT bit = <span class="keyword">new</span> BIT(values.size());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; preSum.length; i++) {</span><br><span class="line">            <span class="keyword">int</span> left = values.get(preSum[i] - upper), right = values.get(preSum[i] - lower);</span><br><span class="line">            ret += bit.query(right + <span class="number">1</span>) - bit.query(left);</span><br><span class="line">            bit.update(values.get(preSum[i]) + <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BIT</span> </span>{</span><br><span class="line">    <span class="keyword">int</span>[] tree;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BIT</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.n = n;</span><br><span class="line">        <span class="keyword">this</span>.tree = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> x &amp; (-x);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span> </span>{</span><br><span class="line">        <span class="keyword">while</span> (x &lt;= n) {</span><br><span class="line">            tree[x] += d;</span><br><span class="line">            x += lowbit(x);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x != <span class="number">0</span>) {</span><br><span class="line">            ans += tree[x];</span><br><span class="line">            x -= lowbit(x);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸è§£æ³•äº”ï¼šå¹³è¡¡äºŒå‰æœç´¢æ ‘"><a href="#ğŸŒ¸è§£æ³•äº”ï¼šå¹³è¡¡äºŒå‰æœç´¢æ ‘" class="headerlink" title="ğŸŒ¸è§£æ³•äº”ï¼šå¹³è¡¡äºŒå‰æœç´¢æ ‘"></a>ğŸŒ¸è§£æ³•äº”ï¼šå¹³è¡¡äºŒå‰æœç´¢æ ‘</h2><p>è€ƒè™‘ä¸€æ£µå¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚è‹¥å…¶èŠ‚ç‚¹æ•°é‡ä¸º Nï¼Œåˆ™æ·±åº¦ä¸º O(log N)ã€‚äºŒå‰æœç´¢æ ‘èƒ½å¤Ÿåœ¨ O(logN) çš„æ—¶é—´å†…ï¼Œå¯¹ä»»æ„ç»™å®šçš„å€¼ $\textit{val}$,æŸ¥è¯¢æ ‘ä¸­æ‰€æœ‰å°äºæˆ–ç­‰äºè¯¥å€¼çš„æ•°é‡ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä»å·¦åˆ°å³æ‰«æå‰ç¼€å’Œæ•°ç»„ã€‚å¯¹äº$ \textit{preSum}[j]$ è€Œè¨€ï¼Œé¦–å…ˆè¿›è¡Œä¸¤æ¬¡æŸ¥è¯¢ï¼Œå¾—åˆ°åŒºé—´ $[\textit{preSum}[j]-\textit{upper}, \textit{preSum}[j]-\textit{lower}]$å†…çš„æ•´æ•°æ•°é‡ï¼›éšåå†å°† $\textit{preSum}[j]$ æ’å…¥åˆ°å¹³è¡¡æ ‘ä¸­ã€‚</p><p>å¹³è¡¡äºŒå‰æœç´¢æ ‘æœ‰å¤šç§ä¸åŒçš„å®ç°ï¼Œæœ€ç»å…¸çš„ä¸º AVL æ ‘ä¸çº¢é»‘æ ‘ã€‚æ­¤å¤–ï¼Œåœ¨ç®—æ³•ç«èµ›ä¸­ï¼Œè¿˜åŒ…æ‹¬ Treapã€SBT ç­‰æ•°æ®ç»“æ„ã€‚</p><p>ä¸‹é¢ç»™å‡ºåŸºäº Treap çš„å®ç°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countRangeSum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper)</span> </span>{</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span>[] preSum = <span class="keyword">new</span> <span class="keyword">long</span>[nums.length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; ++i) {</span><br><span class="line">            sum += nums[i];</span><br><span class="line">            preSum[i + <span class="number">1</span>] = sum;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        BalancedTree treap = <span class="keyword">new</span> BalancedTree();</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> x : preSum) {</span><br><span class="line">            <span class="keyword">long</span> numLeft = treap.lowerBound(x - upper);</span><br><span class="line">            <span class="keyword">int</span> rankLeft = (numLeft == Long.MAX_VALUE ? (<span class="keyword">int</span>) (treap.getSize() + <span class="number">1</span>) : treap.rank(numLeft)[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">long</span> numRight = treap.upperBound(x - lower);</span><br><span class="line">            <span class="keyword">int</span> rankRight = (numRight == Long.MAX_VALUE ? (<span class="keyword">int</span>) treap.getSize() : treap.rank(numRight)[<span class="number">0</span>] - <span class="number">1</span>);</span><br><span class="line">            ret += rankRight - rankLeft + <span class="number">1</span>;</span><br><span class="line">            treap.insert(x);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BalancedTree</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">BalancedNode</span> </span>{</span><br><span class="line">        <span class="keyword">long</span> val;</span><br><span class="line">        <span class="keyword">long</span> seed;</span><br><span class="line">        <span class="keyword">int</span> count;</span><br><span class="line">        <span class="keyword">int</span> size;</span><br><span class="line">        BalancedNode left;</span><br><span class="line">        BalancedNode right;</span><br><span class="line"></span><br><span class="line">        BalancedNode(<span class="keyword">long</span> val, <span class="keyword">long</span> seed) {</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">            <span class="keyword">this</span>.seed = seed;</span><br><span class="line">            <span class="keyword">this</span>.count = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">this</span>.size = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">this</span>.left = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">this</span>.right = <span class="keyword">null</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function">BalancedNode <span class="title">leftRotate</span><span class="params">()</span> </span>{</span><br><span class="line">            <span class="keyword">int</span> prevSize = size;</span><br><span class="line">            <span class="keyword">int</span> currSize = (left != <span class="keyword">null</span> ? left.size : <span class="number">0</span>) + (right.left != <span class="keyword">null</span> ? right.left.size : <span class="number">0</span>) + count;</span><br><span class="line">            BalancedNode root = right;</span><br><span class="line">            right = root.left;</span><br><span class="line">            root.left = <span class="keyword">this</span>;</span><br><span class="line">            root.size = prevSize;</span><br><span class="line">            size = currSize;</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function">BalancedNode <span class="title">rightRotate</span><span class="params">()</span> </span>{</span><br><span class="line">            <span class="keyword">int</span> prevSize = size;</span><br><span class="line">            <span class="keyword">int</span> currSize = (right != <span class="keyword">null</span> ? right.size : <span class="number">0</span>) + (left.right != <span class="keyword">null</span> ? left.right.size : <span class="number">0</span>) + count;</span><br><span class="line">            BalancedNode root = left;</span><br><span class="line">            left = root.right;</span><br><span class="line">            root.right = <span class="keyword">this</span>;</span><br><span class="line">            root.size = prevSize;</span><br><span class="line">            size = currSize;</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> BalancedNode root;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line">    <span class="keyword">private</span> Random rand;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BalancedTree</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.root = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.size = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.rand = <span class="keyword">new</span> Random();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getSize</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">long</span> x)</span> </span>{</span><br><span class="line">        ++size;</span><br><span class="line">        root = insert(root, x);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">lowerBound</span><span class="params">(<span class="keyword">long</span> x)</span> </span>{</span><br><span class="line">        BalancedNode node = root;</span><br><span class="line">        <span class="keyword">long</span> ans = Long.MAX_VALUE;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">if</span> (x == node.val) {</span><br><span class="line">                <span class="keyword">return</span> x;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (x &lt; node.val) {</span><br><span class="line">                ans = node.val;</span><br><span class="line">                node = node.left;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                node = node.right;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">upperBound</span><span class="params">(<span class="keyword">long</span> x)</span> </span>{</span><br><span class="line">        BalancedNode node = root;</span><br><span class="line">        <span class="keyword">long</span> ans = Long.MAX_VALUE;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">if</span> (x &lt; node.val) {</span><br><span class="line">                ans = node.val;</span><br><span class="line">                node = node.left;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                node = node.right;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] rank(<span class="keyword">long</span> x) {</span><br><span class="line">        BalancedNode node = root;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">if</span> (x &lt; node.val) {</span><br><span class="line">                node = node.left;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                ans += (node.left != <span class="keyword">null</span> ? node.left.size : <span class="number">0</span>) + node.count;</span><br><span class="line">                <span class="keyword">if</span> (x == node.val) {</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]{ans - node.count + <span class="number">1</span>, ans};</span><br><span class="line">                }</span><br><span class="line">                node = node.right;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]{Integer.MIN_VALUE, Integer.MAX_VALUE};</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> BalancedNode <span class="title">insert</span><span class="params">(BalancedNode node, <span class="keyword">long</span> x)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> BalancedNode(x, rand.nextInt());</span><br><span class="line">        }</span><br><span class="line">        ++node.size;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; node.val) {</span><br><span class="line">            node.left = insert(node.left, x);</span><br><span class="line">            <span class="keyword">if</span> (node.left.seed &gt; node.seed) {</span><br><span class="line">                node = node.rightRotate();</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (x &gt; node.val) {</span><br><span class="line">            node.right = insert(node.right, x);</span><br><span class="line">            <span class="keyword">if</span> (node.right.seed &gt; node.seed) {</span><br><span class="line">                node = node.leftRotate();</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            ++node.count;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸è§£æ³•ä¸€è¯´æ˜ï¼šä¸ºä»€ä¹ˆå¯ä»¥å½’å¹¶"><a href="#ğŸŒ¸è§£æ³•ä¸€è¯´æ˜ï¼šä¸ºä»€ä¹ˆå¯ä»¥å½’å¹¶" class="headerlink" title="ğŸŒ¸è§£æ³•ä¸€è¯´æ˜ï¼šä¸ºä»€ä¹ˆå¯ä»¥å½’å¹¶"></a>ğŸŒ¸è§£æ³•ä¸€è¯´æ˜ï¼šä¸ºä»€ä¹ˆå¯ä»¥å½’å¹¶</h2><p>çœ‹å®Œåæˆ‘æ˜ç™½å¦‚æœæ•°ç»„æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆå¯ä»¥å®¹æ˜“çš„æ±‚å‡ºåŒºé—´æ•°é‡ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå¯¹æ•°ç»„æ’åºå‰åæ‰€æ±‚çš„åŒºé—´æ•°é‡ä¸ä¼šæ”¹å˜å‘¢ï¼Œä¸‹é¢æˆ‘æ¥è¯´æ˜ä¸€ä¸‹ï¼ˆå®˜æ–¹å¹¶æ²¡æœ‰å®é™…è¯´æ˜è¿™ä¸€ç‚¹ï¼‰</p><p><strong>åˆå§‹å½’å¹¶ï¼š</strong><br>æ­¤æ—¶åªä¼šæœ‰0æˆ–1ä¸ªå…ƒç´ ï¼Œä¸æ¶‰åŠå·¦å³ä¸¤æ®µçš„æƒ…å†µï¼Œæ˜¯å¯ä»¥çš„</p><p><strong>åˆå¹¶å½’å¹¶ï¼š</strong>æ­¤æ—¶æ˜¯æœ‰å·¦å³ä¸¤æ®µçš„ï¼Œå·¦å³ä¸¤æ®µæ˜¯åˆ†åˆ«æœ‰åºçš„ï¼Œ<strong>å¯¹å‰ç¼€å’Œæ•°ç»„æ’åºå¹¶ä¸ä¼šä¿®æ”¹æ•°ç»„ä¸­å…ƒç´ çš„å€¼ï¼Œåªæ˜¯æ”¹å˜äº†å…ƒç´ æ˜¯ä½ç½®ï¼Œå¦‚å¯¹left ~ right=3~5ä½ç½®çš„å‰ç¼€å’Œæ’åºï¼Œæ’åºåå‰ç¼€å’Œ3 ~ 5ä½ç½®çš„æ•°è¿˜æ˜¯åŸæ¥3 ~ 5ä½ç½®çš„æ•°ï¼Œåªæ˜¯æ’åˆ—å˜åŒ–äº†</strong></p><p>è®¾æƒ³ä¸€ä¸ªä¸€èˆ¬çš„æƒ…å†µï¼Œç°åœ¨æ˜¯æŸä¸€å±‚çš„é€’å½’ï¼Œå·¦ï¼Œå³ä¸¤æ®µåŒºé—´left ~ mid, mid+1 ~ rightçš„ç¬¦åˆè¦æ±‚çš„åŒºé—´æ•°é‡å·²ç»é€šè¿‡countRangeSumRecursiveè®¡ç®—äº†å‡ºæ¥ï¼Œæ•´ä¸ªleft ~ rightåŒºé—´ä¸­å¯èƒ½çš„ç¬¦åˆè¦æ±‚çš„åŒºé—´æƒ…å†µæ˜¯ä¸¤ç«¯ç‚¹åœ¨left ~ midä¸­ï¼›ä¸¤ç«¯ç‚¹åœ¨mid+1 ~ rightï¼›ä¸€ä¸ªç«¯ç‚¹åœ¨left~ midä¸­ï¼Œä¸€ä¸ªç«¯ç‚¹åœ¨mid+1~ rightä¸­ï¼Œæ‰€ä»¥ç°åœ¨åªè¦æ±‚å‡ºç¬¬ä¸‰ç§æƒ…å†µçš„åŒºé—´æ•°é‡å°±å¯ä»¥äº†<br>é€šè¿‡ä¸Šé¢çš„è¯´æ˜ï¼Œleft ~ mid,mid+1~ rightåŒºé—´ä¸­çš„æ•°è¿˜æ˜¯åŸæ¥åŒºé—´ä¸­çš„æ•°ï¼Œåªæ˜¯é¡ºåºå˜æˆäº†æœ‰åºï¼Œè€Œæœ‰åºæ˜¯å®¹æ˜“è®¡ç®—ç¬¦åˆè¦æ±‚çš„åŒºé—´æ•°é‡çš„ï¼Œä¸€ä¸ªå›¾è¯´æ˜ä¸ºä»€ä¹ˆç¬¬ä¸‰ç§æƒ…å†µæ’åºå‰åç¬¦åˆæ•°é‡çš„åŒºé—´æ•°é‡æ˜¯ä¸å˜çš„</p><h2 id="ğŸŒ¸æŒ‡è·¯ï¼šå¦‚ä½•å­¦ä¹ æœ¬é¢˜çš„ç®—æ³•å’Œæ•°æ®ç»“æ„"><a href="#ğŸŒ¸æŒ‡è·¯ï¼šå¦‚ä½•å­¦ä¹ æœ¬é¢˜çš„ç®—æ³•å’Œæ•°æ®ç»“æ„" class="headerlink" title="ğŸŒ¸æŒ‡è·¯ï¼šå¦‚ä½•å­¦ä¹ æœ¬é¢˜çš„ç®—æ³•å’Œæ•°æ®ç»“æ„"></a>ğŸŒ¸æŒ‡è·¯ï¼šå¦‚ä½•å­¦ä¹ æœ¬é¢˜çš„ç®—æ³•å’Œæ•°æ®ç»“æ„</h2><p>å¿½ç•¥å®˜æ–¹é¢˜è§£ä¸­çš„æ–¹æ³•ä¸€ï¼Œå‰©ä½™çš„å››ç§æ–¹æ³•åˆ†åˆ«ä½¿ç”¨äº†çº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„å’Œå¹³è¡¡æ ‘ã€‚è¿™äº›æ–¹æ³•éƒ½ä¸æ˜¯é¢è¯•çš„è€ƒç‚¹ï¼Œç”šè‡³åœ¨ç¬”è¯•ä¸­ä¹Ÿå¾ˆå°‘å‡ºç°ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†è¯»è€…åº”è¯¥æ˜¯å®Œå…¨ä¸çŸ¥é“è¿™äº›éƒ½æ˜¯å•¥ç¥å¥‡çš„æ•°æ®ç»“æ„çš„ã€‚æ‰€ä»¥æˆ‘è§‰å¾—è¿™é‡Œæœ‰å¿…è¦è¡¥å……ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li>è¿™é“é¢˜éœ€è¦å“ªäº›æ¥å£ã€‚</li><li>ä¸Šé¢çš„è¿™äº›ç¥å¥‡çš„æ•°æ®ç»“æ„å¯ä»¥æä¾›å“ªäº›æ¥å£ã€‚</li></ul><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>ç»™å®šæ•°ç»„ Aï¼Œå®ƒçš„é•¿åº¦ä¸º nï¼Œå¯¹åº”çš„å…ƒç´ ä»¥åŠä¸‹æ ‡ä¸ºA[0],A[1],â‹¯,A[nâˆ’1]ã€‚</p><p>ä»¤ S(i,j) ä¸ºA[i] åˆ° A[j] çš„å’Œï¼Œå³</p><p>$S(i, j) = \sum_{k=i}^j A[k]$</p><p>é¢˜ç›®éœ€è¦æ±‚å‡ºæ»¡è¶³$ \textit{lower} \leq S(i, j) \leq \textit{upper}$ çš„äºŒå…ƒç»„ (i, j)(i,j) çš„ä¸ªæ•°ã€‚</p><p>æ¢æˆäººè¯å°±æ˜¯ï¼Œé—®æ•°ç»„ A æœ‰å¤šå°‘ä¸ªè¿ç»­çš„å­æ•°ç»„ï¼Œå…¶å…ƒç´ åªå’Œåœ¨ $[\textit{lower}, \textit{upper}]$ çš„èŒƒå›´å†…ã€‚</p><h3 id="é¢˜ç›®åˆ†æ"><a href="#é¢˜ç›®åˆ†æ" class="headerlink" title="é¢˜ç›®åˆ†æ"></a>é¢˜ç›®åˆ†æ</h3><p>æš´åŠ›çš„åšæ³•æ˜¯ä½¿ç”¨å‰ç¼€å’Œã€‚ä»¤ P ä¸º A çš„å‰ç¼€å’Œæ•°ç»„ï¼Œé‚£ä¹ˆ</p><p>S(i, j) = P[j] - P[i-1]</p><p>å¯ä»¥åœ¨O(1) çš„æ—¶é—´æ±‚å‡ºã€‚è¿™é‡Œæˆ‘ä»¬è§„å®šè¾¹ç•Œ P[-1] = 0ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬æšä¸¾æ‰€æœ‰çš„äºŒå…ƒç»„ (i, j)ï¼Œç®—å‡ºS(i,j) å¹¶åˆ¤æ–­å…¶æ˜¯å¦åœ¨èŒƒå›´å†…å³å¯ã€‚æ—¶é—´å¤æ‚åº¦ä¸º$ O(n^2)$ã€‚</p><p>é‚£ä¹ˆæ€ä¹ˆè¿›è¡Œä¼˜åŒ–å‘¢ï¼Ÿæˆ‘ä»¬è€ƒè™‘ä»å°åˆ°å¤§æšä¸¾ jï¼Œç”±äº</p><p>$\textit{lower} \leq P[j] - P[i-1] \leq \textit{upper}$</p><p>æˆ‘ä»¬å¯ä»¥å¾—åˆ° P[i-1] åº”è¯¥æ»¡è¶³çš„ä¸ç­‰å¼</p><p>$P[j] - \textit{upper} \leq P[i-1] \leq P[j] - \textit{lower}$</p><p>å› æ­¤æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„æ”¯æŒä¸‹é¢çš„ä¸¤ä¸ªæ“ä½œï¼š</p><p>æ“ä½œ 1ã€ŒæŸ¥è¯¢ã€ï¼šç»™å®šä¸€ä¸ªèŒƒå›´ $[\textit{left}, \textit{right}]$ï¼ŒæŸ¥è¯¢æ•°æ®ç»“æ„ä¸­åœ¨è¯¥èŒƒå›´å†…çš„å…ƒç´ ä¸ªæ•°ã€‚å¯¹åº”åˆ°æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬ç»™å®šçš„èŒƒå›´å°±æ˜¯$ \big[P[j] - \textit{upper}, P[j] - \textit{lower}\big]$ï¼›</p><p>æ“ä½œ 2ã€Œæ›´æ–°ã€ï¼šç»™å®šä¸€ä¸ªå…ƒç´  xxï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒæ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ã€‚å¯¹åº”åˆ°æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬ç»™å®šçš„å…ƒç´ å°±æ˜¯ P[j]ã€‚</p><p>å¦‚æœæœ‰äº†è¿™æ ·ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åšå‡ºæœ¬é¢˜ï¼š</p><p>æˆ‘ä»¬é¦–å…ˆå°† 00 æ”¾å…¥æ•°æ®ç»“æ„ä¸­ï¼Œéšåæˆ‘ä»¬ä»å°åˆ°å¤§æšä¸¾ jï¼ŒæŸ¥è¯¢ $\big[P[j] - \textit{upper}, P[j] - \textit{lower}\big]$ èŒƒå›´å†…çš„å…ƒç´ ä¸ªæ•°å¹¶è®¡å…¥ç­”æ¡ˆã€‚åœ¨æŸ¥è¯¢å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°†P[j] æ·»åŠ è¿›æ•°æ®ç»“æ„ï¼Œå°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ¬¡æšä¸¾ã€‚</p><h3 id="é¢‘æ•°æ•°ç»„"><a href="#é¢‘æ•°æ•°ç»„" class="headerlink" title="é¢‘æ•°æ•°ç»„"></a>é¢‘æ•°æ•°ç»„</h3><p>å¾ˆå¤šæ•°æ®ç»“æ„éƒ½æ˜¯åŸºäºã€Œé¢‘æ•°æ•°ç»„ã€ã€‚</p><p>ç»™å®šæ•°ç»„ t ä»¥åŠå®ƒçš„ä¸‹æ ‡èŒƒå›´ [L, R][L,R]ï¼Œt[x] å°±è¡¨ç¤ºå…ƒç´  x åœ¨æ•°æ®ç»“æ„ä¸­çš„å‡ºç°æ¬¡æ•°ã€‚åŸºäºæ­¤ï¼Œä¸Šè¿°çš„ä¸¤ä¸ªæ“ä½œå¯ä»¥å˜ä¸ºï¼š</p><p>æ“ä½œ 1ã€ŒæŸ¥è¯¢ã€ï¼šç»™å®šä¸€ä¸ªèŒƒå›´$ [\textit{left}, \textit{right}]$ï¼ŒæŸ¥è¯¢$ t[\textit{left}]$åˆ° $t[\textit{right}]$ çš„å’Œï¼›</p><p>æ“ä½œ 2ã€Œæ›´æ–°ã€ï¼šç»™å®šä¸€ä¸ªå…ƒç´  xï¼Œå°† t[x] å¢åŠ  1ã€‚</p><p>è¿™ä¹Ÿæ˜¯çº¿æ®µæ ‘å’Œæ ‘çŠ¶æ•°ç»„çš„åŸºç¡€ï¼Œå®ƒä»¬éœ€è¦çš„ç©ºé—´éƒ½ä¸æ•°ç»„ t çš„ä¸‹æ ‡èŒƒå›´ [L, R][L,R] æ­£ç›¸å…³ã€‚åœ¨æœ¬é¢˜æ•°æ®è§„æ¨¡è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹è¯•æ•°æ®ä¸­ï¼Œå‡ºç°äº†å…ƒç´ å€¼è¾¾åˆ° 32 ä½æœ‰ç¬¦å·æ•´æ•°çš„ä¸Šä¸‹ç•Œï¼‰ï¼Œçº¿æ®µæ ‘å’Œæ ‘çŠ¶æ•°ç»„éƒ½ä¼šè¶…å‡ºç©ºé—´é™åˆ¶ï¼Œå› æ­¤éœ€è¦å€ŸåŠ©ã€Œç¦»æ•£åŒ–ã€æ“ä½œï¼Œå°†è¿™äº›å…ƒç´ æ˜ å°„åˆ°ä¸€ä¸ªè¾ƒå°è§„æ¨¡çš„åŒºé—´å†…ã€‚</p><h3 id="ç¦»æ•£åŒ–"><a href="#ç¦»æ•£åŒ–" class="headerlink" title="ç¦»æ•£åŒ–"></a>ç¦»æ•£åŒ–</h3><p>ç»™å®šæ•°ç»„å…ƒç´  [1, 22, 333, 4444, 55555]ï¼Œå¦‚æœæˆ‘ä»¬åªå…³æ³¨å®ƒä»¬ä¹‹é—´çš„å¤§å°å…³ç³»ï¼Œé‚£ä¹ˆè¯¥æ•°ç»„å…¶å®å’Œ [1, 2, 3, 4, 5] æ˜¯ç­‰ä»·çš„ã€‚</p><p>è¿™å°±æ˜¯ç¦»æ•£åŒ–çš„æŠ€å·§ã€‚æˆ‘ä»¬å°†æ‰€æœ‰ä¼šæ¶‰åŠåˆ°æ¯”è¾ƒæ“ä½œçš„æ•°å…¨éƒ¨æ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œè¿›è¡Œæ’åºï¼Œå†ä»å°åˆ°å¤§ä¾æ¬¡ç»™å®ƒä»¬èµ‹äºˆä¸€ä¸ªæ–°çš„å€¼ã€‚åœ¨ç¦»æ•£åŒ–å®Œæˆåï¼Œä»»ä½•ä¸¤ä¸ªæ•°ä¹‹é—´çš„ç›¸å¯¹å¤§å°éƒ½ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯å…ƒç´ çš„ä¸Šä¸‹ç•ŒèŒƒå›´è¢«é™åˆ¶ä½ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨ä¸€äº›æ•°æ®ç»“æ„ã€‚</p><p>åœ¨æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„ $P[j], P[j] - \textit{upper}, P[j] - \textit{lower}$ä¸€èµ·è¿›è¡Œç¦»æ•£åŒ–ï¼Œå¹¶å°†å®ƒä»¬ä»å°åˆ°å¤§ï¼Œä¾æ¬¡èµ‹äºˆä¸€ä¸ªä» 1 å¼€å§‹çš„æ•´æ•°å€¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬æ‰€æœ‰æ¶‰åŠåˆ°çš„å…ƒç´ å€¼éƒ½ä¼šåœ¨ [1, 3(n+1)]çš„èŒƒå›´å†…ã€‚</p><h3 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h3><p>å½“æˆ‘ä»¬å°†å…ƒç´ ç¦»æ•£åŒ–åï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨çº¿æ®µæ ‘äº†ã€‚æœ€åŸºç¡€çš„çº¿æ®µæ ‘æ°å¥½å°±æ”¯æŒè¿™ä¸¤ç§æ“ä½œï¼š</p><p>æ“ä½œ 1ã€ŒæŸ¥è¯¢ã€ï¼šç»™å®šä¸€ä¸ªèŒƒå›´$ [\textit{left}, \textit{right}]$,æŸ¥è¯¢$ t[\textit{left}] $åˆ° $t[\textit{right}]$ çš„å’Œï¼›</p><p>æ“ä½œ 2ã€Œæ›´æ–°ã€ï¼šç»™å®šä¸€ä¸ªå…ƒç´  xï¼Œå°† t[x] å¢åŠ  $\delta$ã€‚</p><p>æˆ‘ä»¬åªéœ€è¦æ—¶åˆ»ä»¤$\delta$=1å³å¯ã€‚ä¸¤ç§æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º$ O(\log n)$</p><h3 id="æ ‘çŠ¶æ•°ç»„"><a href="#æ ‘çŠ¶æ•°ç»„" class="headerlink" title="æ ‘çŠ¶æ•°ç»„"></a>æ ‘çŠ¶æ•°ç»„</h3><p>å½“æˆ‘ä»¬å°†å…ƒç´ ç¦»æ•£åŒ–åï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ ‘çŠ¶æ•°ç»„äº†ã€‚æœ€åŸºç¡€çš„çº¿æ®µæ ‘æ”¯æŒè¿™ä¸¤ç§æ“ä½œï¼š</p><p>æ“ä½œ 1ã€ŒæŸ¥è¯¢ã€ï¼šç»™å®šä¸€ä¸ªä¸‹æ ‡$ \textit{right}$ï¼ŒæŸ¥è¯¢ t[1] åˆ°$ t[\textit{right}]$ çš„å’Œï¼ˆå³å‰ç¼€å’Œï¼‰ï¼›</p><p>æ“ä½œ 2ã€Œæ›´æ–°ã€ï¼šç»™å®šä¸€ä¸ªå…ƒç´  xï¼Œå°†t[x] å¢åŠ  $\deltaÎ´$ã€‚</p><p>æˆ‘ä»¬åªéœ€è¦æ—¶åˆ»ä»¤ $\delta=1$ å³å¯ï¼Œå¹¶ä¸”é€šè¿‡è°ƒç”¨æ“ä½œ 1 ä¸¤æ¬¡ï¼ˆå³ $\textit{right}$ å’Œ$ \textit{left}-1leftâˆ’1ï¼‰ç›¸å‡å¾—åˆ° t[\textit{left}]$ åˆ° $t[\textit{right}]$ çš„å’Œã€‚ä¸¤ç§æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º $O(\log n)$ã€‚</p><h3 id="å¹³è¡¡æ ‘"><a href="#å¹³è¡¡æ ‘" class="headerlink" title="å¹³è¡¡æ ‘"></a>å¹³è¡¡æ ‘</h3><p>å¹³è¡¡æ ‘å®é™…ä¸Šå°±æ˜¯ã€Œå¹³è¡¡ã€çš„äºŒå‰æœç´¢æ ‘ï¼Œå®ƒä¸çº¿æ®µæ ‘å’Œæ ‘çŠ¶æ•°ç»„ä¸åŒï¼Œå¹¶ä¸”å®ƒä¸éœ€è¦å€ŸåŠ©ç¦»æ•£åŒ–æ“ä½œã€‚æ”¯æŒçš„æ“ä½œï¼ˆåœ¨æœ¬é¢˜ä¸­ä¼šä½¿ç”¨åˆ°çš„ï¼‰ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><p>æ“ä½œ 1ã€Œlower boundã€ï¼šç»™å®šä¸€ä¸ªå…ƒç´  xï¼ŒæŸ¥è¯¢å¹³è¡¡æ ‘ä¸­æœ€å°çš„å¤§äºç­‰äº x çš„å…ƒç´ ï¼›</p><p>æ“ä½œ 2ã€Œupper boundã€ï¼šç»™å®šä¸€ä¸ªå…ƒç´  xï¼ŒæŸ¥è¯¢å¹³è¡¡æ ‘ä¸­æœ€å°çš„å¤§äº x çš„å…ƒç´ ï¼›</p><p>æ“ä½œ 3ã€Œrankã€ï¼šç»™å®šä¸€ä¸ªå…ƒç´  xï¼ˆå®ƒå¿…é¡»åœ¨å¹³è¡¡æ ‘ä¸­ï¼‰ï¼Œæ±‚å®ƒæ˜¯ç¬¬å‡ å°çš„å…ƒç´ ã€‚å½“å­˜åœ¨é‡å¤å…ƒç´ æ—¶ï¼Œä¼šè®¡å…¥å¤šæ¬¡ï¼›</p><p>æ“ä½œ 4ã€Œinsertã€ï¼šç»™å®šä¸€ä¸ªå…ƒç´  xï¼Œå°†å®ƒæ”¾å…¥å¹³è¡¡æ ‘ä¸­ã€‚</p><p>æ‰€æœ‰æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º $O(\log n)$ã€‚å¤§éƒ¨åˆ†è¯­è¨€è‡ªå¸¦çš„å¹³è¡¡æ ‘æ”¯æŒæ“ä½œ 1 å’Œ 2 å’Œ 4 ä½†ä¸æ”¯æŒæ“ä½œ 3ã€‚</p><p>é‚£ä¹ˆå¯¹äºæœ¬é¢˜ä¸­éœ€è¦çš„ä¸¤ç§æ“ä½œï¼š</p><p>ã€ŒæŸ¥è¯¢ã€ï¼šæˆ‘ä»¬ä»¤ $u = P[j] - \textit{upper}$ï¼Œ$v = P[j] - \textit{lower}$ã€‚å¯¹ u ä½¿ç”¨æ“ä½œ 11 å¾—åˆ° uâ€™â€²<br> ï¼Œå¯¹ v ä½¿ç”¨æ“ä½œ 2 å¾—åˆ° vâ€™  ã€‚æˆ‘ä»¬å†ä½¿ç”¨æ“ä½œ 3 å¾—åˆ° uâ€™çš„$ rank r_u$ ä»¥åŠ vâ€™<br>  çš„$ rank r_v$ ï¼Œé‚£ä¹ˆ$ r_vâ€™-r_uâ€™$â€²ï¼Œ å°±æ˜¯$ \big[P[j] - \textit{upper}, P[j] - \textit{lower}\big]$ ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚</p><p>ã€Œæ›´æ–°ã€ï¼šæˆ‘ä»¬å¯¹ x ä½¿ç”¨æ“ä½œ 4 å³å¯ã€‚</p><h3 id="å­¦ä¹ æ–¹æ³•"><a href="#å­¦ä¹ æ–¹æ³•" class="headerlink" title="å­¦ä¹ æ–¹æ³•"></a>å­¦ä¹ æ–¹æ³•</h3><p>å…³äºè¿™äº›ç«èµ›éš¾åº¦çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘å»ºè®®è¯»è€…åœ¨å­¦æœ‰ä½™åŠ›çš„æƒ…å†µä¸‹å­¦ä¹ ã€‚è¿™äº›çŸ¥è¯†ç‚¹å¯¹é¢è¯•å‡ ä¹æ²¡æœ‰ä»»ä½•å¸®åŠ©ï¼›ç›¸åï¼Œåœ¨æ²¡æœ‰å®Œå…¨æŒæ¡è¿™äº›çŸ¥è¯†ç‚¹çš„å‰æä¸‹ï¼Œå¯èƒ½ä¼šå½±å“è¯»è€…åŸæœ¬æ­£å¸¸çš„æ€ç»´ï¼Œäº§ç”Ÿã€Œçœ‹ä»€ä¹ˆé¢˜éƒ½æ˜¯çº¿æ®µæ ‘ã€ä¹‹ç±»çš„åæœã€‚</p><p>è¿™é‡Œæˆ‘æ¨èä¸¤ä¸ªå‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://oi-wiki.org/" target="_blank" rel="noopener">OI Wiki</a>ï¼Œæ˜¯ä¸€ä¸ªä¿¡æ¯å­¦ç«èµ›çˆ±å¥½è€…ç”¨çˆ±å‘ç”µçš„ç®—æ³•å°ç™¾ç§‘ã€‚</li><li><a href="https://github.com/atcoder/ac-library" target="_blank" rel="noopener">ac-library</a>ï¼Œæ˜¯æ—¥æœ¬è‘—åç®—æ³•ç«èµ›å¹³å° AtCoder æ•´ç†çš„ç®—æ³•æ¨¡æ¿ï¼Œä½†å…¶ä¸­æ²¡æœ‰å¹³è¡¡æ ‘ã€‚</li></ul><p>è¯»è€…ä¹Ÿå¯ä»¥å‚è€ƒå…¶å®ƒäº’è”ç½‘ä¸Šçš„åšå®¢ã€‚çº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„å’Œå¹³è¡¡æ ‘åœ¨ç®—æ³•ç«èµ›åœˆä¸­æ˜¯éå¸¸åŸºç¡€çš„çŸ¥è¯†ç‚¹ï¼Œä¼˜è´¨çš„åšå®¢æ•°é‡ä¹Ÿå¾ˆå¤š</p><h2 id="æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"><a href="#æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"></a><strong>æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼</strong></h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ğŸŒ¸é¢˜ç›®&quot;&gt;&lt;a href=&quot;#ğŸŒ¸é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;ğŸŒ¸é¢˜ç›®&quot;&gt;&lt;/a&gt;ğŸŒ¸é¢˜ç›®&lt;/h2&gt;&lt;p&gt;ğŸç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œè¿”å›åŒºé—´å’Œåœ¨ [lower, upper] ä¹‹é—´çš„ä¸ªæ•°ï¼ŒåŒ…å« lower å’Œ upperã€‚&lt;br&gt;åŒºé—´å’Œ S(i, j) è¡¨ç¤ºåœ¨ nums ä¸­ï¼Œä½ç½®ä» i åˆ° j çš„å…ƒç´ ä¹‹å’Œï¼ŒåŒ…å« i å’Œ j (i â‰¤ j)ã€‚&lt;/p&gt;
&lt;p&gt;è¯´æ˜:&lt;br&gt;æœ€ç›´è§‚çš„ç®—æ³•å¤æ‚åº¦æ˜¯ O(n2) ï¼Œè¯·åœ¨æ­¤åŸºç¡€ä¸Šä¼˜åŒ–ä½ çš„ç®—æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="LeetCode" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/LeetCode/"/>
    
    
      <category term="æ ‘çŠ¶æ•°ç»„" scheme="https://liudufu.github.io/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/"/>
    
      <category term="å½’å¹¶æ’åº" scheme="https://liudufu.github.io/tags/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/"/>
    
      <category term="çº¿æ®µæ ‘" scheme="https://liudufu.github.io/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
      <category term="åŠ¨æ€çº¿æ®µæ ‘" scheme="https://liudufu.github.io/tags/%E5%8A%A8%E6%80%81%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
      <category term="å¹³è¡¡äºŒå‰æœç´¢æ ‘" scheme="https://liudufu.github.io/tags/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>å²ä¸Šæœ€å…¨çš„éå†äºŒå‰æ ‘è¯¦è§£</title>
    <link href="https://liudufu.github.io/Detailed_explanation_of_tree/"/>
    <id>https://liudufu.github.io/Detailed_explanation_of_tree/</id>
    <published>2020-11-08T13:29:30.000Z</published>
    <updated>2020-11-08T13:31:33.410Z</updated>
    
    <content type="html"><![CDATA[<h1 id="X-éå†äºŒå‰æ ‘çš„æ–¹æ³•åˆé›†"><a href="#X-éå†äºŒå‰æ ‘çš„æ–¹æ³•åˆé›†" class="headerlink" title="X.éå†äºŒå‰æ ‘çš„æ–¹æ³•åˆé›†"></a>X.éå†äºŒå‰æ ‘çš„æ–¹æ³•åˆé›†</h1><ol><li><ol><li>äºŒå‰æ ‘çš„ä¸­åºéå†</li></ol></li><li><ol><li>äºŒå‰æ ‘çš„å‰åºéå†</li></ol></li><li><ol><li>äºŒå‰æ ‘çš„ååºéå†</li></ol></li></ol><h2 id="é€’å½’è§£æ³•"><a href="#é€’å½’è§£æ³•" class="headerlink" title="é€’å½’è§£æ³•"></a>é€’å½’è§£æ³•</h2><a id="more"></a><h3 id="å‰åºéå†"><a href="#å‰åºéå†" class="headerlink" title="å‰åºéå†"></a>å‰åºéå†</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">preOrderRecur</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    System.out.print(head.value + <span class="string">" "</span>);</span><br><span class="line">    preOrderRecur(head.left);</span><br><span class="line">    preOrderRecur(head.right);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ä¸­åºéå†"><a href="#ä¸­åºéå†" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">preOrderRecur</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    preOrderRecur(head.left);</span><br><span class="line">    System.out.print(head.value + <span class="string">" "</span>);</span><br><span class="line">    preOrderRecur(head.right);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ååºéå†"><a href="#ååºéå†" class="headerlink" title="ååºéå†"></a>ååºéå†</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">postOrderRecur</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    postOrderRecur(head.left);</span><br><span class="line">    postOrderRecur(head.right);</span><br><span class="line">    System.out.print(head.value + <span class="string">" "</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h3><p>è¿™é‡Œæ²¡æœ‰å¯¹é€’å½’éå†åšè¿‡å¤šçš„è§£é‡Šï¼Œä»…ä»…ç»™å‡ºäº†ç®€å•çš„åŠ¨ç”»æ¼”ç¤ºã€‚<br>è¦ç†è§£é€’å½’çš„æ€è·¯å¹¶ä¸”ç†Ÿç»ƒçš„ä½¿ç”¨å®ƒï¼Œå°±æ˜¯è¦æƒ³æ¸…æ¥šä½ æƒ³åšä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™åœæ­¢ã€‚</p><h3 id="å¦‚å‰åºéå†ï¼š"><a href="#å¦‚å‰åºéå†ï¼š" class="headerlink" title="å¦‚å‰åºéå†ï¼š"></a>å¦‚å‰åºéå†ï¼š</h3><p>æˆ‘æƒ³å…ˆæ‰“å°å¤´èŠ‚ç‚¹å¯¹å§ï¼Ÿé‚£æˆ‘æ‰“å°å®Œäº†å¤´èŠ‚ç‚¹ï¼Œæˆ‘ç°åœ¨æƒ³æ‰“å°å·¦è¾¹èŠ‚ç‚¹äº†ï¼Œæˆ‘åªæ˜¯å‘Šè¯‰è®¡ç®—æœºæˆ‘æƒ³æ‰“å°å·¦è¾¹ç»“ç‚¹ï¼Œä¹‹åæ‰“å°å³è¾¹ç»“ç‚¹ã€‚</p><h3 id="é‚£ä¹ˆååºéå†å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆååºéå†å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆååºéå†å‘¢ï¼Ÿ"></a>é‚£ä¹ˆååºéå†å‘¢ï¼Ÿ</h3><p>è¿™ä¸ªæ—¶å€™ä½ åº”è¯¥çŸ¥é“äº†ï¼Œæˆ‘å°±æ˜¯æƒ³æ“ä½œå·¦è¾¹ç„¶åå³è¾¹ï¼Œæœ€åæ‰“å°ä¸­é—´çš„å…ƒç´ ã€‚</p><p>æˆ‘ä»¬å¹¶ä¸éœ€è¦å¤ªè¿‡äºåœ¨æ„å…·ä½“çš„é€’å½’è¿‡ç¨‹ï¼Œè€Œæ˜¯è¦æƒ³æ¸…æ¥šè®©è®¡ç®—æœºå¹²ä»€ä¹ˆã€‚</p><p>è®¡ç®—æœºéƒ½å¯èƒ½æº¢å‡ºï¼Œç”¨äººè„‘å»éå†å°±ä¸ç°å®äº†ã€‚</p><h2 id="è¿­ä»£è§£æ³•"><a href="#è¿­ä»£è§£æ³•" class="headerlink" title="è¿­ä»£è§£æ³•"></a>è¿­ä»£è§£æ³•</h2><p>æœ¬è´¨ä¸Šæ˜¯åœ¨æ¨¡æ‹Ÿé€’å½’ï¼Œå› ä¸ºåœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ä½¿ç”¨äº†ç³»ç»Ÿæ ˆï¼Œæ‰€ä»¥åœ¨è¿­ä»£çš„è§£æ³•ä¸­å¸¸ç”¨Stackæ¥æ¨¡æ‹Ÿç³»ç»Ÿæ ˆã€‚</p><h3 id="å‰åºéå†-1"><a href="#å‰åºéå†-1" class="headerlink" title="å‰åºéå†"></a>å‰åºéå†</h3><p>é¦–å…ˆæˆ‘ä»¬åº”è¯¥åˆ›å»ºä¸€ä¸ªStackç”¨æ¥å­˜æ”¾èŠ‚ç‚¹ï¼Œé¦–å…ˆæˆ‘ä»¬æƒ³è¦æ‰“å°æ ¹èŠ‚ç‚¹çš„æ•°æ®ï¼Œæ­¤æ—¶Stacké‡Œé¢çš„å†…å®¹ä¸ºç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼˜å…ˆå°†å¤´ç»“ç‚¹åŠ å…¥Stackï¼Œç„¶åæ‰“å°ã€‚</p><p>ä¹‹åæˆ‘ä»¬åº”è¯¥å…ˆæ‰“å°å·¦å­æ ‘ï¼Œç„¶åå³å­æ ‘ã€‚æ‰€ä»¥å…ˆåŠ å…¥Stackçš„å°±æ˜¯å³å­æ ‘ï¼Œç„¶åå·¦å­æ ‘ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">preOrderIteration</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line"><span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">stack.push(head);</span><br><span class="line"><span class="keyword">while</span> (!stack.isEmpty()) {</span><br><span class="line">TreeNode node = stack.pop();</span><br><span class="line">System.out.print(node.value + <span class="string">" "</span>);</span><br><span class="line"><span class="keyword">if</span> (node.right != <span class="keyword">null</span>) {</span><br><span class="line">stack.push(node.right);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span> (node.left != <span class="keyword">null</span>) {</span><br><span class="line">stack.push(node.left);</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ä¸­åºéå†-1"><a href="#ä¸­åºéå†-1" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h3><p>åŒç†åˆ›å»ºä¸€ä¸ªStackï¼Œç„¶åæŒ‰ å·¦ ä¸­ å³çš„é¡ºåºè¾“å‡ºèŠ‚ç‚¹ã€‚<br>å°½å¯èƒ½çš„å°†è¿™ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘å‹å…¥Stackï¼Œæ­¤æ—¶æ ˆé¡¶çš„å…ƒç´ æ˜¯æœ€å·¦ä¾§çš„å…ƒç´ ï¼Œå…¶ç›®çš„æ˜¯æ‰¾åˆ°ä¸€ä¸ªæœ€å°å•ä½çš„å­æ ‘(ä¹Ÿå°±æ˜¯æœ€å·¦ä¾§çš„ä¸€ä¸ªèŠ‚ç‚¹)ï¼Œå¹¶ä¸”åœ¨å¯»æ‰¾çš„è¿‡ç¨‹ä¸­è®°å½•äº†æ¥æºï¼Œæ‰èƒ½è¿”å›ä¸Šå±‚,åŒæ—¶åœ¨è¿”å›ä¸Šå±‚çš„æ—¶å€™å·²ç»å¤„ç†å®Œæ¯•å·¦å­æ ‘äº†ã€‚ã€‚å½“å¤„ç†å®Œæœ€å°å•ä½çš„å­æ ‘æ—¶ï¼Œè¿”å›åˆ°ä¸Šå±‚å¤„ç†äº†ä¸­é—´èŠ‚ç‚¹ã€‚ï¼ˆå¦‚æœæŠŠæ•´ä¸ªå·¦ä¸­å³çš„éå†éƒ½ç†è§£æˆå­æ ‘çš„è¯ï¼Œå°±æ˜¯å¤„ç†å®Œ <code>å·¦å­æ ‘-&gt;ä¸­é—´(å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹)-&gt;å³å­æ ‘ï¼‰</code><br>å¦‚æœæœ‰å³èŠ‚ç‚¹ï¼Œå…¶ä¹Ÿè¦è¿›è¡Œä¸­åºéå†ã€‚</p><p><a href="https://imgchr.com/i/B84oZt" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/29/B84oZt.png" alt="B84oZt.png"></a></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">inOrderIteration</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line"><span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">TreeNode cur = head;</span><br><span class="line">Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line"><span class="keyword">while</span> (!stack.isEmpty() || cur != <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">while</span> (cur != <span class="keyword">null</span>) {</span><br><span class="line">stack.push(cur);</span><br><span class="line">cur = cur.left;</span><br><span class="line">}</span><br><span class="line">TreeNode node = stack.pop();</span><br><span class="line">System.out.print(node.value + <span class="string">" "</span>);</span><br><span class="line"><span class="keyword">if</span> (node.right != <span class="keyword">null</span>) {</span><br><span class="line">cur = node.right;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ååºéå†-1"><a href="#ååºéå†-1" class="headerlink" title="ååºéå†"></a>ååºéå†</h3><h4 id="ä»£ç ç‰‡æ®µ-1"><a href="#ä»£ç ç‰‡æ®µ-1" class="headerlink" title="ä»£ç ç‰‡æ®µ 1"></a>ä»£ç ç‰‡æ®µ 1</h4><ul><li>å‰åºéå†çš„è¿‡ç¨‹ æ˜¯ ä¸­å·¦å³ã€‚</li><li>å°†å…¶è½¬åŒ–æˆ ä¸­å³å·¦ã€‚ä¹Ÿå°±æ˜¯å‹æ ˆçš„è¿‡ç¨‹ä¸­ä¼˜å…ˆå‹å…¥å·¦å­æ ‘ï¼Œåœ¨å‹å…¥å³å­æ ‘ã€‚</li><li>ç„¶åå°†è¿™ä¸ªç»“æœè¿”å›æ¥ï¼Œè¿™é‡Œæ˜¯åˆ©ç”¨æ ˆçš„å…ˆè¿›åå‡ºå€’åºæ‰“å°ã€‚</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">postOrderIteration</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line"><span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">Stack&lt;TreeNode&gt; stack1 = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">Stack&lt;TreeNode&gt; stack2 = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">stack1.push(head);</span><br><span class="line"><span class="keyword">while</span> (!stack1.isEmpty()) {</span><br><span class="line">TreeNode node = stack1.pop();</span><br><span class="line">stack2.push(node);</span><br><span class="line"><span class="keyword">if</span> (node.left != <span class="keyword">null</span>) {</span><br><span class="line">stack1.push(node.left);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span> (node.right != <span class="keyword">null</span>) {</span><br><span class="line">stack1.push(node.right);</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">while</span> (!stack2.isEmpty()) {</span><br><span class="line">System.out.print(stack2.pop().value + <span class="string">" "</span>);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="ä»£ç ç‰‡æ®µ-2"><a href="#ä»£ç ç‰‡æ®µ-2" class="headerlink" title="ä»£ç ç‰‡æ®µ 2"></a>ä»£ç ç‰‡æ®µ 2</h4><ul><li>bnç”¨ä¸€ä¸ªæŒ‡é’ˆcuræ ‡è®°å½“å‰é€€å‡ºçš„èŠ‚ç‚¹æ˜¯ä»€ä¹ˆã€‚</li><li>ååºéå†çš„è¿‡ç¨‹ä¸­åœ¨éå†å®Œå·¦å­æ ‘è·Ÿå³å­æ ‘curéƒ½ä¼šå›åˆ°æ ¹ç»“ç‚¹ã€‚æ‰€ä»¥å½“å‰ä¸ç®¡æ˜¯ä»å·¦å­æ ‘è¿˜æ˜¯å³å­æ ‘å›åˆ°æ ¹ç»“ç‚¹éƒ½ä¸åº”è¯¥å†æ“ä½œäº†ï¼Œåº”è¯¥é€€å›ä¸Šå±‚ã€‚</li><li>å¦‚æœæ˜¯ä»å³è¾¹å†è¿”å›æ ¹ç»“ç‚¹ï¼Œåº”è¯¥å›åˆ°ä¸Šå±‚ã€‚</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">postOrderIteration2</span><span class="params">(TreeNode head)</span> </span>{ æ„Ÿè°¢[<span class="meta">@ben</span>-ben-niu](/u/ben-ben-niu/)æŒ‡å‡ºé”™è¯¯ï¼Œä»£ç ç¡®å®å­˜åœ¨é—®é¢˜ï¼Œå·²ç»åœ¨åŸæ–‡ä¸­ä¿®å¤</span><br><span class="line"><span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">TreeNode cur = head;</span><br><span class="line">Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">stack.push(head);</span><br><span class="line"><span class="keyword">while</span> (!stack.isEmpty()) {</span><br><span class="line">TreeNode peek = stack.peek();</span><br><span class="line"><span class="keyword">if</span> (peek.left != <span class="keyword">null</span> &amp;&amp; peek.left != cur &amp;&amp; peek.right != cur) {</span><br><span class="line">stack.push(peek.left);</span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (peek.right != <span class="keyword">null</span> &amp;&amp; peek.right != cur) {</span><br><span class="line">stack.push(peek.right);</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">System.out.print(stack.pop().val + <span class="string">" "</span>);</span><br><span class="line">cur = peek;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="Morrisè§£æ³•"><a href="#Morrisè§£æ³•" class="headerlink" title="Morrisè§£æ³•"></a>Morrisè§£æ³•</h2><p>Morriséå†ä½¿ç”¨äºŒå‰æ ‘èŠ‚ç‚¹ä¸­å¤§é‡æŒ‡å‘nullçš„æŒ‡é’ˆï¼Œç”±Joseph Morris äº1979å¹´å‘æ˜ã€‚<br>æ—¶é—´å¤æ‚åº¦ï¼šO(n)<br>é¢å¤–ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p><p>åœ¨ä½ é˜…è¯»ä»¥ä¸‹ä»£ç ä¹‹å‰ï¼Œåœ¨è¿™è¾¹å…ˆè®²è§£ä¸€ä¸‹Morrisçš„é€šç”¨è§£æ³•è¿‡ç¨‹ã€‚</p><p><a href="https://imgchr.com/i/B84OzQ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/29/B84OzQ.png" alt="B84OzQ.png"></a></p><p>Morrisçš„æ•´ä½“æ€è·¯å°±æ˜¯å°† ä»¥æŸä¸ªæ ¹ç»“ç‚¹å¼€å§‹ï¼Œæ‰¾åˆ°å®ƒå·¦å­æ ‘çš„æœ€å³ä¾§èŠ‚ç‚¹ä¹‹åä¸è¿™ä¸ªæ ¹ç»“ç‚¹è¿›è¡Œè¿æ¥<br>æˆ‘ä»¬å¯ä»¥ä» å›¾2 çœ‹åˆ°ï¼Œå¦‚æœè¿™ä¹ˆè¿æ¥ä¹‹åï¼Œcur è¿™ä¸ªæŒ‡é’ˆæ˜¯å¯ä»¥å®Œæ•´çš„ä»ä¸€ä¸ªèŠ‚ç‚¹é¡ºç€ä¸‹ä¸€ä¸ªèŠ‚ç‚¹éå†ï¼Œå°†æ•´æ£µæ ‘éå†å®Œæ¯•ï¼Œç›´åˆ° 7 è¿™ä¸ªèŠ‚ç‚¹å³ä¾§æ²¡æœ‰æŒ‡å‘ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">preOrderMorris</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line"><span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">TreeNode cur1 = head;<span class="comment">//å½“å‰å¼€å§‹éå†çš„èŠ‚ç‚¹</span></span><br><span class="line">TreeNode cur2 = <span class="keyword">null</span>;<span class="comment">//è®°å½•å½“å‰ç»“ç‚¹çš„å·¦å­æ ‘</span></span><br><span class="line"><span class="keyword">while</span> (cur1 != <span class="keyword">null</span>) {</span><br><span class="line">cur2 = cur1.left;</span><br><span class="line"><span class="keyword">if</span> (cur2 != <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">while</span> (cur2.right != <span class="keyword">null</span> &amp;&amp; cur2.right != cur1) {<span class="comment">//æ‰¾åˆ°å½“å‰å·¦å­æ ‘çš„æœ€å³ä¾§èŠ‚ç‚¹ï¼Œä¸”è¿™ä¸ªèŠ‚ç‚¹åº”è¯¥åœ¨æŒ‡å‘æ ¹ç»“ç‚¹ä¹‹å‰ï¼Œå¦åˆ™æ•´ä¸ªèŠ‚ç‚¹åˆå›åˆ°äº†æ ¹ç»“ç‚¹ã€‚</span></span><br><span class="line">cur2 = cur2.right;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span> (cur2.right == <span class="keyword">null</span>) {<span class="comment">//è¿™ä¸ªæ—¶å€™å¦‚æœæœ€å³ä¾§è¿™ä¸ªèŠ‚ç‚¹çš„å³æŒ‡é’ˆæ²¡æœ‰æŒ‡å‘æ ¹ç»“ç‚¹ï¼Œåˆ›å»ºè¿æ¥ç„¶åå¾€ä¸‹ä¸€ä¸ªå·¦å­æ ‘çš„æ ¹ç»“ç‚¹è¿›è¡Œè¿æ¥æ“ä½œã€‚</span></span><br><span class="line">cur2.right = cur1;</span><br><span class="line">cur1 = cur1.left;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">} <span class="keyword">else</span> {<span class="comment">//å½“å·¦å­æ ‘çš„æœ€å³ä¾§èŠ‚ç‚¹æœ‰æŒ‡å‘æ ¹ç»“ç‚¹ï¼Œæ­¤æ—¶è¯´æ˜æˆ‘ä»¬å·²ç»å›åˆ°äº†æ ¹ç»“ç‚¹å¹¶é‡å¤äº†ä¹‹å‰çš„æ“ä½œï¼ŒåŒæ—¶åœ¨å›åˆ°æ ¹ç»“ç‚¹çš„æ—¶å€™æˆ‘ä»¬åº”è¯¥å·²ç»å¤„ç†å®Œ å·¦å­æ ‘çš„æœ€å³ä¾§èŠ‚ç‚¹ äº†ï¼ŒæŠŠè·¯æ–­å¼€ã€‚</span></span><br><span class="line">cur2.right = <span class="keyword">null</span>;</span><br><span class="line">}</span><br><span class="line">} </span><br><span class="line">cur1 = cur1.right;<span class="comment">//ä¸€ç›´å¾€å³è¾¹èµ°ï¼Œå‚è€ƒå›¾</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="å‰åºéå†-2"><a href="#å‰åºéå†-2" class="headerlink" title="å‰åºéå†"></a>å‰åºéå†</h3><ol><li>åœ¨æŸä¸ªæ ¹ç»“ç‚¹åˆ›å»ºè¿çº¿çš„æ—¶å€™æ‰“å°ã€‚å› ä¸ºæˆ‘ä»¬æ˜¯é¡ºç€å·¦è¾¹çš„æ ¹èŠ‚ç‚¹æ¥åˆ›å»ºè¿çº¿ï¼Œä¸”åˆ›å»ºçš„è¿‡ç¨‹åªæœ‰ä¸€æ¬¡ã€‚</li><li>æ‰“å°æŸäº›è‡ªèº«æ— æ³•åˆ›å»ºè¿çº¿çš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯å¶å­èŠ‚ç‚¹ã€‚</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">preOrderMorris</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line"><span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">TreeNode cur1 = head;</span><br><span class="line">TreeNode cur2 = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">while</span> (cur1 != <span class="keyword">null</span>) {</span><br><span class="line">cur2 = cur1.left;</span><br><span class="line"><span class="keyword">if</span> (cur2 != <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">while</span> (cur2.right != <span class="keyword">null</span> &amp;&amp; cur2.right != cur1) {</span><br><span class="line">cur2 = cur2.right;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span> (cur2.right == <span class="keyword">null</span>) {</span><br><span class="line">cur2.right = cur1;</span><br><span class="line">System.out.print(cur1.value + <span class="string">" "</span>);</span><br><span class="line">cur1 = cur1.left;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">cur2.right = <span class="keyword">null</span>;</span><br><span class="line">}</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">System.out.print(cur1.value + <span class="string">" "</span>);</span><br><span class="line">}</span><br><span class="line">cur1 = cur1.right;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ä¸­åºéå†-2"><a href="#ä¸­åºéå†-2" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h3><p>ä»æœ€å·¦ä¾§å¼€å§‹é¡ºç€å³èŠ‚ç‚¹æ‰“å°ã€‚ä¹Ÿå°±æ˜¯åœ¨å°†cu1åˆ‡æ¢åˆ°ä¸Šå±‚èŠ‚ç‚¹çš„æ—¶å€™</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">inOrderMorris</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line"><span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">TreeNode cur1 = head;</span><br><span class="line">TreeNode cur2 = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">while</span> (cur1 != <span class="keyword">null</span>) {</span><br><span class="line">cur2 = cur1.left;</span><br><span class="line"><span class="comment">//æ„å»ºè¿æ¥çº¿</span></span><br><span class="line"><span class="keyword">if</span> (cur2 != <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">while</span> (cur2.right != <span class="keyword">null</span> &amp;&amp; cur2.right != cur1) {</span><br><span class="line">cur2 = cur2.right;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span> (cur2.right == <span class="keyword">null</span>) {</span><br><span class="line">cur2.right = cur1;</span><br><span class="line">cur1 = cur1.left;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">cur2.right = <span class="keyword">null</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">System.out.print(cur1.value + <span class="string">" "</span>);</span><br><span class="line">cur1 = cur1.right;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ååºéå†-2"><a href="#ååºéå†-2" class="headerlink" title="ååºéå†"></a>ååºéå†</h3><p>ååºéå†å°±æ¯”è¾ƒå¤æ‚äº†å“ˆï¼Œå…ˆçœ‹ä¸€ä¸‹å›¾</p><p><a href="https://imgchr.com/i/B84vss" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/29/B84vss.png" alt="B84vss.png"></a></p><p>å½“æˆ‘ä»¬åˆ°è¾¾æœ€å·¦ä¾§ï¼Œä¹Ÿå°±æ˜¯å·¦è¾¹è¿çº¿å·²ç»åˆ›å»ºå®Œæ¯•äº†ã€‚<br>æ‰“å° 4<br>æ‰“å° 5 2<br>æ‰“å° 6<br>æ‰“å° 7 3 1<br>æˆ‘ä»¬å°†ä¸€ä¸ªèŠ‚ç‚¹çš„è¿ç»­å³èŠ‚ç‚¹å½“æˆä¸€ä¸ªå•é“¾è¡¨æ¥çœ‹å¾…ã€‚<br>å½“æˆ‘ä»¬è¿”å›ä¸Šå±‚ä¹‹åï¼Œä¹Ÿå°±æ˜¯å°†è¿çº¿æ–­å¼€çš„æ—¶å€™ï¼Œæ‰“å°ä¸‹å±‚çš„å•é“¾è¡¨ã€‚<br>æ¯”å¦‚è¿”å›åˆ°ã€€ï¼’ï¼Œæ­¤æ—¶æ‰“å°ã€€ï¼”<br>æ¯”å¦‚è¿”å›åˆ°ã€€ï¼‘ï¼Œæ­¤æ—¶æ‰“å°ã€€ï¼•ã€€ï¼’<br>æ¯”å¦‚è¿”å›åˆ°ã€€ï¼“ï¼Œæ­¤æ—¶æ‰“å°ã€€ï¼–<br>é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦å°†è¿™ä¸ªå•é“¾è¡¨é€†åºæ‰“å°å°±è¡Œäº†ï¼Œä¸‹æ–‡ä¹Ÿç»™å‡ºäº† å•é“¾è¡¨é€†åºä»£ç <br>è¿™é‡Œä¸åº”è¯¥æ‰“å°å½“å‰å±‚ï¼Œè€Œæ˜¯ä¸‹ä¸€å±‚ï¼Œå¦åˆ™æ ¹ç»“ç‚¹ä¼šå…ˆä¸å³è¾¹æ‰“å°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ååºMorris</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">postOrderMorris</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line"><span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">TreeNode cur1 = head;<span class="comment">//éå†æ ‘çš„æŒ‡é’ˆå˜é‡</span></span><br><span class="line">TreeNode cur2 = <span class="keyword">null</span>;<span class="comment">//å½“å‰å­æ ‘çš„æœ€å³èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span> (cur1 != <span class="keyword">null</span>) {</span><br><span class="line">cur2 = cur1.left;</span><br><span class="line"><span class="keyword">if</span> (cur2 != <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">while</span> (cur2.right != <span class="keyword">null</span> &amp;&amp; cur2.right != cur1) {</span><br><span class="line">cur2 = cur2.right;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span> (cur2.right == <span class="keyword">null</span>) {</span><br><span class="line">cur2.right = cur1;</span><br><span class="line">cur1 = cur1.left;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">cur2.right = <span class="keyword">null</span>;</span><br><span class="line">postMorrisPrint(cur1.left);</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">cur1 = cur1.right;</span><br><span class="line">}</span><br><span class="line">postMorrisPrint(head);</span><br><span class="line">}</span><br><span class="line"><span class="comment">//æ‰“å°å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">postMorrisPrint</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line">TreeNode reverseList = postMorrisReverseList(head);</span><br><span class="line">TreeNode cur = reverseList;</span><br><span class="line"><span class="keyword">while</span> (cur != <span class="keyword">null</span>) {</span><br><span class="line">System.out.print(cur.value + <span class="string">" "</span>);</span><br><span class="line">cur = cur.right;</span><br><span class="line">}</span><br><span class="line">postMorrisReverseList(reverseList);</span><br><span class="line">}</span><br><span class="line"><span class="comment">//ç¿»è½¬å•é“¾è¡¨</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeNode <span class="title">postMorrisReverseList</span><span class="params">(TreeNode head)</span> </span>{</span><br><span class="line">TreeNode cur = head;</span><br><span class="line">TreeNode pre = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">while</span> (cur != <span class="keyword">null</span>) {</span><br><span class="line">TreeNode next = cur.right;</span><br><span class="line">cur.right = pre;</span><br><span class="line">pre = cur;</span><br><span class="line">cur = next;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> pre;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;X-éå†äºŒå‰æ ‘çš„æ–¹æ³•åˆé›†&quot;&gt;&lt;a href=&quot;#X-éå†äºŒå‰æ ‘çš„æ–¹æ³•åˆé›†&quot; class=&quot;headerlink&quot; title=&quot;X.éå†äºŒå‰æ ‘çš„æ–¹æ³•åˆé›†&quot;&gt;&lt;/a&gt;X.éå†äºŒå‰æ ‘çš„æ–¹æ³•åˆé›†&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;ol&gt;
&lt;li&gt;äºŒå‰æ ‘çš„ä¸­åºéå†&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;ol&gt;
&lt;li&gt;äºŒå‰æ ‘çš„å‰åºéå†&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;ol&gt;
&lt;li&gt;äºŒå‰æ ‘çš„ååºéå†&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;é€’å½’è§£æ³•&quot;&gt;&lt;a href=&quot;#é€’å½’è§£æ³•&quot; class=&quot;headerlink&quot; title=&quot;é€’å½’è§£æ³•&quot;&gt;&lt;/a&gt;é€’å½’è§£æ³•&lt;/h2&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="LeetCode" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/LeetCode/"/>
    
    
      <category term="é€’å½’" scheme="https://liudufu.github.io/tags/%E9%80%92%E5%BD%92/"/>
    
      <category term="ä¸­åºéå†" scheme="https://liudufu.github.io/tags/%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86/"/>
    
      <category term="è¿­ä»£" scheme="https://liudufu.github.io/tags/%E8%BF%AD%E4%BB%A3/"/>
    
      <category term="å‰åºéå†" scheme="https://liudufu.github.io/tags/%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86/"/>
    
      <category term="ååºéå†" scheme="https://liudufu.github.io/tags/%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86/"/>
    
      <category term="Morrisè§£æ³•" scheme="https://liudufu.github.io/tags/Morris%E8%A7%A3%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>è„‘ç­‹æ€¥è½¬å¼¯_leetcode.1227.é£æœºåº§ä½åˆ†é…æ¦‚ç‡</title>
    <link href="https://liudufu.github.io/Aircraft_seat_allocation_probability/"/>
    <id>https://liudufu.github.io/Aircraft_seat_allocation_probability/</id>
    <published>2020-11-08T12:21:24.000Z</published>
    <updated>2020-11-08T12:23:11.572Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ğŸŒ¸é¢˜ç›®"><a href="#ğŸŒ¸é¢˜ç›®" class="headerlink" title="ğŸŒ¸é¢˜ç›®"></a>ğŸŒ¸é¢˜ç›®</h2><p>ğŸæœ‰ n ä½ä¹˜å®¢å³å°†ç™»æœºï¼Œé£æœºæ­£å¥½æœ‰ n ä¸ªåº§ä½ã€‚ç¬¬ä¸€ä½ä¹˜å®¢çš„ç¥¨ä¸¢äº†ï¼Œä»–éšä¾¿é€‰äº†ä¸€ä¸ªåº§ä½åä¸‹ã€‚</p><p>å‰©ä¸‹çš„ä¹˜å®¢å°†ä¼šï¼š</p><p>å¦‚æœä»–ä»¬è‡ªå·±çš„åº§ä½è¿˜ç©ºç€ï¼Œå°±ååˆ°è‡ªå·±çš„åº§ä½ä¸Šï¼Œ</p><p>å½“ä»–ä»¬è‡ªå·±çš„åº§ä½è¢«å ç”¨æ—¶ï¼Œéšæœºé€‰æ‹©å…¶ä»–åº§ä½<br>ç¬¬ n ä½ä¹˜å®¢ååœ¨è‡ªå·±çš„åº§ä½ä¸Šçš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ</p> <a id="more"></a><p>ç¤ºä¾‹ 1ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 1</span><br><span class="line">è¾“å‡ºï¼š1.00000</span><br><span class="line">è§£é‡Šï¼šç¬¬ä¸€ä¸ªäººåªä¼šååœ¨è‡ªå·±çš„ä½ç½®ä¸Šã€‚</span><br></pre></td></tr></tbody></table></figure><p>ç¤ºä¾‹ 2ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: n = 2</span><br><span class="line">è¾“å‡º: 0.50000</span><br><span class="line">è§£é‡Šï¼šåœ¨ç¬¬ä¸€ä¸ªäººé€‰å¥½åº§ä½åä¸‹åï¼Œç¬¬äºŒä¸ªäººååœ¨è‡ªå·±çš„åº§ä½ä¸Šçš„æ¦‚ç‡æ˜¯ 0.5ã€‚</span><br></pre></td></tr></tbody></table></figure><p>æç¤ºï¼š</p><ul><li>1 &lt;= n &lt;= 10^5</li></ul><h2 id="ğŸŒ¸è§£æ³•ï¼šåˆ†ç±»è®¨è®º"><a href="#ğŸŒ¸è§£æ³•ï¼šåˆ†ç±»è®¨è®º" class="headerlink" title="ğŸŒ¸è§£æ³•ï¼šåˆ†ç±»è®¨è®º"></a>ğŸŒ¸è§£æ³•ï¼šåˆ†ç±»è®¨è®º</h2><p>è¿™é“é¢˜ä»£ç å¾ˆç®€å•ï¼Œä½†æ˜¯å°±çœ‹ä½ çš„è„‘è¢‹æƒ³ä¸æƒ³å¾—åˆ°äº†ï¼Œæ•°å­¦æ¨ç†ä¹ŸæŒºéš¾æ‡‚å¾—ï¼Œåœ¨è¿™é‡Œå¤§è‡´è¯´ä¸€ä¸‹æˆ‘çš„ç†è§£å§</p><ul><li><p>ç¬¬ä¸€ï¼Œé¢˜ç›®å¹¶æ²¡æœ‰æŒ‰ç…§åº§ä½å·1-nçš„é¡ºåºè¿›è¡Œä¹˜å®¢ç™»å½•é£æœºï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€ä¸ªä¹˜å®¢çš„åº§ä½å·å¹¶ä¸æ˜¯1ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹å·§å¦™çš„ç‚¹å°±åœ¨äºè¿™ä¸ªé¢˜å¹¶ä¸ç®¡ä¹˜å®¢çš„åº§ä½å·æ˜¯å¦‚ä½•ç¼–æ’çš„ï¼Œå› ä¸ºåº§ä½å·ä¹ŸåŒæ ·æ˜¯1-nï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»¥ä¹˜å®¢çš„ç™»å½•é£æœºçš„é¡ºåºä¸ºä¹˜å®¢é‡æ–°è¿›è¡Œç¼–å·ï¼Œå³ç¬¬ä¸€ä¸ªä¹˜å®¢æ‰€å¯¹åº”çš„åº§ä½å·(ç¼–å·ä»£è¡¨çš„æ˜¯å…¥åœºçš„æ¬¡åºï¼Œè€Œä¸æ˜¯å®é™…çš„åº§ä½å·)ã€‚</p></li><li><p>ç¬¬äºŒï¼ŒæŒ‰ç…§æ‰€æœ‰çš„æƒ…å†µè¿›è¡Œåˆ†ç±»è®¨è®º</p><ul><li><p>å½“n ç­‰äº1ï¼Œæ¯«æ— ç–‘é—®ï¼Œç¬¬nä¸ªä¹˜å®¢å°±æ˜¯ä»–è‡ªå·±ï¼Œåå›ä»–è‡ªå·±åº§ä½çš„æ¦‚ç‡ä¸º1.0</p></li><li><p>å½“n ä¸ç­‰äº1ï¼Œç¬¬ä¸€ä¸ªä¹˜å®¢è¿›å…¥é£æœºåï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µã€‚</p><ul><li><p>ä»–æœ‰1/nçš„æ¦‚ç‡å»é€‰æ‹©åˆ°åŸæœ¬å±äºä»–è‡ªå·±çš„åº§ä½ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–é€‰æ‹©å¯¹äº†ï¼Œåˆ™åé¢çš„æ‰€æœ‰äººä½ç½®éƒ½æ˜¯å¯¹çš„ï¼Œæ‰€ä»¥ç¬¬nä¸ªäººçš„æ¦‚ç‡ä¸º1</p></li><li><p>ä»–æœ‰1/nçš„æ¦‚ç‡é€‰æ‹©åˆ°ç¬¬nä¸ªäººåº§ä½ï¼Œå³ç¬¬nä¸ªäººæ— è®ºå¦‚ä½•ä¹Ÿé€‰æ‹©ä¸äº†è‡ªå·±çš„åº§ä½ï¼Œæ¦‚ç‡ä¸º0</p></li><li><p>å¦‚æœç¬¬ä¸€ä¸ªäººé€‰æ‹©åˆ°äº†ç¬¬iä¸ªäººçš„åº§ä½ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªäººåˆ°ç¬¬i- 1ä¸ªäººçš„ä½ç½®éƒ½æ˜¯å¯¹çš„ï¼Œè½®åˆ°ç¬¬iä¸ªäººæ—¶å°±ä¼šæ„Ÿè§‰åˆ°è¿·èŒ«ã€‚å› ä¸ºè‡ªå·±çš„ä½ç½®è¢«å æ®äº†ï¼Œå¦‚æœç¬¬iä¸ªäººé€‰æ‹©ç¬¬ä¸€ä¸ªäººçš„åº§ä½ï¼Œé‚£ä¹ˆåé¢çš„äººä½ç½®éƒ½æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œå¦‚æœä»–é€‰æ‹©åˆ°äº†ç¬¬i + 1åˆ°ç¬¬nä¸ªåº§ä½ï¼Œé‚£ä¹ˆåé¢çš„äººä¹Ÿä¼šé‡åˆ°åŒæ ·è¿·èŒ«çš„é—®é¢˜ï¼Œé‚£ä¹ˆï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ</p></li><li><p>å…¶å®ï¼Œå½“è½®åˆ°ç¬¬iä¸ªäººçš„æ—¶å€™ï¼Œiæ„Ÿè§‰åˆ°äº†è¿·èŒ«ï¼Œå°±åƒä¸€å¼€å§‹ç¬¬ä¸€ä¸ªäººä¸€æ ·ä¸çŸ¥é“è‡ªå·±åº”è¯¥åå“ªå„¿ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å°†iå’Œ1èº«ä»½äº’æ¢ä¸€ä¸‹ï¼Œä»¤ç¬¬ä¸€ä¸ªä½ç½®å°±æ˜¯iæœ¬èº«çš„åº§ä½ï¼Œè¿™æ ·å°±ä¼šæœ‰ié€‰æ‹©ç¬¬ä¸€ä¸ªåº§ä½ï¼Œåé¢çš„äººåº§ä½è‚¯å®šæ˜¯å¯¹çš„ï¼Œå¦‚æœiä¸é€‰æ‹©1å·ï¼ŒåŒæ ·æ˜¯ä¼šä»¤ä¸‹ä¸€ä¸ªiæ„Ÿåˆ°è¿·èŒ«ï¼Œè¿™æ ·å°±å¯ä»¥äº§ç”Ÿé€’å½’äº†ï¼Œå¹¶ä¸”å°†é—®é¢˜çš„è§„æ¨¡ç¼©å‡åˆ°äº†n - i + 1(å³è¿˜å‰©ä¸‹å¤šå°‘ä¸ªåº§ä½æ²¡æœ‰æ²¡æœ‰è¢«é€‰æˆ–è€…è¿˜å‰©ä¸‹å¤šå°‘ä¸ªäººæ²¡æœ‰é€‰ï¼Œn - iä»£è¡¨iåé¢çš„äººï¼Œå†åŠ ä¸Šè¿·èŒ«çš„iå°±æ˜¯n - i + 1)</p></li><li><p>æˆ‘ä»¬ä»¤f(n)ä¸ºç¬¬nä¸ªäººååˆ°è‡ªå·±åŸæœ¬åº§ä½çš„æ¦‚ç‡ï¼ŒæŒ‰ç…§é€’æ¨è§„å¾‹å¯æœ‰</p><ul><li><p>$f(n) = \frac{1}{n}\left(1 + \sum_{i=2}^{n-1}{f(n-i+1)}\right)$</p></li><li><p>è¿™ä¸ªé€’æ¨å¼æƒ³å¿…å¤§å®¶é«˜ä¸­å°±ä¼šæ±‚äº†ï¼Œä»¤ n = n-1å†å†™å‡ºä¸€é¡¹ï¼š</p></li><li><p>$f(n-1) = \frac{1}{n-1}\left(1 + \sum_{i=2}^{n-2}{f(n-i)}\right)$</p></li><li><p>ç„¶åä¸¤å¼ç›¸å‡å¾—åˆ°ï¼š$nf(n) - (n-1)f(n-1) = f(n-1)$</p><p>å³ï¼š$f(n) = f(n-1) = \cdots = f(2)$</p><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„ç­”æ¡ˆäº†ï¼Œå¯¹ä»»æ„çš„ $n \ge 2nâ‰¥2 $éƒ½æœ‰ <code>f(n) = f(2) = 0.5</code></p></li></ul></li><li><p>å¦ä¸€ç§ç†è§£ï¼šå¯ä»¥æŠŠ0åˆ°n-1çœ‹æˆä¸€ä¸ªæ•´ä½“ï¼Œé‚£å¯¹äºnæ¥è¯´ï¼Œæ— éå°±ä¸¤ç§æƒ…å†µï¼Œå‰0åˆ°n-1å·æ˜¯å¦ä¼šæŠŠnçš„ä½ç½®å æ®ï¼Œæ¦‚ç‡å°±æ˜¯0.5ï¼›åªæœ‰ä¸€ä¸ªäººçš„æƒ…å†µæ¦‚ç‡ä¸º1ï¼ˆä¸€å®šååœ¨è‡ªå·±çš„ä½ç½®ä¸Šï¼‰ã€‚</p></li></ul></li></ul></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">nthPersonGetsNthSeat</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> n == <span class="number">1</span> ? <span class="number">1.0</span> : <span class="number">0.5</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"><a href="#æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"></a><strong>æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼</strong></h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ğŸŒ¸é¢˜ç›®&quot;&gt;&lt;a href=&quot;#ğŸŒ¸é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;ğŸŒ¸é¢˜ç›®&quot;&gt;&lt;/a&gt;ğŸŒ¸é¢˜ç›®&lt;/h2&gt;&lt;p&gt;ğŸæœ‰ n ä½ä¹˜å®¢å³å°†ç™»æœºï¼Œé£æœºæ­£å¥½æœ‰ n ä¸ªåº§ä½ã€‚ç¬¬ä¸€ä½ä¹˜å®¢çš„ç¥¨ä¸¢äº†ï¼Œä»–éšä¾¿é€‰äº†ä¸€ä¸ªåº§ä½åä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;å‰©ä¸‹çš„ä¹˜å®¢å°†ä¼šï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœä»–ä»¬è‡ªå·±çš„åº§ä½è¿˜ç©ºç€ï¼Œå°±ååˆ°è‡ªå·±çš„åº§ä½ä¸Šï¼Œ&lt;/p&gt;
&lt;p&gt;å½“ä»–ä»¬è‡ªå·±çš„åº§ä½è¢«å ç”¨æ—¶ï¼Œéšæœºé€‰æ‹©å…¶ä»–åº§ä½&lt;br&gt;ç¬¬ n ä½ä¹˜å®¢ååœ¨è‡ªå·±çš„åº§ä½ä¸Šçš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="LeetCode" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/LeetCode/"/>
    
    
      <category term="æ¨¡æ‹Ÿ" scheme="https://liudufu.github.io/tags/%E6%A8%A1%E6%8B%9F/"/>
    
      <category term="åˆ†ç±»è®¨è®º" scheme="https://liudufu.github.io/tags/%E5%88%86%E7%B1%BB%E8%AE%A8%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>è„‘ç­‹æ€¥è½¬å¼¯_leetcode.1033.ç§»åŠ¨çŸ³å­ç›´åˆ°è¿ç»­</title>
    <link href="https://liudufu.github.io/Move_the_stone_until_continuous/"/>
    <id>https://liudufu.github.io/Move_the_stone_until_continuous/</id>
    <published>2020-11-08T12:17:35.000Z</published>
    <updated>2020-11-08T12:20:53.654Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å“ï¼Œæœ€è¿‘å¿™ç€ACMå’Œè“æ¡¥æ¯ï¼ˆæ¯•ç«Ÿéƒ½æ˜¯ç¬¬ä¸€æ¬¡å‚èµ›çš„å°ç™½ï¼‰ï¼Œå¯æŠŠè‡ªå·±æ•´è¿·ç³Šäº†ï¼Œå½“ä¸¤é¡¹æ¯”èµ›å…¨éƒ¨å‘Šä¸€æ®µè½ï¼Œè‡ªå·±æ‰æ˜¯çœŸçš„è§‰æ‚Ÿåˆ°è‡ªå·±ä¸åˆ«äººçš„å·®è·ä»¥åŠè‡ªå·±çš„å¤§è„‘æ€è€ƒé—®é¢˜çš„èƒ½åŠ›å¾ˆæ˜¯æ¬ ç¼ºï¼Œè¿˜æœ‰å°±æ˜¯æ€è€ƒä¸å¤Ÿå…¨é¢ï¼Œå¾€å¾€ä¸€é“é¢˜æ˜æ˜è‡ªå·±å·²ç»å†™å‡ºäº†æ–¹æ³•ï¼Œä½†ç¡¬æ˜¯åœ¨æ¯”èµ›é€”ä¸­æƒ³ä¸å‡ºä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•å»ä¼˜åŒ–æ–¹æ³•å’Œæ›´å¿«çš„å¾—å‡ºç­”æ¡ˆï¼Œæ€»æ˜¯èµ›åè¯¸è‘›äº®çš„æƒ³å‡ºè¿™è¯¥æ€ä¹ˆåšï¼Œé‚£è¯¥æ€ä¹ˆåšï¼Œè¿™äº›æ¬ ç¼ºéƒ½å¯¼è‡´è‡ªå·±åœ¨ACMå’Œè“æ¡¥æ¯ä¸­ä¸¢å¤±å¾—åˆ†ï¼Œçœ‹æ¥è¿˜æ˜¯å¾—åŠªåŠ›å‘€ï¼Œä¸è®©è‡ªå·±å˜å¾—æ›´å¼ºåˆä½•èƒ½å¾æˆ˜æ˜Ÿè¾°å¤§æµ·å‘¢ï¼Œå…ˆæ¥ç»ƒç»ƒæ€ç»´èƒ½åŠ›å§ï¼Œä»æœ€ç®€å•çš„è„‘ç­‹æ€¥è½¬å¼¯å¼€å§‹ï¼</p></blockquote><a id="more"></a><h2 id="ğŸŒ¸é¢˜ç›®"><a href="#ğŸŒ¸é¢˜ç›®" class="headerlink" title="ğŸŒ¸é¢˜ç›®"></a>ğŸŒ¸é¢˜ç›®</h2><p>ğŸä¸‰æšçŸ³å­æ”¾ç½®åœ¨æ•°è½´ä¸Šï¼Œä½ç½®åˆ†åˆ«ä¸º aï¼Œbï¼Œcã€‚</p><p>æ¯ä¸€å›åˆï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸‰æšçŸ³å­å½“å‰åˆ†åˆ«ä½äºä½ç½® x, y, z ä¸” x &lt; y &lt; zã€‚ä»ä½ç½® x æˆ–è€…æ˜¯ä½ç½® z æ‹¿èµ·ä¸€æšçŸ³å­ï¼Œå¹¶å°†è¯¥çŸ³å­ç§»åŠ¨åˆ°æŸä¸€æ•´æ•°ä½ç½® k å¤„ï¼Œå…¶ä¸­ x &lt; k &lt; z ä¸” k != yã€‚</p><p>å½“ä½ æ— æ³•è¿›è¡Œä»»ä½•ç§»åŠ¨æ—¶ï¼Œå³ï¼Œè¿™äº›çŸ³å­çš„ä½ç½®è¿ç»­æ—¶ï¼Œæ¸¸æˆç»“æŸã€‚</p><p>è¦ä½¿æ¸¸æˆç»“æŸï¼Œä½ å¯ä»¥æ‰§è¡Œçš„æœ€å°å’Œæœ€å¤§ç§»åŠ¨æ¬¡æ•°åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ ä»¥é•¿åº¦ä¸º 2 çš„æ•°ç»„å½¢å¼è¿”å›ç­”æ¡ˆï¼šanswer = [minimum_moves, maximum_moves]</p><p>ç¤ºä¾‹ 1ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼ša = 1, b = 2, c = 5</span><br><span class="line">è¾“å‡ºï¼š[1, 2]</span><br><span class="line">è§£é‡Šï¼šå°†çŸ³å­ä» 5 ç§»åŠ¨åˆ° 4 å†ç§»åŠ¨åˆ° 3ï¼Œæˆ–è€…æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†çŸ³å­ç§»åŠ¨åˆ° 3ã€‚</span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼ša = 4, b = 3, c = 2</span><br><span class="line">è¾“å‡ºï¼š[0, 0]</span><br><span class="line">è§£é‡Šï¼šæˆ‘ä»¬æ— æ³•è¿›è¡Œä»»ä½•ç§»åŠ¨ã€‚</span><br></pre></td></tr></tbody></table></figure><p>æç¤ºï¼š</p><ul><li>1 &lt;= a &lt;= 100</li><li>1 &lt;= b &lt;= 100</li><li>1 &lt;= c &lt;= 100</li><li>a != b, b != c, c != a</li></ul><h2 id="ğŸŒ¸è§£æ³•ï¼šåˆ†ç±»è®¨è®º"><a href="#ğŸŒ¸è§£æ³•ï¼šåˆ†ç±»è®¨è®º" class="headerlink" title="ğŸŒ¸è§£æ³•ï¼šåˆ†ç±»è®¨è®º"></a>ğŸŒ¸è§£æ³•ï¼šåˆ†ç±»è®¨è®º</h2><p>è¿™é“é¢˜ç»™å‡ºçš„æ•°æ®å¹¶æ²¡æœ‰ç›´æ¥ç»™ä½ æ’å¥½åºäº†çš„ï¼Œä»–çš„æ•°æ®é¡ºåºæ˜¯ä¹±çš„ï¼ˆè¿™æ˜¯ä¸€ä¸ªå°å°çš„å‘ï¼‰</p><p>å‡è®¾å·²ç»æ’å¥½åºäº†é‚£ä¹ˆè¦æ±‚å‡ºæœ€å¤§æ¬¡æ•°å’Œæœ€å°æ¬¡æ•°ï¼Œå³</p><ul><li>æœ€å¤§æ¬¡æ•°ï¼Œæ— ç–‘å°±æ˜¯ä¸€æ­¥ä¸€æ­¥çš„èµ°ï¼Œå³æœ€åä¸€ä¸ªå…ƒç´ å‡å»ç¬¬ä¸€ä¸ªå…ƒç´  å†å‡äºŒï¼ˆè¿™å¾ˆå¥½æ¨æ–­ï¼Œè‡ªå·±ç”»ä¸€ä¸ªæ•°è½´å°±çŸ¥é“äº†ï¼‰</li><li>æœ€å°æ¬¡æ•°ï¼Œåªèƒ½æ˜¯1æˆ–è€…2ï¼Œè¿™å°±è¦åˆ†ç±»è®¨è®ºäº†<ul><li>æœ€å°æ¬¡æ•°ä¸ºä¸€ï¼Œå³åªéœ€è¦åŠ¨ä¸€æ­¥ï¼Œå³å·²ç»æœ‰ä¸¤ä¸ªæ•°æ˜¯è¿ç»­çš„äº†æˆ–è€…ä¸¤ä¸ªæ•°ä¹‹é—´åªæœ‰ä¸€ä¸ªç©ºçš„æ—¶å€™,ä¾‹å¦‚ <code>1  2  5</code>ã€<code>1  3  5</code>ã€‚</li><li>æœ€å°æ¬¡æ•°ä¸ºäºŒï¼Œå³é™¤ä¸Šé¢æƒ…å†µä¹‹åçš„æ‰€æœ‰æƒ…å†µ</li></ul></li></ul><p>ä»£ç å°±å¾ˆå¥½å¾—å‡ºäº†</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Text</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] numMovesStones(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c) {</span><br><span class="line">    <span class="keyword">int</span> max = Math.max(Math.max(a, b), c);<span class="comment">//æ‰¾åˆ°æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">int</span> min = Math.min(Math.min(a, b), c);<span class="comment">//æ‰¾åˆ°æœ€å°å€¼</span></span><br><span class="line">    <span class="keyword">int</span> cur = a + b + c - max - min; <span class="comment">// æ‰¾åˆ°ä¸­é—´é‚£ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">if</span>(max - cur == <span class="number">1</span> &amp;&amp; cur - min == <span class="number">1</span>) { <span class="comment">//å¦‚æœå·²ç»æ˜¯è¿ç»­çš„äº†ï¼Œåˆ™ä¸ç”¨ç§»åŠ¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]{<span class="number">0</span>, <span class="number">0</span>};</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(max - cur &lt;= <span class="number">2</span> || cur - min &lt;= <span class="number">2</span>) { <span class="comment">//ä¸è¿ç»­ä½†æ˜¯æœ‰å…¶ä¸­ä¸¤ä¸ªä¸­é—´åªæœ‰ä¸€ä¸ªä½ç½®æ—¶å€™ä¾‹å¦‚ï¼š1 3 4 ã€ 1 3 5ï¼Œéƒ½åªéœ€è¦æœ€å°ç§»åŠ¨ä¸€æ¬¡å³å¯è¿ç»­</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] {<span class="number">1</span>, max - min - <span class="number">2</span>};</span><br><span class="line">    }<span class="keyword">else</span> {<span class="comment">//å¦åˆ™æœ€å°‘ç§»åŠ¨ä¸¤æ¬¡æ‰å¯ä»¥è¿ç»­</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] {<span class="number">2</span>, max - min - <span class="number">2</span>};</span><br><span class="line">    }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸é¢˜ç›®-1"><a href="#ğŸŒ¸é¢˜ç›®-1" class="headerlink" title="ğŸŒ¸é¢˜ç›®"></a>ğŸŒ¸é¢˜ç›®</h2><p>ä½ å’Œä½ çš„æœ‹å‹ï¼Œä¸¤ä¸ªäººä¸€èµ·ç© Nim æ¸¸æˆï¼š</p><p>æ¡Œå­ä¸Šæœ‰ä¸€å †çŸ³å¤´ã€‚<br>ä½ ä»¬è½®æµè¿›è¡Œè‡ªå·±çš„å›åˆï¼Œä½ ä½œä¸ºå…ˆæ‰‹ã€‚<br>æ¯ä¸€å›åˆï¼Œè½®åˆ°çš„äººæ‹¿æ‰ 1 - 3 å—çŸ³å¤´ã€‚<br>æ‹¿æ‰æœ€åä¸€å—çŸ³å¤´çš„äººå°±æ˜¯è·èƒœè€…ã€‚<br>jå‡è®¾ä½ ä»¬æ¯ä¸€æ­¥éƒ½æ˜¯æœ€ä¼˜è§£ã€‚è¯·ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥åˆ¤æ–­ä½ æ˜¯å¦å¯ä»¥åœ¨ç»™å®šçŸ³å¤´æ•°é‡ä¸º n çš„æƒ…å†µä¸‹èµ¢å¾—æ¸¸æˆã€‚å¦‚æœå¯ä»¥èµ¢ï¼Œè¿”å› trueï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>ç¤ºä¾‹1ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 4</span><br><span class="line">è¾“å‡ºï¼šfalse </span><br><span class="line">è§£é‡Šï¼šå¦‚æœå †ä¸­æœ‰ 4 å—çŸ³å¤´ï¼Œé‚£ä¹ˆä½ æ°¸è¿œä¸ä¼šèµ¢å¾—æ¯”èµ›ï¼›</span><br><span class="line">     å› ä¸ºæ— è®ºä½ æ‹¿èµ° 1 å—ã€2 å— è¿˜æ˜¯ 3 å—çŸ³å¤´ï¼Œæœ€åä¸€å—çŸ³å¤´æ€»æ˜¯ä¼šè¢«ä½ çš„æœ‹å‹æ‹¿</span><br></pre></td></tr></tbody></table></figure><p>èµ°ã€‚<br>ç¤ºä¾‹ 2ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 1</span><br><span class="line">è¾“å‡ºï¼štrue</span><br><span class="line">ç¤ºä¾‹ 3ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šn = 2</span><br><span class="line">è¾“å‡ºï¼štrue</span><br></pre></td></tr></tbody></table></figure><p>æç¤ºï¼š</p><ul><li>1 &lt;= n &lt;= 2^31 - 1</li></ul><h2 id="ğŸŒ¸è§£æ³•ä¸€ï¼šè®°å¿†åŒ–é€’å½’"><a href="#ğŸŒ¸è§£æ³•ä¸€ï¼šè®°å¿†åŒ–é€’å½’" class="headerlink" title="ğŸŒ¸è§£æ³•ä¸€ï¼šè®°å¿†åŒ–é€’å½’"></a>ğŸŒ¸è§£æ³•ä¸€ï¼šè®°å¿†åŒ–é€’å½’</h2><ul><li>ä¸ºä»€ä¹ˆåœ¨ä¸¤ä¸ªäººã€Œè¶³å¤Ÿèªæ˜ã€ï¼ˆä½ ä»¬æ˜¯èªæ˜äººï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯æœ€ä¼˜è§£ï¼‰è¿™ä¸ªå‰æä¸‹ï¼Œæ¯”èµ›çš„ç»“æœæ˜¯ã€Œç”±è¾“å…¥æ•°æ®ç¡®å®šçš„ã€</li></ul><p>ç”¨å…·ä½“çš„ä¾‹å­ 8 è¿›è¡Œåˆ†æå¯ä»¥å¾—å‡ºç»“è®ºï¼š</p><p>å½“ N = 3 çš„æ—¶å€™ï¼Œå½“å‰åšå‡ºé€‰æ‹©çš„äººå¯ä»¥æ‹¿æ‰æœ€åä¸€å—çŸ³å¤´ï¼Œè·å¾—èƒœåˆ©ï¼›<br>ç„¶åæˆ‘ä»¬é€å±‚å‘ä¸Šåˆ†æï¼Œå½“ N = 4çš„æ—¶å€™ï¼Œæ— è®ºå½“å‰åšå‡ºå“ªä¸€ç§é€‰æ‹©ï¼Œå¯¹æ–¹éƒ½ä¼šèµ¢ï¼Œæ‰€ä»¥å½“å‰åªèƒ½è¾“æ‰æ¯”èµ›ï¼›<br>å¦‚æœå½“å‰è¿™ä¸€å±‚çš„ç»“ç‚¹é‡Œã€Œæœ‰è¾“æœ‰èµ¢ã€ï¼Œå› ä¸ºæˆ‘ä»¬ã€Œè¶³å¤Ÿèªæ˜ã€ï¼Œæ‰€ä»¥å¿…é¡»é€‰æ‹©å¯ä»¥è®©å¯¹æ–¹è¾“æ‰çš„åˆ†æ”¯ï¼Œå¥½è®©è‡ªå·±èµ¢ï¼›<br>å¯¹äºè¿™ä¸ªé—®é¢˜çš„ç‰¹ç‚¹æ˜¯ï¼Œå½“ Nä¸æ˜¯ 4 çš„å€æ•°çš„æ—¶å€™ï¼Œå…ˆæ‰‹ï¼ˆå½“å‰åšå‡ºé€‰æ‹©çš„äººï¼‰ï¼Œæˆ–è€…è¯´æ¸¸æˆä¸€å¼€å§‹åšå‡ºé€‰æ‹©çš„ç©å®¶ä¸€å®šä¼šè¾“ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canWinNim</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    <span class="comment">// ä½¿ç”¨åŒ…è£…ç±»å‹çš„å¸ƒå°”æ•°ç»„ï¼Œå¯ä»¥ç”¨ null è¿™ä¸ªçŠ¶æ€ï¼Œè¡¨ç¤ºå½“å‰ n çš„ç»“æœè¿˜æ²¡æœ‰è¢«è®¡ç®—å‡ºæ¥</span></span><br><span class="line">    Boolean[] memo = <span class="keyword">new</span> Boolean[n + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> dfs(n, memo);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n, Boolean[] memo)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">3</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (memo[n] != <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">return</span> memo[n];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœ 3 ç§é€‰æ‹©ï¼Œåªè¦æœ‰ä¸€ç§å¯¹æ–¹è¾“æ‰ï¼Œè‡ªå·±å°±å¯ä»¥èµ¢</span></span><br><span class="line">    <span class="keyword">if</span> (!dfs(n - <span class="number">1</span>, memo) || !dfs(n - <span class="number">2</span>, memo) || !dfs(n - <span class="number">3</span>, memo)) {</span><br><span class="line">        memo[n] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// å¦åˆ™è‡ªå·±è¾“</span></span><br><span class="line">    memo[n] = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’"><a href="#ğŸŒ¸è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="ğŸŒ¸è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’"></a>ğŸŒ¸è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canWinNim</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">3</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span>[] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[n + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dp[0] çš„å€¼å¯ä»¥ä¸ç®¡ï¼Œæ²¡æœ‰æ„ä¹‰</span></span><br><span class="line">    dp[<span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">    dp[<span class="number">2</span>] = <span class="keyword">true</span>;</span><br><span class="line">    dp[<span class="number">3</span>] = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">4</span>; i &lt;= n; i++) {</span><br><span class="line">        dp[i] = !dp[i - <span class="number">1</span>] || !dp[i - <span class="number">2</span>] || !dp[i - <span class="number">3</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æ»šåŠ¨æ•°ç»„ä¼˜åŒ–</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canWinNim</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">3</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span>[] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">4</span>];</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="keyword">false</span>;</span><br><span class="line">    dp[<span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">    dp[<span class="number">2</span>] = <span class="keyword">true</span>;</span><br><span class="line">    dp[<span class="number">3</span>] = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">4</span>; i &lt;= n; i++) {</span><br><span class="line">        dp[i % <span class="number">4</span>] = !dp[(i - <span class="number">1</span>) % <span class="number">4</span>] || !dp[(i - <span class="number">2</span>) % <span class="number">4</span>] || !dp[(i - <span class="number">3</span>) % <span class="number">4</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> dp[n % <span class="number">4</span>];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸è§£æ³•ä¸‰ï¼šæ•°å­¦æ–¹æ³•"><a href="#ğŸŒ¸è§£æ³•ä¸‰ï¼šæ•°å­¦æ–¹æ³•" class="headerlink" title="ğŸŒ¸è§£æ³•ä¸‰ï¼šæ•°å­¦æ–¹æ³•"></a>ğŸŒ¸è§£æ³•ä¸‰ï¼šæ•°å­¦æ–¹æ³•</h2><p>è®©æˆ‘ä»¬è€ƒè™‘ä¸€äº›å°ä¾‹å­ã€‚æ˜¾è€Œæ˜“è§çš„æ˜¯ï¼Œå¦‚æœçŸ³å¤´å †ä¸­åªæœ‰ä¸€å—ã€ä¸¤å—ã€æˆ–æ˜¯ä¸‰å—çŸ³å¤´ï¼Œé‚£ä¹ˆåœ¨ä½ çš„å›åˆï¼Œä½ å°±å¯ä»¥æŠŠå…¨éƒ¨çŸ³å­æ‹¿èµ°ï¼Œä»è€Œåœ¨æ¸¸æˆä¸­å–èƒœã€‚è€Œå¦‚æœå°±åƒé¢˜ç›®æè¿°é‚£æ ·ï¼Œå †ä¸­æ°å¥½æœ‰å››å—çŸ³å¤´ï¼Œä½ å°±ä¼šå¤±è´¥ã€‚å› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ç®¡ä½ å–èµ°å¤šå°‘çŸ³å¤´ï¼Œæ€»ä¼šä¸ºä½ çš„å¯¹æ‰‹ç•™ä¸‹å‡ å—ï¼Œä½¿å¾—ä»–å¯ä»¥åœ¨æ¸¸æˆä¸­æ‰“è´¥ä½ ã€‚å› æ­¤ï¼Œè¦æƒ³è·èƒœï¼Œåœ¨ä½ çš„å›åˆä¸­ï¼Œå¿…é¡»é¿å…çŸ³å¤´å †ä¸­çš„çŸ³å­æ•°ä¸º 4 çš„æƒ…å†µã€‚</p><p>åŒæ ·åœ°ï¼Œå¦‚æœæœ‰äº”å—ã€å…­å—ã€æˆ–æ˜¯ä¸ƒå—çŸ³å¤´ï¼Œä½ å¯ä»¥æ§åˆ¶è‡ªå·±æ‹¿å–çš„çŸ³å¤´æ•°ï¼Œæ€»æ˜¯æ°å¥½ç»™ä½ çš„å¯¹æ‰‹ç•™ä¸‹å››å—çŸ³å¤´ï¼Œä½¿ä»–è¾“æ‰è¿™åœºæ¯”èµ›ã€‚ä½†æ˜¯å¦‚æœçŸ³å¤´å †é‡Œæœ‰å…«å—çŸ³å¤´ï¼Œä½ å°±ä¸å¯é¿å…åœ°ä¼šè¾“æ‰ï¼Œå› ä¸ºä¸ç®¡ä½ ä»ä¸€å †çŸ³å¤´ä¸­æŒ‘å‡ºä¸€å—ã€ä¸¤å—è¿˜æ˜¯ä¸‰å—ï¼Œä½ çš„å¯¹æ‰‹éƒ½å¯ä»¥é€‰æ‹©ä¸‰å—ã€ä¸¤å—æˆ–ä¸€å—ï¼Œä»¥ç¡®ä¿åœ¨å†ä¸€æ¬¡è½®åˆ°ä½ çš„æ—¶å€™ï¼Œä½ ä¼šé¢å¯¹å››å—çŸ³å¤´ã€‚</p><p>æ˜¾ç„¶ï¼Œå®ƒä»¥ç›¸åŒçš„æ¨¡å¼ä¸æ–­é‡å¤ n=4,8,12,16,â€¦ï¼ŒåŸºæœ¬å¯ä»¥çœ‹å‡ºæ˜¯ 4 çš„å€æ•°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canWinNim</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> (n % <span class="number">4</span>) != <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¯æ€•å¯æ€•ã€‚ã€‚ã€‚</p><h2 id="ğŸŒ¸é¢˜ç›®-2"><a href="#ğŸŒ¸é¢˜ç›®-2" class="headerlink" title="ğŸŒ¸é¢˜ç›®"></a>ğŸŒ¸é¢˜ç›®</h2><p>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ ä»è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­æ‰¾å‡ºæœ€é•¿çš„ç‰¹æ®Šåºåˆ—ã€‚</p><p>ã€Œæœ€é•¿ç‰¹æ®Šåºåˆ—ã€å®šä¹‰å¦‚ä¸‹ï¼šè¯¥åºåˆ—ä¸ºæŸå­—ç¬¦ä¸²ç‹¬æœ‰çš„æœ€é•¿å­åºåˆ—ï¼ˆå³ä¸èƒ½æ˜¯å…¶ä»–å­—ç¬¦ä¸²çš„å­åºåˆ—ï¼‰ã€‚</p><p>å­åºåˆ— å¯ä»¥é€šè¿‡åˆ å»å­—ç¬¦ä¸²ä¸­çš„æŸäº›å­—ç¬¦å®ç°ï¼Œä½†ä¸èƒ½æ”¹å˜å‰©ä½™å­—ç¬¦çš„ç›¸å¯¹é¡ºåºã€‚ç©ºåºåˆ—ä¸ºæ‰€æœ‰å­—ç¬¦ä¸²çš„å­åºåˆ—ï¼Œä»»ä½•å­—ç¬¦ä¸²ä¸ºå…¶è‡ªèº«çš„å­åºåˆ—ã€‚</p><p>è¾“å…¥ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œè¾“å‡ºæœ€é•¿ç‰¹æ®Šåºåˆ—çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: "aba", "cdc"</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: æœ€é•¿ç‰¹æ®Šåºåˆ—å¯ä¸º "aba" (æˆ– "cdc")ï¼Œä¸¤è€…å‡ä¸ºè‡ªèº«çš„å­åºåˆ—ä¸”ä¸æ˜¯å¯¹æ–¹çš„å­åºåˆ—ã€‚</span><br></pre></td></tr></tbody></table></figure><p>ç¤ºä¾‹ 2ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼ša = "aaa", b = "bbb"</span><br><span class="line">è¾“å‡ºï¼š3</span><br></pre></td></tr></tbody></table></figure><p>ç¤ºä¾‹ 3ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼ša = "aaa", b = "aaa"</span><br><span class="line">è¾“å‡ºï¼š-1</span><br></pre></td></tr></tbody></table></figure><p>æç¤ºï¼š</p><ul><li>ä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦å‡å¤„äºåŒºé—´ [1 - 100] ã€‚</li><li>å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ä»…å«æœ‰ â€˜aâ€™~â€™zâ€™ ã€‚</li></ul><h2 id="ğŸŒ¸è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•"><a href="#ğŸŒ¸è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•" class="headerlink" title="ğŸŒ¸è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•"></a>ğŸŒ¸è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•</h2><p>æš´åŠ›è§£æ³•ä¸­ï¼Œç”Ÿæˆä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€æœ‰çš„å­åºåˆ—å…± 2^n<br>  ä¸ªï¼Œå°†å…¶å­˜å‚¨åœ¨ hashmap ä¸­ï¼Œå¹¶è®°å½•æ¯ä¸ªå­åºåˆ—å‡ºç°çš„æ¬¡æ•°ã€‚ç„¶åæ‰¾å‡ºå‡ºç°æ¬¡æ•°ä¸º 11 çš„æœ€é•¿å­åºåˆ—ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å­åºåˆ—ï¼Œè¿”å› -1ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findLUSlength</span><span class="params">(String a, String b)</span> </span>{</span><br><span class="line">    HashMap &lt; String, Integer &gt; map = <span class="keyword">new</span> HashMap &lt; &gt; ();</span><br><span class="line">    <span class="keyword">for</span> (String s: <span class="keyword">new</span> String[] {a, b}) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span> &lt;&lt; s.length()); i++) {</span><br><span class="line">            String t = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; s.length(); j++) {</span><br><span class="line">                <span class="keyword">if</span> (((i &gt;&gt; j) &amp; <span class="number">1</span>) != <span class="number">0</span>)</span><br><span class="line">                    t += s.charAt(j);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(t))</span><br><span class="line">                map.put(t, map.get(t) + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                map.put(t, <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> res = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (String s: map.keySet()) {</span><br><span class="line">        <span class="keyword">if</span> (map.get(s) == <span class="number">1</span>)</span><br><span class="line">            res = Math.max(res, s.length());</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸŒ¸è§£æ³•äºŒï¼šå¯»æ‰¾è§„å¾‹"><a href="#ğŸŒ¸è§£æ³•äºŒï¼šå¯»æ‰¾è§„å¾‹" class="headerlink" title="ğŸŒ¸è§£æ³•äºŒï¼šå¯»æ‰¾è§„å¾‹"></a>ğŸŒ¸è§£æ³•äºŒï¼šå¯»æ‰¾è§„å¾‹</h2><p>å­—ç¬¦ä¸² a å’Œ b å…±æœ‰ 3 ç§æƒ…å†µï¼š</p><ul><li><p>a=bã€‚å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒï¼Œåˆ™æ²¡æœ‰ç‰¹æ®Šå­åºåˆ—ï¼Œè¿”å› -1ã€‚</p></li><li><p>length(a)=length(b) ä¸” a != bã€‚ä¾‹å¦‚ï¼šabc å’Œ abdã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²ä¸€å®šä¸ä¼šæ˜¯å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­åºåˆ—ï¼Œå› æ­¤å¯ä»¥å°†ä»»æ„ä¸€ä¸ªå­—ç¬¦ä¸²çœ‹ä½œæ˜¯ç‰¹æ®Šå­åºåˆ—ï¼Œè¿”å› length(a) æˆ– length(b)</p></li><li><p>length(a)&gt; =length(b)ã€‚ä¾‹å¦‚ï¼šabcd å’Œ abcã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œé•¿çš„å­—ç¬¦ä¸²ä¸€å®šä¸ä¼šæ˜¯çŸ­å­—ç¬¦ä¸²çš„å­åºåˆ—ï¼Œå› æ­¤å¯ä»¥å°†é•¿å­—ç¬¦ä¸²çœ‹ä½œæ˜¯ç‰¹æ®Šå­åºåˆ—ï¼Œè¿”å› max(length(a),length(b))ã€‚</p></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findLUSlength</span><span class="params">(String a, String b)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(a.equals(b)){</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">return</span> Math.max(a.length(), b.length());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"><a href="#æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"></a><strong>æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼</strong></h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å“ï¼Œæœ€è¿‘å¿™ç€ACMå’Œè“æ¡¥æ¯ï¼ˆæ¯•ç«Ÿéƒ½æ˜¯ç¬¬ä¸€æ¬¡å‚èµ›çš„å°ç™½ï¼‰ï¼Œå¯æŠŠè‡ªå·±æ•´è¿·ç³Šäº†ï¼Œå½“ä¸¤é¡¹æ¯”èµ›å…¨éƒ¨å‘Šä¸€æ®µè½ï¼Œè‡ªå·±æ‰æ˜¯çœŸçš„è§‰æ‚Ÿåˆ°è‡ªå·±ä¸åˆ«äººçš„å·®è·ä»¥åŠè‡ªå·±çš„å¤§è„‘æ€è€ƒé—®é¢˜çš„èƒ½åŠ›å¾ˆæ˜¯æ¬ ç¼ºï¼Œè¿˜æœ‰å°±æ˜¯æ€è€ƒä¸å¤Ÿå…¨é¢ï¼Œå¾€å¾€ä¸€é“é¢˜æ˜æ˜è‡ªå·±å·²ç»å†™å‡ºäº†æ–¹æ³•ï¼Œä½†ç¡¬æ˜¯åœ¨æ¯”èµ›é€”ä¸­æƒ³ä¸å‡ºä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•å»ä¼˜åŒ–æ–¹æ³•å’Œæ›´å¿«çš„å¾—å‡ºç­”æ¡ˆï¼Œæ€»æ˜¯èµ›åè¯¸è‘›äº®çš„æƒ³å‡ºè¿™è¯¥æ€ä¹ˆåšï¼Œé‚£è¯¥æ€ä¹ˆåšï¼Œè¿™äº›æ¬ ç¼ºéƒ½å¯¼è‡´è‡ªå·±åœ¨ACMå’Œè“æ¡¥æ¯ä¸­ä¸¢å¤±å¾—åˆ†ï¼Œçœ‹æ¥è¿˜æ˜¯å¾—åŠªåŠ›å‘€ï¼Œä¸è®©è‡ªå·±å˜å¾—æ›´å¼ºåˆä½•èƒ½å¾æˆ˜æ˜Ÿè¾°å¤§æµ·å‘¢ï¼Œå…ˆæ¥ç»ƒç»ƒæ€ç»´èƒ½åŠ›å§ï¼Œä»æœ€ç®€å•çš„è„‘ç­‹æ€¥è½¬å¼¯å¼€å§‹ï¼&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="LeetCode" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/LeetCode/"/>
    
    
      <category term="åŠ¨æ€è§„åˆ’" scheme="https://liudufu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="è®°å¿†åŒ–é€’å½’" scheme="https://liudufu.github.io/tags/%E8%AE%B0%E5%BF%86%E5%8C%96%E9%80%92%E5%BD%92/"/>
    
      <category term="å–æ¨¡è¿ç®—" scheme="https://liudufu.github.io/tags/%E5%8F%96%E6%A8%A1%E8%BF%90%E7%AE%97/"/>
    
      <category term="æ‰¾è§„å¾‹" scheme="https://liudufu.github.io/tags/%E6%89%BE%E8%A7%84%E5%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€æ–‡æå®šå¸¸è§çš„é“¾è¡¨é—®é¢˜</title>
    <link href="https://liudufu.github.io/Linked_list_problem/"/>
    <id>https://liudufu.github.io/Linked_list_problem/</id>
    <published>2020-11-08T12:14:46.000Z</published>
    <updated>2020-11-08T12:18:31.960Z</updated>
    
    <content type="html"><![CDATA[<p>ä½œä¸ºçº¿æ€§è¡¨çš„ä¸¤ç§å­˜å‚¨æ–¹å¼ â€”â€” é“¾è¡¨å’Œæ•°ç»„ï¼Œè¿™å¯¹ç›¸çˆ±ç›¸æ€çš„å¥½åŸºå‹æœ‰ç€å„è‡ªçš„ä¼˜ç¼ºç‚¹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¢³ç†ä¸€ä¸‹è¿™ä¸¤ç§æ–¹å¼ã€‚</p><p>æ•°ç»„ï¼Œæ‰€æœ‰å…ƒç´ éƒ½è¿ç»­çš„å­˜å‚¨äºä¸€æ®µå†…å­˜ä¸­ï¼Œä¸”æ¯ä¸ªå…ƒç´ å ç”¨çš„å†…å­˜å¤§å°ç›¸åŒã€‚è¿™ä½¿å¾—æ•°ç»„å…·å¤‡äº†é€šè¿‡ä¸‹æ ‡å¿«é€Ÿè®¿é—®æ•°æ®çš„èƒ½åŠ›ã€‚<br>ä½†è¿ç»­å­˜å‚¨çš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå¢åŠ å®¹é‡ï¼Œå¢åˆ å…ƒç´ çš„æˆæœ¬å¾ˆé«˜ï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸º O(n)ã€‚</p><a id="more"></a><p>å¢åŠ æ•°ç»„å®¹é‡éœ€è¦å…ˆç”³è¯·ä¸€å—æ–°çš„å†…å­˜ï¼Œç„¶åå¤åˆ¶åŸæœ‰çš„å…ƒç´ ã€‚å¦‚æœéœ€è¦çš„è¯ï¼Œå¯èƒ½è¿˜è¦åˆ é™¤åŸå…ˆçš„å†…å­˜ã€‚</p><p>åˆ é™¤å…ƒç´ æ—¶éœ€è¦ç§»åŠ¨è¢«åˆ é™¤å…ƒç´ ä¹‹åçš„æ‰€æœ‰å…ƒç´ ä»¥ä¿è¯æ‰€æœ‰å…ƒç´ æ˜¯è¿ç»­çš„ã€‚å¢åŠ å…ƒç´ æ—¶éœ€è¦ç§»åŠ¨æŒ‡å®šä½ç½®åŠä¹‹åçš„æ‰€æœ‰å…ƒç´ ï¼Œç„¶åå°†æ–°å¢å…ƒç´ æ’å…¥åˆ°æŒ‡å®šä½ç½®ï¼Œå¦‚æœå®¹é‡ä¸è¶³çš„è¯è¿˜éœ€è¦å…ˆè¿›è¡Œæ‰©å®¹æ“ä½œã€‚</p><p>æ€»ç»“ä¸€ä¸‹æ•°ç»„çš„ä¼˜ç¼ºç‚¹ï¼š</p><p>ä¼˜ç‚¹ï¼šå¯ä»¥æ ¹æ®åç§»å®ç°å¿«é€Ÿçš„éšæœºè¯»å†™ã€‚<br>ç¼ºç‚¹ï¼šæ‰©å®¹ï¼Œå¢åˆ å…ƒç´ ææ…¢ã€‚<br>é“¾è¡¨ï¼Œç”±è‹¥å¹²ä¸ªç»“ç‚¹ç»„æˆï¼Œæ¯ä¸ªç»“ç‚¹åŒ…å«æ•°æ®åŸŸå’ŒæŒ‡é’ˆåŸŸã€‚ç»“ç‚¹ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>ä¸€èˆ¬æ¥è®²ï¼Œé“¾è¡¨ä¸­åªä¼šæœ‰ä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆåŸŸä¸ºç©ºï¼Œè¯¥ç»“ç‚¹ä¸ºå°¾ç»“ç‚¹ï¼Œå…¶ä»–ç»“ç‚¹çš„æŒ‡é’ˆåŸŸéƒ½ä¼šå­˜å‚¨ä¸€ä¸ªç»“ç‚¹çš„å†…å­˜åœ°å€ã€‚é“¾è¡¨ä¸­ä¹Ÿåªä¼šæœ‰ä¸€ä¸ªç»“ç‚¹çš„å†…å­˜åœ°å€æ²¡æœ‰å­˜å‚¨åœ¨å…¶ä»–ç»“ç‚¹çš„æŒ‡é’ˆåŸŸï¼Œè¯¥ç»“ç‚¹ç§°ä¸ºå¤´ç»“ç‚¹ã€‚</p><p>é“¾è¡¨çš„å­˜å‚¨æ–¹å¼ä½¿å¾—å®ƒå¯ä»¥é«˜æ•ˆçš„åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸åˆ é™¤ï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸º O(1)ã€‚<br>åœ¨ç»“ç‚¹ p ä¹‹åå¢åŠ ä¸€ä¸ªç»“ç‚¹ q æ€»å…±åˆ†ä¸‰æ­¥ï¼š</p><p>ç”³è¯·ä¸€æ®µå†…å­˜ç”¨ä»¥å­˜å‚¨ q (å¯ä»¥ä½¿ç”¨å†…å­˜æ± é¿å…é¢‘ç¹ç”³è¯·å’Œé”€æ¯å†…å­˜)ã€‚<br>å°† p çš„æŒ‡é’ˆåŸŸæ•°æ®å¤åˆ¶åˆ° q çš„æŒ‡é’ˆåŸŸã€‚<br>æ›´æ–° p çš„æŒ‡é’ˆåŸŸä¸º q çš„åœ°å€ã€‚</p><p>åˆ é™¤ç»“ç‚¹ p ä¹‹åçš„ç»“ç‚¹ q æ€»å…±åˆ†ä¸¤æ­¥ï¼š</p><ol><li><p>å°† q çš„æŒ‡é’ˆåŸŸå¤åˆ¶åˆ° p çš„æŒ‡é’ˆåŸŸã€‚</p></li><li><p>é‡Šæ”¾ q ç»“ç‚¹çš„å†…å­˜ã€‚</p><p>é“¾è¡¨çš„ä¸»è¦ä»£ç </p></li></ol><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªç»“ç‚¹æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">T data;</span><br><span class="line">Node *next;</span><br><span class="line">Node() : next(<span class="literal">nullptr</span>) {}</span><br><span class="line">Node(<span class="keyword">const</span> T &amp;d) : data(d), next(<span class="literal">nullptr</span>) {}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤ p ç»“ç‚¹åé¢çš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Remove</span><span class="params">(Node&lt;T&gt; *p)</span> </span>{</span><br><span class="line"><span class="keyword">if</span> (p == <span class="literal">nullptr</span> || p-&gt;next == <span class="literal">nullptr</span>) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">auto</span> tmp = p-&gt;next-&gt;next;</span><br><span class="line"><span class="keyword">delete</span> p-&gt;next;</span><br><span class="line">p-&gt;next = tmp;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨ p ç»“ç‚¹åé¢æ’å…¥å…ƒç´ </span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(Node&lt;T&gt; *p, <span class="keyword">const</span> T &amp;data)</span> </span>{</span><br><span class="line"><span class="keyword">auto</span> tmp = <span class="keyword">new</span> Node&lt;T&gt;(data);</span><br><span class="line">tmp-&gt;next = p-&gt;next;</span><br><span class="line">p-&gt;next = tmp;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†é“¾è¡¨</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> V&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Walk</span><span class="params">(Node&lt;T&gt; *p, <span class="keyword">const</span> V &amp;vistor)</span> </span>{</span><br><span class="line"><span class="keyword">while</span>(p != <span class="literal">nullptr</span>) {</span><br><span class="line">vistor(p);</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="keyword">auto</span> p = <span class="keyword">new</span> Node&lt;<span class="keyword">int</span>&gt;(<span class="number">1</span>);</span><br><span class="line">Insert(p, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">Walk(p, [&amp;sum](<span class="keyword">const</span> Node&lt;<span class="keyword">int</span>&gt; *p) -&gt; <span class="keyword">void</span> { sum += p-&gt;data; });</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; sum &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">Remove(p);</span><br><span class="line">sum = <span class="number">0</span>;</span><br><span class="line">Walk(p, [&amp;sum](<span class="keyword">const</span> Node&lt;<span class="keyword">int</span>&gt; *p) -&gt; <span class="keyword">void</span> { sum += p-&gt;data; });</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; sum &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    ListNode next;</span><br><span class="line">    ListNode() {}</span><br><span class="line">    ListNode(<span class="keyword">int</span> val) { <span class="keyword">this</span>.val = val; }</span><br><span class="line">    ListNode(<span class="keyword">int</span> val, ListNode next) { <span class="keyword">this</span>.val = val; <span class="keyword">this</span>.next = next; }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p> <strong>é¢è¯•é—®é¢˜æ€»ç»“</strong></p><p>æ— æ³•é«˜æ•ˆè·å–é•¿åº¦ï¼Œæ— æ³•æ ¹æ®åç§»å¿«é€Ÿè®¿é—®å…ƒç´ ï¼Œæ˜¯é“¾è¡¨çš„ä¸¤ä¸ªåŠ£åŠ¿ã€‚ç„¶è€Œé¢è¯•çš„æ—¶å€™ç»å¸¸ç¢°è§è¯¸å¦‚è·å–å€’æ•°ç¬¬kä¸ªå…ƒç´ ï¼Œè·å–ä¸­é—´ä½ç½®çš„å…ƒç´ ï¼Œåˆ¤æ–­é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯ï¼Œåˆ¤æ–­ç¯çš„é•¿åº¦ç­‰å’Œé•¿åº¦ä¸ä½ç½®æœ‰å…³çš„é—®é¢˜ã€‚è¿™äº›é—®é¢˜éƒ½å¯ä»¥é€šè¿‡çµæ´»è¿ç”¨åŒæŒ‡é’ˆæ¥è§£å†³ã€‚</p><p>Tipsï¼šåŒæŒ‡é’ˆå¹¶ä¸æ˜¯å›ºå®šçš„å…¬å¼ï¼Œè€Œæ˜¯ä¸€ç§æ€ç»´æ–¹å¼~</p><p>å…ˆæ¥çœ‹â€å€’æ•°ç¬¬kä¸ªå…ƒç´ çš„é—®é¢˜â€ã€‚è®¾æœ‰ä¸¤ä¸ªæŒ‡é’ˆ p å’Œ qï¼Œåˆå§‹æ—¶å‡æŒ‡å‘å¤´ç»“ç‚¹ã€‚é¦–å…ˆï¼Œå…ˆè®© p æ²¿ç€ next ç§»åŠ¨ k æ¬¡ã€‚æ­¤æ—¶ï¼Œp æŒ‡å‘ç¬¬ k+1ä¸ªç»“ç‚¹ï¼Œq æŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œä¸¤ä¸ªæŒ‡é’ˆçš„è·ç¦»ä¸º k ã€‚ç„¶åï¼ŒåŒæ—¶ç§»åŠ¨ p å’Œ qï¼Œç›´åˆ° p æŒ‡å‘ç©ºï¼Œæ­¤æ—¶ q å³æŒ‡å‘å€’æ•°ç¬¬ k ä¸ªç»“ç‚¹ã€‚å¯ä»¥å‚è€ƒä¸‹å›¾æ¥ç†è§£ï¼š</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> {</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">getKthFromEnd</span><span class="params">(ListNode* head, <span class="keyword">int</span> k)</span> </span>{</span><br><span class="line">        ListNode *p = head, *q = head; <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">while</span>(k--) {   <span class="comment">//å°† pæŒ‡é’ˆç§»åŠ¨ k æ¬¡</span></span><br><span class="line">            p = p-&gt;next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">while</span>(p != <span class="literal">nullptr</span>) {<span class="comment">//åŒæ—¶ç§»åŠ¨ï¼Œç›´åˆ° p == nullptr</span></span><br><span class="line">            p = p-&gt;next;</span><br><span class="line">            q = q-&gt;next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> q;</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><p>è·å–ä¸­é—´å…ƒç´ çš„é—®é¢˜ã€‚è®¾æœ‰ä¸¤ä¸ªæŒ‡é’ˆ fast å’Œ slowï¼Œåˆå§‹æ—¶æŒ‡å‘å¤´èŠ‚ç‚¹ã€‚æ¯æ¬¡ç§»åŠ¨æ—¶ï¼Œfastå‘åèµ°ä¸¤æ¬¡ï¼Œslowå‘åèµ°ä¸€æ¬¡ï¼Œç›´åˆ° fast æ— æ³•å‘åèµ°ä¸¤æ¬¡ã€‚è¿™ä½¿å¾—åœ¨æ¯è½®ç§»åŠ¨ä¹‹åã€‚fast å’Œ slow çš„è·ç¦»å°±ä¼šå¢åŠ ä¸€ã€‚è®¾é“¾è¡¨æœ‰ n ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæœ€å¤šç§»åŠ¨ n/2 è½®ã€‚å½“ n ä¸ºå¥‡æ•°æ—¶ï¼Œslow æ°å¥½æŒ‡å‘ä¸­é—´ç»“ç‚¹ï¼Œå½“ n ä¸º å¶æ•°æ—¶ï¼Œslow æ°å¥½æŒ‡å‘ä¸­é—´ä¸¤ä¸ªç»“ç‚¹çš„é å‰ä¸€ä¸ª(å¯ä»¥è€ƒè™‘ä¸‹å¦‚ä½•ä½¿å…¶æŒ‡å‘åä¸€ä¸ªç»“ç‚¹å‘¢ï¼Ÿ)ã€‚</p><p>ä¸‹è¿°ä»£ç å®ç°äº† n ä¸º<strong>å¶æ•°</strong>æ—¶æ…¢æŒ‡é’ˆæŒ‡å‘<strong>é åç»“ç‚¹</strong>ã€‚</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> {</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">middleNode</span><span class="params">(ListNode* head)</span> </span>{</span><br><span class="line">        ListNode *p = head, *q = head;</span><br><span class="line">        <span class="keyword">while</span>(q != <span class="literal">nullptr</span> &amp;&amp; q-&gt;next != <span class="literal">nullptr</span>) {</span><br><span class="line">            p = p-&gt;next;</span><br><span class="line">            q = q-&gt;next-&gt;next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    } </span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><p>æ˜¯å¦å­˜åœ¨ç¯çš„é—®é¢˜ã€‚å¦‚æœå°†å°¾ç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘å…¶ä»–ä»»æ„ä¸€ä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆé“¾è¡¨å°±å­˜åœ¨äº†ä¸€ä¸ªç¯ã€‚</p><p>ä¸€éƒ¨åˆ†ä¸­ï¼Œæ€»ç»“å¿«æ…¢æŒ‡é’ˆçš„ç‰¹æ€§ â€”â€” æ¯è½®ç§»åŠ¨ä¹‹åä¸¤è€…çš„è·ç¦»ä¼šåŠ ä¸€ã€‚ä¸‹é¢ä¼šç»§ç»­ç”¨è¯¥ç‰¹æ€§è§£å†³ç¯çš„é—®é¢˜ã€‚<br>å½“ä¸€ä¸ªé“¾è¡¨æœ‰ç¯æ—¶ï¼Œå¿«æ…¢æŒ‡é’ˆéƒ½ä¼šé™·å…¥ç¯ä¸­è¿›è¡Œæ— é™æ¬¡ç§»åŠ¨ï¼Œç„¶åå˜æˆäº†è¿½åŠé—®é¢˜ã€‚æƒ³è±¡ä¸€ä¸‹åœ¨æ“åœºè·‘æ­¥çš„åœºæ™¯ï¼Œåªè¦ä¸€ç›´è·‘ä¸‹å»ï¼Œå¿«çš„æ€»ä¼šè¿½ä¸Šæ…¢çš„ã€‚å½“ä¸¤ä¸ªæŒ‡é’ˆéƒ½è¿›å…¥ç¯åï¼Œæ¯è½®ç§»åŠ¨ä½¿å¾—æ…¢æŒ‡é’ˆåˆ°å¿«æŒ‡é’ˆçš„è·ç¦»å¢åŠ ä¸€ï¼ŒåŒæ—¶å¿«æŒ‡é’ˆåˆ°æ…¢æŒ‡é’ˆçš„è·ç¦»ä¹Ÿå‡å°‘ä¸€ï¼Œåªè¦ä¸€ç›´ç§»åŠ¨ä¸‹å»ï¼Œå¿«æŒ‡é’ˆæ€»ä¼šè¿½ä¸Šæ…¢æŒ‡é’ˆã€‚</p><p>æ ¹æ®ä¸Šè¿°è¡¨è¿°å¾—å‡ºï¼Œå¦‚æœä¸€ä¸ªé“¾è¡¨å­˜åœ¨ç¯ï¼Œé‚£ä¹ˆå¿«æ…¢æŒ‡é’ˆå¿…ç„¶ä¼šç›¸é‡ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> {</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">hasCycle</span><span class="params">(ListNode *head)</span> </span>{</span><br><span class="line">        ListNode *slow = head;</span><br><span class="line">        ListNode *fast = head;</span><br><span class="line">        <span class="keyword">while</span>(fast != <span class="literal">nullptr</span>) {</span><br><span class="line">            fast = fast-&gt;next;</span><br><span class="line">            <span class="keyword">if</span>(fast != <span class="literal">nullptr</span>) {</span><br><span class="line">                fast = fast-&gt;next;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span>(fast == slow) {</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">            slow = slow-&gt;next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><p>åä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå­˜åœ¨ç¯ï¼Œå¦‚ä½•åˆ¤æ–­ç¯çš„é•¿åº¦å‘¢ï¼Ÿæ–¹æ³•æ˜¯ï¼Œå¿«æ…¢æŒ‡é’ˆç›¸é‡åç»§ç»­ç§»åŠ¨ï¼Œç›´åˆ°ç¬¬äºŒæ¬¡ç›¸é‡ã€‚ä¸¤æ¬¡ç›¸é‡é—´çš„ç§»åŠ¨æ¬¡æ•°å³ä¸ºç¯çš„é•¿åº¦ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½œä¸ºçº¿æ€§è¡¨çš„ä¸¤ç§å­˜å‚¨æ–¹å¼ â€”â€” é“¾è¡¨å’Œæ•°ç»„ï¼Œè¿™å¯¹ç›¸çˆ±ç›¸æ€çš„å¥½åŸºå‹æœ‰ç€å„è‡ªçš„ä¼˜ç¼ºç‚¹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¢³ç†ä¸€ä¸‹è¿™ä¸¤ç§æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æ•°ç»„ï¼Œæ‰€æœ‰å…ƒç´ éƒ½è¿ç»­çš„å­˜å‚¨äºä¸€æ®µå†…å­˜ä¸­ï¼Œä¸”æ¯ä¸ªå…ƒç´ å ç”¨çš„å†…å­˜å¤§å°ç›¸åŒã€‚è¿™ä½¿å¾—æ•°ç»„å…·å¤‡äº†é€šè¿‡ä¸‹æ ‡å¿«é€Ÿè®¿é—®æ•°æ®çš„èƒ½åŠ›ã€‚&lt;br&gt;ä½†è¿ç»­å­˜å‚¨çš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå¢åŠ å®¹é‡ï¼Œå¢åˆ å…ƒç´ çš„æˆæœ¬å¾ˆé«˜ï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸º O(n)ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="LeetCode" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/LeetCode/"/>
    
    
      <category term="é“¾è¡¨" scheme="https://liudufu.github.io/tags/%E9%93%BE%E8%A1%A8/"/>
    
      <category term="æ•°ç»„" scheme="https://liudufu.github.io/tags/%E6%95%B0%E7%BB%84/"/>
    
      <category term="æŒ‡é’ˆ" scheme="https://liudufu.github.io/tags/%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>DFS_é¢è¯•é¢˜_08.10_é¢œè‰²å¡«å……</title>
    <link href="https://liudufu.github.io/Color_fill/"/>
    <id>https://liudufu.github.io/Color_fill/</id>
    <published>2020-11-08T12:11:19.000Z</published>
    <updated>2020-11-08T12:14:12.832Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ğŸŒ¸é¢˜ç›®"><a href="#ğŸŒ¸é¢˜ç›®" class="headerlink" title="ğŸŒ¸é¢˜ç›®"></a>ğŸŒ¸é¢˜ç›®</h2><p>ğŸç¼–å†™å‡½æ•°ï¼Œå®ç°è®¸å¤šå›¾ç‰‡ç¼–è¾‘è½¯ä»¶éƒ½æ”¯æŒçš„ã€Œé¢œè‰²å¡«å……ã€åŠŸèƒ½ã€‚</p><p>å¾…å¡«å……çš„å›¾åƒç”¨äºŒç»´æ•°ç»„ image è¡¨ç¤ºï¼Œå…ƒç´ ä¸ºåˆå§‹é¢œè‰²å€¼ã€‚åˆå§‹åæ ‡ç‚¹çš„æ¨ªåæ ‡ä¸º sr çºµåæ ‡ä¸º scã€‚éœ€è¦å¡«å……çš„æ–°é¢œè‰²ä¸º newColor ã€‚</p><p>ã€Œå‘¨å›´åŒºåŸŸã€æ˜¯æŒ‡é¢œè‰²ç›¸åŒä¸”åœ¨ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ä¸Šå­˜åœ¨ç›¸è¿æƒ…å†µçš„è‹¥å¹²å…ƒç´ ã€‚</p><p>è¯·ç”¨æ–°é¢œè‰²å¡«å……åˆå§‹åæ ‡ç‚¹çš„å‘¨å›´åŒºåŸŸï¼Œå¹¶è¿”å›å¡«å……åçš„å›¾åƒã€‚</p> <a id="more"></a><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">image = [[1,1,1],[1,1,0],[1,0,1]] </span><br><span class="line">sr = 1, sc = 1, newColor = 2</span><br><span class="line">è¾“å‡ºï¼š[[2,2,2],[2,2,0],[2,0,1]]</span><br><span class="line">è§£é‡Š: </span><br><span class="line">åˆå§‹åæ ‡ç‚¹ä½äºå›¾åƒçš„æ­£ä¸­é—´ï¼Œåæ ‡ (sr,sc)=(1,1) ã€‚</span><br><span class="line">åˆå§‹åæ ‡ç‚¹å‘¨å›´åŒºåŸŸä¸Šæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åƒç´ ç‚¹çš„é¢œè‰²éƒ½è¢«æ›´æ”¹æˆ 2 ã€‚</span><br><span class="line">æ³¨æ„ï¼Œå³ä¸‹è§’çš„åƒç´ æ²¡æœ‰æ›´æ”¹ä¸º 2 ï¼Œå› ä¸ºå®ƒä¸å±äºåˆå§‹åæ ‡ç‚¹çš„å‘¨å›´åŒºåŸŸã€‚</span><br></pre></td></tr></tbody></table></figure><p>æç¤ºï¼š</p><ul><li>image å’Œ image[0] çš„é•¿åº¦å‡åœ¨èŒƒå›´ [1, 50] å†…ã€‚</li><li>åˆå§‹åæ ‡ç‚¹ (sr,sc) æ»¡è¶³ 0 &lt;= sr &lt; image.length å’Œ 0 &lt;= sc &lt; image[0].length ã€‚</li><li>image[i] [j] å’Œ newColor è¡¨ç¤ºçš„é¢œè‰²å€¼åœ¨èŒƒå›´ [0, 65535] å†…ã€‚</li></ul><h2 id="ğŸŒ¸è§£æ³•ï¼šDFS"><a href="#ğŸŒ¸è§£æ³•ï¼šDFS" class="headerlink" title="ğŸŒ¸è§£æ³•ï¼šDFS"></a>ğŸŒ¸è§£æ³•ï¼šDFS</h2><p>å› ä¸ºåªæ˜¯ä¿®æ”¹é¢œè‰²ï¼Œæ‰€ä»¥ä¸éœ€è¦è®°å½•è·¯å¾„ï¼Œåªéœ€è¦4ä¸ªæ–¹å‘æš´åŠ›æœç´¢å°±è¡Œ.</p><p>æ¨¡æ¿</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if (è¶Šç•Œ||è·¯å¾„ä¸èƒ½èµ°){</span><br><span class="line">    return;</span><br><span class="line">}</span><br><span class="line">image[x][y] = newColor;    //æ ‡è®°ï¼Œæ›´æ¢é¢œè‰²</span><br><span class="line">for (int k = 0; k &lt; 4; k++){</span><br><span class="line">    helpfunc(image, x + next[k][0], y + next[k][1], oldColor, newColor);</span><br><span class="line">}</span><br><span class="line">//å¦‚æœéœ€è¦å›æº¯ï¼Œåœ¨è¿™é‡Œè¿›è¡Œæ¢å¤</span><br><span class="line">//image[x][y] = unchange_val;</span><br></pre></td></tr></tbody></table></figure><h3 id="ä¸€ä¸ªå°å‘"><a href="#ä¸€ä¸ªå°å‘" class="headerlink" title="ä¸€ä¸ªå°å‘"></a>ä¸€ä¸ªå°å‘</h3><p>â€‹      å¦‚æœèµ·å§‹ç‚¹çš„é¢œè‰²æœ¬æ¥å°±æ˜¯ç›®æ ‡é¢œè‰²ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦è¿›è¡Œéå†æ›´æ”¹ã€‚å› ä¸ºæ‰€æœ‰ä»èµ·å§‹ç‚¹å¯è¾¾ä¸”é¢œè‰²ç›¸åŒçš„ç‚¹ï¼Œå®ƒä»¬çš„é¢œè‰²ä¹Ÿéƒ½å·²ç»æ˜¯ç›®æ ‡é¢œè‰²äº†ï¼Œä¸å¿…æ›´æ”¹ï¼›è€Œä¸èµ·å§‹ç‚¹é¢œè‰²ä¸åŒçš„é‚£äº›ç‚¹ï¼Œæœ¬æ¥å°±ä¸èƒ½æ›´æ”¹ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œéå†</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[][] floodFill(<span class="keyword">int</span>[][] image, <span class="keyword">int</span> sr, <span class="keyword">int</span> sc, <span class="keyword">int</span> newColor) {</span><br><span class="line">dfs(image, sr, sc, image[sr][sc], newColor);</span><br><span class="line"><span class="keyword">return</span> image;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[][] image, <span class="keyword">int</span> sr, <span class="keyword">int</span> sc, <span class="keyword">int</span> val, <span class="keyword">int</span> newColor)</span> </span>{</span><br><span class="line"><span class="keyword">if</span>(sr &lt; <span class="number">0</span> || sr &gt; image.length - <span class="number">1</span> || sc &lt; <span class="number">0</span> || sc &gt; image[<span class="number">0</span>].length - <span class="number">1</span> || image[sr][sc] != val || val == newColor) {</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}<span class="keyword">else</span> {</span><br><span class="line">image[sr][sc] = newColor;</span><br><span class="line"></span><br><span class="line">dfs(image, sr + <span class="number">1</span>, sc, val, newColor);</span><br><span class="line">dfs(image, sr, sc + <span class="number">1</span>, val, newColor);</span><br><span class="line">dfs(image, sr - <span class="number">1</span>, sc, val, newColor);</span><br><span class="line">dfs(image, sr, sc - <span class="number">1</span>, val, newColor);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"><a href="#æœ€åï¼Œä¸ç»å†é£é›¨-æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼-æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼"></a><strong>æœ€åï¼Œä¸ç»å†é£é›¨,æ€èƒ½åœ¨è®¡ç®—æœºçš„å¤§å±±ä¹‹é¡¶çœ‹è§å½©è™¹å‘¢ï¼ æ— è®ºæ€æ ·ï¼Œç›¸ä¿¡æ˜å¤©ä¸€å®šä¼šæ›´å¥½ï¼ï¼ï¼ï¼ï¼</strong></h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ğŸŒ¸é¢˜ç›®&quot;&gt;&lt;a href=&quot;#ğŸŒ¸é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;ğŸŒ¸é¢˜ç›®&quot;&gt;&lt;/a&gt;ğŸŒ¸é¢˜ç›®&lt;/h2&gt;&lt;p&gt;ğŸç¼–å†™å‡½æ•°ï¼Œå®ç°è®¸å¤šå›¾ç‰‡ç¼–è¾‘è½¯ä»¶éƒ½æ”¯æŒçš„ã€Œé¢œè‰²å¡«å……ã€åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å¾…å¡«å……çš„å›¾åƒç”¨äºŒç»´æ•°ç»„ image è¡¨ç¤ºï¼Œå…ƒç´ ä¸ºåˆå§‹é¢œè‰²å€¼ã€‚åˆå§‹åæ ‡ç‚¹çš„æ¨ªåæ ‡ä¸º sr çºµåæ ‡ä¸º scã€‚éœ€è¦å¡«å……çš„æ–°é¢œè‰²ä¸º newColor ã€‚&lt;/p&gt;
&lt;p&gt;ã€Œå‘¨å›´åŒºåŸŸã€æ˜¯æŒ‡é¢œè‰²ç›¸åŒä¸”åœ¨ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ä¸Šå­˜åœ¨ç›¸è¿æƒ…å†µçš„è‹¥å¹²å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;è¯·ç”¨æ–°é¢œè‰²å¡«å……åˆå§‹åæ ‡ç‚¹çš„å‘¨å›´åŒºåŸŸï¼Œå¹¶è¿”å›å¡«å……åçš„å›¾åƒã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="LeetCode" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/LeetCode/"/>
    
    
      <category term="DFS" scheme="https://liudufu.github.io/tags/DFS/"/>
    
  </entry>
  
  <entry>
    <title>ACMåŸºç¡€æ•°å­¦</title>
    <link href="https://liudufu.github.io/ACM_basic_mathematics/"/>
    <id>https://liudufu.github.io/ACM_basic_mathematics/</id>
    <published>2020-10-07T13:22:46.000Z</published>
    <updated>2020-10-07T13:25:51.383Z</updated>
    
    <content type="html"><![CDATA[<p><strong>1.æœ€å¤§å…¬çº¦æ•°ï¼Œæœ€å°å…¬å€æ•°</strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> z=y;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(x%y!=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">        z=x%y;</span><br><span class="line"></span><br><span class="line">        x=y;</span><br><span class="line"></span><br><span class="line">        y=zï¼›</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> z;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lcm</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> x*y/gcd(x,y);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><a id="more"></a><p><strong>2.å¿«é€Ÿå¹‚</strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> mod)</span><span class="comment">//a^b</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> t=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(b)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span>(b&amp;<span class="number">1</span>)</span><br><span class="line">        {</span><br><span class="line">            t=(t*a)%mod;</span><br><span class="line">            b--;</span><br><span class="line">        }</span><br><span class="line">        a=(a*a)%mod;</span><br><span class="line">        b&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> t;</span><br></pre></td></tr></tbody></table></figure><p><strong>&gt;&gt;çŸ©é˜µå¿«é€Ÿå¹‚ å¾ˆä¹…ä»¥å‰æ”¶é›†çš„æ¨¡æ¿ï¼Œäº²æµ‹å¯ç”¨</strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Matrix</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="keyword">int</span> m[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function">Matrix <span class="title">Mul</span><span class="params">(Matrix a,Matrix b)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    Matrix c;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(c.m,<span class="number">0</span>,<span class="keyword">sizeof</span>(c.m));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;<span class="number">3</span>;k++)</span><br><span class="line"></span><br><span class="line">                c.m[i][j] += ((a.m[i][k]*b.m[k][j])%SMod + SMod)%SMod;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">Matrix <span class="title">fastm</span><span class="params">(Matrix a,<span class="keyword">int</span> n)</span> </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Matrix res;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(res.m,<span class="number">0</span>,<span class="keyword">sizeof</span>(res.m));</span><br><span class="line"></span><br><span class="line">    res.m[<span class="number">0</span>][<span class="number">0</span>] = res.m[<span class="number">1</span>][<span class="number">1</span>] = res.m[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line"></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)</span><br><span class="line">            res = Mul(res,a);</span><br><span class="line"></span><br><span class="line">        n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">        a = Mul(a,a);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">Matrix <span class="title">MPow</span><span class="params">(Matrix a,<span class="keyword">int</span> n)</span>  <span class="comment">//ç¬¬äºŒç§å†™æ³•,æ…ç”¨,æ˜“RE</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line"></span><br><span class="line">    Matrix res = fastm(a,n/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    res = Mul(res,res);</span><br><span class="line">   <span class="keyword">if</span>(n&amp;<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        res = Mul(res,a);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p> <strong>å¦å¤–ä¸€ç§</strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Matrix</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"></span><br><span class="line">    lll m[<span class="number">13</span>][<span class="number">13</span>];</span><br><span class="line"></span><br><span class="line">    Matrix()</span><br><span class="line"></span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">        <span class="built_in">memset</span>(m,<span class="number">0</span>,<span class="keyword">sizeof</span>(m));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+<span class="number">2</span>;i++)</span><br><span class="line"></span><br><span class="line">            m[i][i] = <span class="number">1L</span>L;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function">Matrix <span class="title">Mul</span><span class="params">(Matrix a,Matrix b)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    Matrix res;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i,j,k;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n+<span class="number">2</span>;i++)</span><br><span class="line"></span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=n+<span class="number">2</span>;j++)</span><br><span class="line"></span><br><span class="line">        {</span><br><span class="line"></span><br><span class="line">            res.m[i][j] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;=n+<span class="number">2</span>;k++)</span><br><span class="line">                res.m[i][j] = (res.m[i][j]+(a.m[i][k]*b.m[k][j])%SMod + SMod)%SMod;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">Matrix <span class="title">fastm</span><span class="params">(Matrix a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    Matrix res;</span><br><span class="line">    <span class="keyword">while</span>(b)</span><br><span class="line"></span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(b&amp;<span class="number">1</span>)</span><br><span class="line">            res = Mul(res,a);</span><br><span class="line">        a = Mul(a,a);</span><br><span class="line"></span><br><span class="line">        b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p> <strong>å¯¹å…ƒç´ 0è¾ƒå¤šçš„çŸ©é˜µå–å¿«é€Ÿå¹‚æ—¶å¯åœ¨Mulå‡½æ•°ä¸­åŠ ä¸€ä¸ªå°ä¼˜åŒ–ï¼š</strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Matrix <span class="title">Mul</span><span class="params">(Matrix a,Matrix b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Matrix res;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i,j,k;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(res.m,<span class="number">0</span>,<span class="keyword">sizeof</span>(res.m));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;=n+<span class="number">2</span>;k++)</span><br><span class="line"></span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n+<span class="number">2</span>;i++)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span>(a.m[i][k])</span><br><span class="line"></span><br><span class="line">            {</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=n+<span class="number">2</span>;j++)</span><br><span class="line"></span><br><span class="line">                    res.m[i][j] = (res.m[i][j]+(a.m[i][k]*b.m[k][j])%SMod + SMod)%SMod;</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>3.æ’åˆ—ç»„åˆ</strong></p><p><strong><img src="https://images2018.cnblogs.com/blog/1458413/201808/1458413-20180806171419851-479703983.png" alt="img"></strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">LL <span class="title">A</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> m)</span><span class="comment">//n&gt;=m</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;m)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line"></span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">        ans*=n;</span><br><span class="line">  n--;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="function">LL <span class="title">C</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> m)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(n&lt;m)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> A(n,m)/A(m,m);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p> ç»„åˆæ•°æ€§è´¨ï¼šä»è¿™çœ‹åˆ°çš„ï¼š<a href="https://blog.csdn.net/litble/article/details/75913032" target="_blank" rel="noopener">https://blog.csdn.net/litble/article/details/75913032</a></p><p><img src="https://images2018.cnblogs.com/blog/1458413/201808/1458413-20180807092033984-886826912.png" alt="img"></p><p><img src="https://images2018.cnblogs.com/blog/1458413/201808/1458413-20180807092042262-2121295377.png" alt="img"></p><p><img src="https://images2018.cnblogs.com/blog/1458413/201808/1458413-20180807092055838-1849485820.png" alt="img"></p><p><img src="https://images2018.cnblogs.com/blog/1458413/201808/1458413-20180807092106829-1242924198.png" alt="img"></p><p><img src="https://images2018.cnblogs.com/blog/1458413/201808/1458413-20180807092115984-915400971.png" alt="img"></p><p><img src="https://images2018.cnblogs.com/blog/1458413/201808/1458413-20180807092130715-1600490627.png" alt="img"></p><p><img src="https://images2018.cnblogs.com/blog/1458413/201808/1458413-20180807092226548-1935049046.png" alt="img"></p><p><strong>4.é”™æ’</strong></p><p><strong>D(n) = (n-1) [D(n-2) + D(n-1)]ï¼ˆnç‰©å“å…¨éƒ¨é”™ä½çš„æ–¹æ¡ˆæ•°ï¼‰</strong></p><p><strong>D(n) = n! [(-1)^2/2! + â€¦ + (-1)^(n-1)/(n-1)! + (-1)^n/n!].</strong></p><p><strong>è®°ä½å…¬å¼å°±çŸ¥é“ä»£ç äº†</strong></p><p><strong>5.è´¹é©¬å°å®šç†ï¼š</strong> å‡å¦‚pæ˜¯<a href="https://baike.baidu.com/item/è´¨æ•°" target="_blank" rel="noopener">è´¨æ•°</a>ï¼Œä¸”gcd(a,p)=1ï¼Œé‚£ä¹ˆ a^(p-1)â‰¡1(mod p)ã€‚ï¼ˆå¦‚æœaä¸ºæ•´æ•°ï¼Œpä¸ºè´¨æ•°ï¼Œaå’Œpäº’è´¨ï¼Œåˆ™açš„p-1æ¬¡å¹‚å¯¹på–æ¨¡æ°¸è¿œç­‰äº1ï¼‰</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;1.æœ€å¤§å…¬çº¦æ•°ï¼Œæœ€å°å…¬å€æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;gcd&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; x,&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; z=y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(x%y!=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        z=x%y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x=y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        y=zï¼›&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; z;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;lcm&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; x,&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x*y/gcd(x,y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ACM" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/ACM/"/>
    
    
      <category term="ACM" scheme="https://liudufu.github.io/tags/ACM/"/>
    
      <category term="æ•°å­¦" scheme="https://liudufu.github.io/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>ACMä¼ å¥‡ä¹‹è·¯(ç´§æ¡ç€è‡ªå·±é¢¤æŠ–çš„åŒæ‰‹)</title>
    <link href="https://liudufu.github.io/acm_road/"/>
    <id>https://liudufu.github.io/acm_road/</id>
    <published>2020-10-07T13:19:55.000Z</published>
    <updated>2020-10-07T13:22:22.028Z</updated>
    
    <content type="html"><![CDATA[<p>ä»æˆ‘æ¥è§¦ç¨‹åºç«èµ›åˆ°ç°åœ¨åº”è¯¥æœ‰åå¤šå¹´äº†ï¼Œå•è¯´ACMç«èµ›ï¼Œä»ç¬¬ä¸€æ¬¡éæ­£å¼å‚èµ›åˆ°ç°åœ¨ä¹Ÿå·®ä¸å¤šæœ‰7å¹´å¤šçš„æ ·å­ã€‚æœ‰å¤ªå¤šçš„æ•…äº‹ï¼Œæƒ³è¯´çš„è¯ï¼Œå´ä¸€ç›´æ²¡èƒ½æœ‰æœºä¼šå†™ä¸‹æ¥ã€‚ä¸€æ–¹é¢æ˜¯è‡ªå·±å¿™ï¼Œä¸€æ–¹é¢ä¹Ÿæ˜¯è‡ªå·±æ‡’ã€‚æ‰€ä»¥å¾ˆæ„Ÿè°¢èƒ½æœ‰äººâ€œé€¼â€æˆ‘æ¥å†™ç‚¹ä»€ä¹ˆã€‚æƒ³åˆ°ä¼šæœ‰å¾ˆå¤šäººæ¥è¯»æˆ‘å†™çš„æ–‡å­—ï¼Œè‡ªå·±ä¹Ÿè§‰å¾—å¾ˆå¼€å¿ƒã€‚å…¶å®æ¯ä¸ªäººçš„ç”Ÿæ´»éƒ½æ˜¯ä¸€éƒ¨ç”µå½±ï¼Œåªæ˜¯æ²¡æœ‰é‚£ä¹ˆå¤šå¹¸è¿çš„äººæœ‰æœºä¼šå»è¯‰è¯´ã€‚è¿™é‡Œï¼Œä¸”è¯´ä¸‰ä¸ªå°æ•…äº‹ã€‚ </p><a id="more"></a><p>ä¸€ä¸ªå…³äºä»°æœ›ï¼Œå´‡æ‹œå’Œæ¢¦æƒ³çš„æ•…äº‹ </p><p>2000å¹´ï¼Œæœ‰ä¸€ä¸ªå¤©æ‰çš„é«˜ä¸­ç”Ÿï¼Œåœ¨IMOï¼ˆå›½é™…æ•°å­¦å¥¥æ—åŒ¹å…‹ç«èµ›ï¼‰ä¸­ä»¥æ»¡åˆ†è·å¾—äº†é‡‘ç‰Œå¹¶æå‰ä¸€å¹´è¿›å…¥åŒ—å¤§è¯»ä¹¦ã€‚åœ¨ä»–å‰å¾€åŒ—å¤§ä¹‹å‰ï¼Œä»–å—é‚€åˆ°ä»–æ¯•ä¸šçš„å°å­¦ç»™äº†ä¸€ä¸ªæ¼”è®²ã€‚è€Œå¬ä¼—é‡Œé¢æœ‰ä¸€ä¸ªä¸‰å¹´çº§çš„å°æ­£å¤ªï¼Œæ¼”è®²å•¥ä¹Ÿæ²¡è®°ä½ï¼Œå€’æ˜¯åœ¨å¿ƒé‡ŒåŸ‹ä¸‹äº†ä¸€ä¸ªå°å°çš„æ¢¦æƒ³ï¼šâ€œæˆ‘ä¹Ÿæƒ³ä»£è¡¨ä¸­å›½å»æ‹¿é‡‘ç‰Œâ€ã€‚ </p><p>10å¹´åè¿™ä¸ªå¤©æ‰é«˜ä¸­ç”Ÿåšå£«æ¯•ä¸šï¼Œå¹¶å—é‚€å›åˆ°ä»–æ¯•ä¸šçš„é«˜ä¸­åˆç»™äº†ä¸€ä¸ªæ¼”è®²ï¼Œå½“å¹´çš„å°æ­£å¤ªå˜æˆäº†å°‘å¹´ï¼Œåˆæ°å¥½åœ¨å¬ä¼—å¸­é‡Œã€‚è¿™ä¸ªå°‘å¹´åˆšåˆšå…¥é€‰äº†ä¿¡æ¯å­¦å¥¥æ—åŒ¹å…‹ä¸­å›½å›½å®¶é˜Ÿï¼Œå°†ä»£è¡¨ä¸­å›½å»åŠ æ‹¿å¤§å‚åŠ å›½é™…æ¯”èµ›ã€‚ </p><p>è¿™ä¸ªå¤©æ‰é«˜ä¸­ç”Ÿå«æ½ä¹‹ç®ï¼Œæ‹‰é©¬åŠªé‡‘å¥–å¾—ä¸»ï¼Œç›®å‰åœ¨æ–¯å¦ç¦å¤§å­¦ä»»æ•™ï¼›è€Œé‚£ä¸ªå°æ­£å¤ªï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªå°‘å¹´ï¼Œåæ¥éå¸¸ä¸¢äººçš„æ‹¿åˆ°äº†å›½é™…æ¯”èµ›çš„é“¶ç‰Œï¼Œåˆåœ¨ACMç«èµ›åœˆå­é‡Œæ™ƒæ‚ äº†ä¸€åœˆï¼Œç°åœ¨ä¹Ÿè·‘åˆ°ç¾å›½è¯»åšå£«äº†ã€‚å¾ˆä¸å¹¸ï¼Œä¸–ç•Œæ²¡èƒ½ç‹—è¡€åˆ°å†åº¦äº§ç”Ÿä¸€ä¸ªè«æ‰ç‰¹å’Œè´å¤šèŠ¬çš„æ•…äº‹ã€‚å°‘å¹´è‡ªç„¶æ²¡æ³•å’Œå¤©æ‰ç›¸æ¯”æ‹Ÿï¼Œä¸è¿‡èµ·ç åœ¨éœ€è¦å†™å†™æ–‡å­—çš„æ—¶å€™ï¼Œå°‘å¹´çš„æ•…äº‹å¯ä»¥è¿™æ ·å¼€å¤´ï¼šâ€œæˆ‘æœ‰ä¸€ä¸ªæ¢¦æƒ³â€ã€‚ </p><p>å°å­¦çš„æ—¶å€™å‚åŠ è®¡ç®—æœºå…´è¶£å°ç»„ï¼Œä»é‚£é‡Œæ¥è§¦äº†ç¼–ç¨‹ã€‚ä¸è¿‡ï¼Œè¦è¯´çœŸæ­£è¢«å¸¦å…¥äº†ç¨‹åºç«èµ›è¿™æ¡ä¸å½’è·¯ï¼Œé‚£è¿˜å¾—å½’åŠŸäºæˆ‘çš„æ©å¸ˆï¼Œå¸¸å·é«˜çº§ä¸­å­¦çš„æ›¹æ–‡è€å¸ˆçš„é¡¶çº§å¿½æ‚ èƒ½åŠ›ã€‚ </p><p>æˆ‘ä»åˆä¸€å¼€å§‹è·Ÿç€æ›¹è€å¸ˆå­¦ä¹ ä¿¡æ¯å­¦ç«èµ›ï¼Œæ›¹è€å¸ˆæœ€å–œæ¬¢æœ‰äº‹æ²¡äº‹çš„æ‰¯ä»–è¿‡å»çš„å­¦ç”Ÿçš„æ•…äº‹ï¼Œä»¥åŠç«èµ›åœˆé‡Œçš„å…«å¦ã€‚ä¹Ÿæ­£æ˜¯é‚£ä¸ªæ—¶å€™ï¼Œä»æ›¹è€å¸ˆçš„å£ä¸­ï¼Œæˆ‘çŸ¥é“äº†ä¸–ç•Œä¸Šè¿˜æœ‰ACMè¿™ä¹ˆä¸ªç©æ„ã€‚è¿˜è®°å¾—æŸä¸€å¤©ï¼Œæ›¹è€å¸ˆåˆåœ¨èƒ¡ä¾ƒï¼šâ€œACMæ¯”èµ›ä¸€å…±æœ‰4æ‰€å¤§å­¦å¤ºå¾—è¿‡2æ¬¡ä¸–ç•Œå† å†›ï¼šä¸Šæµ·äº¤é€šå¤§å­¦ï¼Œåœ£å½¼å¾—å ¡ITMOï¼Œåæ²™å¤§å­¦è¿˜æœ‰æ–¯å¦ç¦å¤§å­¦ã€‚â€è¯´å‡ºæ¥ä¸æ€•ç¬‘è¯ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡å¬åˆ°æ–¯å¦ç¦å¤§å­¦è¿™ä¸ªåå­—ã€‚æ‰€ä»¥æ–¯å¦ç¦å¤§å­¦ç»™æˆ‘çš„ç¬¬ä¸€å°è±¡å°±æ˜¯ï¼šä¸¤æ¬¡ä¸–ç•Œå† å†›çš„å­¦æ ¡ï¼è¯´å¥é¢˜å¤–è¯ï¼šå› ä¸ºæ½ä¹‹ç®çš„åŸå› ï¼Œæˆ‘å–œæ¬¢äº†åŒ—å¤§å¾ˆé•¿æ—¶é—´ï¼Œä¹Ÿå› ä¸ºæ›¹è€å¸ˆçš„è¿™å¥èƒ¡ä¾ƒï¼Œè®©æ–¯å¦ç¦æˆäº†æˆ‘æœ€å‘å¾€çš„å¤§å­¦ï¼›ä¸è¿‡é€ åŒ–å¼„äººï¼Œæˆ‘çš„æœ¬ç§‘åœ¨åŒ—å¤§çš„éš”å£åº¦è¿‡ï¼Œè€Œåšå£«ï¼Œåˆè·‘åˆ°äº†æ–¯å¦ç¦çš„éš”å£ã€‚ </p><p>æ›¹è€å¸ˆå…«å¦çš„æ€§æ ¼ï¼Œä¹Ÿæ½œç§»é»˜åŒ–çš„å½±å“äº†æˆ‘ã€‚å¹³æ—¶æ²¡äº‹çš„æ—¶å€™ï¼Œå°±ç‰¹åˆ«å–œæ¬¢ç¿»é˜…å¾€å¹´çš„OIæ¯”èµ›çš„æˆç»©å•ï¼Œè¿˜æœ‰ACMä¸–ç•Œæ€»å†³èµ›çš„åå•ã€‚ç›´åˆ°ç°åœ¨ï¼Œæˆ‘éƒ½å¯ä»¥å¦‚æ•°å®¶ççš„è¯´å‡ºä¹‹å‰è¿‘10å¹´çš„ä¿¡æ¯å­¦ç«èµ›ä¸­å›½å›½å®¶é˜Ÿï¼ˆç”šè‡³ç¾å›½å›½å®¶é˜Ÿï¼‰çš„é˜Ÿå‘˜åå•ï¼Œæˆ–è€…ACMä¸–ç•Œæ€»å†³èµ›æ¸…åï¼Œäº¤å¤§çš„é˜Ÿå‘˜åå­—ï¼Œä»¥åŠä»–ä»¬çš„åæ¬¡ã€‚å¯¹äºä¸€ä¸ªåˆä¸­çš„å­©å­ï¼Œç¿»ç€è¿™äº›åå­—ï¼Œå¬ç€è¿™äº›æ•…äº‹ï¼Œæˆ‘æ— æ³•ç”¨è¨€è¯­æè¿°é‚£æ˜¯æˆ‘å¿ƒä¸­çš„æ¿€åŠ¨ï¼Œå¥½åƒè¿™äº›æ•…äº‹ï¼Œå‘ç”Ÿåœ¨ä¸€ä¸ªæ— ä¸ä¼¦æ¯”çš„ï¼Œå¹¿é˜”çš„ä¸–ç•Œï¼Œè€Œè¿™äº›åå­—ï¼Œå°±çŠ¹å¦‚å¤œç©ºä¸­çš„æ˜Ÿæ˜Ÿä¸€æ ·ï¼Œé—ªè€€ï¼Œå¤ºç›®ã€‚åæ¥çš„å¾ˆå¤šå¹´ä¸­ï¼Œæˆ‘å¾ˆæœ‰å¹¸å‡ ä¹å…¨éƒ¨è§è¿‡æˆ–è€…æ¥è§¦è¿‡äº†è¿™äº›å½“å¹´åœ¨æˆ‘å¿ƒä¸­çŠ¹å¦‚æµ©ç€šæ˜Ÿè¾°èˆ¬çš„ç¥ä»¬ã€‚ä»–ä»¬åº”è¯¥å¾ˆéš¾æƒ³è±¡ï¼Œå½“æˆ‘ç¬¬ä¸€æ¬¡è§åˆ°ä»–ä»¬çš„æ¿€åŠ¨çš„å¿ƒæƒ…ã€‚é‚£ç§æ„Ÿè§‰ï¼Œå’Œæ­Œè¿·è§åˆ°ä»–ä»¬çš„å¶åƒä¸€æ ·ã€‚é‚£æ—¶å€™å¿ƒä¸­åŸ‹è—å¾ˆå¤šå¹´çš„å°å°çš„æ‰§å¿µï¼Œä¹Ÿä¸è¿‡å°±æ˜¯è§ä»–ä»¬ä¸€æ¬¡ã€‚ç”šè‡³ç›´åˆ°ç°åœ¨ï¼Œå¯¹ä¸€äº›äººï¼Œè¿˜æ˜¯è¿™æ ·ã€‚ </p><p>åˆä¸­çš„æ—¶å€™æœ€å–œæ¬¢å‚åŠ çœé‡Œçš„å¤ä»¤è¥ï¼Œå†¬ä»¤è¥ï¼Œé‚£æ—¶å€™å¹´çºªå°ï¼Œæœ€å–œæ¬¢è·Ÿåœ¨å¸ˆå…„çš„åé¢ï¼Œå¬ç€å¸ˆå…„ä»¬è®²ç€æˆ‘å¬ä¸æ‡‚çš„ç®—æ³•ï¼Œæ‰“ç€æˆ‘æ²¡ç©è¿‡çš„æ¸¸æˆï¼ˆæˆ‘å¯¹ä»™å‰‘çš„æ‰§å¿µä¹Ÿæ˜¯ä»é‚£ä¸ªæ—¶å€™å¼€å§‹çš„ï¼‰ï¼›åˆä¸‰çš„æš‘å‡æˆ‘æœ‰å¹¸åˆ°äº†ä¸Šæµ·äº¤é€šå¤§å­¦ACMé˜Ÿè®­ç»ƒäº†ä¸€ä¸ªæœˆï¼Œä½œä¸ºä¸€ä¸ªåˆä¸­ç”Ÿï¼Œæˆ‘ç¬¬ä¸€æ¬¡è§åˆ°äº†ï¼Œå›½å†…é¡¶å°–çš„å¤§å­¦ï¼Œé¡¶å°–çš„å¤§å­¦ç”Ÿæ˜¯æ€ä¹ˆæ ·çš„ï¼Œä¹Ÿé‡åˆ°äº†æˆ‘æ— æ¯”å°Šæ•¬å’Œæ„Ÿæ©çš„ï¼Œä¸Šæµ·äº¤é€šå¤§å­¦ACMç­çš„ä¿å‹‡è€å¸ˆï¼›åˆ°äº†é«˜ä¸­å¼€å§‹ä»¥éæ­£å¼é˜Ÿä¼çš„èº«ä»½å‚åŠ ACMåŒºåŸŸèµ›ï¼Œä¹Ÿå°±æ€»ç®—å¯ä»¥äº²çœ¼çœ‹ä¸€çœ‹ï¼Œé‚£äº›ä¼ è¯´ä¸­çš„äººï¼Œè¿˜å¯ä»¥å†²ä¸Šå»å’Œä»–ä»¬åˆä¸€å¼ å½±ï¼Œç„¶åæ¿€åŠ¨çš„æ™šä¸Šç¡ä¸ç€è§‰ï¼›ä¸Šäº†å¤§å­¦ï¼Œå¤§äºŒæš‘å‡æˆ‘åˆ°ç¾å›½Facebookå…¬å¸æ€»éƒ¨å®ä¹ ï¼Œåœ¨æ¹¾åŒºè§åˆ°äº†æ›´è€ä¸€è¾ˆçš„ï¼Œé‚£äº›å¦‚é›·è´¯è€³çš„åå­—ã€‚ </p><p>å…‰é˜´èè‹’ï¼Œæ—¶å…‰åŒ†åŒ†æµé€ï¼Œå¥½äº›ç”»é¢åœ¨å¿ƒé‡Œä¾ç„¶æ˜¯é‚£ä¹ˆæ¸…æ™°ã€‚è®²è®²é‚£äº›åå­—å§ã€‚åˆä¸­æ¯æ¬¡å‚åŠ çœé‡Œç»„ç»‡çš„ä¿¡æ¯å­¦å†¬ä»¤è¥å¤ä»¤è¥éƒ½ä¼šåš·åš·ï¼Œæˆ‘è¦æ˜¯èƒ½è§ä¸€é¢æœ±æ³½å›­ï¼ˆIOIé‡‘ç‰Œï¼ŒACMæ€»å†³èµ›äºšå†›ï¼ŒMITåšå£«ï¼‰å°±å¥½äº†ï¼Œåæ¥é«˜äºŒæ—¶åœ¨ACMæ­å·èµ›åŒºæ€»ç®—è§åˆ°äº†ï¼Œå½“æ—¶è¿˜è§åˆ°äº†ä»–çš„ä¸¤ä½é˜Ÿå‹ï¼šæ¥¼å¤©æˆï¼ˆæ¥¼æ•™ä¸»ï¼Œåœˆå†…äººå£«åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼‰å’Œå‘¨æºï¼ˆIOIæ»¡åˆ†ï¼ŒACMæ€»å†³èµ›äºšå†›ï¼ŒCMUåšå£«ï¼‰ï¼Œå½“æ—¶æ§ç€é‚£å¼ åˆå½±ï¼Œç®€ç›´æ¯”æ‹¿äº†å† å†›è¿˜æ¿€åŠ¨ï¼›åˆä¸‰æš‘å‡åœ¨äº¤å¤§ï¼Œç¬¬ä¸€æ¬¡åœ¨æœºæˆ¿é‡Œè§åˆ°äº†ä»°æ…•å·²ä¹…çš„æˆ´æ–‡æ¸Šï¼ˆACMä¸–ç•Œå† å†›ï¼Œç›®å‰å°±èŒäºåä¸ºè¯ºäºšæ–¹èˆŸå®éªŒå®¤ï¼‰ï¼Œåæ¥æ¯æ¬¡åªè¦æœ‰æœºä¼šéƒ½è¦è¹¦è¹¦è·³è·³çš„è·‘å»æ‰¾æˆ´æ–‡æ¸Šåˆå½±ï¼›é«˜ä¸€åœ¨ACMå—äº¬èµ›åŒºï¼Œç¬¬ä¸€æ¬¡è§åˆ°äº†å”æ–‡æ–Œï¼ˆACMæ€»å†³èµ›ä¸–ç•Œç¬¬å…­ï¼ŒFace++ CEOï¼‰ï¼Œä»¥åŠä»–çš„ä¸¤ä¸ªé˜Ÿå‹ç‹æ ‹ï¼ˆIOIé‡‘ç‰Œï¼‰å’Œé¾™å‡¡ï¼ˆIOIé‡‘ç‰Œï¼ŒMITåšå£«ï¼‰ï¼Œå½“ç„¶è¿˜è§åˆ°äº†å› ä¸ºæ¯”ç ¸äº†å¿ƒæƒ…ä¸å¥½è€Œæ‹’ç»æˆ‘åˆå½±è¯·æ±‚çš„éƒ­åé˜³ï¼ˆIOIé‡‘ç‰Œï¼Œå°±èŒäºFacebookï¼‰ã€‚å½“æ—¶æˆ‘å¯èƒ½åšæ¢¦ä¹Ÿæƒ³ä¸åˆ°ï¼Œè¿‡äº†è‹¥å¹²å¹´ï¼Œæˆ‘ä¼šå’Œå”æ–‡æ–Œä¸€èµ·ååœ¨ç«è½¦çš„é¤è½¦åœ°ä¸Šæ‰“ç‰Œï¼Œä¼šå’Œéƒ­åé˜³åœ¨çº½çº¦æ›¼å“ˆé¡¿ç¡ä¸Šä¸‹é“ºã€‚åæ¥è¿›äº†å¤§å­¦ï¼Œå’Œè´å°è¾‰æˆäº†å¥½æœ‹å‹ï¼Œæ¥¼å¤©æˆæˆäº†æˆ‘çš„åŠ©æ•™ï¼Œèƒ¡ä¼Ÿæ ‹ï¼ˆIOIé‡‘ç‰Œï¼ŒACMä¸–ç•Œäºšå†›ï¼‰ä¼šè¯·æˆ‘åƒé¥­ï¼›æˆ‘æ›´ä¸ä¼šæƒ³åˆ°ï¼Œå†åæ¥ï¼Œå¼ ä¸€é£ï¼ˆIOIä¸¤æšé‡‘ç‰Œå¾—ä¸»ï¼Œå°±èŒäºFacebookï¼‰ä¼šç»™æˆ‘æ¨èç®€å†ï¼Œæˆ‘ä¼šå’Œç¬¦æ–‡æ°ï¼ˆä¸­å›½å”¯ä¸€IOIï¼ŒIMOåŒå›½å®¶é˜Ÿæˆå‘˜ï¼Œå°±èŒäºFacebookï¼‰ä¸€èµ·åƒé¥­ï¼Œå’Œä¾¯å¯æ˜ï¼ˆNOIå†å²ä¸Šå”¯ä¸€çš„æ»¡åˆ†ï¼ŒIOIé‡‘ç‰Œï¼Œæµ™æ±Ÿå¤§å­¦å‰¯æ•™æˆï¼‰ä¸€èµ·æ‰¯æ·¡ã€‚å½“ç„¶äº†ï¼Œè¿›å…¥å¤§å­¦ä»¥åï¼Œæˆ‘ä¸ä¼šå†ç«¯ç€ç›¸æœºå››å¤„åˆå½±äº†ã€‚ </p><p>ç°åœ¨çœ‹ï¼Œè¿™äº›åå­—ä¹Ÿå¾ˆæ™®é€šï¼Œä¹Ÿå¾ˆå¹³å¸¸ï¼Œå¾ˆå¤šè¿‡å»çš„æ•…äº‹ï¼Œå¯èƒ½åœ¨èŒ¶ä½™é¥­åéƒ½ä¸ä¼šè¢«æèµ·äº†ã€‚ä½†æ˜¯ä¸–ç•Œä¸Šæ¯•ç«Ÿæœ‰è¿™ä¹ˆä¸€ä¸ªå°æ•…äº‹æ›¾å‘ç”Ÿè¿‡ï¼šåœ¨å¾ˆå¤šå¾ˆå¤šå¹´å‰ï¼Œæ›¾ç»æœ‰ä¸€ä¸ªå°æ­£å¤ªï¼Œæ¯å¤©å¿µå¨ç€è¿™äº›åå­—ï¼Œåœ¨å¿ƒé‡ŒåŸ‹ä¸‹å°å°çš„æ¢¦æƒ³ï¼Œç„¶åä¸€æ­¥ä¸€æ­¥çš„ï¼Œä»–è§åˆ°äº†è¿™äº›ä»–æˆå¤©å¿µå¨çš„äººï¼Œå’Œä»–ä»¬æˆäº†æœ‹å‹ã€‚å¤šå¹´ä»¥åï¼Œä»–çš„æ¢¦æƒ³æœ¬èº«ï¼Œä¹Ÿè®¸æ­¤æ—¶æ­£åŒ–ä½œä¸€ä¸ªæ·¡ç„¶çš„å¾®ç¬‘ã€‚ </p><p>ä¸€ä¸ªå…³äºå›ºæ‰§ï¼ŒåšæŒå’Œè‡ªä¿¡çš„æ•…äº‹ </p><p>ä»å°å­¦å¼€å§‹å‚åŠ ä¿¡æ¯å­¦æ¯”èµ›ï¼Œé«˜ä¸€å¼€å§‹å‚åŠ ACMåŒºåŸŸèµ›ï¼Œä¸€ç›´åˆ°ç°åœ¨åšå£«è¿˜åœ¨å‚èµ›ã€‚è¿™ä¹ˆå¤šå¹´äº†ï¼Œæœ‰æ—¶è‡ªå·±éƒ½ä¼šæ„Ÿæ…¨ã€‚æ¯å¹´å‚åŠ æ¯”èµ›è¿™ä»¶äº‹æƒ…ï¼Œå¥½åƒå·²ç»å¿«æˆä¸ºæˆ‘ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†äº†ã€‚è®°å¾—æœ‰ä¸€æ¬¡åœ¨ACMåŒºåŸŸèµ›çš„æ—¶å€™å‘è¨€ï¼Œæˆ‘è¯´ACMæ˜¯æˆ‘çš„åˆæ‹ï¼Œç°åœ¨çœ‹ï¼Œå¯èƒ½ACMæˆäº†æˆ‘çš„ç”Ÿæ´»äº†å§ã€‚æ‡µæ‡‚ï¼Œçƒ­çƒˆï¼ŒåšæŒï¼Œæ·¡ç„¶ï¼Œå…¶å®çˆ±æƒ…ä¹Ÿä¸è¿‡å¦‚æ­¤ï¼Œæœ€åæ‰€æœ‰çš„ä¸€åˆ‡ï¼Œéƒ½åŒ–ä½œäº†ç”Ÿæ´»ã€‚ </p><p>å¾ˆå¤šäººé—®æˆ‘ï¼Œè¿™ä¹ˆå¤šå¹´äº†ä½ æ€ä¹ˆè¿˜åœ¨å‚èµ›å‘¢ï¼ŒèŠ±è´¹è¿™ä¹ˆå¤šç²¾åŠ›ï¼Œæ—¶é—´ï¼Œåˆ°åº•æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå…¶å®æˆ‘ä¹Ÿå¿«è¯´ä¸æ¸…æ¥šäº†ã€‚å¾ˆå°å¾ˆå°çš„æ—¶å€™ï¼Œé‚£æ—¶å€™æ•™æ•°å­¦å¥¥èµ›çš„è€å¸ˆå«Œæˆ‘è´ªç©è®­æ–¥æˆ‘é„™è§†æˆ‘çš„æ™ºå•†ã€‚å°å­©å­è‡ªå°Šå¿ƒæ€»æ˜¯ç‰¹åˆ«å¼ºï¼Œæƒ³ç€æˆ‘æ¢ä¸ªåœ°æ–¹è¯æ˜æˆ‘æ¯”é‚£äº›ä½ å–œæ¬¢çš„äººéƒ½å‰å®³ï¼Œæœ€åå·®ä¸å¤šæ˜¯åšåˆ°äº†ï¼›åˆ°äº†åˆä¸­ï¼Œæˆ‘æƒ³æ¯”é‚£äº›å¸ˆå…„å¸ˆå§ä»¬éƒ½å‰å®³ï¼Œè¦åšå…¨å›½ä¸€æµçš„é€‰æ‰‹ï¼Œåæ¥å·®ä¸å¤šä¹Ÿåšåˆ°äº†ï¼›åˆ°äº†é«˜ä¸­å‘ç°å¥½åƒåœ¨æˆ‘èº«è¾¹çš„å¸ˆå…„ï¼ŒåŒå­¦è¶…ä¸è¿‡äº†ï¼ˆæä¸€ä¸‹ï¼Œæœ‰ä¸€ä¸ªé«˜ä¸­å¸ˆå…„å«é‡‘æ–Œï¼ŒTCOä¸–ç•Œå† å†›ï¼ŒACMæ€»å†³èµ›å† å†›äºšå†›å„ä¸€æ¬¡ï¼Œè¿˜æœ‰ä¸€ä¸ªé«˜ä¸­å¸ˆå…„å«å´å“æ°ï¼ŒACMæ€»å†³èµ›å† å†›ï¼Œç›®å‰éƒ½å°±èŒäºGoogleï¼‰ï¼Œæˆ‘å°±æƒ³æˆ‘å¯ä»¥åˆ°äº†å¤§å­¦å‚åŠ ACMï¼Œåœ¨ACMèµ›åœºä¸Šè¶…è¿‡ä»–ä»¬ï¼›åˆ°äº†å¤§å­¦ï¼Œåšå·¥ç¨‹çš„ä¸æ–­å®ä¹ åšé¡¹ç›®ï¼Œåšç§‘ç ”çš„ä¸€ç¯‡æ¥ä¸€ç¯‡çš„å‘è®ºæ–‡ï¼Œåˆ·GPAçš„å‡ ä¹æ¯é—¨è¯¾éƒ½æ˜¯æ»¡åˆ†ã€‚æˆ‘çœ‹çœ‹è‡ªå·±ä¼¼ä¹æ²¡æœ‰ä¸€æ ·èƒ½åšåˆ°æœ€å¥½çš„ï¼Œäºæ˜¯å°±æƒ³ï¼Œè¦ä¸ç„¶å°±åšä¸€ä¸ªç§‘ç ”ç•ŒACMæ¯”çš„æœ€å¥½çš„ï¼Œè€ŒACMç•Œåˆç§‘ç ”åšçš„æœ€å¥½çš„äººå§ï¼›å†åˆ°åæ¥ï¼Œæˆ‘çŸ¥é“ä¸–ç•Œä¸Šè¿˜æœ‰Percy Liangï¼ˆæ–¯å¦ç¦å¤§å­¦åŠ©ç†æ•™æˆï¼ŒACMæ€»å†³èµ›äºšå†›ï¼‰ï¼ŒMatei Zahariaï¼ˆMITåŠ©ç†æ•™æˆï¼ŒSparkçš„å¼€å‘è€…ï¼ŒACMæ€»å†³èµ›ç¬¬å››ï¼‰è¿™äº›äººï¼Œé‚å‘ç°è‡ªå·±å®åœ¨æ˜¯å·®è·å¤ªå¤§äº†ï¼Œå®åœ¨è¿ä¸ªç†ç”±éƒ½ç¼–ä¸å‡ºäº†ï¼ˆä¹Ÿè®¸å¯èƒ½æ˜¯å¸¸å·æ–¹è¨€è®²çš„æœ€å¥½çš„ï¼Ÿï¼‰ã€‚å¯èƒ½è¿™ä¸ªæ—¶å€™ï¼ŒACMå¯¹æˆ‘è€Œè¨€ï¼Œæ›´åƒæ˜¯å¯¹è‡ªå·±çš„æ•¬ç¤¼ã€‚æ¯•ç«Ÿï¼Œè‡ªå·±å·²ç»åšæŒäº†å¾ˆä¹…å¾ˆä¹…ï¼Œä»æ±Ÿå—ï¼Œåˆ°å¸éƒ½ï¼Œå†åˆ°ç¾åˆ©åšåŠ åˆ©ç¦å°¼äºšã€‚å°±åƒå”±ä¸€é¦–æ­Œï¼Œè·³ä¸€æ”¯èˆï¼Œå†™ä¸€æ®µæ–‡å­—ï¼Œå“ªæ€•æ ¹æœ¬æ²¡æœ‰è§‚ä¼—ï¼Œä¹Ÿæ€»å¸Œæœ›èƒ½å¤Ÿæœ€åè½ä¸‹ä¼´ç€å¾®ç¬‘çš„å¥ç‚¹ã€‚åšä¸€ä»¶äº‹ä¸ä¸€å®šéè¦æœ‰ä¸€ä¸ªæ„ä¹‰ï¼Œå› ä¸ºåšæŒçš„æœ¬èº«ï¼Œå°±æœ‰æ„ä¹‰ï¼Œä¹Ÿå› ä¸ºï¼ŒåšæŒæ€»èƒ½ä¼´ç€ä¸€ä»½æ„ŸåŠ¨ï¼Œæ—¶ä¸æ—¶çš„åœ¨å¿ƒä¸­ç¿»æ¶Œã€‚ </p><p>åšæŒæ˜¯è¦æœ‰ä¿¡å¿µçš„ï¼Œä¿¡å¿µæ˜¯ä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯â€œèµ¢â€ã€‚æƒ³æƒ³è¿˜æŒºä¸å®¹æ˜“ä¹ŸæŒºå¯ç¬‘çš„ï¼Œåˆ°ç°åœ¨è¿˜åœ¨ä¹ç€è¾“èµ¢ï¼Œå°¤å…¶è¾“èµ¢å·²ç»æ—©å°±æ²¡æœ‰äº†æ„ä¹‰ã€‚ä¸è¿‡ä¹Ÿä¸é‚£ä¹ˆå¯ç¬‘ï¼Œå› ä¸ºæˆ‘å¹¶ä¸æ‰§å¿µã€‚â€œèµ¢â€ä¹Ÿè®¸åªæ˜¯å¯¹ç”Ÿæ´»çš„çƒ­æƒ…çš„ç®€å†™å§ã€‚å°æ—¶å€™æƒ³æ‰“è´¥æ‰€æœ‰çš„äººï¼Œåšæœ€å¥½çš„é€‰æ‰‹ï¼Œç»“æœè¿‡äº†åå¹´å‚åŠ å›½é™…æ¯”èµ›æ‹¿äº†å—ä¸¢äººçš„é“¶ç‰Œï¼Œåœ¨ä¸­å›½é˜Ÿé‡Œå«äº†åº•ï¼›é«˜ä¸­å‚åŠ ACMï¼Œæ¯æ¬¡éƒ½ä¸ºå‡»è´¥ä¸€æ”¯æ¸…åçš„é˜Ÿä¼æ„Ÿåˆ°æŒ¯å¥‹ï¼Œè€Œå½“è‡ªå·±åˆ°äº†æ¸…åï¼Œç¬¬ä¸€æ¬¡å‚èµ›å°±åœ¨æ¸…åå†…éƒ¨æ’åœ¨äº†æœ€åï¼›å¤§å­¦å¹»æƒ³ç€ä»¥è‡ªå·±ä½œä¸ºé˜Ÿä¼çš„æ ¸å¿ƒæˆ˜æ–—åŠ›ï¼Œä»£è¡¨æ¸…åæ‹¿å† å†›ï¼Œå‚åŠ æ€»å†³èµ›ï¼Œç»“æœè¿ç»­æ‹¿åˆ°äº†4æ¬¡åŒºåŸŸèµ›çš„äºšå†›ï¼ˆæ¸…åçš„è§„çŸ©æ˜¯ï¼Œåªæœ‰å† å†›æ‰æœ‰èµ„æ ¼ä»£è¡¨å­¦æ ¡å‚åŠ æ€»å†³èµ›ï¼‰ï¼Œå¹¶ä¸”å…¶ä¸­ä¸‰æ¬¡éƒ½æ˜¯åœ¨æœ€åæ—¶åˆ»è¢«åè¶…ï¼ŒåŒé¢˜æ•°è¾“ç½šæ—¶ï¼›å¤§ä¸‰é‚£å¹´æ€»ç®—è¿›äº†æ€»å†³èµ›ï¼Œå¹»æƒ³ç€èƒ½å¤Ÿå±Œä¸é€†è¢­ä¸€æ¬¡è¿›ä¸ªå‰å…«ï¼Œç»“æœæœ€åæƒŠé™©æ‹¿åˆ°äº†é¢†å¥–é˜Ÿä¼çš„æœ€åä¸€åï¼ˆæ€»å†³èµ›ä¸€å…±12æ”¯é˜Ÿä¼å¯ä»¥è·å¾—å¥–ç‰Œï¼Œé‡‘é“¶é“œå„4æ”¯ï¼Œæˆ‘åœ¨2013å¹´çš„æ€»å†³èµ›è·å¾—ç¬¬12åï¼‰ï¼Œå¹¶ä¸”è¿˜è¾“ç»™äº†CMUï¼ˆåæ¥åœ¨CMUé‡åˆ°äº†ä»–ä»¬çš„æ•™ç»ƒï¼Œè¢«è°ƒä¾ƒï¼šâ€œOh, we beat you, right?â€ï¼‰ï¼›å¤§å››ç»ƒäº†å¾ˆä¹…çš„ä¿„ç½—æ–¯é£æ ¼çš„é¢˜ç›®ï¼Œæƒ³ç€å†å»ä¸€æ¬¡åœ¨ä¿„ç½—æ–¯ä¸¾åŠçš„æ€»å†³èµ›ï¼Œè¯æ˜ä¸€ä¸‹è‡ªå·±ï¼Œç»“æœåœ¨æœ€åä¸€æ¬¡åŒºåŸŸèµ›è¾“ç»™äº†å½“æ—¶å®Œç¾å‘æŒ¥çš„äº¤å¤§ï¼Œæœ€åç”šè‡³è¿äºšå†›éƒ½æ²¡æœ‰æ‹¿åˆ°ã€‚ä»Šå¹´8æœˆæˆ‘åœ¨åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡å¼€å§‹äº†è‡ªå·±åšå£«ç”Ÿæ¶¯ã€‚å¾ˆæœ‰å¹¸ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸¤ä¸ªè€æœ‹å‹ä½œä¸ºè‡ªå·±çš„é˜Ÿå‹ï¼Œç„¶åæˆ‘ä»¬è½»æ¾çš„æ‹¿åˆ°äº†è¥¿åŒ—å¤ªå¹³æ´‹èµ›åŒºçš„å† å†›ã€‚äºæ˜¯ï¼Œæˆ‘å¯ä»¥ä»£è¡¨åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ï¼Œå‚åŠ 5æœˆä»½çš„ACMä¸–ç•Œæ€»å†³èµ›äº†ã€‚è¿™æ˜¯æˆ‘çš„ç¬¬äºŒæ¬¡æ€»å†³èµ›ï¼Œä¹Ÿå°†æ˜¯æœ€åä¸€æ¬¡ã€‚ä¸è¿‡æˆ‘å¸Œæœ›åé¢çš„æ•…äº‹ä¸è¦å†ç»§ç»­æŒ‰ç…§ä¹‹å‰çš„èµ°åŠ¿äº†ã€‚ </p><p>è¿™é‡Œç€é‡è¯´ä¸€ä¸‹æˆ‘å¤§ä¸‰é‚£å¹´ï¼ˆ2012ï¼‰å‚åŠ ACMçš„ç»å†ã€‚å½“å¹´æˆ‘ä»¬çš„é˜Ÿåå«Again And Againï¼Œç†ç”±å¾ˆç®€å•ï¼Œé˜Ÿé‡Œé¢ä¸‰ä¸ªäººï¼Œæˆ‘ï¼Œæ¯›æ°æ˜ï¼ˆIOIé‡‘ç‰Œï¼Œç›®å‰åœ¨æ™®æ—æ–¯é¡¿è¯»åšå£«ï¼‰ï¼Œè«æ¶›ï¼ˆNOIç¬¬ä¸€ï¼Œç›®å‰åœ¨é¦™æ¸¯ä¸­æ–‡è¯»åšå£«ï¼‰ï¼Œåœ¨è¿‡å»çš„2å¹´é‡Œï¼ˆ2010å’Œ2011ï¼‰åˆ†åˆ«å‚åŠ è¿‡8ä¸ªä¸åŒçš„èµ›åŒºï¼Œä¸€å…±è·å¾—äº†å…¶ä¸­çš„6ä¸ªäºšå†›ï¼Œå¹¶ä¸”åˆåœ¨2012å¹´çš„é•¿æ˜¥èµ›åŒºï¼Œä¸€èµ·æºæ‰‹æ‹¿åˆ°äº†æˆ‘ä»¬çš„ç¬¬7ä¸ªäºšå†›ã€‚9æ¬¡æ¯”èµ›7æ¬¡äºšå†›ï¼Œæˆ‘æƒ³è¿™ä¸ªè®°å½•ä¹Ÿæ˜¯æŒºéš¾è¶…è¶Šçš„äº†ã€‚ </p><p>æˆ‘æ˜¯ä¸€ä¸ªå›ºæ‰§çš„äººï¼Œä¸€æ—¦è®¤å®šçš„äº‹æƒ…å¾ˆéš¾å†è¢«æ”¹å˜ï¼›æˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªå¹¸è¿çš„äººï¼Œå¤§éƒ¨åˆ†æˆ‘è®¤å®šçš„äº‹æƒ…éƒ½èµ·ç æ²¡æœ‰å¤±è´¥ã€‚ä¹Ÿè®¸ï¼Œè€å¤©çœŸçš„ä¼šåçˆ±ä¸€ä¸ªæ„¿æ„ä¸€ç›´ä»…ä»…å› ä¸ºå–œæ¬¢è€ŒåšæŒçš„äººå§ã€‚ä¸­å­¦çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººå‘†åœ¨æœºæˆ¿é‡Œï¼Œæˆ–è€…ä¸€ä¸ªäººåœ¨å®¶é‡ŒæŠ±ç€ç”µè„‘æƒ³é—®é¢˜ï¼Œé‚£æ—¶å€™å‚åŠ ç¼–ç¨‹æ¯”èµ›æ˜¯æœ‰ç†æœ‰æ®çš„ï¼Œå› ä¸ºå¯ä»¥ä¿é€å¤§å­¦ï¼Œå¯ä»¥ç»™å­¦æ ¡äº‰å…‰ï¼Œå®¶é•¿å’Œå­¦æ ¡ä¹Ÿéƒ½æ”¯æŒã€‚åˆ°äº†æ¸…åï¼Œäº‹æƒ…å°±ä¸ä¸€æ ·äº†ã€‚æˆ‘çŸ¥é“ï¼Œç°åœ¨å‚åŠ ç¨‹åºæ¯”èµ›è¶Šæ¥è¶Šå¤šçš„æœ‰äº†åŠŸåˆ©æ€§ï¼Œæ‹¿å¥–å¯ä»¥ä¿ç ”ï¼Œå¯ä»¥æ‰¾å·¥ä½œï¼Œæˆ–è€…ç»™å­¦æ ¡ç»™é¢†å¯¼äº‰å…‰ã€‚ä¸è¿‡è¿™äº›ç†ç”±åœ¨æ¸…åï¼Œéƒ½æ˜¯ä¸æˆç«‹çš„ã€‚æˆ‘çš„å¤§éƒ¨åˆ†å¤©æ‰åŒå­¦ä»¬ï¼Œéƒ½åœ¨åŒ—ç¾æœ€å¥½çš„å­¦æ ¡è¯»åšå£«ï¼Œè‡³äºç»™å­¦æ ¡å’Œé¢†å¯¼äº‰å…‰ï¼Œæˆ‘æƒ³ä¹Ÿè®¸æˆ‘ä»¬æ‹¿åˆ°äº†ä¸–ç•Œå† å†›ï¼Œå¯èƒ½ä¼šæœ‰æœºä¼šä¸Šä¸€æ¬¡æ¸…åé¦–é¡µå§ï¼Œä¸è¿‡è¿™ä¹Ÿåªæ˜¯æˆ‘çš„çŒœæµ‹â€”â€”æ¯•ç«Ÿæ¸…åä»æ¥æ²¡æœ‰åœ¨ACMæ€»å†³èµ›ä¸Šå¤ºå† è¿‡ã€‚æ¸…åæ²¡æœ‰ä»€ä¹ˆACMé˜Ÿï¼Œæ²¡æœ‰ACMè®­ç»ƒæˆ–è€…é€‰æ‹”ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥–é‡‘æˆ–è€…è¯„ä¼˜åŠ åˆ†ã€‚åœ¨æ¸…åï¼ŒACMä¸è¿‡æ˜¯ä¼—å¤šå­¦ç”Ÿæ´»åŠ¨ä¸­æ™®é€šçš„ä¸€é¡¹ã€‚æˆ‘ä»¬è¿™äº›è€äººæœ‰ä¸€ä¸ªè€ç¬‘è¯ï¼šâ€œå¦‚ä½•åœ¨å¼€å¹•å¼è¿…é€Ÿè¯†åˆ«å‡ºæ¸…åçš„å­¦ç”Ÿï¼Ÿåœ¨é‚£é‡Œåšä½œä¸šçš„ï¼â€åœ¨å¾ˆå¤šå­¦æ ¡ï¼Œä¹Ÿè®¸æœ‰å¾ˆå¤šACMé˜Ÿçš„é»‘è¯ï¼Œä¼ ç»Ÿï¼Œæ•…äº‹ï¼›è€Œæ¸…åä¹Ÿæœ‰ä»–è‡ªå·±çš„æ•…äº‹ï¼Œè¿™äº›æ•…äº‹å¯èƒ½æœ€ç‰¹åˆ«ä¹Ÿæœ€æ™®é€šã€‚ç‰¹åˆ«åœ¨äºï¼Œæ¸…åä¹Ÿæœ‰ä¸ä¼—ä¸åŒçš„æ•…äº‹ï¼Œä¸è¿‡è¿™äº›æ•…äº‹å‡ ä¹æ²¡æœ‰å•çº¯å…³äºACMçš„ï¼šæ¯”å¦‚é¬²èçš„æ•…äº‹ï¼ˆæ¸…åçš„ä¸€æ®µä¼ è¯´ï¼Œè®¡ç®—æœºç³»å†å²æœ€é«˜GPAï¼ŒIOIé‡‘ç‰Œï¼ŒACMæ€»å†³èµ›äºšå†›ï¼Œæ™®æ—æ–¯é¡¿å¤§å­¦åšå£«ï¼‰ï¼Œå‘¨æºçš„æ•…äº‹ï¼Œæˆ–è€…æ¥¼å¤©æˆçš„æ•…äº‹ï¼›æ™®é€šåœ¨äºï¼Œè¿™äº›æ•…äº‹å¹¶æ²¡æœ‰ä¸€ä¸ªæ˜ç¡®çš„æ ‡ç­¾ï¼ŒACMæ¯”èµ›åªæ˜¯è¿™äº›æ•…äº‹é‡Œé¢ï¼Œå¾ˆå°å¾ˆå°çš„ä¸€éƒ¨åˆ†ã€‚å¤§å®¶æ˜¯æ¸…åäººï¼Œè¦åšæœ€å¥½çš„å­¦ç”Ÿï¼Œè¦å‘è®ºæ–‡ï¼Œè¦æå¥½è¯¾ä¸šï¼Œè¦è·‘3000ç±³ï¼Œåªæ˜¯å¤§å®¶éƒ½å–œæ¬¢ACMï¼Œè§‰å¾—å¥¹æœ‰è¶£ã€‚ </p><p>â€œæœ‰è¶£â€äºŒå­—ï¼Œè¯´æ¥è½»å·§ï¼Œå¯æ˜¯ï¼Œæˆ‘ä¼¼ä¹ä¹Ÿæ‰¾ä¸å‡ºæ›´å¥½çš„è¯æ±‡æ¥è¯„ä»·ACMè¿™é¡¹æ´»åŠ¨äº†ã€‚è¯»åšå£«äº†ä¹‹åå¾ˆå¤šäººåŠæˆ‘è¯´ï¼šâ€œä½ éƒ½è¯»åšå£«äº†è¿˜ç©è¿™äº›å¹´è½»äººçš„æ´»åŠ¨ã€‚â€æˆ‘åŒæ„è¿™ä¸ªè§‚ç‚¹ã€‚ä¸è¿‡å› ä¸ºæˆ‘è¿˜æ˜¯è§‰å¾—å‚åŠ ACMå¾ˆæœ‰è¶£ï¼Œæ‰€ä»¥æˆ‘åˆå›ºæ‰§çš„æ¥ç€å‚åŠ äº†ã€‚äºæ˜¯ä½œä¸ºä¸€ä¸ªè€åšå£«ï¼Œæˆ‘åˆå¾—ç»§ç»­å¿½æ‚ ç€åŒä¸ºåšå£«çš„é˜Ÿå‹ä»¬åœ¨å‘¨æœ«æŠ½å‡ºæ—¶é—´æ¥è®­ç»ƒï¼Œç»§ç»­åœ¨é—²ç€æ— èŠçš„æ—¶å€™ä½œç€æˆ‘è‡ªå·±å…³äºâ€œèµ¢â€çš„æ˜¥ç§‹å¤§æ¢¦ã€‚ </p><p>ä¸€ä¸ªå…³äºé’æ˜¥ï¼Œçƒ­æƒ…å’Œå‹è°Šçš„æ•…äº‹ </p><p>å‚åŠ ACM ICPCç«èµ›ï¼Œç»™äº†æˆ‘å¤ªå¤šå¤ªå¤šç¾å¥½çš„å›å¿†ï¼Œè®©æˆ‘æ”¶è·äº†å¤ªå¤šå¤ªå¤šå®è´µçš„å‹è°Šã€‚æ¯å½“å›å¿†ç¿»æ¶Œï¼Œæ€»ä¼šæ„Ÿæ…¨å½“æ—¶çš„çº¯ç²¹ï¼Œçƒ­æƒ…å’ŒçœŸæŒšâ€”â€”è‡ªå·±ä¹Ÿç®—ï¼Œæœ‰ä¸€æ®µå¥‹æ–—è¿‡çš„é’æ˜¥ã€‚ </p><p>åˆä¸‰çš„æš‘å‡å’Œä¸¤ä¸ªå¸ˆå…„ï¼Œå´æ²›å‡¡ï¼ˆç›®å‰åœ¨çº½çº¦å¤§å­¦è¯»ç»æµåšå£«ï¼‰å’Œé‡‘æ–Œåœ¨ä¸Šæµ·äº¤å¤§ACMé˜Ÿè®­ç»ƒäº†ä¸€ä¸ªæœˆã€‚æœŸé—´æ¯å¤©ä¸Šåˆåšä¸€å¥—çœŸé¢˜ï¼Œä¸‹åˆä¿®è®¢å’Œè®¨è®ºã€‚è¿˜è®°å¾—é‚£æ—¶å€™é‡‘æ–Œç¬¬ä¸€æ¬¡æ´—å†·æ°´æ¾¡çš„æ—¶å€™çˆ†å‘å‡ºçš„æƒŠäººæƒ¨å«ï¼›è®°å¾—æœ€åä¸€éƒ¨å“ˆåˆ©æ³¢ç‰¹é—®ä¸–ï¼Œæˆ‘æ™šä¸Šæ‹½ç€æ²›å‡¡ç»™æˆ‘æ¶è¡¥å“ˆåˆ©æ³¢ç‰¹ï¼›è®°å¾—ç¬¬ä¸€æ¬¡çŸ¥é“äº¤å¤§çš„BBSå«æœªåï¼Œæ¸…åçš„BBSå«æ°´æœ¨ï¼›è®°å¾—ç¬¬ä¸€æ¬¡çŸ¥é“äº†å½“æ—¶è¿˜å¾—å®¡æ ¸å¤§å­¦ç”Ÿèº«ä»½çš„äººäººç½‘ï¼Œå½“æ—¶å´å“æ°è¿˜ç”¨äººäººç½‘çš„bugç©ä¸Šé¢ä¹°è½¦ä½çš„ç½‘é¡µæ¸¸æˆï¼›è®°å¾—ç¬¬ä¸€æ¬¡å»é—®äº¤å¤§å¸ˆå§ä¸€é“é¢˜æ€ä¹ˆåšçš„æ—¶å€™çº¢ç€è„¸è¸Œèº‡äº†å¥½åŠå¤©ï¼›è®°å¾—å½“æ—¶æ›´è€çš„å¸ˆå…„ä»¬éª‘è½¦è½½ç€æˆ‘ä»¬å»åƒç›–æµ‡é¥­ï¼›æ›´è®°å¾—ç¬¬ä¸€æ¬¡ä¸‰äººç»„é˜Ÿèµ¢äº†äº¤å¤§ä¸€é˜Ÿæ—¶å€™çš„å…´å¥‹å’Œæ¿€åŠ¨ï¼›ä¹Ÿè®°å¾—ç¬¬ä¸€æ¬¡è§åˆ°äº¤å¤§ACMç­çš„ä¿å‹‡è€å¸ˆæ—¶å€™çš„èƒ†æ€¯å’Œå®³ç¾â€¦â€¦é‚£æ®µæ—¶å…‰æ˜¯æˆ‘æ•´ä¸ªä¸­å­¦ç”Ÿæ¶¯ä¸­æœ€å¥½çš„æ—¶å…‰ï¼Œæ¯å¤©éƒ½å¾ˆå¿«ä¹ï¼Œæ¯å¤©éƒ½æœ‰è¿›æ­¥ã€‚æˆ‘ä¸å¾—ä¸æ‰¿è®¤ï¼Œä»é‚£æ—¶å€™å¼€å§‹ï¼Œäº¤å¤§æˆäº†æˆ‘é«˜ä¸­æ—¶æœŸæœ€å‘å¾€çš„åœ°æ–¹ï¼šä¸ºäº†å»äº¤å¤§è€Œä¸å»æ¸…åï¼Œæˆ‘è¿˜åœ¨é«˜ä¸‰çš„æ—¶å€™å’Œæˆ‘çš„å¦ˆå¦ˆè¿›è¡Œäº†æ¥è¿‘ä¸‰ä¸ªæœˆçš„æ¿€çƒˆæ–—äº‰ã€‚å¥½å¤šå¥½å¤šå¹´è¿‡å»äº†ï¼Œå½“å¹´çš„ACMé˜Ÿå¸ˆå…„å¸ˆå§ä»¬ï¼Œæ—©å°±å·¥ä½œï¼Œæˆ–è€…å¿«åšå£«æ¯•ä¸šäº†ï¼›ä¸‰ä¸ªååœ¨ååº§çš„å°å±å­©ï¼Œç°åœ¨ä¸¤ä¸ªåœ¨è¯»åšå£«ï¼Œä¸€ä¸ªæ‹¿äº†ä¸–ç•Œå† å†›ï¼Œå»äº†è°·æ­Œï¼›ä¿å‹‡è€å¸ˆè€äº†å¾ˆå¤šå²ã€‚æ®æˆ‘å¾ˆå¤šäº¤å¤§çš„åŒå­¦è¯´ï¼Œä¿å‹‡è€å¸ˆå¾ˆä¸¥å‰ã€‚ä¹Ÿè®¸æ­£å› ä¸ºæˆ‘æ²¡çœŸæ­£åšè¿‡ä¿è€å¸ˆçš„å­¦ç”Ÿï¼Œæ‰€ä»¥èµ·ç åœ¨æˆ‘è¿™é‡Œï¼Œä¿è€å¸ˆç»™æˆ‘çš„å°è±¡æ˜¯ä¸€ä¸ªæ¸©å’Œè´Ÿè´£çš„å¯¼å¸ˆï¼Œæ¯æ¬¡æˆ‘å‚åŠ æ¯”èµ›è§åˆ°ä¿è€å¸ˆï¼Œéƒ½ä¼šç‰¹åˆ«äº²åˆ‡çš„æ‰“æ‹›å‘¼ï¼Œäº¤è°ˆã€‚ä¹Ÿè®¸æˆ‘åº”è¯¥å¯¹æˆ‘å»äº†æ¸…åæ„Ÿåˆ°åº†å¹¸å§ï¼Œå› ä¸ºï¼Œä»æ­¤äº¤å¤§åœ¨æˆ‘å¿ƒé‡Œå°±åªç•™ä¸‹äº†å¥¹æœ€ç¾å¥½çš„æ ·å­ã€‚ </p><p>å¤§å­¦åœ¨æ¸…åç¢°åˆ°äº†æ¯›æ°æ˜å’Œè«æ¶›ä¸¤ä¸ªæ­»å…šï¼Œä¸€èµ·åƒå¤–å–ï¼Œä¸€èµ·äº’é»‘ï¼Œä¸€èµ·æ—…æ¸¸ã€‚é‚£æ—¶å€™æˆ‘è‡ªå°åå‹¤é˜Ÿé•¿ï¼ˆå…¶å®æˆ‘åœ¨æ¯ä¸€ä¸ªé˜Ÿä¼é‡Œçš„è§’è‰²éƒ½æ˜¯è¿™ä¸ªï¼‰ï¼Œè´Ÿè´£ç ”ç©¶å»ä»€ä¹ˆèµ›åŒºï¼Œæ¯æ¬¡åè°ƒå¤§å®¶ä»€ä¹ˆæ—¶å€™è®­ç»ƒï¼Œè®­ç»ƒä»€ä¹ˆé¢˜ï¼Œè¿˜è´Ÿè´£ä»£è´­ç«è½¦ç¥¨é£æœºç¥¨ä»¥åŠå’Œæ•™ç»ƒæ²Ÿé€šï¼Œå¹¶ä¸”ä¹æ­¤ä¸ç–²ã€‚ä»–ä¿©ä¹Ÿå¾…æˆ‘ä¸è–„ï¼Œå› ä¸ºæ¯›æ°æ˜ï¼Œæˆ‘åœ¨å¤§å­¦é‡Œå°‘èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œåˆå› ä¸ºè«æ¶›ï¼Œè®©æˆ‘å¤šäº†ä¸€ä¸ªç‰¹åˆ«é“æ†çš„åŸºå‹ã€‚ </p><p>2011å¹´ç¦å·èµ›åŒºï¼Œåªè¦å¦ä¸€æ”¯æ¸…åçš„é˜Ÿä¼ä¸èƒ½åœ¨30åˆ†é’Ÿå†…é€šè¿‡æœ€åä¸€é¢˜ï¼Œæˆ‘å’Œæ¯›æ°æ˜å°±èƒ½æ™‹çº§æ€»å†³èµ›ã€‚åªæ˜¯å¾ˆå¯æƒœï¼Œ20åˆ†é’Ÿåï¼Œé‚£æ”¯é˜Ÿä¼å‰ï¼Œå‡èµ·äº†å¯¹åº”é¢œè‰²çš„æ°”çƒã€‚æˆ‘è¿˜æ¸…æ¥šçš„è®°å¾—ï¼Œåœ¨å›ç¨‹çš„é£æœºä¸Šï¼Œå¿ƒæƒ…éƒé—·çš„æˆ‘å’Œå¦é—¨èˆªç©ºçš„ç©ºä¹˜åµäº†èµ·æ¥ã€‚æ¯›æ°æ˜ä¸åœçš„å®‰æ…°æˆ‘ä¸ç”¨è·Ÿäººä¸€èˆ¬è§è¯†ã€‚æˆ‘åæ¥åˆå»è¿‡ä¸å°‘æ¬¡ç¦å»ºï¼Œä¸è¿‡ä¹Ÿå†æ²¡åšè¿‡å¦é—¨èˆªç©ºçš„é£æœºã€‚ </p><p>2012å¹´æˆ‘å’Œæ¯›æ°æ˜è¿˜æœ‰è«æ¶›ç»„é˜Ÿã€‚é‚£å¹´çš„é•¿æ˜¥èµ›åŒºï¼Œæ¯”èµ›å‰æˆ‘ä»¬ä¸‰ä¸ªåƒç‰›æ’åˆ®å‡ºäº†ä¸€å¼ å¥–åŠ±2å…ƒé’±çš„å‘ç¥¨ï¼Œè¦çŸ¥é“å½“æ—¶æˆ‘ä»¬å·²ç»æ‹¿äº†6æ¬¡äºšå†›äº†ã€‚è«æ¶›è§‰å¾—2å…ƒé’±å¤ªæ™¦æ°”ï¼Œè¿˜åˆ»æ„ç¬¬äºŒå¤©æ—©ä¸Šç»™æœåŠ¡å‘˜é€å‡º1å…ƒçš„å°è´¹å¸Œæœ›è®¨ä¸ªå‰åˆ©ã€‚ç»“æœèµ›åœºä¸Šï¼Œæˆ‘ä»¬ç«™åœ¨ä¸­å±±å¤§å­¦çš„èº«åï¼Œè¿‘è·ç¦»ç›®ç¹äº†ä»–ä»¬åœ¨æ¯”èµ›ç»“æŸå5åˆ†é’Ÿå¾—åˆ°ç³»ç»Ÿè¿”å›çš„ä¸€ä¸ªYESï¼Œå¹¶ä»¥ç½šæ—¶ä¼˜åŠ¿å°†æˆ‘ä»¬åè¶…å¹¶å¤ºå† çš„æ¬£å–œè‹¥ç‹‚ã€‚æ›´ç‹—è¡€çš„æ˜¯ï¼Œåœ¨æ¥ä¸‹æ¥çš„ç”±ä¸­å±±å¤§å­¦è´Ÿè´£å‘½é¢˜çš„å¤©æ´¥èµ›åŒºï¼Œæœ‰ä¸€é“é¢˜ç›®å’Œä¹‹å‰åœ¨é•¿æ˜¥èµ›åŒºä¸­å±±åè¶…æˆ‘ä»¬çš„é‚£é¢˜ä¸€æ¨¡ä¸€æ ·ã€‚äºæ˜¯ï¼Œåœ¨ä¸­å¤§çš„å¥½å¿ƒä¿é€ä¸‹ï¼Œæˆ‘ä»¬æ€»ç®—æ‹¿åˆ°äº†å† å†›ã€‚ </p><p>2013å¹´åœ£å½¼å¾—å ¡çš„æ€»å†³èµ›ï¼Œä»æ¥ä¸å–å’–å•¡çš„æˆ‘åœ¨èµ›å‰å–äº†å’–å•¡ï¼Œä¸è¿‡ä¼¼ä¹å’–å•¡å¯¹äºç´§å¼ æ²¡æœ‰ä»€ä¹ˆå¥½çš„ç–—æ•ˆã€‚è™½ç„¶è¿™ä¹ˆå¤šå¹´æ¥æˆ‘æ¯é€¢ACMæ¯”èµ›éƒ½ä¼šç´§å¼ ï¼Œå¿ƒè·³åŠ é€Ÿï¼Œè¡€å‹å‡é«˜ï¼Œä¸è¿‡é‚£ä¸€å¤©ä¼¼ä¹å¤§å®¶éƒ½ç´§å¼ çš„ç‰¹åˆ«ä¸¥é‡ï¼šåœºä¸Šä¸‰ä¸ªäººå¯¹ç€ä¸¤é“é¢˜çœ‹äº†1ä¸ªå¤šå°æ—¶å±…ç„¶éƒ½ä¸ä¼šåšï¼Œè€Œä¸€å‡ºèµ›åœºå°±éƒ½ä¼šäº†ã€‚å›å¿†åˆ°å½“æ—¶çœ‹ç»“æœå…¬å¸ƒæ—¶è‡ªå·±çš„ç„¦è™‘å’Œä¸å®‰ï¼Œæˆ‘è§‰å¾—ä»¥åä¼°è®¡ä¹Ÿä¸ä¼šæœ‰æœºä¼šèƒ½å¤Ÿè®©è‡ªå·±çš„å¿ƒå¾‹æ¯”é‚£ä¸ªæ—¶å€™æ›´å¿«ä¸€ç‚¹äº†ã€‚è®°å¾—æ¯”èµ›å…¥åœºçš„æ—¶å€™æˆ‘å’Œæˆ‘çš„ä¸€ä¸ªä¿„ç½—æ–¯æœ‹å‹ï¼Œå½“æ—¶è«æ–¯ç§‘å¤§å­¦çš„é€‰æ‰‹Sergeyæ¡äº†ä¸€ä¸ªæ‰‹ï¼Œç„¶åé‚£ä¸€å¹´è«æ–¯ç§‘å¤§å­¦å’Œæˆ‘ä»¬éƒ½æ‹¿äº†é“œç‰Œã€‚æ¯›æ°æ˜å’Œè«æ¶›éƒ½è¯´ï¼Œä¼°è®¡æ˜¯æˆ‘å¸æ¥äº†è«æ–¯ç§‘å¤§å­¦çš„ä»™æ°”ï¼ŒæŠŠäººå®¶æ‹‰æˆäº†é“œç‰Œï¼ŒæŠŠæˆ‘ä»¬ä»èƒ¸ç‰Œï¼Œæåˆ°äº†å¥–ç‰Œã€‚è¿™äº‹æˆ‘åæ¥ä¸€ç›´æ²¡å¥½æ„æ€å’ŒSergeyè¯´ï¼Œå¸Œæœ›ä»–ä¸ä¼šåœ¨å¿ƒé‡Œéª‚æˆ‘ã€‚ </p><p>2013å¹´ä¸‹åŠå¹´ï¼Œæ¯›æ°æ˜å»äº†æ™®æ—æ–¯é¡¿è¯»åšå£«ï¼Œæˆ‘å’Œè«æ¶›æ‹‰æ¥äº†é™ˆé«˜è¿œï¼ˆTopcoder Targetï¼ŒUSCç¡•å£«åœ¨è¯»ï¼‰ã€‚æˆ‘ä»¬ä¸‰ä¸ªå¤§å››ç‹—ç»„äº†ä¸ªé˜Ÿï¼Œå”¤ä½œâ€œè€æµæ°“â€ã€‚ä½œä¸ºæµæ°“å¤´å­ï¼Œæˆ‘æ„£æ˜¯è‡ªå·±è”ç³»ï¼ŒåŠç†æ‰‹ç»­ï¼Œç„¶åå¿½æ‚ å¦å¤–ä¸¤ä¸ªè€å®¶ä¼™ä»¬æå‡ºäº†ä¹‹å‰çš„æ¯”èµ›çš„å¥–é‡‘ä¹°äº†é£å¾€æ—¥æœ¬çš„æœºç¥¨ï¼Œä½¿æˆ‘ä»¬é˜Ÿæˆä¸ºäº†è¿‘10å¹´æ¥æ¸…åç¬¬ä¸€æ”¯å‚åŠ æµ·å¤–ACMèµ›åŒºçš„é˜Ÿä¼ï¼ˆæ¸…åç”±äºç»è´¹ä¸å¤Ÿï¼ŒåŠ ä¸Šä¸€äº›å†å²åŸå› ï¼Œæ˜¯ä¸å‚åŠ æµ·å¤–èµ›åŒºçš„ï¼‰ã€‚æ¯”èµ›æ¯”çš„å¾ˆç³Ÿï¼Œä¸è¿‡ä¸‰ä¸ªè€å®¶ä¼™åœ¨å¯Œå£«å±±ä¸‹æ³¡æ¸©æ³‰ï¼Œåœ¨ä¸œäº¬ç±³å…¶æ—é¤å…åƒå¯¿å¸ï¼Œçˆ¬ä¸œäº¬å¡”ä¹Ÿæ˜¯æŒºå€¼å¾—æ€€å¿µçš„ã€‚è¿˜è®°å¾—å½“æ—¶è«æ¶›ç—´è¿·æŸæ—¥å‰§ï¼ˆå…·ä½“åŸå› æˆ‘åæ¥é»‘äº†ä»–å¥½ä¹…ï¼‰ï¼Œæˆ‘ä»¬è¢«å¿½æ‚ ç€æ•´ä¸ªä¸€å¤©ä¸œäº¬çš„è¡Œç¨‹éƒ½æŒ‰ç…§å‰§é‡Œç”·ä¸»å’Œå¥³ä¸»çš„çº¦ä¼šè·¯çº¿è¿›è¡Œã€‚å‚æ™šï¼Œåœ¨ä¸œäº¬çš„å°åœºï¼Œè«æ¶›æœ›ç€è¿œå¤„çš„å½©è™¹æ¡¥ï¼Œæå‡ºäº†ä»–çš„iTouchå’Œæˆ‘è¯´ï¼šâ€œä½ çœ‹ï¼Œå‰§é‡Œå°±æ˜¯è¿™ä¸ªä½ç½®ï¼Œè¿™ä¸ªè§’åº¦ï¼Œè¿™ä¸ªæ—¶é—´ï¼â€é‚£è¡æ¼¾çš„çœ¼ç¥ï¼Œä¸€å®šä¼šæˆä¸ºæœªæ¥å¾ˆå¤šå¾ˆå¤šå¹´ï¼Œä¸€ä¸ªå…³äºè«æ¶›çš„ç»å…¸æ§½ç‚¹ã€‚ </p><p>2014å¹´ï¼Œæˆ‘æ¥åˆ°äº†åŠ å·ä¼¯å…‹åˆ©å¤§å­¦è¯»åšå£«ã€‚å¾ˆå¹¸è¿ï¼Œæˆ‘é‡åˆ°äº†ä¸¤ä¸ªä¹Ÿå†è¯»åšå£«çš„ä¸­å›½é˜Ÿå‹ï¼Œå§œç¢§é‡ï¼ˆNOI2009é‡‘ç‰Œï¼Œåœ¨æ¸…åACMåŒºåŸŸèµ›å’Œè«æ¶›ä¸€èµ·æ‹¿è¿‡3æ¬¡äºšå†›ï¼Œä»£è¡¨ä¼¯å…‹åˆ©å‚åŠ äº†2014å¹´ACMæ€»å†³èµ›ï¼‰å’Œèµ–é™†èˆªï¼ˆæ•°å­¦åšå£«ï¼ŒIOI2010é‡‘ç‰Œï¼Œä»£è¡¨åŒ—å¤§å‚åŠ äº†2011å¹´ACMæ€»å†³èµ›ï¼‰ï¼Œç»„æˆäº†ä¼¯å…‹åˆ©ä¸­å›½é˜Ÿã€‚äºæ˜¯æˆ‘åˆå¼€å§‹äº†æˆ‘åå‹¤éƒ¨é•¿å…¼é˜Ÿå†…ä¸»ç çš„èº«ä»½â€”â€”åæ­£æˆ‘å¯¹è¿™ä¸ªè§’è‰²æ—©å·²é©¾è½»å°±ç†Ÿã€‚æˆ‘ä»¬å¾ˆè½»æ¾çš„æ™‹çº§äº†2015å¹´5æœˆä»½å°†åœ¨æ‘©æ´›å“¥ä¸¾è¡Œçš„ACMæ€»å†³èµ›ã€‚è¿™å¯¹æˆ‘ä»¬ä¸‰ä¸ªäººæ¥è¯´ï¼Œéƒ½æ˜¯ç¬¬äºŒæ¬¡ï¼Œä¹Ÿæ˜¯æœ€åä¸€æ¬¡æ€»å†³èµ›ï¼Œä¹Ÿå°†æ˜¯ç«èµ›ç”Ÿæ¶¯çš„æœ€åä¸€åœºæ¯”èµ›äº†ã€‚æƒ³æƒ³æ—¶é—´è¿‡å¾—çœŸå¿«ï¼Œä»ä¸€ä¸ªå°å­©åˆ°ä¸€ä¸ªåšå£«ï¼Œå…³äºé’æ˜¥çš„æ•…äº‹ï¼Œä¹Ÿç»ˆè¦ç”»ä¸Šå¥å·äº†ã€‚ </p><p>è¿™æ®µé’æ˜¥é‡Œï¼Œæœ‰å¤ªå¤šæœ‰è¶£çš„äº‹ï¼Œæœ‰è¶£çš„äººã€‚å¾ˆå¤šå¾ˆå¤šå¹´ä»¥åï¼Œè¿™äº›è¯´ä¸å®Œã€é“ä¸å°½ï¼Œä¹Ÿéƒ½åŒ–ä¸ºè€å‹ç›¸èšæ—¶çš„è°ƒä¾ƒå’Œç›¸é€¢ä¸€ç¬‘ã€‚æˆ‘è§‰å¾—ï¼Œè¿™ä¹Ÿè®¸å°±æ˜¯ç”Ÿæ´»é‡Œï¼Œæœ€ç¾çš„å–œå‰§ã€‚ </p><p>æœ€åçš„ä¸€äº›è¯ </p><p>è¿™æ˜¯æˆ‘çš„æ•…äº‹ï¼Œæ„Ÿè°¢æˆ‘æœ‰è¿™ä¸ªæœºä¼šèƒ½æŠŠæˆ‘çš„æ•…äº‹å†™ä¸‹æ¥ï¼Œä¹Ÿæ„Ÿè°¢å‰æ¥é˜…è¯»çš„äººã€‚ACMä¸æ˜¯ç”Ÿæ´»çš„å…¨éƒ¨ï¼Œç”šè‡³è¿ä¸€å°éƒ¨åˆ†éƒ½ç®—ä¸ä¸Šâ€”â€”å°±åƒï¼Œå†™å®Œè¿™äº›æ–‡å­—ï¼Œæˆ‘è¿˜å¾—æŠ“ç´§æ—¶é—´ç»§ç»­å‡†å¤‡æˆ‘çš„è®ºæ–‡ï¼Œç»§ç»­æˆ‘çš„ç ”ç©¶å·¥ä½œã€‚ä¹Ÿç¡®å®æ˜¯è¿™æ ·ï¼Œä¸€ä¸ªäººçš„ç”Ÿæ´»åº”è¯¥æ˜¯ä¸°å¯Œçš„ï¼Œå……å®çš„å’Œå¤šå½©çš„ã€‚ç”Ÿæ´»åº”å½“åƒæµ©ç€šçš„å®‡å®™ï¼Œå£®é˜”å´åˆé™è°§ï¼ŒACMä¸è¿‡æ˜¯é‚£ç»šçƒ‚æ˜Ÿè¾°ä¸­çš„ä¸€é¢—ã€‚å®‡å®™ä¸åº”å› ä¸ºå°‘äº†ä¸€é¢—æ˜Ÿè€Œæš—æ·¡ï¼Œä½†æ˜¯å´å¯èƒ½å› ä¸ºå¤šäº†ä¸€é¢—æ˜Ÿè€Œå¤šäº†ä¸€æ®µç’€ç’¨çš„æ–‡æ˜ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»æˆ‘æ¥è§¦ç¨‹åºç«èµ›åˆ°ç°åœ¨åº”è¯¥æœ‰åå¤šå¹´äº†ï¼Œå•è¯´ACMç«èµ›ï¼Œä»ç¬¬ä¸€æ¬¡éæ­£å¼å‚èµ›åˆ°ç°åœ¨ä¹Ÿå·®ä¸å¤šæœ‰7å¹´å¤šçš„æ ·å­ã€‚æœ‰å¤ªå¤šçš„æ•…äº‹ï¼Œæƒ³è¯´çš„è¯ï¼Œå´ä¸€ç›´æ²¡èƒ½æœ‰æœºä¼šå†™ä¸‹æ¥ã€‚ä¸€æ–¹é¢æ˜¯è‡ªå·±å¿™ï¼Œä¸€æ–¹é¢ä¹Ÿæ˜¯è‡ªå·±æ‡’ã€‚æ‰€ä»¥å¾ˆæ„Ÿè°¢èƒ½æœ‰äººâ€œé€¼â€æˆ‘æ¥å†™ç‚¹ä»€ä¹ˆã€‚æƒ³åˆ°ä¼šæœ‰å¾ˆå¤šäººæ¥è¯»æˆ‘å†™çš„æ–‡å­—ï¼Œè‡ªå·±ä¹Ÿè§‰å¾—å¾ˆå¼€å¿ƒã€‚å…¶å®æ¯ä¸ªäººçš„ç”Ÿæ´»éƒ½æ˜¯ä¸€éƒ¨ç”µå½±ï¼Œåªæ˜¯æ²¡æœ‰é‚£ä¹ˆå¤šå¹¸è¿çš„äººæœ‰æœºä¼šå»è¯‰è¯´ã€‚è¿™é‡Œï¼Œä¸”è¯´ä¸‰ä¸ªå°æ•…äº‹ã€‚ &lt;/p&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ACM" scheme="https://liudufu.github.io/categories/%E7%AE%97%E6%B3%95/ACM/"/>
    
    
      <category term="ACM" scheme="https://liudufu.github.io/tags/ACM/"/>
    
      <category term="ç»éªŒ" scheme="https://liudufu.github.io/tags/%E7%BB%8F%E9%AA%8C/"/>
    
  </entry>
  
</feed>
