<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <script type="text/javascript" src="/js/src/dytitle.js"></script>

  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<meta name="google-site-verification" content="DYS4wW8ApxKb0piV2oZl20bMa8kLxtUKxiPM1JT1ZJo" />


  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">
  <script>
    (function(){
        if(''){
            if (prompt('ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½') !== ''){
                alert('ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½');
                history.back();
            }
        }
    })();
  </script>







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />





  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "03760df2"
    });
  daovoice('update');
  </script>














  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="java,å­¦ä¹ ç¬”è®°,Servlet," />





  <link rel="alternate" href="/atom.xml" title="äº‘æ¾ˆã®åšå®¢" type="application/atom+xml" />






<meta name="description" content="java Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚ä½¿ç”¨ Servletï¼Œæ‚¨å¯ä»¥æ”¶é›†æ¥è‡ªç½‘é¡µè¡¨å•çš„ç”¨æˆ·è¾“å…¥ï¼Œå‘ˆç°æ¥è‡ªæ•°æ®åº“æˆ–è€…å…¶ä»–æºçš„è®°å½•ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºç½‘é¡µã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="servletåŸºç¡€">
<meta property="og:url" content="https://liudufu.github.io/Servlet_Basics/index.html">
<meta property="og:site_name" content="äº‘æ¾ˆã®åšå®¢">
<meta property="og:description" content="java Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚ä½¿ç”¨ Servletï¼Œæ‚¨å¯ä»¥æ”¶é›†æ¥è‡ªç½‘é¡µè¡¨å•çš„ç”¨æˆ·è¾“å…¥ï¼Œå‘ˆç°æ¥è‡ªæ•°æ®åº“æˆ–è€…å…¶ä»–æºçš„è®°å½•ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºç½‘é¡µã€‚">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dX9zf1.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dXrmcQ.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dXrEh8.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dXrAtf.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dXre1g.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dXrZ9S.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dX6yCV.png">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2016/01/232111301681549.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dXcFKg.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dX2r4I.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dX2BEd.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dX2wHH.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dX2DUA.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dX2dDe.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dX268P.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/08/31/dX2yCt.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/01/dxHFxg.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/01/dxO6c8.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpxUXt.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpxYpd.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpxt1A.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpxGfH.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpxN6I.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpxw0f.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpx078.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/03/wPao0e.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/03/wPwqQP.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/03/wPro0f.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/06/0UGZTg.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/06/0UNCE8.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/08/007Dl8.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/08/007WYq.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/09/0rsYND.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/10/09/0rsBut.png">
<meta property="article:published_time" content="2020-12-08T13:30:39.000Z">
<meta property="article:modified_time" content="2020-12-08T13:33:03.918Z">
<meta property="article:author" content="äº‘æ¾ˆ">
<meta property="article:tag" content="java">
<meta property="article:tag" content="å­¦ä¹ ç¬”è®°">
<meta property="article:tag" content="Servlet">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2020/08/31/dX9zf1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://liudufu.github.io/Servlet_Basics/"/>





  <title>servletåŸºç¡€ | äº‘æ¾ˆã®åšå®¢</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '5e442439848b85893d4627c44c1d8971', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
	<a href="https://github.com/liudufu" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#FD6C6C; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    
	
	<meta name="google-site-verification" content="DYS4wW8ApxKb0piV2oZl20bMa8kLxtUKxiPM1JT1ZJo" />
	<meta name="baidu-site-verification" content="DPYNeCY4vP" />

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">äº‘æ¾ˆã®åšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ä¸ç»å†é£é›¨ï¼Œæ€èƒ½è§å½©è™¹ï¼</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            å…¬ç›Š404
          </a>
        </li>
      
        
        <li class="menu-item menu-item-top">
          <a href="/top/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-signal"></i> <br />
            
            TopX
          </a>
        </li>
      
        
        <li class="menu-item menu-item-resources">
          <a href="/resources/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            resources
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="æœç´¢..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://liudufu.github.io/Servlet_Basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="äº‘æ¾ˆ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://s1.ax1x.com/2020/07/20/UfbOPJ.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="äº‘æ¾ˆã®åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">servletåŸºç¡€</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-12-08T21:30:39+08:00">
                2020-12-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index">
                    <span itemprop="name">åç«¯</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">å­¦ä¹ ç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          
		  
		  

          
            
          

          
          
             <span id="/Servlet_Basics/" class="leancloud_visitors" data-flag-title="servletåŸºç¡€">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">çƒ­åº¦&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>â„ƒ</span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  31.8k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  141
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p> java Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚ä½¿ç”¨ Servletï¼Œæ‚¨å¯ä»¥æ”¶é›†æ¥è‡ªç½‘é¡µè¡¨å•çš„ç”¨æˆ·è¾“å…¥ï¼Œå‘ˆç°æ¥è‡ªæ•°æ®åº“æˆ–è€…å…¶ä»–æºçš„è®°å½•ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºç½‘é¡µã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="ğŸŒ¸Servlet-ç®€ä»‹"><a href="#ğŸŒ¸Servlet-ç®€ä»‹" class="headerlink" title="ğŸŒ¸Servlet ç®€ä»‹"></a>ğŸŒ¸Servlet ç®€ä»‹</h2><h3 id="ğŸServlet-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸServlet-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸServlet æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸServlet æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>java Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚</p>
<p>ä½¿ç”¨ Servletï¼Œæ‚¨å¯ä»¥æ”¶é›†æ¥è‡ªç½‘é¡µè¡¨å•çš„ç”¨æˆ·è¾“å…¥ï¼Œå‘ˆç°æ¥è‡ªæ•°æ®åº“æˆ–è€…å…¶ä»–æºçš„è®°å½•ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºç½‘é¡µã€‚</p>
<p>Java Servlet é€šå¸¸æƒ…å†µä¸‹ä¸ä½¿ç”¨ CGIï¼ˆCommon Gateway Interfaceï¼Œå…¬å…±ç½‘å…³æ¥å£ï¼‰å®ç°çš„ç¨‹åºå¯ä»¥è¾¾åˆ°å¼‚æ›²åŒå·¥çš„æ•ˆæœã€‚ä½†æ˜¯ç›¸æ¯”äº CGIï¼ŒServlet æœ‰ä»¥ä¸‹å‡ ç‚¹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ€§èƒ½æ˜æ˜¾æ›´å¥½ã€‚</li>
<li>Servlet åœ¨ Web æœåŠ¡å™¨çš„åœ°å€ç©ºé—´å†…æ‰§è¡Œã€‚è¿™æ ·å®ƒå°±æ²¡æœ‰å¿…è¦å†åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹æ¥å¤„ç†æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ã€‚</li>
<li>Servlet æ˜¯ç‹¬ç«‹äºå¹³å°çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç”¨ Java ç¼–å†™çš„ã€‚</li>
<li>æœåŠ¡å™¨ä¸Šçš„ Java å®‰å…¨ç®¡ç†å™¨æ‰§è¡Œäº†ä¸€ç³»åˆ—é™åˆ¶ï¼Œä»¥ä¿æŠ¤æœåŠ¡å™¨è®¡ç®—æœºä¸Šçš„èµ„æºã€‚å› æ­¤ï¼ŒServlet æ˜¯å¯ä¿¡çš„ã€‚</li>
<li>Java ç±»åº“çš„å…¨éƒ¨åŠŸèƒ½å¯¹ Servlet æ¥è¯´éƒ½æ˜¯å¯ç”¨çš„ã€‚å®ƒå¯ä»¥é€šè¿‡ sockets å’Œ RMI æœºåˆ¶ä¸ appletsã€æ•°æ®åº“æˆ–å…¶ä»–è½¯ä»¶è¿›è¡Œäº¤äº’ã€‚</li>
</ul>
<h3 id="ğŸServlet-æ¶æ„"><a href="#ğŸServlet-æ¶æ„" class="headerlink" title="ğŸServlet æ¶æ„"></a>ğŸServlet æ¶æ„</h3><p><a href="https://imgchr.com/i/dX9zf1" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX9zf1.png" alt="dX9zf1.png"></a></p>
<h3 id="ğŸServletåœ¨åšä»€ä¹ˆ"><a href="#ğŸServletåœ¨åšä»€ä¹ˆ" class="headerlink" title="ğŸServletåœ¨åšä»€ä¹ˆ"></a>ğŸServletåœ¨åšä»€ä¹ˆ</h3><ul>
<li>è¯»å–å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‘é€çš„æ˜¾å¼çš„æ•°æ®ã€‚è¿™åŒ…æ‹¬ç½‘é¡µä¸Šçš„ HTML è¡¨å•ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æ˜¯æ¥è‡ª applet æˆ–è‡ªå®šä¹‰çš„ HTTP å®¢æˆ·ç«¯ç¨‹åºçš„è¡¨å•ã€‚</li>
<li>è¯»å–å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‘é€çš„éšå¼çš„ HTTP è¯·æ±‚æ•°æ®ã€‚è¿™åŒ…æ‹¬ cookiesã€åª’ä½“ç±»å‹å’Œæµè§ˆå™¨èƒ½ç†è§£çš„å‹ç¼©æ ¼å¼ç­‰ç­‰ã€‚</li>
<li>å¤„ç†æ•°æ®å¹¶ç”Ÿæˆç»“æœã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦è®¿é—®æ•°æ®åº“ï¼Œæ‰§è¡Œ RMI æˆ– CORBA è°ƒç”¨ï¼Œè°ƒç”¨ Web æœåŠ¡ï¼Œæˆ–è€…ç›´æ¥è®¡ç®—å¾—å‡ºå¯¹åº”çš„å“åº”ã€‚</li>
<li>å‘é€æ˜¾å¼çš„æ•°æ®ï¼ˆå³æ–‡æ¡£ï¼‰åˆ°å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚è¯¥æ–‡æ¡£çš„æ ¼å¼å¯ä»¥æ˜¯å¤šç§å¤šæ ·çš„ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ–‡ä»¶ï¼ˆHTML æˆ– XMLï¼‰ã€äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆGIF å›¾åƒï¼‰ã€Excel ç­‰ã€‚</li>
<li>å‘é€éšå¼çš„ HTTP å“åº”åˆ°å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚è¿™åŒ…æ‹¬å‘Šè¯‰æµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯è¢«è¿”å›çš„æ–‡æ¡£ç±»å‹ï¼ˆä¾‹å¦‚ HTMLï¼‰ï¼Œè®¾ç½® cookies å’Œç¼“å­˜å‚æ•°ï¼Œä»¥åŠå…¶ä»–ç±»ä¼¼çš„ä»»åŠ¡ã€‚</li>
</ul>
<hr>
<h2 id="ğŸŒ¸Servlet-åˆ›å»ºçš„ä¸‰ç§æ–¹å¼"><a href="#ğŸŒ¸Servlet-åˆ›å»ºçš„ä¸‰ç§æ–¹å¼" class="headerlink" title="ğŸŒ¸Servlet åˆ›å»ºçš„ä¸‰ç§æ–¹å¼"></a>ğŸŒ¸Servlet åˆ›å»ºçš„ä¸‰ç§æ–¹å¼</h2><h3 id="ğŸå®ç°-Servlet-æ¥å£"><a href="#ğŸå®ç°-Servlet-æ¥å£" class="headerlink" title="ğŸå®ç° Servlet æ¥å£"></a>ğŸå®ç° Servlet æ¥å£</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Servletçš„ç”Ÿå‘½å‘¨æœŸ:ä»Servletè¢«åˆ›å»ºåˆ°Servletè¢«é”€æ¯çš„è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">//ä¸€æ¬¡åˆ›å»ºï¼Œåˆ°å¤„æœåŠ¡</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªServletåªä¼šæœ‰ä¸€ä¸ªå¯¹è±¡ï¼ŒæœåŠ¡æ‰€æœ‰çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 1.å®ä¾‹åŒ–ï¼ˆä½¿ç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼‰</span></span><br><span class="line"><span class="comment"> * 2.åˆå§‹åŒ–  æ‰§è¡Œinitæ–¹æ³•</span></span><br><span class="line"><span class="comment"> * 3.æœåŠ¡     æ‰§è¡Œserviceæ–¹æ³•</span></span><br><span class="line"><span class="comment"> * 4.é”€æ¯    æ‰§è¡Œdestroyæ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo1</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">//public ServletDemo1(){}</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">//ç”Ÿå‘½å‘¨æœŸæ–¹æ³•:å½“Servletç¬¬ä¸€æ¬¡è¢«åˆ›å»ºå¯¹è±¡æ—¶æ‰§è¡Œè¯¥æ–¹æ³•,è¯¥æ–¹æ³•åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig arg0)</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">                System.out.println(<span class="string">"=======init========="</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿå‘½å‘¨æœŸæ–¹æ³•:å¯¹å®¢æˆ·ç«¯å“åº”çš„æ–¹æ³•,è¯¥æ–¹æ³•ä¼šè¢«æ‰§è¡Œå¤šæ¬¡ï¼Œæ¯æ¬¡è¯·æ±‚è¯¥servletéƒ½ä¼šæ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest arg0, ServletResponse arg1)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        System.out.println(<span class="string">"hehe"</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿå‘½å‘¨æœŸæ–¹æ³•:å½“Servletè¢«é”€æ¯æ—¶æ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"******destroy**********"</span>);</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//å½“åœæ­¢tomcatæ—¶ä¹Ÿå°±é”€æ¯çš„servletã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ğŸç»§æ‰¿-GenericServlet-ç±»"><a href="#ğŸç»§æ‰¿-GenericServlet-ç±»" class="headerlink" title="ğŸç»§æ‰¿ GenericServlet ç±»"></a>ğŸç»§æ‰¿ GenericServlet ç±»</h3><p>è¿™ç§æ–¹æ³•æˆ‘ä»¬æå°‘ç”¨</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo2</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest arg0, ServletResponse arg1)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        System.out.println(<span class="string">"heihei"</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ğŸç»§æ‰¿-HttpServlet-æ–¹æ³•"><a href="#ğŸç»§æ‰¿-HttpServlet-æ–¹æ³•" class="headerlink" title="ğŸç»§æ‰¿ HttpServlet æ–¹æ³•"></a>ğŸç»§æ‰¿ HttpServlet æ–¹æ³•</h3><p><code>ç»å¸¸ç”¨</code></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo3</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        System.out.println(<span class="string">"haha"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        System.out.println(<span class="string">"ee"</span>);</span><br><span class="line">        doGet(req,resp);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸŒ¸HttpServletã€GenericServlet-å’Œ-Servlet-çš„å…³ç³»"><a href="#ğŸŒ¸HttpServletã€GenericServlet-å’Œ-Servlet-çš„å…³ç³»" class="headerlink" title="ğŸŒ¸HttpServletã€GenericServlet å’Œ Servlet çš„å…³ç³»"></a>ğŸŒ¸HttpServletã€GenericServlet å’Œ Servlet çš„å…³ç³»</h2><blockquote>
<p>å¯¹äºä¸€ä¸ª Servlet ç±»ï¼Œæˆ‘ä»¬æ—¥å¸¸æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ç»§æ‰¿è‡ª HttpServlet ç±»ï¼Œæä¾›äº† Http ç›¸å…³çš„æ–¹æ³•ï¼ŒHttpServlet æ‰©å±•äº† GenericServlet ç±»ï¼Œè€Œ GenericServlet ç±»åˆå®ç°äº† Servlet ç±»å’Œ ServletConfig ç±»ã€‚</p>
</blockquote>
<h3 id="ğŸServlet"><a href="#ğŸServlet" class="headerlink" title="ğŸServlet"></a>ğŸServlet</h3><p>Servlet ç±»æä¾›äº†äº”ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œä¸¤ä¸ªæ™®é€šæ–¹æ³•ï¼Œå…³äº Servlet ç±»çš„æ–¹æ³•ï¼Œä¸å†èµ˜è¿°</p>
<h3 id="ğŸGenericServlet"><a href="#ğŸGenericServlet" class="headerlink" title="ğŸGenericServlet"></a>ğŸGenericServlet</h3><p><code>GenericServlet</code> æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ç°äº† Servlet æ¥å£ï¼Œå¹¶ä¸”å¯¹å…¶ä¸­çš„ <code>init()</code> å’Œ <code>destroy()</code> å’Œ <code>service()</code> æä¾›äº†é»˜è®¤å®ç°ã€‚åœ¨ <code>GenericServlet</code> ä¸­ï¼Œä¸»è¦å®Œæˆäº†ä»¥ä¸‹ä»»åŠ¡ï¼š</p>
<ul>
<li>å°† init() ä¸­çš„ ServletConfig èµ‹ç»™ä¸€ä¸ªç±»çº§å˜é‡ï¼Œå¯ä»¥ç”± getServletConfig è·å¾—ï¼›</li>
<li>ä¸º Servlet æ‰€æœ‰æ–¹æ³•æä¾›é»˜è®¤å®ç°ï¼›</li>
<li>å¯ä»¥ç›´æ¥è°ƒç”¨ ServletConfig ä¸­çš„æ–¹æ³•ï¼›</li>
</ul>
<p>åŸºæœ¬çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span>,<span class="title">ServletConfig</span></span>{</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//GenericServleté€šè¿‡å°†ServletConfigèµ‹ç»™ç±»çº§å˜é‡</span></span><br><span class="line">   <span class="keyword">private</span> trServletConfig servletConfig;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.servletConfig=servletConfig;</span><br><span class="line"></span><br><span class="line">      <span class="comment">/*è‡ªå®šä¹‰init()çš„åŸå› æ˜¯ï¼šå¦‚æœå­ç±»è¦åˆå§‹åŒ–å¿…é¡»è¦†ç›–çˆ¶ç±»çš„init() è€Œä½¿å®ƒæ— æ•ˆ è¿™æ ·</span></span><br><span class="line"><span class="comment">       this.servletConfig=servletConfigä¸èµ·ä½œç”¨ è¿™æ ·å°±ä¼šå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ è¿™æ ·å¦‚æœå­ç±»è¦åˆå§‹åŒ–ï¼Œ</span></span><br><span class="line"><span class="comment">       å¯ä»¥ç›´æ¥è¦†ç›–ä¸å¸¦å‚æ•°çš„init()æ–¹æ³• */</span></span><br><span class="line">      <span class="keyword">this</span>.init();</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//è‡ªå®šä¹‰çš„init()æ–¹æ³•ï¼Œå¯ä»¥ç”±å­ç±»è¦†ç›–  </span></span><br><span class="line">   <span class="comment">//init()ä¸æ˜¯ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>{</span><br><span class="line">  </span><br><span class="line">   }</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//å®ç°service()ç©ºæ–¹æ³•ï¼Œå¹¶ä¸”å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œå¼ºåˆ¶å­ç±»å¿…é¡»å®ç°service()æ–¹æ³• </span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest request,ServletResponse response)</span> </span></span><br><span class="line"><span class="function">     <span class="keyword">throws</span> ServletException,java.io.IOException</span>{</span><br><span class="line">   }</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//å®ç°ç©ºçš„destroyæ–¹æ³•</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>{ }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¦‚æœç»§æ‰¿è¿™ä¸ªç±»çš„è¯ï¼Œæˆ‘ä»¬å¿…é¡»é‡å†™ service() æ–¹æ³•æ¥å¯¹å¤„ç†è¯·æ±‚ã€‚</strong></p>
<h3 id="ğŸHttpServlet"><a href="#ğŸHttpServlet" class="headerlink" title="ğŸHttpServlet"></a>ğŸHttpServlet</h3><p>HttpServlet ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒè¿›ä¸€æ­¥ç»§æ‰¿å¹¶å°è£…äº† GenericServletï¼Œä½¿å¾—ä½¿ç”¨æ›´åŠ ç®€å•æ–¹ä¾¿ï¼Œç”±äºæ˜¯æ‰©å±•äº† Http çš„å†…å®¹ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä½¿ç”¨ <code>HttpServletRequest</code> å’Œ <code>HttpServletResponse</code>ï¼Œè¿™ä¸¤ä¸ªç±»åˆ†åˆ«æ˜¯ ServletRequest å’Œ <code>ServletResponse</code> çš„å­ç±»ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServlet</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span></span>{</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//HttpServletä¸­çš„service()</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest httpServletRequest,</span></span></span><br><span class="line"><span class="function"><span class="params">                       HttpServletResponse httpServletResponse)</span></span>{</span><br><span class="line">        <span class="comment">//è¯¥æ–¹æ³•é€šè¿‡httpServletRequest.getMethod()åˆ¤æ–­è¯·æ±‚ç±»å‹è°ƒç”¨doGet() doPost()</span></span><br><span class="line">   }</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//å¿…é¡»å®ç°çˆ¶ç±»çš„service()æ–¹æ³•</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest,ServletResponse servletResponse)</span></span>{</span><br><span class="line">      HttpServletRequest request;</span><br><span class="line">      HttpServletResponse response;</span><br><span class="line">      <span class="keyword">try</span>{</span><br><span class="line">         request=(HttpServletRequest)servletRequest;</span><br><span class="line">         response=(HttpServletResponse)servletResponse;</span><br><span class="line">      }<span class="keyword">catch</span>(ClassCastException){</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> ServletException(<span class="string">"non-http request or response"</span>);</span><br><span class="line">      }</span><br><span class="line">      <span class="comment">//è°ƒç”¨service()æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">this</span>.service(request,response);</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒHttpServlet ä¸­å¯¹åŸå§‹çš„ Servlet ä¸­çš„æ–¹æ³•éƒ½è¿›è¡Œäº†é»˜è®¤çš„æ“ä½œï¼Œä¸éœ€è¦æ˜¾å¼çš„é”€æ¯åˆå§‹åŒ–ä»¥åŠ <code>service()</code>ï¼Œåœ¨ HttpServlet ä¸­ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªæ–°çš„ <code>service()</code> æ–¹æ³•ï¼Œå…¶ä¸­é€šè¿‡ getMethod() æ–¹æ³•åˆ¤æ–­è¯·æ±‚çš„ç±»å‹ï¼Œä»è€Œè°ƒç”¨ <code>doGet()</code> æˆ–è€… <code>doPost()</code> å¤„ç† <code>get,post</code> è¯·æ±‚ï¼Œä½¿ç”¨è€…åªéœ€è¦ç»§æ‰¿ <code>HttpServlet</code>ï¼Œç„¶åé‡å†™ <code>doPost()</code> æˆ–è€… <code>doGet()</code> æ–¹æ³•å¤„ç†è¯·æ±‚å³å¯ã€‚</p>
<p><strong>æˆ‘ä»¬ä¸€èˆ¬éƒ½ä½¿ç”¨ç»§æ‰¿ HttpServlet çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ª servletã€‚</strong></p>
<hr>
<h2 id="ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰"><a href="#ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰" class="headerlink" title="ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰"></a>ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰</h2><p>ä½¿ç”¨ Eclipse æ¥æ­å»º JSP å¼€å‘ç¯å¢ƒï¼Œé¦–å…ˆæˆ‘ä»¬åˆ†åˆ«ä¸‹è½½ä¸€ä¸‹è½¯ä»¶åŒ…</p>
<ul>
<li><strong>Eclipse J2EEï¼š</strong><a href="http://www.eclipse.org/downloads/" target="_blank" rel="noopener">http://www.eclipse.org/downloads/</a></li>
<li><strong>Tomcatï¼š</strong><a href="http://tomcat.apache.org/download-70.cgi" target="_blank" rel="noopener">http://tomcat.apache.org/download-70.cgi</a></li>
</ul>
<h3 id="ğŸTomcat-ä¸‹è½½å®‰è£…"><a href="#ğŸTomcat-ä¸‹è½½å®‰è£…" class="headerlink" title="ğŸTomcat ä¸‹è½½å®‰è£…"></a>ğŸTomcat ä¸‹è½½å®‰è£…</h3><p><a href="https://imgchr.com/i/dXrmcQ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXrmcQ.png" alt="dXrmcQ.png"></a></p>
<p>ä¸‹è½½ä¹‹åï¼Œå°†å‹ç¼©åŒ…è§£å‹åˆ°ç›˜ï¼ˆä½ å¯ä»¥è‡ªå·±é€‰æ‹©ï¼‰ï¼š</p>
<p><a href="https://imgchr.com/i/dXrEh8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXrEh8.png" alt="dXrEh8.png"></a></p>
<p>æ³¨æ„ç›®å½•åä¸èƒ½æœ‰ä¸­æ–‡å’Œç©ºæ ¼ã€‚ç›®å½•ä»‹ç»å¦‚ä¸‹ï¼š</p>
<ul>
<li>binï¼šäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ã€‚é‡Œé¢æœ€å¸¸ç”¨çš„æ–‡ä»¶æ˜¯<strong>startup.bat</strong>ï¼Œå¦‚æœæ˜¯ Linux æˆ– Mac ç³»ç»Ÿå¯åŠ¨æ–‡ä»¶ä¸º <strong>startup.sh</strong>ã€‚</li>
<li>conf:é…ç½®ç›®å½•ã€‚é‡Œé¢æœ€æ ¸å¿ƒçš„æ–‡ä»¶æ˜¯<strong>server.xml</strong>ã€‚å¯ä»¥åœ¨é‡Œé¢æ”¹ç«¯å£å·ç­‰ã€‚é»˜è®¤ç«¯å£å·æ˜¯8080ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤ç«¯å£å·ä¸èƒ½è¢«å…¶ä»–åº”ç”¨ç¨‹åºå ç”¨ã€‚</li>
<li>libï¼šåº“æ–‡ä»¶ã€‚tomcatè¿è¡Œæ—¶éœ€è¦çš„jaråŒ…æ‰€åœ¨çš„ç›®å½•</li>
<li>logsï¼šæ—¥å¿—</li>
<li>tempï¼šä¸´æ—¶äº§ç”Ÿçš„æ–‡ä»¶ï¼Œå³ç¼“å­˜</li>
<li>webappsï¼šwebçš„åº”ç”¨ç¨‹åºã€‚<strong>webåº”ç”¨æ”¾ç½®åˆ°æ­¤ç›®å½•ä¸‹æµè§ˆå™¨å¯ä»¥ç›´æ¥è®¿é—®</strong></li>
<li>workï¼šç¼–è¯‘ä»¥åçš„classæ–‡ä»¶ã€‚</li>
</ul>
<p>æ¥ç€æˆ‘ä»¬å¯ä»¥åŒå‡» startup.bat å¯åŠ¨ Tomcatï¼Œå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼š</p>
<p><a href="https://imgchr.com/i/dXrAtf" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXrAtf.png" alt="dXrAtf.png"></a></p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæœ¬åœ°çš„æœåŠ¡å™¨å°±å·²ç»æ­å»ºèµ·æ¥äº†ã€‚å¦‚æœæƒ³å…³é—­æœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥å…³é—­ä¸Šé¢çš„çª—å£ï¼Œæˆ–è€…åœ¨é‡Œé¢è¾“å…¥Ctrl+Cç¦æ­¢æœåŠ¡ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <strong><a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a></strong>ï¼Œå¦‚æœå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼Œè¡¨ç¤ºtomcatå®‰è£…æˆåŠŸå¹¶ä¸”å¯åŠ¨èµ·æ¥äº†ï¼š</p>
<p><a href="https://imgchr.com/i/dXre1g" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXre1g.png" alt="dXre1g.png"></a></p>
<p>é¦–å…ˆåœ¨apache-tomcat-9.0.37\webapps\ROOTç›®å½•ä¸­æ–°å»ºä¸€ä¸ªjspæ–‡ä»¶ï¼š</p>
<p><a href="https://imgchr.com/i/dXrZ9S" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXrZ9S.png" alt="dXrZ9S.png"></a></p>
<p>test.jsp æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">out.<span class="keyword">print</span>(<span class="string">"äº‘æ¾ˆ : https://liudufu.github.io"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æ¥ç€åœ¨æµè§ˆå™¨ä¸­è®¿é—®åœ°å€ <strong><a href="http://localhost:8080/test.jsp" target="_blank" rel="noopener">http://localhost:8080/test.jsp</a></strong>, è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<p><a href="https://imgchr.com/i/dX6yCV" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX6yCV.png" alt="dX6yCV.png"></a></p>
<h3 id="ğŸTomcat-å’Œ-Eclipse-ç›¸å…³è”"><a href="#ğŸTomcat-å’Œ-Eclipse-ç›¸å…³è”" class="headerlink" title="ğŸTomcat å’Œ Eclipse ç›¸å…³è”"></a>ğŸTomcat å’Œ Eclipse ç›¸å…³è”</h3><p>æ‰“å¼€Java EE ï¼Œé€‰æ‹©èœå•æ Windowsâ€“&gt;preferencesï¼ˆMac ç³»ç»Ÿä¸º Eclipseâ€“&gt;åå¥½è®¾ç½®ï¼‰ï¼Œå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼š</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2016/01/232111301681549.png" alt=""></p>
<p>ä¸Šå›¾ä¸­ï¼Œç‚¹å‡»â€addâ€çš„æ·»åŠ æŒ‰é’®ï¼Œå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼š</p>
<p><a href="https://imgchr.com/i/dXcFKg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dXcFKg.png" alt="dXcFKg.png"></a></p>
<p>ç‚¹å‡» â€œFinishâ€ï¼Œå®Œæˆé…ç½®ã€‚</p>
<h3 id="ğŸåˆ›å»ºå®ä¾‹"><a href="#ğŸåˆ›å»ºå®ä¾‹" class="headerlink" title="ğŸåˆ›å»ºå®ä¾‹"></a>ğŸåˆ›å»ºå®ä¾‹</h3><p>é€‰æ‹© â€œFileâ€“&gt;Newâ€“&gt;Dynamic Web Projectâ€ï¼Œåˆ›å»º TomcatTest é¡¹ç›®ï¼š</p>
<p><a href="https://imgchr.com/i/dX2r4I" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2r4I.png" alt="dX2r4I.png"></a></p>
<p><a href="https://imgchr.com/i/dX2BEd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2BEd.png" alt="dX2BEd.png"></a></p>
<p>å·¥ç¨‹æ–‡ä»¶ç»“æ„ï¼š</p>
<p><a href="https://imgchr.com/i/dX2wHH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2wHH.png" alt="dX2wHH.png"></a></p>
<p>ä¸Šå›¾ä¸­å„ä¸ªç›®å½•è§£æï¼š</p>
<ul>
<li>deployment descriptorï¼šéƒ¨ç½²çš„æè¿°ã€‚</li>
<li>Web App Librariesï¼šè‡ªå·±åŠ çš„åŒ…å¯ä»¥æ”¾åœ¨é‡Œé¢ã€‚</li>
<li>buildï¼šæ”¾å…¥ç¼–è¯‘ä¹‹åçš„æ–‡ä»¶ã€‚</li>
<li>WebContent:æ”¾è¿›å†™å…¥çš„é¡µé¢ã€‚</li>
</ul>
<p>åœ¨WebContentæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªtest.jspæ–‡ä»¶ã€‚åœ¨ä¸‹å›¾ä¸­å¯ä»¥çœ‹åˆ°å®ƒçš„é»˜è®¤ä»£ç ï¼š</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æ¥ç€æˆ‘ä»¬ä¿®æ”¹ä¸‹test.jspæ–‡ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"</span><br><span class="line">    pageEncoding="UTF-8"%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;</span><br><span class="line">&lt;title&gt;äº‘æ¾ˆ&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    out.println("Hello World!");</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>è¿è¡Œè¯¥é¡¹ç›®:</p>
<p><a href="https://imgchr.com/i/dX2DUA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2DUA.png" alt="dX2DUA.png"></a></p>
<p>æµè§ˆå™¨è®¿é—® <code>http://localhost:8080/TomcatTest/test.jsp</code>, å³å¯è¾“å‡ºæ­£å¸¸ç»“æœï¼š</p>
<p><a href="https://imgchr.com/i/dX2dDe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2dDe.png" alt="dX2dDe.png"></a></p>
<h3 id="ğŸServlet-å®ä¾‹åˆ›å»º"><a href="#ğŸServlet-å®ä¾‹åˆ›å»º" class="headerlink" title="ğŸServlet å®ä¾‹åˆ›å»º"></a>ğŸServlet å®ä¾‹åˆ›å»º</h3><p>ä½¿ç”¨ä»¥ä¸Šç¯å¢ƒåˆ›å»º Servlet æ–‡ä»¶ï¼Œé€‰æ‹© â€œFileâ€“&gt;Newâ€“&gt;Servletâ€:</p>
<p><a href="https://imgchr.com/i/dX268P" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX268P.png" alt="dX268P.png"></a></p>
<p>HelloServlet.java ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yunche.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class HelloServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/HelloServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloServlet</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ GBK è®¾ç½®ä¸­æ–‡æ­£å¸¸æ˜¾ç¤º</span></span><br><span class="line">        response.setCharacterEncoding(<span class="string">"GBK"</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">"äº‘æ¾ˆï¼šhttps://liudufu.github.io"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>åˆ›å»º /TomcatTest/WebContent/WEB-INF/web.xml æ–‡ä»¶ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">"2.5"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee   </span></span></span><br><span class="line"><span class="tag"><span class="string">    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">     <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.yunche.test.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/HelloServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ¥ç€é‡å¯ Tomcatï¼Œæµè§ˆå™¨è®¿é—® <code>http://localhost:8080/TomcatTest/HelloServletï¼š</code></p>
<p><a href="https://imgchr.com/i/dX2yCt" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/31/dX2yCt.png" alt="dX2yCt.png"></a></p>
<hr>
<h2 id="ğŸŒ¸Servlet-ç”Ÿå‘½å‘¨æœŸ"><a href="#ğŸŒ¸Servlet-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ğŸŒ¸Servlet ç”Ÿå‘½å‘¨æœŸ"></a>ğŸŒ¸Servlet ç”Ÿå‘½å‘¨æœŸ</h2><p>Servlet ç”Ÿå‘½å‘¨æœŸå¯è¢«å®šä¹‰ä¸ºä»åˆ›å»ºç›´åˆ°æ¯ç­çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯ Servlet éµå¾ªçš„è¿‡ç¨‹ï¼š</p>
<ul>
<li>Servlet é€šè¿‡è°ƒç”¨ <strong>init ()</strong> æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
<li>Servlet è°ƒç”¨ <strong>service()</strong> æ–¹æ³•æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
<li>Servlet é€šè¿‡è°ƒç”¨ <strong>destroy()</strong> æ–¹æ³•ç»ˆæ­¢ï¼ˆç»“æŸï¼‰ã€‚</li>
<li>æœ€åï¼ŒServlet æ˜¯ç”± JVM çš„åƒåœ¾å›æ”¶å™¨è¿›è¡Œåƒåœ¾å›æ”¶çš„ã€‚</li>
</ul>
<p>ç°åœ¨è®©æˆ‘ä»¬è¯¦ç»†è®¨è®ºç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ã€‚</p>
<h3 id="ğŸinit-æ–¹æ³•"><a href="#ğŸinit-æ–¹æ³•" class="headerlink" title="ğŸinit() æ–¹æ³•"></a>ğŸinit() æ–¹æ³•</h3><p>init æ–¹æ³•è¢«è®¾è®¡æˆåªè°ƒç”¨ä¸€æ¬¡ã€‚å®ƒåœ¨ç¬¬ä¸€æ¬¡åˆ›å»º Servlet æ—¶è¢«è°ƒç”¨ï¼Œåœ¨åç»­æ¯æ¬¡ç”¨æˆ·è¯·æ±‚æ—¶ä¸å†è°ƒç”¨ã€‚å› æ­¤ï¼Œå®ƒæ˜¯ç”¨äºä¸€æ¬¡æ€§åˆå§‹åŒ–ï¼Œå°±åƒ Applet çš„ init æ–¹æ³•ä¸€æ ·ã€‚</p>
<p>Servlet åˆ›å»ºäºç”¨æˆ·ç¬¬ä¸€æ¬¡è°ƒç”¨å¯¹åº”äºè¯¥ Servlet çš„ URL æ—¶ï¼Œä½†æ˜¯æ‚¨ä¹Ÿå¯ä»¥æŒ‡å®š Servlet åœ¨æœåŠ¡å™¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶è¢«åŠ è½½ã€‚</p>
<p>å½“ç”¨æˆ·è°ƒç”¨ä¸€ä¸ª Servlet æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª Servlet å®ä¾‹ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œé€‚å½“çš„æ—¶å€™ç§»äº¤ç»™ doGet æˆ– doPost æ–¹æ³•ã€‚init() æ–¹æ³•ç®€å•åœ°åˆ›å»ºæˆ–åŠ è½½ä¸€äº›æ•°æ®ï¼Œè¿™äº›æ•°æ®å°†è¢«ç”¨äº Servlet çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>init æ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–ä»£ç ...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸservice-æ–¹æ³•"><a href="#ğŸservice-æ–¹æ³•" class="headerlink" title="ğŸservice() æ–¹æ³•"></a>ğŸservice() æ–¹æ³•</h3><p>service() æ–¹æ³•æ˜¯æ‰§è¡Œå®é™…ä»»åŠ¡çš„ä¸»è¦æ–¹æ³•ã€‚Servlet å®¹å™¨ï¼ˆå³ Web æœåŠ¡å™¨ï¼‰è°ƒç”¨ service() æ–¹æ³•æ¥å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„è¯·æ±‚ï¼Œå¹¶æŠŠæ ¼å¼åŒ–çš„å“åº”å†™å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>æ¯æ¬¡æœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ª Servlet è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹å¹¶è°ƒç”¨æœåŠ¡ã€‚service() æ–¹æ³•æ£€æŸ¥ HTTP è¯·æ±‚ç±»å‹ï¼ˆGETã€POSTã€PUTã€DELETE ç­‰ï¼‰ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨ doGetã€doPostã€doPutï¼ŒdoDelete ç­‰æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢æ˜¯è¯¥æ–¹æ³•çš„ç‰¹å¾ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public void service(ServletRequest request, </span><br><span class="line">                    ServletResponse response) </span><br><span class="line">      throws ServletException, IOException{</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>service() æ–¹æ³•ç”±å®¹å™¨è°ƒç”¨ï¼Œservice æ–¹æ³•åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨ doGetã€doPostã€doPutã€doDelete ç­‰æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œæ‚¨ä¸ç”¨å¯¹ service() æ–¹æ³•åšä»»ä½•åŠ¨ä½œï¼Œæ‚¨åªéœ€è¦æ ¹æ®æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ç±»å‹æ¥é‡å†™ doGet() æˆ– doPost() å³å¯ã€‚</p>
<p>doGet() å’Œ doPost() æ–¹æ³•æ˜¯æ¯æ¬¡æœåŠ¡è¯·æ±‚ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚ä¸‹é¢æ˜¯è¿™ä¸¤ç§æ–¹æ³•çš„ç‰¹</p>
<h3 id="ğŸdoGet-æ–¹æ³•"><a href="#ğŸdoGet-æ–¹æ³•" class="headerlink" title="ğŸdoGet() æ–¹æ³•"></a>ğŸdoGet() æ–¹æ³•</h3><p>GET è¯·æ±‚æ¥è‡ªäºä¸€ä¸ª URL çš„æ­£å¸¸è¯·æ±‚ï¼Œæˆ–è€…æ¥è‡ªäºä¸€ä¸ªæœªæŒ‡å®š METHOD çš„ HTML è¡¨å•ï¼Œå®ƒç”± doGet() æ–¹æ³•å¤„ç†ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                  HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">    <span class="comment">// Servlet ä»£ç </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸdoPost-æ–¹æ³•"><a href="#ğŸdoPost-æ–¹æ³•" class="headerlink" title="ğŸdoPost() æ–¹æ³•"></a>ğŸdoPost() æ–¹æ³•</h3><p>POST è¯·æ±‚æ¥è‡ªäºä¸€ä¸ªç‰¹åˆ«æŒ‡å®šäº† METHOD ä¸º POST çš„ HTML è¡¨å•ï¼Œå®ƒç”± doPost() æ–¹æ³•å¤„ç†ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                   HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">    <span class="comment">// Servlet ä»£ç </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸdestroy-æ–¹æ³•"><a href="#ğŸdestroy-æ–¹æ³•" class="headerlink" title="ğŸdestroy() æ–¹æ³•"></a>ğŸdestroy() æ–¹æ³•</h3><p>destroy() æ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œåœ¨ Servlet ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è¢«è°ƒç”¨ã€‚destroy() æ–¹æ³•å¯ä»¥è®©æ‚¨çš„ Servlet å…³é—­æ•°æ®åº“è¿æ¥ã€åœæ­¢åå°çº¿ç¨‹ã€æŠŠ Cookie åˆ—è¡¨æˆ–ç‚¹å‡»è®¡æ•°å™¨å†™å…¥åˆ°ç£ç›˜ï¼Œå¹¶æ‰§è¡Œå…¶ä»–ç±»ä¼¼çš„æ¸…ç†æ´»åŠ¨ã€‚</p>
<p>åœ¨è°ƒç”¨ destroy() æ–¹æ³•ä¹‹åï¼Œservlet å¯¹è±¡è¢«æ ‡è®°ä¸ºåƒåœ¾å›æ”¶ã€‚destroy æ–¹æ³•å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="comment">// ç»ˆæ­¢åŒ–ä»£ç ...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸæ¶æ„å›¾"><a href="#ğŸæ¶æ„å›¾" class="headerlink" title="ğŸæ¶æ„å›¾"></a>ğŸæ¶æ„å›¾</h3><p>ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„ Servlet ç”Ÿå‘½å‘¨æœŸæ–¹æ¡ˆã€‚</p>
<ul>
<li>ç¬¬ä¸€ä¸ªåˆ°è¾¾æœåŠ¡å™¨çš„ HTTP è¯·æ±‚è¢«å§”æ´¾åˆ° Servlet å®¹å™¨ã€‚</li>
<li>Servlet å®¹å™¨åœ¨è°ƒç”¨ service() æ–¹æ³•ä¹‹å‰åŠ è½½ Servletã€‚</li>
<li>ç„¶å Servlet å®¹å™¨å¤„ç†ç”±å¤šä¸ªçº¿ç¨‹äº§ç”Ÿçš„å¤šä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå•ä¸€çš„ Servlet å®ä¾‹çš„ service() æ–¹æ³•ã€‚</li>
</ul>
<p><a href="https://imgchr.com/i/dxHFxg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/01/dxHFxg.png" alt="dxHFxg.png"></a></p>
<hr>
<h2 id="ğŸŒ¸Servlet-å®ä¾‹"><a href="#ğŸŒ¸Servlet-å®ä¾‹" class="headerlink" title="ğŸŒ¸Servlet å®ä¾‹"></a>ğŸŒ¸Servlet å®ä¾‹</h2><p>Servlet æ˜¯æœåŠ¡ HTTP è¯·æ±‚å¹¶å®ç° <strong>javax.servlet.Servlet</strong> æ¥å£çš„ Java ç±»ã€‚Web åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜é€šå¸¸ç¼–å†™ Servlet æ¥æ‰©å±• javax.servlet.http.HttpServletï¼Œå¹¶å®ç° Servlet æ¥å£çš„æŠ½è±¡ç±»ä¸“é—¨ç”¨æ¥å¤„ç† HTTP è¯·æ±‚ã€‚</p>
<h3 id="ğŸHello-World-ç¤ºä¾‹ä»£ç "><a href="#ğŸHello-World-ç¤ºä¾‹ä»£ç " class="headerlink" title="ğŸHello World ç¤ºä¾‹ä»£ç "></a>ğŸHello World ç¤ºä¾‹ä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ‰§è¡Œå¿…éœ€çš„åˆå§‹åŒ–</span></span><br><span class="line">      message = <span class="string">"Hello World"</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å®é™…çš„é€»è¾‘æ˜¯åœ¨è¿™é‡Œ</span></span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line">      out.println(<span class="string">"&lt;h1&gt;"</span> + message + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// ä»€ä¹ˆä¹Ÿä¸åš</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ğŸServletéƒ¨ç½²"><a href="#ğŸServletéƒ¨ç½²" class="headerlink" title="ğŸServletéƒ¨ç½²"></a>ğŸServletéƒ¨ç½²</h3><p>WEB-INF/ çš„ <strong>web.xml</strong> æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/HelloWorld<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¯åŠ¨ tomcat æœåŠ¡å™¨ï¼Œæœ€ååœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥ <strong><a href="http://localhost:8080/HelloWorld" target="_blank" rel="noopener">http://localhost:8080/HelloWorld</a></strong>ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸‹é¢çš„ç»“æœï¼š</p>
<p><a href="https://imgchr.com/i/dxO6c8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/01/dxO6c8.png" alt="dxO6c8.png"></a></p>
<h3 id="ğŸåè®°"><a href="#ğŸåè®°" class="headerlink" title="ğŸåè®°"></a>ğŸåè®°</h3><p>destory æ–¹æ³•è¢«è°ƒç”¨åï¼Œservlet è¢«é”€æ¯ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç«‹å³è¢«å›æ”¶ï¼Œå†æ¬¡è¯·æ±‚æ—¶ï¼Œå¹¶æ²¡æœ‰é‡æ–°åˆå§‹åŒ–ã€‚</p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">    message = <span class="string">"Hello World , Nect To Meet You: "</span> + System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"servletåˆå§‹åŒ–â€¦â€¦"</span>);</span><br><span class="line">    <span class="keyword">super</span>.init();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">    response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">    PrintWriter writer = response.getWriter();</span><br><span class="line">    writer.write(<span class="string">"&lt;h1&gt;"</span> + message + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">    destroy();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>{</span><br><span class="line">    System.out.println(<span class="string">"servleté”€æ¯ï¼"</span>);</span><br><span class="line">    <span class="keyword">super</span>.destroy();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ§åˆ¶å°æ‰“å°ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">servletåˆå§‹åŒ–â€¦â€¦</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">2017-7-6 19:48:52 org.apache.catalina.core.StandardContext reload</span><br><span class="line">ä¿¡æ¯: Reloading Context with name [/myServlet] has started</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">2017-7-6 19:48:52 org.apache.catalina.core.StandardContext reload</span><br><span class="line">ä¿¡æ¯: Reloading Context with name [/myServlet] is completed</span><br><span class="line">servletåˆå§‹åŒ–â€¦â€¦</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br><span class="line">servleté”€æ¯ï¼</span><br></pre></td></tr></tbody></table></figure>

<p><strong>servlet æµè§ˆå™¨è®¿é—®è·¯å¾„é…ç½®æœ‰ä¸ªå°é—®é¢˜ï¼š</strong></p>
<p>1ã€java ç±»é‡Œçš„æ³¨è§£ â€”â€” @WebServlet(â€œ/HelloServletâ€) å¯¹åº”æµè§ˆå™¨è·¯å¾„ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/TomcatTest/HelloServlet</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€é…ç½®æ–‡ä»¶ï¼ˆweb.xmlï¼‰é‡Œå¯¹åº”çš„æµè§ˆå™¨è®¿é—®è·¯å¾„ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/TomcatTest/TomcatTest/HelloServlet</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™ä¸¤ç§é…ä¸€ä¸ªå°±å¥½äº†ï¼Œä¸ç„¶è·¯å¾„é‡åçš„è¯åè€Œä¼šè®©tomcatå¯åŠ¨ä¸äº†ã€‚</p>
<p>ä¾‹å¦‚è¿™æ ·å°±å¯åŠ¨ä¸äº†ï¼š</p>
<p>ä¿®æ”¹ web.xml :</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;url-pattern&gt;/HelloServlet&lt;/url-pattern&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>ä¿®æ”¹åï¼Œweb.xml å’Œ java ç±»çš„æ³¨è§£ï¼Œå¯¹åº”è·¯å¾„éƒ½æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/TomcatTest/HelloServlet</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¯¼è‡´</strong></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‘½åçš„ servlet[HelloServlet]å’Œ [com.runoob.test.HelloServlet] éƒ½è¢«æ˜ å°„åˆ° URL æ¨¡å¼ [/ HelloServlet] è¿™æ˜¯ä¸å…è®¸çš„ã€‚</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è§£å†³åŠæ³•ï¼š</strong></p>
<p>å°†<strong>æ³¨è§£å»æ‰</strong>æˆ–è€…<strong>ä¿ç•™æ³¨è§£è¿›å…¥web.xmlå°†æ˜ å°„åˆ é™¤</strong>æ—¢å¯ä»¥ã€‚</p>
<hr>
<h2 id="ğŸŒ¸Servlet-è¡¨å•æ•°æ®"><a href="#ğŸŒ¸Servlet-è¡¨å•æ•°æ®" class="headerlink" title="ğŸŒ¸Servlet è¡¨å•æ•°æ®"></a>ğŸŒ¸Servlet è¡¨å•æ•°æ®</h2><p>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œéœ€è¦ä¼ é€’ä¸€äº›ä¿¡æ¯ï¼Œä»æµè§ˆå™¨åˆ° Web æœåŠ¡å™¨ï¼Œæœ€ç»ˆåˆ°åå°ç¨‹åºã€‚æµè§ˆå™¨ä½¿ç”¨ä¸¤ç§æ–¹æ³•å¯å°†è¿™äº›ä¿¡æ¯ä¼ é€’åˆ° Web æœåŠ¡å™¨ï¼Œåˆ†åˆ«ä¸º GET æ–¹æ³•å’Œ POST æ–¹æ³•ã€‚</p>
<h3 id="ğŸGET-æ–¹æ³•"><a href="#ğŸGET-æ–¹æ³•" class="headerlink" title="ğŸGET æ–¹æ³•"></a>ğŸGET æ–¹æ³•</h3><p>GET æ–¹æ³•å‘é¡µé¢è¯·æ±‚å‘é€å·²ç¼–ç çš„ç”¨æˆ·ä¿¡æ¯ã€‚é¡µé¢å’Œå·²ç¼–ç çš„ä¿¡æ¯ä¸­é—´ç”¨ ? å­—ç¬¦åˆ†éš”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.test.com/hello?key1=value1&amp;key2=value2</span><br></pre></td></tr></tbody></table></figure>

<p>GET æ–¹æ³•æ˜¯é»˜è®¤çš„ä»æµè§ˆå™¨å‘ Web æœåŠ¡å™¨ä¼ é€’ä¿¡æ¯çš„æ–¹æ³•ï¼Œå®ƒä¼šäº§ç”Ÿä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œå‡ºç°åœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­ã€‚å¦‚æœæ‚¨è¦å‘æœåŠ¡å™¨ä¼ é€’çš„æ˜¯å¯†ç æˆ–å…¶ä»–çš„æ•æ„Ÿä¿¡æ¯ï¼Œè¯·ä¸è¦ä½¿ç”¨ GET æ–¹æ³•ã€‚GET æ–¹æ³•æœ‰å¤§å°é™åˆ¶ï¼šè¯·æ±‚å­—ç¬¦ä¸²ä¸­æœ€å¤šåªèƒ½æœ‰ 1024 ä¸ªå­—ç¬¦ã€‚</p>
<p>è¿™äº›ä¿¡æ¯ä½¿ç”¨ QUERY_STRING å¤´ä¼ é€’ï¼Œå¹¶å¯ä»¥é€šè¿‡ QUERY_STRING ç¯å¢ƒå˜é‡è®¿é—®ï¼ŒServlet ä½¿ç”¨ <strong>doGet()</strong> æ–¹æ³•å¤„ç†è¿™ç§ç±»å‹çš„è¯·æ±‚ã€‚</p>
<h3 id="ğŸPOST-æ–¹æ³•"><a href="#ğŸPOST-æ–¹æ³•" class="headerlink" title="ğŸPOST æ–¹æ³•"></a>ğŸPOST æ–¹æ³•</h3><p>å¦ä¸€ä¸ªå‘åå°ç¨‹åºä¼ é€’ä¿¡æ¯çš„æ¯”è¾ƒå¯é çš„æ–¹æ³•æ˜¯ POST æ–¹æ³•ã€‚POST æ–¹æ³•æ‰“åŒ…ä¿¡æ¯çš„æ–¹å¼ä¸ GET æ–¹æ³•åŸºæœ¬ç›¸åŒï¼Œä½†æ˜¯ POST æ–¹æ³•ä¸æ˜¯æŠŠä¿¡æ¯ä½œä¸º URL ä¸­ ? å­—ç¬¦åçš„æ–‡æœ¬å­—ç¬¦ä¸²è¿›è¡Œå‘é€ï¼Œè€Œæ˜¯æŠŠè¿™äº›ä¿¡æ¯ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯ä»¥æ ‡å‡†è¾“å‡ºçš„å½¢å¼ä¼ åˆ°åå°ç¨‹åºï¼Œæ‚¨å¯ä»¥è§£æå’Œä½¿ç”¨è¿™äº›æ ‡å‡†è¾“å‡ºã€‚Servlet ä½¿ç”¨ doPost() æ–¹æ³•å¤„ç†è¿™ç§ç±»å‹çš„è¯·æ±‚ã€‚</p>
<h3 id="ğŸä½¿ç”¨-Servlet-è¯»å–è¡¨å•æ•°æ®"><a href="#ğŸä½¿ç”¨-Servlet-è¯»å–è¡¨å•æ•°æ®" class="headerlink" title="ğŸä½¿ç”¨ Servlet è¯»å–è¡¨å•æ•°æ®"></a>ğŸä½¿ç”¨ Servlet è¯»å–è¡¨å•æ•°æ®</h3><p>Servlet å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¼šæ ¹æ®ä¸åŒçš„æƒ…å†µä½¿ç”¨ä¸åŒçš„æ–¹æ³•è‡ªåŠ¨è§£æï¼š</p>
<ul>
<li><strong>getParameter()ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ request.getParameter() æ–¹æ³•æ¥è·å–è¡¨å•å‚æ•°çš„å€¼ã€‚</li>
<li><strong>getParameterValues()ï¼š</strong>å¦‚æœå‚æ•°å‡ºç°ä¸€æ¬¡ä»¥ä¸Šï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¹¶è¿”å›å¤šä¸ªå€¼ï¼Œä¾‹å¦‚å¤é€‰æ¡†ã€‚</li>
<li><strong>getParameterNames()ï¼š</strong>å¦‚æœæ‚¨æƒ³è¦å¾—åˆ°å½“å‰è¯·æ±‚ä¸­çš„æ‰€æœ‰å‚æ•°çš„å®Œæ•´åˆ—è¡¨ï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•ã€‚</li>
</ul>
<h3 id="ğŸä½¿ç”¨-URL-çš„-GET-æ–¹æ³•å®ä¾‹"><a href="#ğŸä½¿ç”¨-URL-çš„-GET-æ–¹æ³•å®ä¾‹" class="headerlink" title="ğŸä½¿ç”¨ URL çš„ GET æ–¹æ³•å®ä¾‹"></a>ğŸä½¿ç”¨ URL çš„ GET æ–¹æ³•å®ä¾‹</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ URLï¼Œå°†ä½¿ç”¨ GET æ–¹æ³•å‘ HelloForm ç¨‹åºä¼ é€’ä¸¤ä¸ªå€¼ã€‚</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/TomcatTest/HelloForm?name=äº‘æ¾ˆ&amp;url=https://liudufu.github.io</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢æ˜¯å¤„ç† Web æµè§ˆå™¨è¾“å…¥çš„ <strong>HelloForm.java</strong> Servlet ç¨‹åºã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <strong>getParameter()</strong> æ–¹æ³•ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è®¿é—®ä¼ é€’çš„ä¿¡æ¯</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class HelloForm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/HelloForm"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloForm</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloForm</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"ä½¿ç”¨ GET æ–¹æ³•è¯»å–è¡¨å•æ•°æ®"</span>;</span><br><span class="line">        <span class="comment">// å¤„ç†ä¸­æ–‡</span></span><br><span class="line">        String name =<span class="keyword">new</span> String(request.getParameter(<span class="string">"name"</span>).getBytes(<span class="string">"UTF-8"</span>),<span class="string">"UTF-8"</span>);</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;ul&gt;\n"</span> +</span><br><span class="line">            <span class="string">"  &lt;li&gt;&lt;b&gt;ç«™ç‚¹å&lt;/b&gt;ï¼š"</span></span><br><span class="line">            + name + <span class="string">"\n"</span> +</span><br><span class="line">            <span class="string">"  &lt;li&gt;&lt;b&gt;ç½‘å€&lt;/b&gt;ï¼š"</span></span><br><span class="line">            + request.getParameter(<span class="string">"url"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/ul&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åæˆ‘ä»¬åœ¨ <strong>web.xml</strong> æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloForm<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.HelloForm<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloForm<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/HelloForm<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<p>ç°åœ¨åœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥<code>http://localhost:8080/TomcatTest/HelloForm?name=äº‘æ¾ˆ&amp;url=https://liudufu.github.io</code>ï¼Œå¹¶åœ¨è§¦å‘ä¸Šè¿°å‘½ä»¤ä¹‹å‰ç¡®ä¿å·²ç»å¯åŠ¨ Tomcat æœåŠ¡å™¨ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æœï¼š</p>
<p><a href="https://imgchr.com/i/wpxUXt" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxUXt.png" alt="wpxUXt.png"></a></p>
<h3 id="ğŸä½¿ç”¨è¡¨å•çš„-GET-æ–¹æ³•å®ä¾‹"><a href="#ğŸä½¿ç”¨è¡¨å•çš„-GET-æ–¹æ³•å®ä¾‹" class="headerlink" title="ğŸä½¿ç”¨è¡¨å•çš„ GET æ–¹æ³•å®ä¾‹"></a>ğŸä½¿ç”¨è¡¨å•çš„ GET æ–¹æ³•å®ä¾‹</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å®ä¾‹ï¼Œä½¿ç”¨ HTML è¡¨å•å’Œæäº¤æŒ‰é’®ä¼ é€’ä¸¤ä¸ªå€¼ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ç›¸åŒçš„ Servlet HelloForm æ¥å¤„ç†è¾“å…¥ã€‚</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>èœé¸Ÿæ•™ç¨‹(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"HelloForm"</span> <span class="attr">method</span>=<span class="string">"GET"</span>&gt;</span></span><br><span class="line">ç½‘å€åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">ç½‘å€ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"url"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¿å­˜è¿™ä¸ª HTML åˆ° hello.html æ–‡ä»¶ä¸­ï¼Œç›®å½•ç»“æ„åœ¨WebContentä¸‹</p>
<p>å°è¯•è¾“å…¥ç½‘å€åå’Œç½‘å€ï¼Œç„¶åç‚¹å‡»â€æäº¤â€æŒ‰é’®ï¼Œ</p>
<p><a href="https://imgchr.com/i/wpxYpd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxYpd.png" alt="wpxYpd.png"></a></p>
<p><a href="https://imgchr.com/i/wpxt1A" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxt1A.png" alt="wpxt1A.png"></a></p>
<h3 id="ğŸä½¿ç”¨è¡¨å•çš„-POST-æ–¹æ³•å®ä¾‹"><a href="#ğŸä½¿ç”¨è¡¨å•çš„-POST-æ–¹æ³•å®ä¾‹" class="headerlink" title="ğŸä½¿ç”¨è¡¨å•çš„ POST æ–¹æ³•å®ä¾‹"></a>ğŸä½¿ç”¨è¡¨å•çš„ POST æ–¹æ³•å®ä¾‹</h3><p>è®©æˆ‘ä»¬å¯¹ä¸Šé¢çš„ Servlet åšå°å°çš„ä¿®æ”¹ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å¤„ç† GET å’Œ POST æ–¹æ³•ã€‚ä¸‹é¢çš„ <strong>HelloForm.java</strong> Servlet ç¨‹åºä½¿ç”¨ GET å’Œ POST æ–¹æ³•å¤„ç†ç”± Web æµè§ˆå™¨ç»™å‡ºçš„è¾“å…¥ã€‚</p>
<p>æ³¨æ„ï¼šå¦‚æœè¡¨å•æäº¤çš„æ•°æ®ä¸­æœ‰ä¸­æ–‡æ•°æ®åˆ™éœ€è¦è½¬ç ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String name =<span class="keyword">new</span> String(request.getParameter(<span class="string">"name"</span>).getBytes(<span class="string">"ISO8859-1"</span>),<span class="string">"UTF-8"</span>);</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class HelloForm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/HelloForm"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloForm</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloForm</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"ä½¿ç”¨ POST æ–¹æ³•è¯»å–è¡¨å•æ•°æ®"</span>;</span><br><span class="line">        <span class="comment">// å¤„ç†ä¸­æ–‡</span></span><br><span class="line">        String name =<span class="keyword">new</span> String(request.getParameter(<span class="string">"name"</span>).getBytes(<span class="string">"ISO8859-1"</span>),<span class="string">"UTF-8"</span>);</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;ul&gt;\n"</span> +</span><br><span class="line">            <span class="string">"  &lt;li&gt;&lt;b&gt;ç«™ç‚¹å&lt;/b&gt;ï¼š"</span></span><br><span class="line">            + name + <span class="string">"\n"</span> +</span><br><span class="line">            <span class="string">"  &lt;li&gt;&lt;b&gt;ç½‘å€&lt;/b&gt;ï¼š"</span></span><br><span class="line">            + request.getParameter(<span class="string">"url"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/ul&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨ï¼Œç¼–è¯‘éƒ¨ç½²ä¸Šè¿°çš„ Servletï¼Œå¹¶ä½¿ç”¨å¸¦æœ‰ POST æ–¹æ³•çš„ hello.html è¿›è¡Œæµ‹è¯•ï¼Œå¦‚ä¸‹æ‰€ç¤º</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‘æ¾ˆ(liudufu.github.io)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"HelloForm"</span> <span class="attr">method</span>=<span class="string">"GET"</span>&gt;</span></span><br><span class="line">ç½‘å€åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">ç½‘å€ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"url"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>è¡¨å•çš„å®é™…è¾“å‡ºä¸getå›¾ç›¸åŒ</p>
<h3 id="ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ°-Servlet-ç¨‹åº"><a href="#ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ°-Servlet-ç¨‹åº" class="headerlink" title="ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ° Servlet ç¨‹åº"></a>ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ° Servlet ç¨‹åº</h3><p>å½“éœ€è¦é€‰æ‹©ä¸€ä¸ªä»¥ä¸Šçš„é€‰é¡¹æ—¶ï¼Œåˆ™ä½¿ç”¨å¤é€‰æ¡†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª HTML ä»£ç å®ä¾‹ checkbox.htmlï¼Œä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå¤é€‰æ¡†çš„è¡¨å•ã€‚</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‘æ¾ˆ(liudufu.github.io)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"CheckBox"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"runoob"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span> äº‘æ¾ˆ</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"google"</span>  /&gt;</span> Google</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"taobao"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span> æ·˜å®</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"é€‰æ‹©ç«™ç‚¹"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢æ˜¯ CheckBox.java Servlet ç¨‹åºï¼Œå¤„ç† Web æµè§ˆå™¨ç»™å‡ºçš„å¤é€‰æ¡†è¾“å…¥ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class CheckBox</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/CheckBox"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckBox</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"è¯»å–å¤é€‰æ¡†æ•°æ®"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">            out.println(docType +</span><br><span class="line">                <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;ul&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;äº‘æ¾ˆæ ‡è¯†ï¼š&lt;/b&gt;: "</span></span><br><span class="line">                + request.getParameter(<span class="string">"runoob"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;Google æ ‡è¯†ï¼š&lt;/b&gt;: "</span></span><br><span class="line">                + request.getParameter(<span class="string">"google"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;æ·˜å®æ ‡è¯†ï¼š&lt;/b&gt;: "</span></span><br><span class="line">                + request.getParameter(<span class="string">"taobao"</span>) + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/ul&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>è®¾ç½®å¯¹åº”çš„ web.xmlï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CheckBox<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.CheckBox<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CheckBox<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/CheckBox<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢çš„å®ä¾‹å°†æ˜¾ç¤ºä¸‹é¢çš„ç»“æœï¼š</p>
<p><a href="https://imgchr.com/i/wpxGfH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxGfH.png" alt="wpxGfH.png"></a></p>
<p><a href="https://imgchr.com/i/wpxN6I" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxN6I.png" alt="wpxN6I.png"></a></p>
<h3 id="ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°"><a href="#ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°" class="headerlink" title="ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°"></a>ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°</h3><p>ä»¥ä¸‹æ˜¯é€šç”¨çš„å®ä¾‹ï¼Œä½¿ç”¨ HttpServletRequest çš„ <strong>getParameterNames()</strong> æ–¹æ³•è¯»å–æ‰€æœ‰å¯ç”¨çš„è¡¨å•å‚æ•°ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæšä¸¾ï¼Œå…¶ä¸­åŒ…å«æœªæŒ‡å®šé¡ºåºçš„å‚æ•°åã€‚</p>
<p>ä¸€æ—¦æˆ‘ä»¬æœ‰ä¸€ä¸ªæšä¸¾ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ ‡å‡†æ–¹å¼å¾ªç¯æšä¸¾ï¼Œä½¿ç”¨ <em>hasMoreElements()</em> æ–¹æ³•æ¥ç¡®å®šä½•æ—¶åœæ­¢ï¼Œä½¿ç”¨ <em>nextElement()</em> æ–¹æ³•æ¥è·å–æ¯ä¸ªå‚æ•°çš„åç§°ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class ReadParams</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/ReadParams"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadParams</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReadParams</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"è¯»å–æ‰€æœ‰çš„è¡¨å•æ•°æ®"</span>;</span><br><span class="line">        String docType =</span><br><span class="line">            <span class="string">"&lt;!doctype html public \"-//w3c//dtd html 4.0 "</span> +</span><br><span class="line">            <span class="string">"transitional//en\"&gt;\n"</span>;</span><br><span class="line">            out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;meta charset=\"utf-8\"&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;table width=\"100%\" border=\"1\" align=\"center\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;tr bgcolor=\"#949494\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;th&gt;å‚æ•°åç§°&lt;/th&gt;&lt;th&gt;å‚æ•°å€¼&lt;/th&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;/tr&gt;\n"</span>);</span><br><span class="line"></span><br><span class="line">        Enumeration paramNames = request.getParameterNames();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(paramNames.hasMoreElements()) {</span><br><span class="line">            String paramName = (String)paramNames.nextElement();</span><br><span class="line">            out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">            String[] paramValues =</span><br><span class="line">            request.getParameterValues(paramName);</span><br><span class="line">            <span class="comment">// è¯»å–å•ä¸ªå€¼çš„æ•°æ®</span></span><br><span class="line">            <span class="keyword">if</span> (paramValues.length == <span class="number">1</span>) {</span><br><span class="line">                String paramValue = paramValues[<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">if</span> (paramValue.length() == <span class="number">0</span>)</span><br><span class="line">                    out.println(<span class="string">"&lt;td&gt;&lt;i&gt;æ²¡æœ‰å€¼&lt;/i&gt;&lt;/td&gt;"</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    out.println(<span class="string">"&lt;td&gt;"</span> + paramValue + <span class="string">"&lt;/td&gt;"</span>);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">// è¯»å–å¤šä¸ªå€¼çš„æ•°æ®</span></span><br><span class="line">                out.println(<span class="string">"&lt;td&gt;&lt;ul&gt;"</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i &lt; paramValues.length; i++) {</span><br><span class="line">                out.println(<span class="string">"&lt;li&gt;"</span> + paramValues[i]);</span><br><span class="line">            }</span><br><span class="line">                out.println(<span class="string">"&lt;/ul&gt;&lt;/td&gt;"</span>);</span><br><span class="line">            }</span><br><span class="line">            out.print(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line">        out.println(<span class="string">"\n&lt;/table&gt;\n&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨ï¼Œé€šè¿‡ä¸‹é¢çš„è¡¨å•å°è¯•ä¸Šé¢çš„ Servletï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‘æ¾ˆ(liudufu.github.io)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"ReadParams"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"maths"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span> æ•°å­¦</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"physics"</span>  /&gt;</span> ç‰©ç†</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"chemistry"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span> åŒ–å­¦</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"é€‰æ‹©å­¦ç§‘"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>è®¾ç½®ç›¸åº”çš„ web.xml:</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ReadParams<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.ReadParams<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ReadParams<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/ReadParams<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨ä½¿ç”¨ä¸Šé¢çš„è¡¨å•è°ƒç”¨ Servletï¼Œå°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p>
<p><a href="https://imgchr.com/i/wpxw0f" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpxw0f.png" alt="wpxw0f.png"></a><br><a href="https://imgchr.com/i/wpx078" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/02/wpx078.png" alt="wpx078.png"></a></p>
<h2 id="ğŸŒ¸Servlet-å®¢æˆ·ç«¯-HTTP-è¯·æ±‚"><a href="#ğŸŒ¸Servlet-å®¢æˆ·ç«¯-HTTP-è¯·æ±‚" class="headerlink" title="ğŸŒ¸Servlet å®¢æˆ·ç«¯ HTTP è¯·æ±‚"></a>ğŸŒ¸Servlet å®¢æˆ·ç«¯ HTTP è¯·æ±‚</h2><p>å½“æµè§ˆå™¨è¯·æ±‚ç½‘é¡µæ—¶ï¼Œå®ƒä¼šå‘ Web æœåŠ¡å™¨å‘é€ç‰¹å®šä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¸èƒ½è¢«ç›´æ¥è¯»å–ï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯æ˜¯ä½œä¸º HTTP è¯·æ±‚çš„å¤´çš„ä¸€éƒ¨åˆ†è¿›è¡Œä¼ è¾“çš„ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æ¥è‡ªäºæµè§ˆå™¨ç«¯çš„é‡è¦å¤´ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨ Web ç¼–ç¨‹ä¸­é¢‘ç¹ä½¿ç”¨ï¼š</p>
<table>
<thead>
<tr>
<th align="left">å¤´ä¿¡æ¯</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Accept</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯å¯ä»¥å¤„ç†çš„ MIME ç±»å‹ã€‚å€¼ <strong>image/png</strong> æˆ– <strong>image/jpeg</strong> æ˜¯æœ€å¸¸è§çš„ä¸¤ç§å¯èƒ½å€¼ã€‚</td>
</tr>
<tr>
<td align="left">Accept-Charset</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨å¯ä»¥ç”¨æ¥æ˜¾ç¤ºä¿¡æ¯çš„å­—ç¬¦é›†ã€‚ä¾‹å¦‚ ISO-8859-1ã€‚</td>
</tr>
<tr>
<td align="left">Accept-Encoding</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨çŸ¥é“å¦‚ä½•å¤„ç†çš„ç¼–ç ç±»å‹ã€‚å€¼ <strong>gzip</strong> æˆ– <strong>compress</strong> æ˜¯æœ€å¸¸è§çš„ä¸¤ç§å¯èƒ½å€¼ã€‚</td>
</tr>
<tr>
<td align="left">Accept-Language</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šå®¢æˆ·ç«¯çš„é¦–é€‰è¯­è¨€ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒServlet ä¼šäº§ç”Ÿå¤šç§è¯­è¨€çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œenã€en-usã€ru ç­‰ã€‚</td>
</tr>
<tr>
<td align="left">Authorization</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯ç”¨äºå®¢æˆ·ç«¯åœ¨è®¿é—®å—å¯†ç ä¿æŠ¤çš„ç½‘é¡µæ—¶è¯†åˆ«è‡ªå·±çš„èº«ä»½ã€‚</td>
</tr>
<tr>
<td align="left">Connection</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºå®¢æˆ·ç«¯æ˜¯å¦å¯ä»¥å¤„ç†æŒä¹… HTTP è¿æ¥ã€‚æŒä¹…è¿æ¥å…è®¸å®¢æˆ·ç«¯æˆ–å…¶ä»–æµè§ˆå™¨é€šè¿‡å•ä¸ªè¯·æ±‚æ¥æ£€ç´¢å¤šä¸ªæ–‡ä»¶ã€‚å€¼ <strong>Keep-Alive</strong> æ„å‘³ç€ä½¿ç”¨äº†æŒç»­è¿æ¥ã€‚</td>
</tr>
<tr>
<td align="left">Content-Length</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯åªé€‚ç”¨äº POST è¯·æ±‚ï¼Œå¹¶ç»™å‡º POST æ•°æ®çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td align="left">Cookie</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŠŠä¹‹å‰å‘é€åˆ°æµè§ˆå™¨çš„ cookies è¿”å›åˆ°æœåŠ¡å™¨ã€‚</td>
</tr>
<tr>
<td align="left">Host</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šåŸå§‹çš„ URL ä¸­çš„ä¸»æœºå’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td align="left">If-Modified-Since</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯è¡¨ç¤ºåªæœ‰å½“é¡µé¢åœ¨æŒ‡å®šçš„æ—¥æœŸåå·²æ›´æ”¹æ—¶ï¼Œå®¢æˆ·ç«¯æƒ³è¦çš„é¡µé¢ã€‚å¦‚æœæ²¡æœ‰æ–°çš„ç»“æœå¯ä»¥ä½¿ç”¨ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ª 304 ä»£ç ï¼Œè¡¨ç¤º <strong>Not Modified</strong> å¤´ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td align="left">If-Unmodified-Since</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æ˜¯ If-Modified-Since çš„å¯¹ç«‹é¢ï¼Œå®ƒæŒ‡å®šåªæœ‰å½“æ–‡æ¡£æ—©äºæŒ‡å®šæ—¥æœŸæ—¶ï¼Œæ“ä½œæ‰ä¼šæˆåŠŸã€‚</td>
</tr>
<tr>
<td align="left">Referer</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºæ‰€æŒ‡å‘çš„ Web é¡µçš„ URLã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åœ¨ç½‘é¡µ 1ï¼Œç‚¹å‡»ä¸€ä¸ªé“¾æ¥åˆ°ç½‘é¡µ 2ï¼Œå½“æµè§ˆå™¨è¯·æ±‚ç½‘é¡µ 2 æ—¶ï¼Œç½‘é¡µ 1 çš„ URL å°±ä¼šåŒ…å«åœ¨ Referer å¤´ä¿¡æ¯ä¸­ã€‚</td>
</tr>
<tr>
<td align="left">User-Agent</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯è¯†åˆ«å‘å‡ºè¯·æ±‚çš„æµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯ï¼Œå¹¶å¯ä»¥å‘ä¸åŒç±»å‹çš„æµè§ˆå™¨è¿”å›ä¸åŒçš„å†…å®¹ã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸè¯»å–-HTTP-å¤´çš„æ–¹æ³•"><a href="#ğŸè¯»å–-HTTP-å¤´çš„æ–¹æ³•" class="headerlink" title="ğŸè¯»å– HTTP å¤´çš„æ–¹æ³•"></a>ğŸè¯»å– HTTP å¤´çš„æ–¹æ³•</h3><p>ä¸‹é¢çš„æ–¹æ³•å¯ç”¨åœ¨ Servlet ç¨‹åºä¸­è¯»å– HTTP å¤´ã€‚è¿™äº›æ–¹æ³•é€šè¿‡ <em>HttpServletRequest</em> å¯¹è±¡å¯ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">æ–¹æ³• &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>Cookie[] getCookies()</strong> è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å®¢æˆ·ç«¯å‘é€è¯¥è¯·æ±‚çš„æ‰€æœ‰çš„ Cookie å¯¹è±¡ã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>Enumeration getAttributeNames()</strong> è¿”å›ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«æä¾›ç»™è¯¥è¯·æ±‚å¯ç”¨çš„å±æ€§åç§°ã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>Enumeration getHeaderNames()</strong> è¿”å›ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«åœ¨è¯¥è¯·æ±‚ä¸­åŒ…å«çš„æ‰€æœ‰çš„å¤´åã€‚</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>Enumeration getParameterNames()</strong> è¿”å›ä¸€ä¸ª String å¯¹è±¡çš„æšä¸¾ï¼ŒåŒ…å«åœ¨è¯¥è¯·æ±‚ä¸­åŒ…å«çš„å‚æ•°çš„åç§°ã€‚</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>HttpSession getSession()</strong> è¿”å›ä¸è¯¥è¯·æ±‚å…³è”çš„å½“å‰ session ä¼šè¯ï¼Œæˆ–è€…å¦‚æœè¯·æ±‚æ²¡æœ‰ session ä¼šè¯ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªã€‚</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>HttpSession getSession(boolean create)</strong> è¿”å›ä¸è¯¥è¯·æ±‚å…³è”çš„å½“å‰ HttpSessionï¼Œæˆ–è€…å¦‚æœæ²¡æœ‰å½“å‰ä¼šè¯ï¼Œä¸”åˆ›å»ºæ˜¯çœŸçš„ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°çš„ session ä¼šè¯ã€‚</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>Locale getLocale()</strong> åŸºäº Accept-Language å¤´ï¼Œè¿”å›å®¢æˆ·ç«¯æ¥å—å†…å®¹çš„é¦–é€‰çš„åŒºåŸŸè®¾ç½®ã€‚</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>Object getAttribute(String name)</strong> ä»¥å¯¹è±¡å½¢å¼è¿”å›å·²å‘½åå±æ€§çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šåç§°çš„å±æ€§å­˜åœ¨ï¼Œåˆ™è¿”å› nullã€‚</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>ServletInputStream getInputStream()</strong> ä½¿ç”¨ ServletInputStreamï¼Œä»¥äºŒè¿›åˆ¶æ•°æ®å½¢å¼æ£€ç´¢è¯·æ±‚çš„ä¸»ä½“ã€‚</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>String getAuthType()</strong> è¿”å›ç”¨äºä¿æŠ¤ Servlet çš„èº«ä»½éªŒè¯æ–¹æ¡ˆçš„åç§°ï¼Œä¾‹å¦‚ï¼Œâ€BASICâ€ æˆ– â€œSSLâ€ï¼Œå¦‚æœJSPæ²¡æœ‰å—åˆ°ä¿æŠ¤åˆ™è¿”å› nullã€‚</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>String getCharacterEncoding()</strong> è¿”å›è¯·æ±‚ä¸»ä½“ä¸­ä½¿ç”¨çš„å­—ç¬¦ç¼–ç çš„åç§°ã€‚</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>String getContentType()</strong> è¿”å›è¯·æ±‚ä¸»ä½“çš„ MIME ç±»å‹ï¼Œå¦‚æœä¸çŸ¥é“ç±»å‹åˆ™è¿”å› nullã€‚</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>String getContextPath()</strong> è¿”å›æŒ‡ç¤ºè¯·æ±‚ä¸Šä¸‹æ–‡çš„è¯·æ±‚ URI éƒ¨åˆ†ã€‚</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>String getHeader(String name)</strong> ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›æŒ‡å®šçš„è¯·æ±‚å¤´çš„å€¼ã€‚</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left"><strong>String getMethod()</strong> è¿”å›è¯·æ±‚çš„ HTTP æ–¹æ³•çš„åç§°ï¼Œä¾‹å¦‚ï¼ŒGETã€POST æˆ– PUTã€‚</td>
</tr>
<tr>
<td align="left">16</td>
<td align="left"><strong>String getParameter(String name)</strong> ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›è¯·æ±‚å‚æ•°çš„å€¼ï¼Œæˆ–è€…å¦‚æœå‚æ•°ä¸å­˜åœ¨åˆ™è¿”å› nullã€‚</td>
</tr>
<tr>
<td align="left">17</td>
<td align="left"><strong>String getPathInfo()</strong> å½“è¯·æ±‚å‘å‡ºæ—¶ï¼Œè¿”å›ä¸å®¢æˆ·ç«¯å‘é€çš„ URL ç›¸å…³çš„ä»»ä½•é¢å¤–çš„è·¯å¾„ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td align="left">18</td>
<td align="left"><strong>String getProtocol()</strong> è¿”å›è¯·æ±‚åè®®çš„åç§°å’Œç‰ˆæœ¬ã€‚</td>
</tr>
<tr>
<td align="left">19</td>
<td align="left"><strong>String getQueryString()</strong> è¿”å›åŒ…å«åœ¨è·¯å¾„åçš„è¯·æ±‚ URL ä¸­çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</td>
</tr>
<tr>
<td align="left">20</td>
<td align="left"><strong>String getRemoteAddr()</strong> è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯çš„äº’è”ç½‘åè®®ï¼ˆIPï¼‰åœ°å€ã€‚</td>
</tr>
<tr>
<td align="left">21</td>
<td align="left"><strong>String getRemoteHost()</strong> è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯çš„å®Œå…¨é™å®šåç§°ã€‚</td>
</tr>
<tr>
<td align="left">22</td>
<td align="left"><strong>String getRemoteUser()</strong> å¦‚æœç”¨æˆ·å·²é€šè¿‡èº«ä»½éªŒè¯ï¼Œåˆ™è¿”å›å‘å‡ºè¯·æ±‚çš„ç™»å½•ç”¨æˆ·ï¼Œæˆ–è€…å¦‚æœç”¨æˆ·æœªé€šè¿‡èº«ä»½éªŒè¯ï¼Œåˆ™è¿”å› nullã€‚</td>
</tr>
<tr>
<td align="left">23</td>
<td align="left"><strong>String getRequestURI()</strong> ä»åè®®åç§°ç›´åˆ° HTTP è¯·æ±‚çš„ç¬¬ä¸€è¡Œçš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ï¼Œè¿”å›è¯¥è¯·æ±‚çš„ URL çš„ä¸€éƒ¨åˆ†ã€‚</td>
</tr>
<tr>
<td align="left">24</td>
<td align="left"><strong>String getRequestedSessionId()</strong> è¿”å›ç”±å®¢æˆ·ç«¯æŒ‡å®šçš„ session ä¼šè¯ IDã€‚</td>
</tr>
<tr>
<td align="left">25</td>
<td align="left"><strong>String getServletPath()</strong> è¿”å›è°ƒç”¨ JSP çš„è¯·æ±‚çš„ URL çš„ä¸€éƒ¨åˆ†ã€‚</td>
</tr>
<tr>
<td align="left">26</td>
<td align="left"><strong>String[] getParameterValues(String name)</strong> è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„æ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰ç»™å®šçš„è¯·æ±‚å‚æ•°çš„å€¼ï¼Œå¦‚æœå‚æ•°ä¸å­˜åœ¨åˆ™è¿”å› nullã€‚</td>
</tr>
<tr>
<td align="left">27</td>
<td align="left"><strong>boolean isSecure()</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè¯·æ±‚æ˜¯å¦ä½¿ç”¨å®‰å…¨é€šé“ï¼Œå¦‚ HTTPSã€‚</td>
</tr>
<tr>
<td align="left">28</td>
<td align="left"><strong>int getContentLength()</strong> ä»¥å­—èŠ‚ä¸ºå•ä½è¿”å›è¯·æ±‚ä¸»ä½“çš„é•¿åº¦ï¼Œå¹¶æä¾›è¾“å…¥æµï¼Œæˆ–è€…å¦‚æœé•¿åº¦æœªçŸ¥åˆ™è¿”å› -1ã€‚</td>
</tr>
<tr>
<td align="left">29</td>
<td align="left"><strong>int getIntHeader(String name)</strong> è¿”å›æŒ‡å®šçš„è¯·æ±‚å¤´çš„å€¼ä¸ºä¸€ä¸ª int å€¼ã€‚</td>
</tr>
<tr>
<td align="left">30</td>
<td align="left"><strong>int getServerPort()</strong> è¿”å›æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚çš„ç«¯å£å·ã€‚</td>
</tr>
<tr>
<td align="left">31</td>
<td align="left"><strong>int getParameterMap()</strong> å°†å‚æ•°å°è£…æˆ Map ç±»å‹ã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸHTTP-Header-è¯·æ±‚å®ä¾‹"><a href="#ğŸHTTP-Header-è¯·æ±‚å®ä¾‹" class="headerlink" title="ğŸHTTP Header è¯·æ±‚å®ä¾‹"></a>ğŸHTTP Header è¯·æ±‚å®ä¾‹</h3><p>ä¸‹é¢çš„å®ä¾‹ä½¿ç”¨ HttpServletRequest çš„ <strong>getHeaderNames()</strong> æ–¹æ³•è¯»å– HTTP å¤´ä¿¡æ¯ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«ä¸å½“å‰çš„ HTTP è¯·æ±‚ç›¸å…³çš„å¤´ä¿¡æ¯ã€‚</p>
<p>ä¸€æ—¦æˆ‘ä»¬æœ‰ä¸€ä¸ªæšä¸¾ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ ‡å‡†æ–¹å¼å¾ªç¯æšä¸¾ï¼Œä½¿ç”¨ <em>hasMoreElements()</em> æ–¹æ³•æ¥ç¡®å®šä½•æ—¶åœæ­¢ï¼Œä½¿ç”¨ <em>nextElement()</em> æ–¹æ³•æ¥è·å–æ¯ä¸ªå‚æ•°çš„åç§°ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/DisplayHeader"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DisplayHeader</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"HTTP Header è¯·æ±‚å®ä¾‹ - äº‘æ¾ˆå®ä¾‹"</span>;</span><br><span class="line">        String docType =</span><br><span class="line">            <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">            out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;meta charset=\"utf-8\"&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;table width=\"100%\" border=\"1\" align=\"center\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;tr bgcolor=\"#949494\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;th&gt;Header åç§°&lt;/th&gt;&lt;th&gt;Header å€¼&lt;/th&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;/tr&gt;\n"</span>);</span><br><span class="line"></span><br><span class="line">        Enumeration headerNames = request.getHeaderNames();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(headerNames.hasMoreElements()) {</span><br><span class="line">            String paramName = (String)headerNames.nextElement();</span><br><span class="line">            out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">            String paramValue = request.getHeader(paramName);</span><br><span class="line">            out.println(<span class="string">"&lt;td&gt; "</span> + paramValue + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span>);</span><br><span class="line">        }</span><br><span class="line">        out.println(<span class="string">"&lt;/table&gt;\n&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šæµ‹è¯•å®ä¾‹æ˜¯ä½äº TomcatTest é¡¹ç›®ä¸‹ï¼Œå¯¹åº”çš„ web.xml é…ç½®ä¸ºï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayHeader<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.DisplayHeader<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayHeader<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/DisplayHeader<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨ï¼Œè°ƒç”¨ä¸Šé¢çš„ Servletï¼Œè®¿é—® <strong><a href="http://localhost:8080/TomcatTest/DisplayHeader" target="_blank" rel="noopener">http://localhost:8080/TomcatTest/DisplayHeader</a></strong> ä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p>
<p><a href="https://imgchr.com/i/wPao0e" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/03/wPao0e.png" alt="wPao0e.png"></a></p>
<h2 id="ğŸŒ¸Servlet-æœåŠ¡å™¨-HTTP-å“åº”"><a href="#ğŸŒ¸Servlet-æœåŠ¡å™¨-HTTP-å“åº”" class="headerlink" title="ğŸŒ¸Servlet æœåŠ¡å™¨ HTTP å“åº”"></a>ğŸŒ¸Servlet æœåŠ¡å™¨ HTTP å“åº”</h2><p>æ­£å¦‚å‰é¢çš„ç« èŠ‚ä¸­è®¨è®ºçš„é‚£æ ·ï¼Œå½“ä¸€ä¸ª Web æœåŠ¡å™¨å“åº”ä¸€ä¸ª HTTP è¯·æ±‚æ—¶ï¼Œå“åº”é€šå¸¸åŒ…æ‹¬ä¸€ä¸ªçŠ¶æ€è¡Œã€ä¸€äº›å“åº”æŠ¥å¤´ã€ä¸€ä¸ªç©ºè¡Œå’Œæ–‡æ¡£ã€‚ä¸€ä¸ªå…¸å‹çš„å“åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Header2: ...</span><br><span class="line">...</span><br><span class="line">HeaderN: ...</span><br><span class="line">  (Blank Line)</span><br><span class="line"><span class="meta">&lt;!doctype ...&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>...<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>çŠ¶æ€è¡ŒåŒ…æ‹¬ HTTP ç‰ˆæœ¬ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º HTTP/1.1ï¼‰ã€ä¸€ä¸ªçŠ¶æ€ç ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º 200ï¼‰å’Œä¸€ä¸ªå¯¹åº”äºçŠ¶æ€ç çš„çŸ­æ¶ˆæ¯ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º OKï¼‰ã€‚</p>
<p>ä¸‹è¡¨æ€»ç»“äº†ä» Web æœåŠ¡å™¨ç«¯è¿”å›åˆ°æµè§ˆå™¨çš„æœ€æœ‰ç”¨çš„ HTTP 1.1 å“åº”æŠ¥å¤´ï¼Œæ‚¨ä¼šåœ¨ Web ç¼–ç¨‹ä¸­é¢‘ç¹åœ°ä½¿ç”¨å®ƒä»¬ï¼š</p>
<table>
<thead>
<tr>
<th align="left">å¤´ä¿¡æ¯</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Allow</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæœåŠ¡å™¨æ”¯æŒçš„è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚</td>
</tr>
<tr>
<td align="left">Cache-Control</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šå“åº”æ–‡æ¡£åœ¨ä½•ç§æƒ…å†µä¸‹å¯ä»¥å®‰å…¨åœ°ç¼“å­˜ã€‚å¯èƒ½çš„å€¼æœ‰ï¼š<strong>publicã€private</strong> æˆ– <strong>no-cache</strong> ç­‰ã€‚Public æ„å‘³ç€æ–‡æ¡£æ˜¯å¯ç¼“å­˜ï¼ŒPrivate æ„å‘³ç€æ–‡æ¡£æ˜¯å•ä¸ªç”¨æˆ·ç§ç”¨æ–‡æ¡£ï¼Œä¸”åªèƒ½å­˜å‚¨åœ¨ç§æœ‰ï¼ˆéå…±äº«ï¼‰ç¼“å­˜ä¸­ï¼Œno-cache æ„å‘³ç€æ–‡æ¡£ä¸åº”è¢«ç¼“å­˜ã€‚</td>
</tr>
<tr>
<td align="left">Connection</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºæµè§ˆå™¨æ˜¯å¦ä½¿ç”¨æŒä¹… HTTP è¿æ¥ã€‚å€¼ <strong>close</strong> æŒ‡ç¤ºæµè§ˆå™¨ä¸ä½¿ç”¨æŒä¹… HTTP è¿æ¥ï¼Œå€¼ <strong>keep-alive</strong> æ„å‘³ç€ä½¿ç”¨æŒä¹…è¿æ¥ã€‚</td>
</tr>
<tr>
<td align="left">Content-Disposition</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯å¯ä»¥è®©æ‚¨è¯·æ±‚æµè§ˆå™¨è¦æ±‚ç”¨æˆ·ä»¥ç»™å®šåç§°çš„æ–‡ä»¶æŠŠå“åº”ä¿å­˜åˆ°ç£ç›˜ã€‚</td>
</tr>
<tr>
<td align="left">Content-Encoding</td>
<td align="left">åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šé¡µé¢çš„ç¼–ç æ–¹å¼ã€‚</td>
</tr>
<tr>
<td align="left">Content-Language</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯è¡¨ç¤ºæ–‡æ¡£ç¼–å†™æ‰€ä½¿ç”¨çš„è¯­è¨€ã€‚ä¾‹å¦‚ï¼Œenã€en-usã€ru ç­‰ã€‚</td>
</tr>
<tr>
<td align="left">Content-Length</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºå“åº”ä¸­çš„å­—èŠ‚æ•°ã€‚åªæœ‰å½“æµè§ˆå™¨ä½¿ç”¨æŒä¹…ï¼ˆkeep-aliveï¼‰HTTP è¿æ¥æ—¶æ‰éœ€è¦è¿™äº›ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td align="left">Content-Type</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æä¾›äº†å“åº”æ–‡æ¡£çš„ MIMEï¼ˆMultipurpose Internet Mail Extensionï¼‰ç±»å‹ã€‚</td>
</tr>
<tr>
<td align="left">Expires</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šå†…å®¹è¿‡æœŸçš„æ—¶é—´ï¼Œåœ¨è¿™ä¹‹åå†…å®¹ä¸å†è¢«ç¼“å­˜ã€‚</td>
</tr>
<tr>
<td align="left">Last-Modified</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºæ–‡æ¡£çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜æ–‡ä»¶ï¼Œå¹¶åœ¨ä»¥åçš„è¯·æ±‚ä¸­é€šè¿‡ <strong>If-Modified-Since</strong> è¯·æ±‚å¤´ä¿¡æ¯æä¾›ä¸€ä¸ªæ—¥æœŸã€‚</td>
</tr>
<tr>
<td align="left">Location</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯åº”è¢«åŒ…å«åœ¨æ‰€æœ‰çš„å¸¦æœ‰çŠ¶æ€ç çš„å“åº”ä¸­ã€‚åœ¨ 300s å†…ï¼Œè¿™ä¼šé€šçŸ¥æµè§ˆå™¨æ–‡æ¡£çš„åœ°å€ã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨é‡æ–°è¿æ¥åˆ°è¿™ä¸ªä½ç½®ï¼Œå¹¶è·å–æ–°çš„æ–‡æ¡£ã€‚</td>
</tr>
<tr>
<td align="left">Refresh</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨åº”è¯¥å¦‚ä½•å°½å¿«è¯·æ±‚æ›´æ–°çš„é¡µé¢ã€‚æ‚¨å¯ä»¥æŒ‡å®šé¡µé¢åˆ·æ–°çš„ç§’æ•°ã€‚</td>
</tr>
<tr>
<td align="left">Retry-After</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯å¯ä»¥ä¸ 503ï¼ˆService Unavailable æœåŠ¡ä¸å¯ç”¨ï¼‰å“åº”é…åˆä½¿ç”¨ï¼Œè¿™ä¼šå‘Šè¯‰å®¢æˆ·ç«¯å¤šä¹…å°±å¯ä»¥é‡å¤å®ƒçš„è¯·æ±‚ã€‚</td>
</tr>
<tr>
<td align="left">Set-Cookie</td>
<td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šä¸€ä¸ªä¸é¡µé¢å…³è”çš„ cookieã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸè®¾ç½®-HTTP-å“åº”æŠ¥å¤´çš„æ–¹æ³•"><a href="#ğŸè®¾ç½®-HTTP-å“åº”æŠ¥å¤´çš„æ–¹æ³•" class="headerlink" title="ğŸè®¾ç½® HTTP å“åº”æŠ¥å¤´çš„æ–¹æ³•"></a>ğŸè®¾ç½® HTTP å“åº”æŠ¥å¤´çš„æ–¹æ³•</h3><p>ä¸‹é¢çš„æ–¹æ³•å¯ç”¨äºåœ¨ Servlet ç¨‹åºä¸­è®¾ç½® HTTP å“åº”æŠ¥å¤´ã€‚è¿™äº›æ–¹æ³•é€šè¿‡ <em>HttpServletResponse</em> å¯¹è±¡å¯ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">æ–¹æ³• &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>String encodeRedirectURL(String url)</strong> ä¸º sendRedirect æ–¹æ³•ä¸­ä½¿ç”¨çš„æŒ‡å®šçš„ URL è¿›è¡Œç¼–ç ï¼Œæˆ–è€…å¦‚æœç¼–ç ä¸æ˜¯å¿…éœ€çš„ï¼Œåˆ™è¿”å› URL æœªæ”¹å˜ã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>String encodeURL(String url)</strong> å¯¹åŒ…å« session ä¼šè¯ ID çš„æŒ‡å®š URL è¿›è¡Œç¼–ç ï¼Œæˆ–è€…å¦‚æœç¼–ç ä¸æ˜¯å¿…éœ€çš„ï¼Œåˆ™è¿”å› URL æœªæ”¹å˜ã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>boolean containsHeader(String name)</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦å·²ç»è®¾ç½®å·²å‘½åçš„å“åº”æŠ¥å¤´ã€‚</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>boolean isCommitted()</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå“åº”æ˜¯å¦å·²ç»æäº¤ã€‚</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>void addCookie(Cookie cookie)</strong> æŠŠæŒ‡å®šçš„ cookie æ·»åŠ åˆ°å“åº”ã€‚</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>void addDateHeader(String name, long date)</strong> æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ—¥æœŸå€¼çš„å“åº”æŠ¥å¤´ã€‚</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>void addHeader(String name, String value)</strong> æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œå€¼çš„å“åº”æŠ¥å¤´ã€‚</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>void addIntHeader(String name, int value)</strong> æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ•´æ•°å€¼çš„å“åº”æŠ¥å¤´ã€‚</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>void flushBuffer()</strong> å¼ºåˆ¶ä»»ä½•åœ¨ç¼“å†²åŒºä¸­çš„å†…å®¹è¢«å†™å…¥åˆ°å®¢æˆ·ç«¯ã€‚</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>void reset()</strong> æ¸…é™¤ç¼“å†²åŒºä¸­å­˜åœ¨çš„ä»»ä½•æ•°æ®ï¼ŒåŒ…æ‹¬çŠ¶æ€ç å’Œå¤´ã€‚</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>void resetBuffer()</strong> æ¸…é™¤å“åº”ä¸­åŸºç¡€ç¼“å†²åŒºçš„å†…å®¹ï¼Œä¸æ¸…é™¤çŠ¶æ€ç å’Œå¤´ã€‚</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>void sendError(int sc)</strong> ä½¿ç”¨æŒ‡å®šçš„çŠ¶æ€ç å‘é€é”™è¯¯å“åº”åˆ°å®¢æˆ·ç«¯ï¼Œå¹¶æ¸…é™¤ç¼“å†²åŒºã€‚</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>void sendError(int sc, String msg)</strong> ä½¿ç”¨æŒ‡å®šçš„çŠ¶æ€å‘é€é”™è¯¯å“åº”åˆ°å®¢æˆ·ç«¯ã€‚</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>void sendRedirect(String location)</strong> ä½¿ç”¨æŒ‡å®šçš„é‡å®šå‘ä½ç½® URL å‘é€ä¸´æ—¶é‡å®šå‘å“åº”åˆ°å®¢æˆ·ç«¯ã€‚</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left"><strong>void setBufferSize(int size)</strong> ä¸ºå“åº”ä¸»ä½“è®¾ç½®é¦–é€‰çš„ç¼“å†²åŒºå¤§å°ã€‚</td>
</tr>
<tr>
<td align="left">16</td>
<td align="left"><strong>void setCharacterEncoding(String charset)</strong> è®¾ç½®è¢«å‘é€åˆ°å®¢æˆ·ç«¯çš„å“åº”çš„å­—ç¬¦ç¼–ç ï¼ˆMIME å­—ç¬¦é›†ï¼‰ä¾‹å¦‚ï¼ŒUTF-8ã€‚</td>
</tr>
<tr>
<td align="left">17</td>
<td align="left"><strong>void setContentLength(int len)</strong> è®¾ç½®åœ¨ HTTP Servlet å“åº”ä¸­çš„å†…å®¹ä¸»ä½“çš„é•¿åº¦ï¼Œè¯¥æ–¹æ³•è®¾ç½® HTTP Content-Length å¤´ã€‚</td>
</tr>
<tr>
<td align="left">18</td>
<td align="left"><strong>void setContentType(String type)</strong> å¦‚æœå“åº”è¿˜æœªè¢«æäº¤ï¼Œè®¾ç½®è¢«å‘é€åˆ°å®¢æˆ·ç«¯çš„å“åº”çš„å†…å®¹ç±»å‹ã€‚</td>
</tr>
<tr>
<td align="left">19</td>
<td align="left"><strong>void setDateHeader(String name, long date)</strong> è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ—¥æœŸå€¼çš„å“åº”æŠ¥å¤´ã€‚</td>
</tr>
<tr>
<td align="left">20</td>
<td align="left"><strong>void setHeader(String name, String value)</strong> è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œå€¼çš„å“åº”æŠ¥å¤´ã€‚</td>
</tr>
<tr>
<td align="left">21</td>
<td align="left"><strong>void setIntHeader(String name, int value)</strong> è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ•´æ•°å€¼çš„å“åº”æŠ¥å¤´ã€‚</td>
</tr>
<tr>
<td align="left">22</td>
<td align="left"><strong>void setLocale(Locale loc)</strong> å¦‚æœå“åº”è¿˜æœªè¢«æäº¤ï¼Œè®¾ç½®å“åº”çš„åŒºåŸŸã€‚</td>
</tr>
<tr>
<td align="left">23</td>
<td align="left"><strong>void setStatus(int sc)</strong> ä¸ºè¯¥å“åº”è®¾ç½®çŠ¶æ€ç ã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸHTTP-Header-å“åº”å®ä¾‹"><a href="#ğŸHTTP-Header-å“åº”å®ä¾‹" class="headerlink" title="ğŸHTTP Header å“åº”å®ä¾‹"></a>ğŸHTTP Header å“åº”å®ä¾‹</h3><p>æ‚¨å·²ç»åœ¨å‰é¢çš„å®ä¾‹ä¸­çœ‹åˆ° setContentType() æ–¹æ³•ï¼Œä¸‹é¢çš„å®ä¾‹ä¹Ÿä½¿ç”¨äº†åŒæ ·çš„æ–¹æ³•ï¼Œæ­¤å¤–ï¼Œæˆ‘ä»¬ä¼šç”¨ <strong>setIntHeader()</strong> æ–¹æ³•æ¥è®¾ç½® <strong>Refresh</strong> å¤´ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/Refresh"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Refresh</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                        HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">                <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">      </span>{</span><br><span class="line">          <span class="comment">// è®¾ç½®åˆ·æ–°è‡ªåŠ¨åŠ è½½æ—¶é—´ä¸º 5 ç§’</span></span><br><span class="line">          response.setIntHeader(<span class="string">"Refresh"</span>, <span class="number">5</span>);</span><br><span class="line">          <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">          response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">         </span><br><span class="line">          <span class="comment">//ä½¿ç”¨é»˜è®¤æ—¶åŒºå’Œè¯­è¨€ç¯å¢ƒè·å¾—ä¸€ä¸ªæ—¥å†  </span></span><br><span class="line">          Calendar cale = Calendar.getInstance();  </span><br><span class="line">          <span class="comment">//å°†Calendarç±»å‹è½¬æ¢æˆDateç±»å‹  </span></span><br><span class="line">          Date tasktime=cale.getTime();  </span><br><span class="line">          <span class="comment">//è®¾ç½®æ—¥æœŸè¾“å‡ºçš„æ ¼å¼  </span></span><br><span class="line">          SimpleDateFormat df=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);  </span><br><span class="line">          <span class="comment">//æ ¼å¼åŒ–è¾“å‡º  </span></span><br><span class="line">          String nowTime = df.format(tasktime);</span><br><span class="line">          PrintWriter out = response.getWriter();</span><br><span class="line">          String title = <span class="string">"è‡ªåŠ¨åˆ·æ–° Header è®¾ç½® - äº‘æ¾ˆå®ä¾‹"</span>;</span><br><span class="line">          String docType =</span><br><span class="line">          <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">          out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;p&gt;å½“å‰æ—¶é—´æ˜¯ï¼š"</span> + nowTime + <span class="string">"&lt;/p&gt;\n"</span>);</span><br><span class="line">      }</span><br><span class="line">      <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                         HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">          <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">         doGet(request, response);</span><br><span class="line">      }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šæµ‹è¯•å®ä¾‹æ˜¯ä½äº TomcatTest é¡¹ç›®ä¸‹ï¼Œå¯¹åº”çš„ web.xml é…ç½®ä¸ºï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">     <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Refresh<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.Refresh<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Refresh<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/Refresh<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨ï¼Œè°ƒç”¨ä¸Šé¢çš„ Servletï¼Œæ¯éš” 5 ç§’ä¼šæ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¶é—´ã€‚åªè¦è¿è¡Œ Servlet å¹¶ç¨ç­‰ç‰‡åˆ»ï¼Œå³å¯çœ‹åˆ°å¦‚ä¸‹çš„ç»“æœï¼š</p>
<p><a href="https://imgchr.com/i/wPwqQP" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/03/wPwqQP.png" alt="wPwqQP.png"></a></p>
<h2 id="ğŸŒ¸Servlet-HTTP-çŠ¶æ€ç "><a href="#ğŸŒ¸Servlet-HTTP-çŠ¶æ€ç " class="headerlink" title="ğŸŒ¸Servlet HTTP çŠ¶æ€ç "></a>ğŸŒ¸Servlet HTTP çŠ¶æ€ç </h2><p>HTTP è¯·æ±‚å’Œ HTTP å“åº”æ¶ˆæ¯çš„æ ¼å¼æ˜¯ç±»ä¼¼çš„ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆå§‹çŠ¶æ€è¡Œ + å›è½¦æ¢è¡Œç¬¦ï¼ˆå›è½¦+æ¢è¡Œï¼‰</li>
<li>é›¶ä¸ªæˆ–å¤šä¸ªæ ‡é¢˜è¡Œ+å›è½¦æ¢è¡Œç¬¦</li>
<li>ä¸€ä¸ªç©ºç™½è¡Œï¼Œå³å›è½¦æ¢è¡Œç¬¦</li>
<li>ä¸€ä¸ªå¯é€‰çš„æ¶ˆæ¯ä¸»ä½“ï¼Œæ¯”å¦‚æ–‡ä»¶ã€æŸ¥è¯¢æ•°æ®æˆ–æŸ¥è¯¢è¾“å‡º</li>
</ul>
<p>ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨çš„å“åº”å¤´å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Header2: ...</span><br><span class="line">...</span><br><span class="line">HeaderN: ...</span><br><span class="line">  (Blank Line)</span><br><span class="line"><span class="meta">&lt;!doctype ...&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>...<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>çŠ¶æ€è¡ŒåŒ…æ‹¬ HTTP ç‰ˆæœ¬ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º HTTP/1.1ï¼‰ã€ä¸€ä¸ªçŠ¶æ€ç ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º 200ï¼‰å’Œä¸€ä¸ªå¯¹åº”äºçŠ¶æ€ç çš„çŸ­æ¶ˆæ¯ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º OKï¼‰ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¯èƒ½ä» Web æœåŠ¡å™¨è¿”å›çš„ HTTP çŠ¶æ€ç å’Œç›¸å…³çš„ä¿¡æ¯åˆ—è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th align="left">ä»£ç </th>
<th align="left">æ¶ˆæ¯</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">100</td>
<td align="left">Continue</td>
<td align="left">åªæœ‰è¯·æ±‚çš„ä¸€éƒ¨åˆ†å·²ç»è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œä½†åªè¦å®ƒæ²¡æœ‰è¢«æ‹’ç»ï¼Œå®¢æˆ·ç«¯åº”ç»§ç»­è¯¥è¯·æ±‚ã€‚</td>
</tr>
<tr>
<td align="left">101</td>
<td align="left">Switching Protocols</td>
<td align="left">æœåŠ¡å™¨åˆ‡æ¢åè®®ã€‚</td>
</tr>
<tr>
<td align="left">200</td>
<td align="left">OK</td>
<td align="left">è¯·æ±‚æˆåŠŸã€‚</td>
</tr>
<tr>
<td align="left">201</td>
<td align="left">Created</td>
<td align="left">è¯¥è¯·æ±‚æ˜¯å®Œæ•´çš„ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºã€‚</td>
</tr>
<tr>
<td align="left">202</td>
<td align="left">Accepted</td>
<td align="left">è¯¥è¯·æ±‚è¢«æ¥å—å¤„ç†ï¼Œä½†æ˜¯è¯¥å¤„ç†æ˜¯ä¸å®Œæ•´çš„ã€‚</td>
</tr>
<tr>
<td align="left">203</td>
<td align="left">Non-authoritative Information</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">204</td>
<td align="left">No Content</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">205</td>
<td align="left">Reset Content</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">206</td>
<td align="left">Partial Content</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">300</td>
<td align="left">Multiple Choices</td>
<td align="left">é“¾æ¥åˆ—è¡¨ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸€ä¸ªé“¾æ¥ï¼Œè¿›å…¥åˆ°è¯¥ä½ç½®ã€‚æœ€å¤šäº”ä¸ªåœ°å€ã€‚</td>
</tr>
<tr>
<td align="left">301</td>
<td align="left">Moved Permanently</td>
<td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å·²ç»è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ URLã€‚</td>
</tr>
<tr>
<td align="left">302</td>
<td align="left">Found</td>
<td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å·²ç»ä¸´æ—¶è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ URLã€‚</td>
</tr>
<tr>
<td align="left">303</td>
<td align="left">See Other</td>
<td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å¯ä»¥åœ¨å¦ä¸€ä¸ªä¸åŒçš„ URL ä¸‹è¢«æ‰¾åˆ°ã€‚</td>
</tr>
<tr>
<td align="left">304</td>
<td align="left">Not Modified</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">305</td>
<td align="left">Use Proxy</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">306</td>
<td align="left"><em>Unused</em></td>
<td align="left">åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ä½¿ç”¨è¯¥ä»£ç ã€‚ç°åœ¨å·²ä¸å†ä½¿ç”¨å®ƒï¼Œä½†ä»£ç ä»è¢«ä¿ç•™ã€‚</td>
</tr>
<tr>
<td align="left">307</td>
<td align="left">Temporary Redirect</td>
<td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å·²ç»ä¸´æ—¶è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ URLã€‚</td>
</tr>
<tr>
<td align="left">400</td>
<td align="left">Bad Request</td>
<td align="left">æœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚ã€‚</td>
</tr>
<tr>
<td align="left">401</td>
<td align="left">Unauthorized</td>
<td align="left">æ‰€è¯·æ±‚çš„é¡µé¢éœ€è¦ç”¨æˆ·åå’Œå¯†ç ã€‚</td>
</tr>
<tr>
<td align="left">402</td>
<td align="left">Payment Required</td>
<td align="left"><em>æ‚¨è¿˜ä¸èƒ½ä½¿ç”¨è¯¥ä»£ç ã€‚</em></td>
</tr>
<tr>
<td align="left">403</td>
<td align="left">Forbidden</td>
<td align="left">ç¦æ­¢è®¿é—®æ‰€è¯·æ±‚çš„é¡µé¢ã€‚</td>
</tr>
<tr>
<td align="left">404</td>
<td align="left">Not Found</td>
<td align="left">æœåŠ¡å™¨æ— æ³•æ‰¾åˆ°æ‰€è¯·æ±‚çš„é¡µé¢ã€‚.</td>
</tr>
<tr>
<td align="left">405</td>
<td align="left">Method Not Allowed</td>
<td align="left">åœ¨è¯·æ±‚ä¸­æŒ‡å®šçš„æ–¹æ³•æ˜¯ä¸å…è®¸çš„ã€‚</td>
</tr>
<tr>
<td align="left">406</td>
<td align="left">Not Acceptable</td>
<td align="left">æœåŠ¡å™¨åªç”Ÿæˆä¸€ä¸ªä¸è¢«å®¢æˆ·ç«¯æ¥å—çš„å“åº”ã€‚</td>
</tr>
<tr>
<td align="left">407</td>
<td align="left">Proxy Authentication Required</td>
<td align="left">åœ¨è¯·æ±‚é€è¾¾ä¹‹å‰ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ä»£ç†æœåŠ¡å™¨çš„éªŒè¯ã€‚</td>
</tr>
<tr>
<td align="left">408</td>
<td align="left">Request Timeout</td>
<td align="left">è¯·æ±‚éœ€è¦çš„æ—¶é—´æ¯”æœåŠ¡å™¨èƒ½å¤Ÿç­‰å¾…çš„æ—¶é—´é•¿ï¼Œè¶…æ—¶ã€‚</td>
</tr>
<tr>
<td align="left">409</td>
<td align="left">Conflict</td>
<td align="left">è¯·æ±‚å› ä¸ºå†²çªæ— æ³•å®Œæˆã€‚</td>
</tr>
<tr>
<td align="left">410</td>
<td align="left">Gone</td>
<td align="left">æ‰€è¯·æ±‚çš„é¡µé¢ä¸å†å¯ç”¨ã€‚</td>
</tr>
<tr>
<td align="left">411</td>
<td align="left">Length Required</td>
<td align="left">â€œContent-Lengthâ€ æœªå®šä¹‰ã€‚æœåŠ¡å™¨æ— æ³•å¤„ç†å®¢æˆ·ç«¯å‘é€çš„ä¸å¸¦ Content-Length çš„è¯·æ±‚ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td align="left">412</td>
<td align="left">Precondition Failed</td>
<td align="left">è¯·æ±‚ä¸­ç»™å‡ºçš„å…ˆå†³æ¡ä»¶è¢«æœåŠ¡å™¨è¯„ä¼°ä¸º falseã€‚</td>
</tr>
<tr>
<td align="left">413</td>
<td align="left">Request Entity Too Large</td>
<td align="left">æœåŠ¡å™¨ä¸æ¥å—è¯¥è¯·æ±‚ï¼Œå› ä¸ºè¯·æ±‚å®ä½“è¿‡å¤§ã€‚</td>
</tr>
<tr>
<td align="left">414</td>
<td align="left">Request-url Too Long</td>
<td align="left">æœåŠ¡å™¨ä¸æ¥å—è¯¥è¯·æ±‚ï¼Œå› ä¸º URL å¤ªé•¿ã€‚å½“æ‚¨è½¬æ¢ä¸€ä¸ª â€œpostâ€ è¯·æ±‚ä¸ºä¸€ä¸ªå¸¦æœ‰é•¿çš„æŸ¥è¯¢ä¿¡æ¯çš„ â€œgetâ€ è¯·æ±‚æ—¶å‘ç”Ÿã€‚</td>
</tr>
<tr>
<td align="left">415</td>
<td align="left">Unsupported Media Type</td>
<td align="left">æœåŠ¡å™¨ä¸æ¥å—è¯¥è¯·æ±‚ï¼Œå› ä¸ºåª’ä½“ç±»å‹ä¸è¢«æ”¯æŒã€‚</td>
</tr>
<tr>
<td align="left">417</td>
<td align="left">Expectation Failed</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">500</td>
<td align="left">Internal Server Error</td>
<td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæ„å¤–çš„æƒ…å†µã€‚</td>
</tr>
<tr>
<td align="left">501</td>
<td align="left">Not Implemented</td>
<td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨ä¸æ”¯æŒæ‰€éœ€çš„åŠŸèƒ½ã€‚</td>
</tr>
<tr>
<td align="left">502</td>
<td align="left">Bad Gateway</td>
<td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨ä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº”ã€‚</td>
</tr>
<tr>
<td align="left">503</td>
<td align="left">Service Unavailable</td>
<td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨æš‚æ—¶è¶…è½½æˆ–æ­»æœºã€‚</td>
</tr>
<tr>
<td align="left">504</td>
<td align="left">Gateway Timeout</td>
<td align="left">ç½‘å…³è¶…æ—¶ã€‚</td>
</tr>
<tr>
<td align="left">505</td>
<td align="left">HTTP Version Not Supported</td>
<td align="left">æœåŠ¡å™¨ä¸æ”¯æŒâ€HTTPåè®®â€ç‰ˆæœ¬ã€‚### ğŸHTTP è¯·æ±‚å’Œ HTTP å“åº”æ¶ˆæ¯çš„æ ¼å¼æ˜¯ç±»ä¼¼çš„ï¼Œç»“æ„å¦‚ä¸‹ï¼š</td>
</tr>
</tbody></table>
<h3 id="ğŸè®¾ç½®-HTTP-çŠ¶æ€ä»£ç çš„æ–¹æ³•"><a href="#ğŸè®¾ç½®-HTTP-çŠ¶æ€ä»£ç çš„æ–¹æ³•" class="headerlink" title="ğŸè®¾ç½® HTTP çŠ¶æ€ä»£ç çš„æ–¹æ³•"></a>ğŸè®¾ç½® HTTP çŠ¶æ€ä»£ç çš„æ–¹æ³•</h3><p>ä¸‹é¢çš„æ–¹æ³•å¯ç”¨äºåœ¨ Servlet ç¨‹åºä¸­è®¾ç½® HTTP çŠ¶æ€ç ã€‚è¿™äº›æ–¹æ³•é€šè¿‡ <em>HttpServletResponse</em> å¯¹è±¡å¯ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">æ–¹æ³• &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public void setStatus ( int statusCode )</strong> è¯¥æ–¹æ³•è®¾ç½®ä¸€ä¸ªä»»æ„çš„çŠ¶æ€ç ã€‚setStatus æ–¹æ³•æ¥å—ä¸€ä¸ª intï¼ˆçŠ¶æ€ç ï¼‰ä½œä¸ºå‚æ•°ã€‚å¦‚æœæ‚¨çš„å“åº”åŒ…å«äº†ä¸€ä¸ªç‰¹æ®Šçš„çŠ¶æ€ç å’Œæ–‡æ¡£ï¼Œè¯·ç¡®ä¿åœ¨ä½¿ç”¨ <em>PrintWriter</em> å®é™…è¿”å›ä»»ä½•å†…å®¹ä¹‹å‰è°ƒç”¨ setStatusã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public void sendRedirect(String url)</strong> è¯¥æ–¹æ³•ç”Ÿæˆä¸€ä¸ª 302 å“åº”ï¼Œè¿åŒä¸€ä¸ªå¸¦æœ‰æ–°æ–‡æ¡£ URL çš„ <em>Location</em> å¤´ã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public void sendError(int code, String message)</strong> è¯¥æ–¹æ³•å‘é€ä¸€ä¸ªçŠ¶æ€ç ï¼ˆé€šå¸¸ä¸º 404ï¼‰ï¼Œè¿åŒä¸€ä¸ªåœ¨ HTML æ–‡æ¡£å†…éƒ¨è‡ªåŠ¨æ ¼å¼åŒ–å¹¶å‘é€åˆ°å®¢æˆ·ç«¯çš„çŸ­æ¶ˆæ¯ã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸHTTP-çŠ¶æ€ç å®ä¾‹"><a href="#ğŸHTTP-çŠ¶æ€ç å®ä¾‹" class="headerlink" title="ğŸHTTP çŠ¶æ€ç å®ä¾‹"></a>ğŸHTTP çŠ¶æ€ç å®ä¾‹</h3><p>ä¸‹é¢çš„ä¾‹å­æŠŠ 407 é”™è¯¯ä»£ç å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¼šæ˜¾ç¤º â€œNeed authentication!!!â€ æ¶ˆæ¯ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/showError"</span>)</span><br><span class="line"><span class="comment">// æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">showError</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è®¾ç½®é”™è¯¯ä»£ç å’ŒåŸå› </span></span><br><span class="line">      response.sendError(<span class="number">407</span>, <span class="string">"Need authentication!!!"</span> );</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                     HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">     doGet(request, response);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨ï¼Œè°ƒç”¨ä¸Šé¢çš„ Servlet å°†æ˜¾ç¤ºä»¥ä¸‹ç»“æœï¼š</p>
<p><a href="https://imgchr.com/i/wPro0f" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/09/03/wPro0f.png" alt="wPro0f.png"></a></p>
<hr>
<h2 id="ğŸŒ¸Servlet-ç¼–å†™è¿‡æ»¤å™¨"><a href="#ğŸŒ¸Servlet-ç¼–å†™è¿‡æ»¤å™¨" class="headerlink" title="ğŸŒ¸Servlet ç¼–å†™è¿‡æ»¤å™¨"></a>ğŸŒ¸Servlet ç¼–å†™è¿‡æ»¤å™¨</h2><p>Servlet è¿‡æ»¤å™¨å¯ä»¥åŠ¨æ€åœ°æ‹¦æˆªè¯·æ±‚å’Œå“åº”ï¼Œä»¥å˜æ¢æˆ–ä½¿ç”¨åŒ…å«åœ¨è¯·æ±‚æˆ–å“åº”ä¸­çš„ä¿¡æ¯ã€‚</p>
<p>å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ª Servlet è¿‡æ»¤å™¨é™„åŠ åˆ°ä¸€ä¸ª Servlet æˆ–ä¸€ç»„ Servletã€‚Servlet è¿‡æ»¤å™¨ä¹Ÿå¯ä»¥é™„åŠ åˆ° JavaServer Pages (JSP) æ–‡ä»¶å’Œ HTML é¡µé¢ã€‚è°ƒç”¨ Servlet å‰è°ƒç”¨æ‰€æœ‰é™„åŠ çš„ Servlet è¿‡æ»¤å™¨ã€‚</p>
<p>Servlet è¿‡æ»¤å™¨æ˜¯å¯ç”¨äº Servlet ç¼–ç¨‹çš„ Java ç±»ï¼Œå¯ä»¥å®ç°ä»¥ä¸‹ç›®çš„ï¼š</p>
<ul>
<li>åœ¨å®¢æˆ·ç«¯çš„è¯·æ±‚è®¿é—®åç«¯èµ„æºä¹‹å‰ï¼Œæ‹¦æˆªè¿™äº›è¯·æ±‚ã€‚</li>
<li>åœ¨æœåŠ¡å™¨çš„å“åº”å‘é€å›å®¢æˆ·ç«¯ä¹‹å‰ï¼Œå¤„ç†è¿™äº›å“åº”ã€‚</li>
</ul>
<p>æ ¹æ®è§„èŒƒå»ºè®®çš„å„ç§ç±»å‹çš„è¿‡æ»¤å™¨ï¼š</p>
<ul>
<li>èº«ä»½éªŒè¯è¿‡æ»¤å™¨ï¼ˆAuthentication Filtersï¼‰ã€‚</li>
<li>æ•°æ®å‹ç¼©è¿‡æ»¤å™¨ï¼ˆData compression Filtersï¼‰ã€‚</li>
<li>åŠ å¯†è¿‡æ»¤å™¨ï¼ˆEncryption Filtersï¼‰ã€‚</li>
<li>è§¦å‘èµ„æºè®¿é—®äº‹ä»¶è¿‡æ»¤å™¨ã€‚</li>
<li>å›¾åƒè½¬æ¢è¿‡æ»¤å™¨ï¼ˆImage Conversion Filtersï¼‰ã€‚</li>
<li>æ—¥å¿—è®°å½•å’Œå®¡æ ¸è¿‡æ»¤å™¨ï¼ˆLogging and Auditing Filtersï¼‰ã€‚</li>
<li>MIME-TYPE é“¾è¿‡æ»¤å™¨ï¼ˆMIME-TYPE Chain Filtersï¼‰ã€‚</li>
<li>æ ‡è®°åŒ–è¿‡æ»¤å™¨ï¼ˆTokenizing Filtersï¼‰ã€‚</li>
<li>XSL/T è¿‡æ»¤å™¨ï¼ˆXSL/T Filtersï¼‰ï¼Œè½¬æ¢ XML å†…å®¹ã€‚</li>
</ul>
<p>è¿‡æ»¤å™¨é€šè¿‡ Web éƒ¨ç½²æè¿°ç¬¦ï¼ˆweb.xmlï¼‰ä¸­çš„ XML æ ‡ç­¾æ¥å£°æ˜ï¼Œç„¶åæ˜ å°„åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºçš„éƒ¨ç½²æè¿°ç¬¦ä¸­çš„ Servlet åç§°æˆ– URL æ¨¡å¼ã€‚</p>
<p>å½“ Web å®¹å™¨å¯åŠ¨ Web åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šä¸ºæ‚¨åœ¨éƒ¨ç½²æè¿°ç¬¦ä¸­å£°æ˜çš„æ¯ä¸€ä¸ªè¿‡æ»¤å™¨åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>Filterçš„æ‰§è¡Œé¡ºåºä¸åœ¨web.xmlé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®é¡ºåºä¸€è‡´ï¼Œä¸€èˆ¬æŠŠFilteré…ç½®åœ¨æ‰€æœ‰çš„Servletä¹‹å‰ã€‚</p>
<h3 id="ğŸServlet-è¿‡æ»¤å™¨æ–¹æ³•"><a href="#ğŸServlet-è¿‡æ»¤å™¨æ–¹æ³•" class="headerlink" title="ğŸServlet è¿‡æ»¤å™¨æ–¹æ³•"></a>ğŸServlet è¿‡æ»¤å™¨æ–¹æ³•</h3><p>è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªå®ç°äº† javax.servlet.Filter æ¥å£çš„ Java ç±»ã€‚javax.servlet.Filter æ¥å£å®šä¹‰äº†ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">æ–¹æ³• &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public void doFilter (ServletRequest, ServletResponse, FilterChain)</strong> è¯¥æ–¹æ³•å®Œæˆå®é™…çš„è¿‡æ»¤æ“ä½œï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚æ–¹æ³•ä¸è¿‡æ»¤å™¨è®¾ç½®åŒ¹é…çš„URLæ—¶ï¼ŒServletå®¹å™¨å°†å…ˆè°ƒç”¨è¿‡æ»¤å™¨çš„doFilteræ–¹æ³•ã€‚FilterChainç”¨æˆ·è®¿é—®åç»­è¿‡æ»¤å™¨ã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public void init(FilterConfig filterConfig)</strong> web åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œweb æœåŠ¡å™¨å°†åˆ›å»ºFilter çš„å®ä¾‹å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å…¶initæ–¹æ³•ï¼Œè¯»å–web.xmlé…ç½®ï¼Œå®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–åŠŸèƒ½ï¼Œä»è€Œä¸ºåç»­çš„ç”¨æˆ·è¯·æ±‚ä½œå¥½æ‹¦æˆªçš„å‡†å¤‡å·¥ä½œï¼ˆfilterå¯¹è±¡åªä¼šåˆ›å»ºä¸€æ¬¡ï¼Œinitæ–¹æ³•ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚å¼€å‘äººå‘˜é€šè¿‡initæ–¹æ³•çš„å‚æ•°ï¼Œå¯è·å¾—ä»£è¡¨å½“å‰filteré…ç½®ä¿¡æ¯çš„FilterConfigå¯¹è±¡ã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public void destroy()</strong> Servletå®¹å™¨åœ¨é”€æ¯è¿‡æ»¤å™¨å®ä¾‹å‰è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­é‡Šæ”¾Servletè¿‡æ»¤å™¨å ç”¨çš„èµ„æºã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸFilterConfig-ä½¿ç”¨"><a href="#ğŸFilterConfig-ä½¿ç”¨" class="headerlink" title="ğŸFilterConfig ä½¿ç”¨"></a>ğŸFilterConfig ä½¿ç”¨</h3><p>Filter çš„ init æ–¹æ³•ä¸­æä¾›äº†ä¸€ä¸ª FilterConfig å¯¹è±¡ã€‚</p>
<p>å¦‚ web.xml æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;LogFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-<span class="class"><span class="keyword">class</span>&gt;<span class="title">com</span>.<span class="title">runoob</span>.<span class="title">test</span>.<span class="title">LogFilter</span>&lt;/<span class="title">filter</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">init</span>-<span class="title">param</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">param</span>-<span class="title">name</span>&gt;<span class="title">Site</span>&lt;/<span class="title">param</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">param</span>-<span class="title">value</span>&gt;äº‘æ¾ˆ&lt;/<span class="title">param</span>-<span class="title">value</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">init</span>-<span class="title">param</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">filter</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<p>åœ¨ init æ–¹æ³•ä½¿ç”¨ FilterConfig å¯¹è±¡è·å–å‚æ•°ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">    <span class="comment">// è·å–åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">    String site = config.getInitParameter(<span class="string">"Site"</span>); </span><br><span class="line">    <span class="comment">// è¾“å‡ºåˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">    System.out.println(<span class="string">"ç½‘ç«™åç§°: "</span> + site); </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸServlet-è¿‡æ»¤å™¨å®ä¾‹"><a href="#ğŸServlet-è¿‡æ»¤å™¨å®ä¾‹" class="headerlink" title="ğŸServlet è¿‡æ»¤å™¨å®ä¾‹"></a>ğŸServlet è¿‡æ»¤å™¨å®ä¾‹</h3><p>ä»¥ä¸‹æ˜¯ Servlet è¿‡æ»¤å™¨çš„å®ä¾‹ï¼Œå°†è¾“å‡ºç½‘ç«™åç§°å’Œåœ°å€ã€‚æœ¬å®ä¾‹è®©æ‚¨å¯¹ Servlet è¿‡æ»¤å™¨æœ‰åŸºæœ¬çš„äº†è§£ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ¦‚å¿µç¼–å†™æ›´å¤æ‚çš„è¿‡æ»¤å™¨åº”ç”¨ç¨‹åºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">        <span class="comment">// è·å–åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">        String site = config.getInitParameter(<span class="string">"Site"</span>); </span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾“å‡ºåˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">        System.out.println(<span class="string">"ç½‘ç«™åç§°: "</span> + site); </span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> java.io.IOException, ServletException </span>{</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾“å‡ºç«™ç‚¹åç§°</span></span><br><span class="line">        System.out.println(<span class="string">"ç«™ç‚¹ç½‘å€ï¼šhttp://liudufu.github.io"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŠŠè¯·æ±‚ä¼ å›è¿‡æ»¤é“¾</span></span><br><span class="line">        chain.doFilter(request,response);</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">( )</span></span>{</span><br><span class="line">        <span class="comment">/* åœ¨ Filter å®ä¾‹è¢« Web å®¹å™¨ä»æœåŠ¡ç§»é™¤ä¹‹å‰è°ƒç”¨ */</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™è¾¹ä½¿ç”¨å‰æ–‡æåˆ°çš„ DisplayHeader.java ä¸ºä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/DisplayHeader"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DisplayHeader</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"HTTP Header è¯·æ±‚å®ä¾‹ - äº‘æ¾ˆå®ä¾‹"</span>;</span><br><span class="line">        String docType =</span><br><span class="line">            <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">            out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;meta charset=\"utf-8\"&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;table width=\"100%\" border=\"1\" align=\"center\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;tr bgcolor=\"#949494\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;th&gt;Header åç§°&lt;/th&gt;&lt;th&gt;Header å€¼&lt;/th&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;/tr&gt;\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"rawtypes"</span>)</span><br><span class="line">		Enumeration headerNames = request.getHeaderNames();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(headerNames.hasMoreElements()) {</span><br><span class="line">            String paramName = (String)headerNames.nextElement();</span><br><span class="line">            out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">            String paramValue = request.getHeader(paramName);</span><br><span class="line">            out.println(<span class="string">"&lt;td&gt; "</span> + paramValue + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span>);</span><br><span class="line">        }</span><br><span class="line">        out.println(<span class="string">"&lt;/table&gt;\n&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸWeb-xml-ä¸­çš„-Servlet-è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet-Filter-Mappingï¼‰"><a href="#ğŸWeb-xml-ä¸­çš„-Servlet-è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet-Filter-Mappingï¼‰" class="headerlink" title="ğŸWeb.xml ä¸­çš„ Servlet è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet Filter Mappingï¼‰"></a>ğŸWeb.xml ä¸­çš„ Servlet è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet Filter Mappingï¼‰</h3><p>å®šä¹‰è¿‡æ»¤å™¨ï¼Œç„¶åæ˜ å°„åˆ°ä¸€ä¸ª URL æˆ– Servletï¼Œè¿™ä¸å®šä¹‰ Servletï¼Œç„¶åæ˜ å°„åˆ°ä¸€ä¸ª URL æ¨¡å¼æ–¹å¼å¤§è‡´ç›¸åŒã€‚åœ¨éƒ¨ç½²æè¿°ç¬¦æ–‡ä»¶ <strong>web.xml</strong> ä¸­ä¸º filter æ ‡ç­¾åˆ›å»ºä¸‹é¢çš„æ¡ç›®ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.runoob.test.LogFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>Site<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>äº‘æ¾ˆ<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayHeader<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">  <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.DisplayHeader<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayHeader<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">  <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/DisplayHeader<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šè¿°è¿‡æ»¤å™¨é€‚ç”¨äºæ‰€æœ‰çš„ Servletï¼Œå› ä¸ºæˆ‘ä»¬åœ¨é…ç½®ä¸­æŒ‡å®š <strong>/*</strong> ã€‚å¦‚æœæ‚¨åªæƒ³åœ¨å°‘æ•°çš„ Servlet ä¸Šåº”ç”¨è¿‡æ»¤å™¨ï¼Œæ‚¨å¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„ Servlet è·¯å¾„ã€‚</p>
<p>ç°åœ¨è¯•ç€ä»¥å¸¸ç”¨çš„æ–¹å¼è°ƒç”¨ä»»ä½• Servletï¼Œæ‚¨å°†ä¼šçœ‹åˆ°åœ¨ Web æœåŠ¡å™¨ä¸­ç”Ÿæˆçš„æ—¥å¿—ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ Log4J è®°å½•å™¨æ¥æŠŠä¸Šé¢çš„æ—¥å¿—è®°å½•åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è®¿é—®è¿™ä¸ªå®ä¾‹åœ°å€ <strong><a href="http://localhost:8080/TomcatTest/DisplayHeader" target="_blank" rel="noopener">http://localhost:8080/TomcatTest/DisplayHeader</a></strong>, ç„¶ååœ¨æ§åˆ¶å°çœ‹ä¸‹è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><a href="https://imgchr.com/i/0UGZTg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/06/0UGZTg.png" alt="0UGZTg.png"></a></p>
<h3 id="ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨"><a href="#ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨" class="headerlink" title="ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨"></a>ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨</h3><p>Web åº”ç”¨ç¨‹åºå¯ä»¥æ ¹æ®ç‰¹å®šçš„ç›®çš„å®šä¹‰è‹¥å¹²ä¸ªä¸åŒçš„è¿‡æ»¤å™¨ã€‚å‡è®¾æ‚¨å®šä¹‰äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ <em>AuthenFilter</em> å’Œ <em>LogFilter</em>ã€‚æ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹æ‰€è¿°çš„ä¸åŒçš„æ˜ å°„ï¼Œå…¶ä½™çš„å¤„ç†ä¸ä¸Šè¿°æ‰€è®²è§£çš„å¤§è‡´ç›¸åŒï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.runoob.test.LogFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>test-param<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>Initialization Paramter<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AuthenFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.runoob.test.AuthenFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>test-param<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>Initialization Paramter<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AuthenFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº"><a href="#ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº" class="headerlink" title="ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº"></a>ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº</h3><p>web.xml ä¸­çš„ filter-mapping å…ƒç´ çš„é¡ºåºå†³å®šäº† Web å®¹å™¨åº”ç”¨è¿‡æ»¤å™¨åˆ° Servlet çš„é¡ºåºã€‚è‹¥è¦åè½¬è¿‡æ»¤å™¨çš„é¡ºåºï¼Œæ‚¨åªéœ€è¦åœ¨ web.xml æ–‡ä»¶ä¸­åè½¬ filter-mapping å…ƒç´ å³å¯ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸Šé¢çš„å®ä¾‹å°†å…ˆåº”ç”¨ LogFilterï¼Œç„¶åå†åº”ç”¨ AuthenFilterï¼Œä½†æ˜¯ä¸‹é¢çš„å®ä¾‹å°†é¢ å€’è¿™ä¸ªé¡ºåºï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AuthenFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LogFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="ğŸweb-xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜"><a href="#ğŸweb-xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜" class="headerlink" title="ğŸweb.xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜"></a>ğŸweb.xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜</h3><ul>
<li><code>&lt;filter&gt;</code>æŒ‡å®šä¸€ä¸ªè¿‡æ»¤å™¨ã€‚<ul>
<li><code>&lt;filter-name&gt;</code>ç”¨äºä¸ºè¿‡æ»¤å™¨æŒ‡å®šä¸€ä¸ªåå­—ï¼Œè¯¥å…ƒç´ çš„å†…å®¹ä¸èƒ½ä¸ºç©ºã€‚</li>
<li><code>&lt;filter-class&gt;</code>å…ƒç´ ç”¨äºæŒ‡å®šè¿‡æ»¤å™¨çš„å®Œæ•´çš„é™å®šç±»åã€‚</li>
<li><code>&lt;init-param&gt;</code>å…ƒç´ ç”¨äºä¸ºè¿‡æ»¤å™¨æŒ‡å®šåˆå§‹åŒ–å‚æ•°ï¼Œå®ƒçš„å­å…ƒç´ <code>&lt;param-name&gt;</code>æŒ‡å®šå‚æ•°çš„åå­—ï¼Œ<code>&lt;param-value&gt;</code>æŒ‡å®šå‚æ•°çš„å€¼ã€‚</li>
<li>åœ¨è¿‡æ»¤å™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>FilterConfig</code>æ¥å£å¯¹è±¡æ¥è®¿é—®åˆå§‹åŒ–å‚æ•°ã€‚</li>
</ul>
</li>
<li><code>&lt;filter-mapping&gt;</code>å…ƒç´ ç”¨äºè®¾ç½®ä¸€ä¸ª Filter æ‰€è´Ÿè´£æ‹¦æˆªçš„èµ„æºã€‚ä¸€ä¸ªFilteræ‹¦æˆªçš„èµ„æºå¯é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æŒ‡å®šï¼šServlet åç§°å’Œèµ„æºè®¿é—®çš„è¯·æ±‚è·¯å¾„<ul>
<li><code>&lt;filter-name&gt;</code>å­å…ƒç´ ç”¨äºè®¾ç½®filterçš„æ³¨å†Œåç§°ã€‚è¯¥å€¼å¿…é¡»æ˜¯åœ¨<code>&lt;filter&gt;</code>å…ƒç´ ä¸­å£°æ˜è¿‡çš„è¿‡æ»¤å™¨çš„åå­—</li>
<li><code>&lt;url-pattern&gt;</code>è®¾ç½® filter æ‰€æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„(è¿‡æ»¤å™¨å…³è”çš„URLæ ·å¼)</li>
</ul>
</li>
<li><code>&lt;servlet-name&gt;</code>æŒ‡å®šè¿‡æ»¤å™¨æ‰€æ‹¦æˆªçš„Servletåç§°ã€‚</li>
<li><code>&lt;dispatcher&gt;</code>æŒ‡å®šè¿‡æ»¤å™¨æ‰€æ‹¦æˆªçš„èµ„æºè¢« Servlet å®¹å™¨è°ƒç”¨çš„æ–¹å¼ï¼Œå¯ä»¥æ˜¯<code>REQUEST</code>,<code>INCLUDE</code>,<code>FORWARD</code>å’Œ<code>ERROR</code>ä¹‹ä¸€ï¼Œé»˜è®¤<code>REQUEST</code>ã€‚ç”¨æˆ·å¯ä»¥è®¾ç½®å¤šä¸ª<code>&lt;dispatcher&gt;</code>å­å…ƒç´ ç”¨æ¥æŒ‡å®š Filter å¯¹èµ„æºçš„å¤šç§è°ƒç”¨æ–¹å¼è¿›è¡Œæ‹¦æˆªã€‚</li>
<li><code>&lt;dispatcher&gt;</code>å­å…ƒç´ å¯ä»¥è®¾ç½®çš„å€¼åŠå…¶æ„ä¹‰<ul>
<li><code>REQUEST</code>ï¼šå½“ç”¨æˆ·ç›´æ¥è®¿é—®é¡µé¢æ—¶ï¼ŒWebå®¹å™¨å°†ä¼šè°ƒç”¨è¿‡æ»¤å™¨ã€‚å¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡<code>RequestDispatcher</code>çš„include()æˆ–forward()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°±ä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
<li><code>INCLUDE</code>ï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡RequestDispatcherçš„include()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥è¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
<li><code>FORWARD</code>ï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡RequestDispatcherçš„forward()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¯¥è¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
<li><code>ERROR</code>ï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡å£°æ˜å¼å¼‚å¸¸å¤„ç†æœºåˆ¶è°ƒç”¨æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
</ul>
</li>
</ul>
<h2 id="ğŸŒ¸Servlet-å¼‚å¸¸å¤„ç†"><a href="#ğŸŒ¸Servlet-å¼‚å¸¸å¤„ç†" class="headerlink" title="ğŸŒ¸Servlet å¼‚å¸¸å¤„ç†"></a>ğŸŒ¸Servlet å¼‚å¸¸å¤„ç†</h2><p>å½“ä¸€ä¸ª Servlet æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸æ—¶ï¼ŒWeb å®¹å™¨åœ¨ä½¿ç”¨äº† exception-type å…ƒç´ çš„ <strong>web.xml</strong> ä¸­æœç´¢ä¸æŠ›å‡ºå¼‚å¸¸ç±»å‹ç›¸åŒ¹é…çš„é…ç½®ã€‚</p>
<p>æ‚¨å¿…é¡»åœ¨ web.xml ä¸­ä½¿ç”¨ <strong>error-page</strong> å…ƒç´ æ¥æŒ‡å®šå¯¹ç‰¹å®š<strong>å¼‚å¸¸</strong> æˆ– HTTP <strong>çŠ¶æ€ç </strong> ä½œå‡ºç›¸åº”çš„ Servlet è°ƒç”¨ã€‚</p>
<h3 id="ğŸweb-xml-é…ç½®"><a href="#ğŸweb-xml-é…ç½®" class="headerlink" title="ğŸweb.xml é…ç½®"></a>ğŸweb.xml é…ç½®</h3><p>å‡è®¾ï¼Œæœ‰ä¸€ä¸ª <em>ErrorHandler</em> çš„ Servlet åœ¨ä»»ä½•å·²å®šä¹‰çš„å¼‚å¸¸æˆ–é”™è¯¯å‡ºç°æ—¶è¢«è°ƒç”¨ã€‚ä»¥ä¸‹å°†æ˜¯åœ¨ web.xml ä¸­åˆ›å»ºçš„é¡¹ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- servlet å®šä¹‰ --&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;ErrorHandler&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-<span class="class"><span class="keyword">class</span>&gt;<span class="title">ErrorHandler</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class">&lt;!-- <span class="title">servlet</span> æ˜ å°„ --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">ErrorHandler</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;!-- <span class="title">error</span>-<span class="title">code</span> ç›¸å…³çš„é”™è¯¯é¡µé¢ --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">error</span>-<span class="title">code</span>&gt;404&lt;/<span class="title">error</span>-<span class="title">code</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">location</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">location</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">error</span>-<span class="title">code</span>&gt;403&lt;/<span class="title">error</span>-<span class="title">code</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">location</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">location</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;!-- <span class="title">exception</span>-<span class="title">type</span> ç›¸å…³çš„é”™è¯¯é¡µé¢ --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">exception</span>-<span class="title">type</span>&gt;</span></span><br><span class="line"><span class="class">          <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">ServletException</span></span></span><br><span class="line"><span class="class">    &lt;/<span class="title">exception</span>-<span class="title">type</span> &gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">location</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">location</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">exception</span>-<span class="title">type</span>&gt;<span class="title">java</span>.<span class="title">io</span>.<span class="title">IOException</span>&lt;/<span class="title">exception</span>-<span class="title">type</span> &gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">location</span>&gt;/<span class="title">ErrorHandler</span>&lt;/<span class="title">location</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">error</span>-<span class="title">page</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœæ‚¨æƒ³å¯¹æ‰€æœ‰çš„å¼‚å¸¸æœ‰ä¸€ä¸ªé€šç”¨çš„é”™è¯¯å¤„ç†ç¨‹åºï¼Œé‚£ä¹ˆåº”è¯¥å®šä¹‰ä¸‹é¢çš„ error-pageï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªå¼‚å¸¸å®šä¹‰å•ç‹¬çš„ error-page å…ƒç´ ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span>java.lang.Throwable<span class="tag">&lt;/<span class="name">exception-type</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸‹æ˜¯å…³äºä¸Šé¢çš„ web.xml å¼‚å¸¸å¤„ç†è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<ul>
<li>Servlet ErrorHandler ä¸å…¶ä»–çš„ Servlet çš„å®šä¹‰æ–¹å¼ä¸€æ ·ï¼Œä¸”åœ¨ web.xml ä¸­è¿›è¡Œé…ç½®ã€‚</li>
<li>å¦‚æœæœ‰é”™è¯¯çŠ¶æ€ä»£ç å‡ºç°ï¼Œä¸ç®¡ä¸º 404ï¼ˆNot Found æœªæ‰¾åˆ°ï¼‰æˆ– 403ï¼ˆForbidden ç¦æ­¢ï¼‰ï¼Œåˆ™ä¼šè°ƒç”¨ ErrorHandler çš„ Servletã€‚</li>
<li>å¦‚æœ Web åº”ç”¨ç¨‹åºæŠ›å‡º <em>ServletException</em> æˆ– <em>IOException</em>ï¼Œé‚£ä¹ˆ Web å®¹å™¨ä¼šè°ƒç”¨ ErrorHandler çš„ Servletã€‚</li>
<li>æ‚¨å¯ä»¥å®šä¹‰ä¸åŒçš„é”™è¯¯å¤„ç†ç¨‹åºæ¥å¤„ç†ä¸åŒç±»å‹çš„é”™è¯¯æˆ–å¼‚å¸¸ã€‚ä¸Šé¢çš„å®ä¾‹æ˜¯éå¸¸é€šç”¨çš„ï¼Œå¸Œæœ›æ‚¨èƒ½é€šè¿‡å®ä¾‹ç†è§£åŸºæœ¬çš„æ¦‚å¿µã€‚</li>
</ul>
<h3 id="ğŸè¯·æ±‚å±æ€§-é”™è¯¯-å¼‚å¸¸"><a href="#ğŸè¯·æ±‚å±æ€§-é”™è¯¯-å¼‚å¸¸" class="headerlink" title="ğŸè¯·æ±‚å±æ€§ - é”™è¯¯/å¼‚å¸¸"></a>ğŸè¯·æ±‚å±æ€§ - é”™è¯¯/å¼‚å¸¸</h3><p>ä»¥ä¸‹æ˜¯é”™è¯¯å¤„ç†çš„ Servlet å¯ä»¥è®¿é—®çš„è¯·æ±‚å±æ€§åˆ—è¡¨ï¼Œç”¨æ¥åˆ†æé”™è¯¯/å¼‚å¸¸çš„æ€§è´¨ã€‚</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">å±æ€§ &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>javax.servlet.error.status_code</strong> è¯¥å±æ€§ç»™å‡ºçŠ¶æ€ç ï¼ŒçŠ¶æ€ç å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.Integer æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>javax.servlet.error.exception_type</strong> è¯¥å±æ€§ç»™å‡ºå¼‚å¸¸ç±»å‹çš„ä¿¡æ¯ï¼Œå¼‚å¸¸ç±»å‹å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.Class æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>javax.servlet.error.message</strong> è¯¥å±æ€§ç»™å‡ºç¡®åˆ‡é”™è¯¯æ¶ˆæ¯çš„ä¿¡æ¯ï¼Œä¿¡æ¯å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.String æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>javax.servlet.error.request_uri</strong> è¯¥å±æ€§ç»™å‡ºæœ‰å…³ URL è°ƒç”¨ Servlet çš„ä¿¡æ¯ï¼Œä¿¡æ¯å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.String æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>javax.servlet.error.exception</strong> è¯¥å±æ€§ç»™å‡ºå¼‚å¸¸äº§ç”Ÿçš„ä¿¡æ¯ï¼Œä¿¡æ¯å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.Throwable æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>javax.servlet.error.servlet_name</strong> è¯¥å±æ€§ç»™å‡º Servlet çš„åç§°ï¼Œåç§°å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.String æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸServlet-é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹"><a href="#ğŸServlet-é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹" class="headerlink" title="ğŸServlet é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹"></a>ğŸServlet é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹</h3><p>ä»¥ä¸‹æ˜¯ Servlet å®ä¾‹ï¼Œå°†åº”å¯¹ä»»ä½•æ‚¨æ‰€å®šä¹‰çš„é”™è¯¯æˆ–å¼‚å¸¸å‘ç”Ÿæ—¶çš„é”™è¯¯å¤„ç†ç¨‹åºã€‚</p>
<p>æœ¬å®ä¾‹è®©æ‚¨å¯¹ Servlet ä¸­çš„å¼‚å¸¸å¤„ç†æœ‰åŸºæœ¬çš„äº†è§£ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ¦‚å¿µç¼–å†™æ›´å¤æ‚çš„å¼‚å¸¸å¤„ç†åº”ç”¨ç¨‹åºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="comment">//import java.util.*;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±• HttpServlet ç±»</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorHandler</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      Throwable throwable = (Throwable)</span><br><span class="line">      request.getAttribute(<span class="string">"javax.servlet.error.exception"</span>);</span><br><span class="line">      Integer statusCode = (Integer)</span><br><span class="line">      request.getAttribute(<span class="string">"javax.servlet.error.status_code"</span>);</span><br><span class="line">      String servletName = (String)</span><br><span class="line">      request.getAttribute(<span class="string">"javax.servlet.error.servlet_name"</span>);</span><br><span class="line">      <span class="keyword">if</span> (servletName == <span class="keyword">null</span>){</span><br><span class="line">          servletName = <span class="string">"Unknown"</span>;</span><br><span class="line">      }</span><br><span class="line">      String requestUri = (String)</span><br><span class="line">      request.getAttribute(<span class="string">"javax.servlet.error.request_uri"</span>);</span><br><span class="line">      <span class="keyword">if</span> (requestUri == <span class="keyword">null</span>){</span><br><span class="line">          requestUri = <span class="string">"Unknown"</span>;</span><br><span class="line">      }</span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">  </span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line">      String title = <span class="string">"äº‘æ¾ˆError/Exception ä¿¡æ¯"</span>;</span><br><span class="line">     </span><br><span class="line">      String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">          <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">           <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">           <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span>);</span><br><span class="line">         out.println(<span class="string">"&lt;h1&gt;äº‘æ¾ˆå¼‚å¸¸ä¿¡æ¯å®ä¾‹æ¼”ç¤º&lt;/h1&gt;"</span>);</span><br><span class="line">         <span class="keyword">if</span> (throwable == <span class="keyword">null</span> &amp;&amp; statusCode == <span class="keyword">null</span>){</span><br><span class="line">            out.println(<span class="string">"&lt;h2&gt;é”™è¯¯ä¿¡æ¯ä¸¢å¤±&lt;/h2&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"è¯·è¿”å› &lt;a href=\""</span> + </span><br><span class="line">          response.encodeURL(<span class="string">"http://localhost:8080/"</span>) + </span><br><span class="line">              <span class="string">"\"&gt;ä¸»é¡µ&lt;/a&gt;ã€‚"</span>);</span><br><span class="line">         }<span class="keyword">else</span> <span class="keyword">if</span> (statusCode != <span class="keyword">null</span>) {</span><br><span class="line">            out.println(<span class="string">"é”™è¯¯ä»£ç  : "</span> + statusCode);</span><br><span class="line">      }<span class="keyword">else</span>{</span><br><span class="line">             out.println(<span class="string">"&lt;h2&gt;é”™è¯¯ä¿¡æ¯&lt;/h2&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"Servlet Name : "</span> + servletName + </span><br><span class="line">                            <span class="string">"&lt;/br&gt;&lt;/br&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"å¼‚å¸¸ç±»å‹ : "</span> + </span><br><span class="line">                            throwable.getClass( ).getName( ) + </span><br><span class="line">                            <span class="string">"&lt;/br&gt;&lt;/br&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"è¯·æ±‚ URI: "</span> + requestUri + </span><br><span class="line">                            <span class="string">"&lt;br&gt;&lt;br&gt;"</span>);</span><br><span class="line">            out.println(<span class="string">"å¼‚å¸¸ä¿¡æ¯: "</span> + </span><br><span class="line">                                throwable.getMessage( ));</span><br><span class="line">         }</span><br><span class="line">         out.println(<span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">         out.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">     <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">      doGet(request, response);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥é€šå¸¸çš„æ–¹å¼ç¼–è¯‘ <strong>ErrorHandler.java</strong>ï¼ŒæŠŠæ‚¨çš„ç±»æ–‡ä»¶æ”¾å…¥<tomcat-installation-directory>/webapps/ROOT/WEB-INF/classes ä¸­ã€‚</tomcat-installation-directory></p>
<p>è®©æˆ‘ä»¬åœ¨ web.xml æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®æ¥å¤„ç†å¼‚å¸¸ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ErrorHandler<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.ErrorHandler<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- servlet mappings --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ErrorHandler<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/ErrorHandler<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/TomcatTest/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span>java.lang.Throwable<span class="tag">&lt;/<span class="name">exception-type</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨ï¼Œå°è¯•ä½¿ç”¨ä¸€ä¸ªä¼šäº§ç”Ÿå¼‚å¸¸çš„ Servletï¼Œæˆ–è€…è¾“å…¥ä¸€ä¸ªé”™è¯¯çš„ URLï¼Œè¿™å°†è§¦å‘ Web å®¹å™¨è°ƒç”¨ <strong>ErrorHandler</strong> çš„ Servletï¼Œå¹¶æ˜¾ç¤ºé€‚å½“çš„æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨è¾“å…¥äº†ä¸€ä¸ªé”™è¯¯çš„ URLï¼ˆå¦‚ï¼š<a href="http://localhost:8080/TomcatTest/UnKonwPageï¼‰ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¾ç¤ºä¸‹é¢çš„ç»“æœï¼š" target="_blank" rel="noopener">http://localhost:8080/TomcatTest/UnKonwPageï¼‰ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¾ç¤ºä¸‹é¢çš„ç»“æœï¼š</a></p>
<p><a href="https://imgchr.com/i/0UNCE8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/06/0UNCE8.png" alt="0UNCE8.png"></a></p>
<hr>
<h2 id="ğŸŒ¸Servlet-Cookie-å¤„ç†"><a href="#ğŸŒ¸Servlet-Cookie-å¤„ç†" class="headerlink" title="ğŸŒ¸Servlet  Cookie å¤„ç†"></a>ğŸŒ¸Servlet  Cookie å¤„ç†</h2><p>Cookie æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯è®¡ç®—æœºä¸Šçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶ä¿ç•™äº†å„ç§è·Ÿè¸ªä¿¡æ¯ã€‚Java Servlet æ˜¾ç„¶æ”¯æŒ HTTP Cookieã€‚</p>
<p>è¯†åˆ«è¿”å›ç”¨æˆ·åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>æœåŠ¡å™¨è„šæœ¬å‘æµè§ˆå™¨å‘é€ä¸€ç»„ Cookieã€‚ä¾‹å¦‚ï¼šå§“åã€å¹´é¾„æˆ–è¯†åˆ«å·ç ç­‰ã€‚</li>
<li>æµè§ˆå™¨å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šï¼Œä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚</li>
<li>å½“ä¸‹ä¸€æ¬¡æµè§ˆå™¨å‘ Web æœåŠ¡å™¨å‘é€ä»»ä½•è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šæŠŠè¿™äº› Cookie ä¿¡æ¯å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°†ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥è¯†åˆ«ç”¨æˆ·ã€‚</li>
</ul>
<p>æœ¬ç« å°†å‘æ‚¨è®²è§£å¦‚ä½•è®¾ç½®æˆ–é‡ç½® Cookieï¼Œå¦‚ä½•è®¿é—®å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•å°†å®ƒä»¬åˆ é™¤ã€‚</p>
<p>Servlet Cookie å¤„ç†éœ€è¦å¯¹ä¸­æ–‡è¿›è¡Œç¼–ç ä¸è§£ç ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String   str   =   java.net.URLEncoder.encode(<span class="string">"ä¸­æ–‡"</span>ï¼Œ<span class="string">"UTF-8"</span>);            <span class="comment">//ç¼–ç </span></span><br><span class="line">String   str   =   java.net.URLDecoder.decode(<span class="string">"ç¼–ç åçš„å­—ç¬¦ä¸²"</span>,<span class="string">"UTF-8"</span>);   <span class="comment">// è§£ç </span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸCookie-å‰–æ"><a href="#ğŸCookie-å‰–æ" class="headerlink" title="ğŸCookie å‰–æ"></a>ğŸCookie å‰–æ</h3><p>Cookie é€šå¸¸è®¾ç½®åœ¨ HTTP å¤´ä¿¡æ¯ä¸­ï¼ˆè™½ç„¶ JavaScript ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸Šè®¾ç½®ä¸€ä¸ª Cookieï¼‰ã€‚è®¾ç½® Cookie çš„ Servlet ä¼šå‘é€å¦‚ä¸‹çš„å¤´ä¿¡æ¯ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Date: Fri, <span class="number">04</span> Feb <span class="number">2000</span> <span class="number">21</span>:<span class="number">03</span>:<span class="number">38</span> GMT</span><br><span class="line">Server: Apache/<span class="number">1.3</span><span class="number">.9</span> (UNIX) PHP/<span class="number">4.0</span>b3</span><br><span class="line">Set-Cookie: name=xyz; expires=Friday, <span class="number">04</span>-Feb-<span class="number">07</span> <span class="number">22</span>:<span class="number">03</span>:<span class="number">38</span> GMT; </span><br><span class="line">                 path=/; domain=runoob.com</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: text/html</span><br></pre></td></tr></tbody></table></figure>

<p>æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼ŒSet-Cookie å¤´åŒ…å«äº†ä¸€ä¸ªåç§°å€¼å¯¹ã€ä¸€ä¸ª GMT æ—¥æœŸã€ä¸€ä¸ªè·¯å¾„å’Œä¸€ä¸ªåŸŸã€‚åç§°å’Œå€¼ä¼šè¢« URL ç¼–ç ã€‚expires å­—æ®µæ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨ç»™å®šçš„æ—¶é—´å’Œæ—¥æœŸä¹‹åâ€å¿˜è®°â€è¯¥ Cookieã€‚</p>
<p>å¦‚æœæµè§ˆå™¨è¢«é…ç½®ä¸ºå­˜å‚¨ Cookieï¼Œå®ƒå°†ä¼šä¿ç•™æ­¤ä¿¡æ¯ç›´åˆ°åˆ°æœŸæ—¥æœŸã€‚å¦‚æœç”¨æˆ·çš„æµè§ˆå™¨æŒ‡å‘ä»»ä½•åŒ¹é…è¯¥ Cookie çš„è·¯å¾„å’ŒåŸŸçš„é¡µé¢ï¼Œå®ƒä¼šé‡æ–°å‘é€ Cookie åˆ°æœåŠ¡å™¨ã€‚æµè§ˆå™¨çš„å¤´ä¿¡æ¯å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET / HTTP/<span class="number">1.0</span></span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">User-Agent: Mozilla/<span class="number">4.6</span> (X11; I; Linux <span class="number">2.2</span><span class="number">.6</span><span class="number">-15</span>apmac ppc)</span><br><span class="line">Host: zink.demon.co.uk:<span class="number">1126</span></span><br><span class="line">Accept: image/gif, *<span class="comment">/*</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip</span></span><br><span class="line"><span class="comment">Accept-Language: en</span></span><br><span class="line"><span class="comment">Accept-Charset: iso-8859-1,*,utf-8</span></span><br><span class="line"><span class="comment">Cookie: name=xyz</span></span><br></pre></td></tr></tbody></table></figure>

<p>Servlet å°±èƒ½å¤Ÿé€šè¿‡è¯·æ±‚æ–¹æ³• <em>request.getCookies()</em> è®¿é—® Cookieï¼Œè¯¥æ–¹æ³•å°†è¿”å›ä¸€ä¸ª <em>Cookie</em> å¯¹è±¡çš„æ•°ç»„ã€‚</p>
<h3 id="ğŸServlet-Cookie-æ–¹æ³•"><a href="#ğŸServlet-Cookie-æ–¹æ³•" class="headerlink" title="ğŸServlet Cookie æ–¹æ³•"></a>ğŸServlet Cookie æ–¹æ³•</h3><p>ä»¥ä¸‹æ˜¯åœ¨ Servlet ä¸­æ“ä½œ Cookie æ—¶å¯ä½¿ç”¨çš„æœ‰ç”¨çš„æ–¹æ³•åˆ—è¡¨ã€‚</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">æ–¹æ³• &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public void setDomain(String pattern)</strong> è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ runoob.comã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public String getDomain()</strong> è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ runoob.comã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public void setMaxAge(int expiry)</strong> è¯¥æ–¹æ³•è®¾ç½® cookie è¿‡æœŸçš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚å¦‚æœä¸è¿™æ ·è®¾ç½®ï¼Œcookie åªä¼šåœ¨å½“å‰ session ä¼šè¯ä¸­æŒç»­æœ‰æ•ˆã€‚</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>public int getMaxAge()</strong> è¯¥æ–¹æ³•è¿”å› cookie çš„æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ-1 è¡¨ç¤º cookie å°†æŒç»­ä¸‹å»ï¼Œç›´åˆ°æµè§ˆå™¨å…³é—­ã€‚</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>public String getName()</strong> è¯¥æ–¹æ³•è¿”å› cookie çš„åç§°ã€‚åç§°åœ¨åˆ›å»ºåä¸èƒ½æ”¹å˜ã€‚</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>public void setValue(String newValue)</strong> è¯¥æ–¹æ³•è®¾ç½®ä¸ cookie å…³è”çš„å€¼ã€‚</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>public String getValue()</strong> è¯¥æ–¹æ³•è·å–ä¸ cookie å…³è”çš„å€¼ã€‚</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>public void setPath(String uri)</strong> è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„è·¯å¾„ã€‚å¦‚æœæ‚¨ä¸æŒ‡å®šè·¯å¾„ï¼Œä¸å½“å‰é¡µé¢ç›¸åŒç›®å½•ä¸‹çš„ï¼ˆåŒ…æ‹¬å­ç›®å½•ä¸‹çš„ï¼‰æ‰€æœ‰ URL éƒ½ä¼šè¿”å› cookieã€‚</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>public String getPath()</strong> è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„è·¯å¾„ã€‚</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>public void setSecure(boolean flag)</strong> è¯¥æ–¹æ³•è®¾ç½®å¸ƒå°”å€¼ï¼Œè¡¨ç¤º cookie æ˜¯å¦åº”è¯¥åªåœ¨åŠ å¯†çš„ï¼ˆå³ SSLï¼‰è¿æ¥ä¸Šå‘é€ã€‚</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>public void setComment(String purpose)</strong> è®¾ç½®cookieçš„æ³¨é‡Šã€‚è¯¥æ³¨é‡Šåœ¨æµè§ˆå™¨å‘ç”¨æˆ·å‘ˆç° cookie æ—¶éå¸¸æœ‰ç”¨ã€‚</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>public String getComment()</strong> è·å– cookie çš„æ³¨é‡Šï¼Œå¦‚æœ cookie æ²¡æœ‰æ³¨é‡Šåˆ™è¿”å› nullã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸé€šè¿‡-Servlet-è®¾ç½®-Cookie"><a href="#ğŸé€šè¿‡-Servlet-è®¾ç½®-Cookie" class="headerlink" title="ğŸé€šè¿‡ Servlet è®¾ç½® Cookie"></a>ğŸé€šè¿‡ Servlet è®¾ç½® Cookie</h3><p>é€šè¿‡ Servlet è®¾ç½® Cookie åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<p><strong>(1) åˆ›å»ºä¸€ä¸ª Cookie å¯¹è±¡ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨å¸¦æœ‰ cookie åç§°å’Œ cookie å€¼çš„ Cookie æ„é€ å‡½æ•°ï¼Œcookie åç§°å’Œ cookie å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"key"</span>,<span class="string">"value"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>è¯·è®°ä½ï¼Œæ— è®ºæ˜¯åå­—è¿˜æ˜¯å€¼ï¼Œéƒ½ä¸åº”è¯¥åŒ…å«ç©ºæ ¼æˆ–ä»¥ä¸‹ä»»ä½•å­—ç¬¦ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ ] ( ) = , <span class="string">" / ? @ : ;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>(2) è®¾ç½®æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼š</strong>æ‚¨å¯ä»¥ä½¿ç”¨ setMaxAge æ–¹æ³•æ¥æŒ‡å®š cookie èƒ½å¤Ÿä¿æŒæœ‰æ•ˆçš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚ä¸‹é¢å°†è®¾ç½®ä¸€ä¸ªæœ€é•¿æœ‰æ•ˆæœŸä¸º 24 å°æ—¶çš„ cookieã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>(3) å‘é€ Cookie åˆ° HTTP å“åº”å¤´ï¼š</strong>æ‚¨å¯ä»¥ä½¿ç”¨ <strong>response.addCookie</strong> æ¥æ·»åŠ  HTTP å“åº”å¤´ä¸­çš„ Cookieï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ğŸå®ä¾‹"><a href="#ğŸå®ä¾‹" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><p>è®©æˆ‘ä»¬ä¿®æ”¹æˆ‘ä»¬çš„ <a href="">è¡¨å•æ•°æ®å®ä¾‹</a>ï¼Œä¸ºåå­—å’Œå§“æ°è®¾ç½® Cookieã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class HelloServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/HelloForm"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloForm</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloForm</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// ä¸ºåå­—å’Œå§“æ°åˆ›å»º Cookie      </span></span><br><span class="line">        Cookie name = <span class="keyword">new</span> Cookie(<span class="string">"name"</span>,</span><br><span class="line">                URLEncoder.encode(request.getParameter(<span class="string">"name"</span>), <span class="string">"UTF-8"</span>)); <span class="comment">// ä¸­æ–‡è½¬ç </span></span><br><span class="line">        Cookie url = <span class="keyword">new</span> Cookie(<span class="string">"url"</span>,</span><br><span class="line">                      request.getParameter(<span class="string">"url"</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸ºä¸¤ä¸ª Cookie è®¾ç½®è¿‡æœŸæ—¥æœŸä¸º 24 å°æ—¶å</span></span><br><span class="line">        name.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>); </span><br><span class="line">        url.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>); </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åœ¨å“åº”å¤´ä¸­æ·»åŠ ä¸¤ä¸ª Cookie</span></span><br><span class="line">        response.addCookie( name );</span><br><span class="line">        response.addCookie( url );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"è®¾ç½® Cookie å®ä¾‹"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">                <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;ul&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;ç«™ç‚¹åï¼š&lt;/b&gt;ï¼š"</span></span><br><span class="line">                + request.getParameter(<span class="string">"name"</span>) + <span class="string">"\n&lt;/li&gt;"</span> +</span><br><span class="line">                <span class="string">"  &lt;li&gt;&lt;b&gt;ç«™ç‚¹ URLï¼š&lt;/b&gt;ï¼š"</span></span><br><span class="line">                + request.getParameter(<span class="string">"url"</span>) + <span class="string">"\n&lt;/li&gt;"</span> +</span><br><span class="line">                <span class="string">"&lt;/ul&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç¼–è¯‘ä¸Šé¢çš„ Servlet <strong>HelloForm</strong>ï¼Œå¹¶åœ¨ web.xml æ–‡ä»¶ä¸­åˆ›å»ºé€‚å½“çš„æ¡ç›®:</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloForm<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.HelloForm<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloForm<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/HelloForm<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åå°è¯•ä¸‹é¢çš„ HTML é¡µé¢æ¥è°ƒç”¨ Servletã€‚</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‘æ¾ˆ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/TomcatTest/HelloForm"</span> <span class="attr">method</span>=<span class="string">"GET"</span>&gt;</span></span><br><span class="line">ç«™ç‚¹å ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">ç«™ç‚¹ URLï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"url"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¿å­˜ä¸Šé¢çš„ HTML å†…å®¹åˆ°æ–‡ä»¶ /TomcatTest/test.html ä¸­ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è®¿é—®<a href="http://localhost:8080/TomcatTest/test.htmlï¼Œå¦‚ä¸‹ï¼š" target="_blank" rel="noopener">http://localhost:8080/TomcatTest/test.htmlï¼Œå¦‚ä¸‹ï¼š</a></p>
<p><img src="https://s1.ax1x.com/2020/10/08/007Dl8.png" alt="007Dl8.png"></p>
<p><img src="https://s1.ax1x.com/2020/10/08/007WYq.png" alt="007WYq.png"></p>
<h3 id="ğŸé€šè¿‡-Servlet-è¯»å–-Cookie"><a href="#ğŸé€šè¿‡-Servlet-è¯»å–-Cookie" class="headerlink" title="ğŸé€šè¿‡ Servlet è¯»å– Cookie"></a>ğŸé€šè¿‡ Servlet è¯»å– Cookie</h3><p>è¦è¯»å– Cookieï¼Œæ‚¨éœ€è¦é€šè¿‡è°ƒç”¨ <em>HttpServletRequest</em> çš„ <strong>getCookies( )</strong> æ–¹æ³•åˆ›å»ºä¸€ä¸ª <em>javax.servlet.http.Cookie</em> å¯¹è±¡çš„æ•°ç»„ã€‚ç„¶åå¾ªç¯éå†æ•°ç»„ï¼Œå¹¶ä½¿ç”¨ getName() å’Œ getValue() æ–¹æ³•æ¥è®¿é—®æ¯ä¸ª cookie å’Œå…³è”çš„å€¼ã€‚</p>
<h4 id="ğŸ‚-å®ä¾‹"><a href="#ğŸ‚-å®ä¾‹" class="headerlink" title="ğŸ‚ å®ä¾‹"></a>ğŸ‚ å®ä¾‹</h4><p>è®©æˆ‘ä»¬è¯»å–ä¸Šé¢çš„å®ä¾‹ä¸­è®¾ç½®çš„ Cookie</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class ReadCookies</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/ReadCookies"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadCookies</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReadCookies</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        Cookie cookie = <span class="keyword">null</span>;</span><br><span class="line">        Cookie[] cookies = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// è·å–ä¸è¯¥åŸŸç›¸å…³çš„ Cookie çš„æ•°ç»„</span></span><br><span class="line">        cookies = request.getCookies();</span><br><span class="line">         </span><br><span class="line">         <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">         response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    </span><br><span class="line">         PrintWriter out = response.getWriter();</span><br><span class="line">         String title = <span class="string">"Delete Cookie Example"</span>;</span><br><span class="line">         String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">         out.println(docType +</span><br><span class="line">                   <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                   <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                   <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> );</span><br><span class="line">          <span class="keyword">if</span>( cookies != <span class="keyword">null</span> ){</span><br><span class="line">            out.println(<span class="string">"&lt;h2&gt;Cookie åç§°å’Œå€¼&lt;/h2&gt;"</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++){</span><br><span class="line">               cookie = cookies[i];</span><br><span class="line">               <span class="keyword">if</span>((cookie.getName( )).compareTo(<span class="string">"name"</span>) == <span class="number">0</span> ){</span><br><span class="line">                    cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">                    response.addCookie(cookie);</span><br><span class="line">                    out.print(<span class="string">"å·²åˆ é™¤çš„ cookieï¼š"</span> + </span><br><span class="line">                                 cookie.getName( ) + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">               }</span><br><span class="line">               out.print(<span class="string">"åç§°ï¼š"</span> + cookie.getName( ) + <span class="string">"ï¼Œ"</span>);</span><br><span class="line">               out.print(<span class="string">"å€¼ï¼š"</span> +  URLDecoder.decode(cookie.getValue(), <span class="string">"utf-8"</span>) +<span class="string">" &lt;br/&gt;"</span>);</span><br><span class="line">            }</span><br><span class="line">         }<span class="keyword">else</span>{</span><br><span class="line">             out.println(</span><br><span class="line">               <span class="string">"&lt;h2 class=\"tutheader\"&gt;No Cookie founds&lt;/h2&gt;"</span>);</span><br><span class="line">         }</span><br><span class="line">         out.println(<span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">         out.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸé€šè¿‡-Servlet-åˆ é™¤-Cookie"><a href="#ğŸé€šè¿‡-Servlet-åˆ é™¤-Cookie" class="headerlink" title="ğŸé€šè¿‡ Servlet åˆ é™¤ Cookie"></a>ğŸé€šè¿‡ Servlet åˆ é™¤ Cookie</h3><p>åˆ é™¤ Cookie æ˜¯éå¸¸ç®€å•çš„ã€‚å¦‚æœæ‚¨æƒ³åˆ é™¤ä¸€ä¸ª cookieï¼Œé‚£ä¹ˆæ‚¨åªéœ€è¦æŒ‰ç…§ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤è¿›è¡Œï¼š</p>
<ul>
<li>è¯»å–ä¸€ä¸ªç°æœ‰çš„ cookieï¼Œå¹¶æŠŠå®ƒå­˜å‚¨åœ¨ Cookie å¯¹è±¡ä¸­ã€‚</li>
<li>ä½¿ç”¨ <strong>setMaxAge()</strong> æ–¹æ³•è®¾ç½® cookie çš„å¹´é¾„ä¸ºé›¶ï¼Œæ¥åˆ é™¤ç°æœ‰çš„ cookieã€‚</li>
<li>æŠŠè¿™ä¸ª cookie æ·»åŠ åˆ°å“åº”å¤´ã€‚</li>
</ul>
<h4 id="ğŸ‚å®ä¾‹"><a href="#ğŸ‚å®ä¾‹" class="headerlink" title="ğŸ‚å®ä¾‹"></a>ğŸ‚å®ä¾‹</h4><p>ä¸‹é¢çš„ä¾‹å­å°†åˆ é™¤ç°æœ‰çš„åä¸º â€œurlâ€ çš„ cookieï¼Œå½“æ‚¨ä¸‹æ¬¡è¿è¡Œ ReadCookies çš„ Servlet æ—¶ï¼Œå®ƒä¼šè¿”å› url ä¸º nullã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class DeleteCookies</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/DeleteCookies"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeleteCookies</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DeleteCookies</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        Cookie cookie = <span class="keyword">null</span>;</span><br><span class="line">        Cookie[] cookies = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// è·å–ä¸è¯¥åŸŸç›¸å…³çš„ Cookie çš„æ•°ç»„</span></span><br><span class="line">        cookies = request.getCookies();</span><br><span class="line">        </span><br><span class="line">            <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">   </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"åˆ é™¤ Cookie å®ä¾‹"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">                  <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                  <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                  <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> );</span><br><span class="line">         <span class="keyword">if</span>( cookies != <span class="keyword">null</span> ){</span><br><span class="line">           out.println(<span class="string">"&lt;h2&gt;Cookie åç§°å’Œå€¼&lt;/h2&gt;"</span>);</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++){</span><br><span class="line">              cookie = cookies[i];</span><br><span class="line">              <span class="keyword">if</span>((cookie.getName( )).compareTo(<span class="string">"url"</span>) == <span class="number">0</span> ){</span><br><span class="line">                   cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">                   response.addCookie(cookie);</span><br><span class="line">                   out.print(<span class="string">"å·²åˆ é™¤çš„ cookieï¼š"</span> + </span><br><span class="line">                                cookie.getName( ) + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">              }</span><br><span class="line">              out.print(<span class="string">"åç§°ï¼š"</span> + cookie.getName( ) + <span class="string">"ï¼Œ"</span>);</span><br><span class="line">              out.print(<span class="string">"å€¼ï¼š"</span> + cookie.getValue( )+<span class="string">" &lt;br/&gt;"</span>);</span><br><span class="line">           }</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            out.println(</span><br><span class="line">              <span class="string">"&lt;h2 class=\"tutheader\"&gt;No Cookie founds&lt;/h2&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line">        out.println(<span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ğŸŒ¸Servlet-Session-è·Ÿè¸ª"><a href="#ğŸŒ¸Servlet-Session-è·Ÿè¸ª" class="headerlink" title="ğŸŒ¸Servlet Session è·Ÿè¸ª"></a>ğŸŒ¸Servlet Session è·Ÿè¸ª</h2><p>HTTP æ˜¯ä¸€ç§â€æ— çŠ¶æ€â€åè®®ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡å®¢æˆ·ç«¯æ£€ç´¢ç½‘é¡µæ—¶ï¼Œå®¢æˆ·ç«¯æ‰“å¼€ä¸€ä¸ªå•ç‹¬çš„è¿æ¥åˆ° Web æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨ä¸ä¿ç•™ä¹‹å‰å®¢æˆ·ç«¯è¯·æ±‚çš„ä»»ä½•è®°å½•ã€‚</p>
<p>ä½†æ˜¯ä»ç„¶æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼æ¥ç»´æŒ Web å®¢æˆ·ç«¯å’Œ Web æœåŠ¡å™¨ä¹‹é—´çš„ session ä¼šè¯ï¼š</p>
<h3 id="ğŸCookies"><a href="#ğŸCookies" class="headerlink" title="ğŸCookies"></a>ğŸCookies</h3><p>ä¸€ä¸ª Web æœåŠ¡å™¨å¯ä»¥åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ session ä¼šè¯ ID ä½œä¸ºæ¯ä¸ª Web å®¢æˆ·ç«¯çš„ cookieï¼Œå¯¹äºå®¢æˆ·ç«¯çš„åç»­è¯·æ±‚å¯ä»¥ä½¿ç”¨æ¥æ”¶åˆ°çš„ cookie æ¥è¯†åˆ«ã€‚</p>
<p>è¿™å¯èƒ½ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ–¹æ³•ï¼Œå› ä¸ºå¾ˆå¤šæµè§ˆå™¨ä¸æ”¯æŒ cookieï¼Œæ‰€ä»¥æˆ‘ä»¬å»ºè®®ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼æ¥ç»´æŒ session ä¼šè¯ã€‚</p>
<h3 id="ğŸéšè—çš„è¡¨å•å­—æ®µ"><a href="#ğŸéšè—çš„è¡¨å•å­—æ®µ" class="headerlink" title="ğŸéšè—çš„è¡¨å•å­—æ®µ"></a>ğŸéšè—çš„è¡¨å•å­—æ®µ</h3><h3 id="ğŸServletä¸€ä¸ª-Web-æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„-HTML-è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„-session-ä¼šè¯-IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"><a href="#ğŸServletä¸€ä¸ª-Web-æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„-HTML-è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„-session-ä¼šè¯-IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š" class="headerlink" title="ğŸServletä¸€ä¸ª Web æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„ HTML è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„ session ä¼šè¯ IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"></a>ğŸServletä¸€ä¸ª Web æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„ HTML è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„ session ä¼šè¯ IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"hidden"</span> name=<span class="string">"sessionid"</span> value=<span class="string">"12345"</span>&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>è¯¥æ¡ç›®æ„å‘³ç€ï¼Œå½“è¡¨å•è¢«æäº¤æ—¶ï¼ŒæŒ‡å®šçš„åç§°å’Œå€¼ä¼šè¢«è‡ªåŠ¨åŒ…å«åœ¨ GET æˆ– POST æ•°æ®ä¸­ã€‚æ¯æ¬¡å½“ Web æµè§ˆå™¨å‘é€å›è¯·æ±‚æ—¶ï¼Œsession_id å€¼å¯ä»¥ç”¨äºä¿æŒä¸åŒçš„ Web æµè§ˆå™¨çš„è·Ÿè¸ªã€‚</p>
<p>è¿™å¯èƒ½æ˜¯ä¸€ç§ä¿æŒ session ä¼šè¯è·Ÿè¸ªçš„æœ‰æ•ˆæ–¹å¼ï¼Œä½†æ˜¯ç‚¹å‡»å¸¸è§„çš„è¶…æ–‡æœ¬é“¾æ¥ï¼ˆ<a href...="">ï¼‰ä¸ä¼šå¯¼è‡´è¡¨å•æäº¤ï¼Œå› æ­¤éšè—çš„è¡¨å•å­—æ®µä¹Ÿä¸æ”¯æŒå¸¸è§„çš„ session ä¼šè¯è·Ÿè¸ªã€‚</a></p><a href...="">
</a><h3 id="ğŸURL-é‡å†™"><a href...=""></a><a href="#ğŸURL-é‡å†™" class="headerlink" title="ğŸURL é‡å†™"></a>ğŸURL é‡å†™</h3><p>æ‚¨å¯ä»¥åœ¨æ¯ä¸ª URL æœ«å°¾è¿½åŠ ä¸€äº›é¢å¤–çš„æ•°æ®æ¥æ ‡è¯† session ä¼šè¯ï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯¥ session ä¼šè¯æ ‡è¯†ç¬¦ä¸å·²å­˜å‚¨çš„æœ‰å…³ session ä¼šè¯çš„æ•°æ®ç›¸å…³è”ã€‚</p>
<p>ä¾‹å¦‚ï¼Œhttp://w3cschool.cc/file.htm;sessionid=12345ï¼Œsession ä¼šè¯æ ‡è¯†ç¬¦è¢«é™„åŠ ä¸º sessionid=12345ï¼Œæ ‡è¯†ç¬¦å¯è¢« Web æœåŠ¡å™¨è®¿é—®ä»¥è¯†åˆ«å®¢æˆ·ç«¯ã€‚</p>
<p>URL é‡å†™æ˜¯ä¸€ç§æ›´å¥½çš„ç»´æŒ session ä¼šè¯çš„æ–¹å¼ï¼Œå®ƒåœ¨æµè§ˆå™¨ä¸æ”¯æŒ cookie æ—¶èƒ½å¤Ÿå¾ˆå¥½åœ°å·¥ä½œï¼Œä½†æ˜¯å®ƒçš„ç¼ºç‚¹æ˜¯ä¼šåŠ¨æ€ç”Ÿæˆæ¯ä¸ª URL æ¥ä¸ºé¡µé¢åˆ†é…ä¸€ä¸ª session ä¼šè¯ IDï¼Œå³ä½¿æ˜¯åœ¨å¾ˆç®€å•çš„é™æ€ HTML é¡µé¢ä¸­ä¹Ÿä¼šå¦‚æ­¤ã€‚</p>
<h3 id="ğŸHttpSession-å¯¹è±¡"><a href="#ğŸHttpSession-å¯¹è±¡" class="headerlink" title="ğŸHttpSession å¯¹è±¡"></a>ğŸHttpSession å¯¹è±¡</h3><p>é™¤äº†ä¸Šè¿°çš„ä¸‰ç§æ–¹å¼ï¼ŒServlet è¿˜æä¾›äº† HttpSession æ¥å£ï¼Œè¯¥æ¥å£æä¾›äº†ä¸€ç§è·¨å¤šä¸ªé¡µé¢è¯·æ±‚æˆ–è®¿é—®ç½‘ç«™æ—¶è¯†åˆ«ç”¨æˆ·ä»¥åŠå­˜å‚¨æœ‰å…³ç”¨æˆ·ä¿¡æ¯çš„æ–¹å¼ã€‚</p>
<p>Servlet å®¹å™¨ä½¿ç”¨è¿™ä¸ªæ¥å£æ¥åˆ›å»ºä¸€ä¸ª HTTP å®¢æˆ·ç«¯å’Œ HTTP æœåŠ¡å™¨ä¹‹é—´çš„ session ä¼šè¯ã€‚ä¼šè¯æŒç»­ä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´æ®µï¼Œè·¨å¤šä¸ªè¿æ¥æˆ–é¡µé¢è¯·æ±‚ã€‚</p>
<p>æ‚¨ä¼šé€šè¿‡è°ƒç”¨ HttpServletRequest çš„å…¬å…±æ–¹æ³• <strong>getSession()</strong> æ¥è·å– HttpSession å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = request.getSession();</span><br></pre></td></tr></tbody></table></figure>

<p>ä½ éœ€è¦åœ¨å‘å®¢æˆ·ç«¯å‘é€ä»»ä½•æ–‡æ¡£å†…å®¹ä¹‹å‰è°ƒç”¨ <em>request.getSession()</em>ã€‚ä¸‹é¢æ€»ç»“äº† HttpSession å¯¹è±¡ä¸­å¯ç”¨çš„å‡ ä¸ªé‡è¦çš„æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">æ–¹æ³• &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public Object getAttribute(String name)</strong> è¯¥æ–¹æ³•è¿”å›åœ¨è¯¥ session ä¼šè¯ä¸­å…·æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œåˆ™è¿”å› nullã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public Enumeration getAttributeNames()</strong> è¯¥æ–¹æ³•è¿”å› String å¯¹è±¡çš„æšä¸¾ï¼ŒString å¯¹è±¡åŒ…å«æ‰€æœ‰ç»‘å®šåˆ°è¯¥ session ä¼šè¯çš„å¯¹è±¡çš„åç§°ã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public long getCreationTime()</strong> è¯¥æ–¹æ³•è¿”å›è¯¥ session ä¼šè¯è¢«åˆ›å»ºçš„æ—¶é—´ï¼Œè‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>public String getId()</strong> è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«åˆ†é…ç»™è¯¥ session ä¼šè¯çš„å”¯ä¸€æ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²ã€‚</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>public long getLastAccessedTime()</strong> è¯¥æ–¹æ³•è¿”å›å®¢æˆ·ç«¯æœ€åä¸€æ¬¡å‘é€ä¸è¯¥ session ä¼šè¯ç›¸å…³çš„è¯·æ±‚çš„æ—¶é—´è‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>public int getMaxInactiveInterval()</strong> è¯¥æ–¹æ³•è¿”å› Servlet å®¹å™¨åœ¨å®¢æˆ·ç«¯è®¿é—®æ—¶ä¿æŒ session ä¼šè¯æ‰“å¼€çš„æœ€å¤§æ—¶é—´é—´éš”ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>public void invalidate()</strong> è¯¥æ–¹æ³•æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆï¼Œå¹¶è§£é™¤ç»‘å®šåˆ°å®ƒä¸Šé¢çš„ä»»ä½•å¯¹è±¡ã€‚</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>public boolean isNew()</strong> å¦‚æœå®¢æˆ·ç«¯è¿˜ä¸çŸ¥é“è¯¥ session ä¼šè¯ï¼Œæˆ–è€…å¦‚æœå®¢æˆ·é€‰æ‹©ä¸å‚å…¥è¯¥ session ä¼šè¯ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› trueã€‚</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>public void removeAttribute(String name)</strong> è¯¥æ–¹æ³•å°†ä»è¯¥ session ä¼šè¯ç§»é™¤æŒ‡å®šåç§°çš„å¯¹è±¡ã€‚</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>public void setAttribute(String name, Object value)</strong>  è¯¥æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åç§°ç»‘å®šä¸€ä¸ªå¯¹è±¡åˆ°è¯¥ session ä¼šè¯ã€‚</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>public void setMaxInactiveInterval(int interval)</strong> è¯¥æ–¹æ³•åœ¨ Servlet å®¹å™¨æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆä¹‹å‰ï¼ŒæŒ‡å®šå®¢æˆ·ç«¯è¯·æ±‚ä¹‹é—´çš„æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸSession-è·Ÿè¸ªå®ä¾‹"><a href="#ğŸSession-è·Ÿè¸ªå®ä¾‹" class="headerlink" title="ğŸSession è·Ÿè¸ªå®ä¾‹"></a>ğŸSession è·Ÿè¸ªå®ä¾‹</h3><p>æœ¬å®ä¾‹è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨ HttpSession å¯¹è±¡è·å– session ä¼šè¯åˆ›å»ºæ—¶é—´å’Œæœ€åè®¿é—®æ—¶é—´ã€‚å¦‚æœä¸å­˜åœ¨ session ä¼šè¯ï¼Œæˆ‘ä»¬å°†é€šè¿‡è¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„ session ä¼šè¯ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class SessionTrack</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/SessionTrack"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionTrack</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// å¦‚æœä¸å­˜åœ¨ session ä¼šè¯ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª session å¯¹è±¡</span></span><br><span class="line">        HttpSession session = request.getSession(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// è·å– session åˆ›å»ºæ—¶é—´</span></span><br><span class="line">        Date createTime = <span class="keyword">new</span> Date(session.getCreationTime());</span><br><span class="line">        <span class="comment">// è·å–è¯¥ç½‘é¡µçš„æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´</span></span><br><span class="line">        Date lastAccessTime = <span class="keyword">new</span> Date(session.getLastAccessedTime());</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//è®¾ç½®æ—¥æœŸè¾“å‡ºçš„æ ¼å¼  </span></span><br><span class="line">        SimpleDateFormat df=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);  </span><br><span class="line">    </span><br><span class="line">        String title = <span class="string">"Servlet Session å®ä¾‹ - äº‘æ¾ˆ"</span>;</span><br><span class="line">        Integer visitCount = <span class="keyword">new</span> Integer(<span class="number">0</span>);</span><br><span class="line">        String visitCountKey = <span class="keyword">new</span> String(<span class="string">"visitCount"</span>);</span><br><span class="line">        String userIDKey = <span class="keyword">new</span> String(<span class="string">"userID"</span>);</span><br><span class="line">        String userID = <span class="keyword">new</span> String(<span class="string">"Runoob"</span>);</span><br><span class="line">        <span class="keyword">if</span>(session.getAttribute(visitCountKey) == <span class="keyword">null</span>) {</span><br><span class="line">            session.setAttribute(visitCountKey, <span class="keyword">new</span> Integer(<span class="number">0</span>));</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">        <span class="comment">// æ£€æŸ¥ç½‘é¡µä¸Šæ˜¯å¦æœ‰æ–°çš„è®¿é—®è€…</span></span><br><span class="line">        <span class="keyword">if</span> (session.isNew()){</span><br><span class="line">            title = <span class="string">"Servlet Session å®ä¾‹ - äº‘æ¾ˆ"</span>;</span><br><span class="line">             session.setAttribute(userIDKey, userID);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">             visitCount = (Integer)session.getAttribute(visitCountKey);</span><br><span class="line">             visitCount = visitCount + <span class="number">1</span>;</span><br><span class="line">             userID = (String)session.getAttribute(userIDKey);</span><br><span class="line">        }</span><br><span class="line">        session.setAttribute(visitCountKey,  visitCount);</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">    </span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">                <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">                 <span class="string">"&lt;h2 align=\"center\"&gt;Session ä¿¡æ¯&lt;/h2&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;table border=\"1\" align=\"center\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr bgcolor=\"#949494\"&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;th&gt;Session ä¿¡æ¯&lt;/th&gt;&lt;th&gt;å€¼&lt;/th&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;id&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> + session.getId() + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> +  df.format(createTime) + </span><br><span class="line">                <span class="string">"  &lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;æœ€åè®¿é—®æ—¶é—´&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> + df.format(lastAccessTime) + </span><br><span class="line">                <span class="string">"  &lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;ç”¨æˆ· ID&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> + userID + </span><br><span class="line">                <span class="string">"  &lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;è®¿é—®ç»Ÿè®¡ï¼š&lt;/td&gt;\n"</span> +</span><br><span class="line">                <span class="string">"  &lt;td&gt;"</span> + visitCount + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/table&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>); </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç¼–è¯‘ä¸Šé¢çš„ Servlet <strong>SessionTrack</strong>ï¼Œå¹¶åœ¨ web.xml æ–‡ä»¶ä¸­åˆ›å»ºé€‚å½“çš„æ¡ç›®ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SessionTrack<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.SessionTrack<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SessionTrack<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/SessionTrack<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ <em>http://localhost:8080/TomcatTest/SessionTrack</em>ï¼Œå½“æ‚¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶å°†æ˜¾ç¤ºå¦‚ä¸‹ç»“æœï¼š</p>
<p><a href="https://imgchr.com/i/0rsYND" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rsYND.png" alt="0rsYND.png"></a></p>
<p>å†æ¬¡å°è¯•è¿è¡Œç›¸åŒçš„ Servletï¼Œå®ƒå°†æ˜¾ç¤ºå¦‚ä¸‹ç»“æœ</p>
<p><a href="https://imgchr.com/i/0rsBut" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rsBut.png" alt="0rsBut.png"></a></p>
<h3 id="ğŸåˆ é™¤-Session-ä¼šè¯æ•°æ®"><a href="#ğŸåˆ é™¤-Session-ä¼šè¯æ•°æ®" class="headerlink" title="ğŸåˆ é™¤ Session ä¼šè¯æ•°æ®"></a>ğŸåˆ é™¤ Session ä¼šè¯æ•°æ®</h3><p>å½“æ‚¨å®Œæˆäº†ä¸€ä¸ªç”¨æˆ·çš„ session ä¼šè¯æ•°æ®ï¼Œæ‚¨æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š</p>
<ul>
<li><strong>ç§»é™¤ä¸€ä¸ªç‰¹å®šçš„å±æ€§ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ <em>public void removeAttribute(String name)</em> æ–¹æ³•æ¥åˆ é™¤ä¸ç‰¹å®šçš„é”®ç›¸å…³è”çš„å€¼ã€‚</li>
<li><strong>åˆ é™¤æ•´ä¸ª session ä¼šè¯ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ <em>public void invalidate()</em> æ–¹æ³•æ¥ä¸¢å¼ƒæ•´ä¸ª session ä¼šè¯ã€‚</li>
<li><strong>è®¾ç½® session ä¼šè¯è¿‡æœŸæ—¶é—´ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ <em>public void setMaxInactiveInterval(int interval)</em> æ–¹æ³•æ¥å•ç‹¬è®¾ç½® session ä¼šè¯è¶…æ—¶ã€‚</li>
<li><strong>æ³¨é”€ç”¨æˆ·ï¼š</strong>å¦‚æœä½¿ç”¨çš„æ˜¯æ”¯æŒ servlet 2.4 çš„æœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ <strong>logout</strong> æ¥æ³¨é”€ Web æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼Œå¹¶æŠŠå±äºæ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰ session ä¼šè¯è®¾ç½®ä¸ºæ— æ•ˆã€‚</li>
<li><strong>web.xml é…ç½®ï¼š</strong>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Tomcatï¼Œé™¤äº†ä¸Šè¿°æ–¹æ³•ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ web.xml æ–‡ä»¶ä¸­é…ç½® session ä¼šè¯è¶…æ—¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li>
</ul>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢å®ä¾‹ä¸­çš„è¶…æ—¶æ—¶é—´æ˜¯ä»¥åˆ†é’Ÿä¸ºå•ä½ï¼Œå°†è¦†ç›– Tomcat ä¸­é»˜è®¤çš„ 30 åˆ†é’Ÿè¶…æ—¶æ—¶é—´ã€‚</p>
<p>åœ¨ä¸€ä¸ª Servlet ä¸­çš„ getMaxInactiveInterval() æ–¹æ³•ä¼šè¿”å› session ä¼šè¯çš„è¶…æ—¶æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨ web.xml ä¸­é…ç½® session ä¼šè¯è¶…æ—¶æ—¶é—´ä¸º 15 åˆ†é’Ÿï¼Œé‚£ä¹ˆ getMaxInactiveInterval() ä¼šè¿”å› 900ã€‚</p>
<h2 id="ğŸŒ¸Servletæ•°æ®åº“è®¿é—®"><a href="#ğŸŒ¸Servletæ•°æ®åº“è®¿é—®" class="headerlink" title="ğŸŒ¸Servletæ•°æ®åº“è®¿é—®"></a>ğŸŒ¸Servletæ•°æ®åº“è®¿é—®</h2><blockquote>
<p>åœ¨ java é¡¹ç›®ä¸­ï¼Œåªéœ€è¦åœ¨ Eclipse ä¸­å¼•å…¥ mysql-connector-java-5.1.39-bin.jar å°±å¯ä»¥è¿è¡Œjavaé¡¹ç›®ã€‚</p>
<p>ä½†æ˜¯åœ¨ Eclipse web é¡¹ç›®ä¸­ï¼Œå½“æ‰§è¡Œ Class.forName(â€œcom.mysql.jdbc.Driverâ€);æ—¶ ä¸ä¼šå»æŸ¥æ‰¾é©±åŠ¨çš„ã€‚æ‰€ä»¥æœ¬å®ä¾‹ä¸­æˆ‘ä»¬éœ€è¦æŠŠ mysql-connector-java-5.1.39-bin.jar æ‹·è´åˆ° tomcat ä¸‹ lib ç›®å½•ã€‚</p>
</blockquote>
<h3 id="ğŸåˆ›å»ºæµ‹è¯•æ•°æ®"><a href="#ğŸåˆ›å»ºæµ‹è¯•æ•°æ®" class="headerlink" title="ğŸåˆ›å»ºæµ‹è¯•æ•°æ®"></a>ğŸåˆ›å»ºæµ‹è¯•æ•°æ®</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ MySQL ä¸­åˆ›å»º RUNOOB æ•°æ®åº“ï¼Œå¹¶åˆ›å»º websites æ•°æ®è¡¨ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`websites`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">char</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'ç«™ç‚¹åç§°'</span>,</span><br><span class="line">  <span class="string">`url`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`alexa`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'Alexa æ’å'</span>,</span><br><span class="line">  <span class="string">`country`</span> <span class="built_in">char</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'å›½å®¶'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">10</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></tbody></table></figure>

<p>æ’å…¥ä¸€äº›æ•°æ®ï¼š</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`websites`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'Google'</span>, <span class="string">'https://www.google.cm/'</span>, <span class="string">'1'</span>, <span class="string">'USA'</span>), (<span class="string">'2'</span>, <span class="string">'æ·˜å®'</span>, <span class="string">'https://www.taobao.com/'</span>, <span class="string">'13'</span>, <span class="string">'CN'</span>), (<span class="string">'3'</span>, <span class="string">'èœé¸Ÿæ•™ç¨‹'</span>, <span class="string">'http://www.runoob.com'</span>, <span class="string">'5892'</span>, <span class="string">''</span>), (<span class="string">'4'</span>, <span class="string">'å¾®åš'</span>, <span class="string">'http://weibo.com/'</span>, <span class="string">'20'</span>, <span class="string">'CN'</span>), (<span class="string">'5'</span>, <span class="string">'Facebook'</span>, <span class="string">'https://www.facebook.com/'</span>, <span class="string">'3'</span>, <span class="string">'USA'</span>);</span><br></pre></td></tr></tbody></table></figure>





<h3 id="ğŸè®¿é—®æ•°æ®åº“"><a href="#ğŸè®¿é—®æ•°æ®åº“" class="headerlink" title="ğŸè®¿é—®æ•°æ®åº“"></a>ğŸè®¿é—®æ•°æ®åº“</h3><p>ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Servlet è®¿é—® RUNOOB æ•°æ®åº“ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class DatabaseAccess</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/DatabaseAccess"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatabaseAccess</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">// JDBC é©±åŠ¨ååŠæ•°æ®åº“ URL</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String JDBC_DRIVER = <span class="string">"com.mysql.jdbc.Driver"</span>;  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String DB_URL = <span class="string">"jdbc:mysql://localhost:3306/RUNOOB"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ•°æ®åº“çš„ç”¨æˆ·åä¸å¯†ç ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„è®¾ç½®</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String USER = <span class="string">"root"</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String PASS = <span class="string">"123456"</span>; </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DatabaseAccess</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"Servlet Mysql æµ‹è¯• - èœé¸Ÿæ•™ç¨‹"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt;\n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">        <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span>);</span><br><span class="line">        <span class="keyword">try</span>{</span><br><span class="line">            <span class="comment">// æ³¨å†Œ JDBC é©±åŠ¨å™¨</span></span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æ‰“å¼€ä¸€ä¸ªè¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(DB_URL,USER,PASS);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œ SQL æŸ¥è¯¢</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line">            String sql;</span><br><span class="line">            sql = <span class="string">"SELECT id, name, url FROM websites"</span>;</span><br><span class="line">            ResultSet rs = stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å±•å¼€ç»“æœé›†æ•°æ®åº“</span></span><br><span class="line">            <span class="keyword">while</span>(rs.next()){</span><br><span class="line">                <span class="comment">// é€šè¿‡å­—æ®µæ£€ç´¢</span></span><br><span class="line">                <span class="keyword">int</span> id  = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">                String name = rs.getString(<span class="string">"name"</span>);</span><br><span class="line">                String url = rs.getString(<span class="string">"url"</span>);</span><br><span class="line">    </span><br><span class="line">                <span class="comment">// è¾“å‡ºæ•°æ®</span></span><br><span class="line">                out.println(<span class="string">"ID: "</span> + id);</span><br><span class="line">                out.println(<span class="string">", ç«™ç‚¹åç§°: "</span> + name);</span><br><span class="line">                out.println(<span class="string">", ç«™ç‚¹ URL: "</span> + url);</span><br><span class="line">                out.println(<span class="string">"&lt;br /&gt;"</span>);</span><br><span class="line">            }</span><br><span class="line">            out.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å®Œæˆåå…³é—­</span></span><br><span class="line">            rs.close();</span><br><span class="line">            stmt.close();</span><br><span class="line">            conn.close();</span><br><span class="line">        } <span class="keyword">catch</span>(SQLException se) {</span><br><span class="line">            <span class="comment">// å¤„ç† JDBC é”™è¯¯</span></span><br><span class="line">            se.printStackTrace();</span><br><span class="line">        } <span class="keyword">catch</span>(Exception e) {</span><br><span class="line">            <span class="comment">// å¤„ç† Class.forName é”™è¯¯</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }<span class="keyword">finally</span>{</span><br><span class="line">            <span class="comment">// æœ€åæ˜¯ç”¨äºå…³é—­èµ„æºçš„å—</span></span><br><span class="line">            <span class="keyword">try</span>{</span><br><span class="line">                <span class="keyword">if</span>(stmt!=<span class="keyword">null</span>)</span><br><span class="line">                stmt.close();</span><br><span class="line">            }<span class="keyword">catch</span>(SQLException se2){</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">try</span>{</span><br><span class="line">                <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)</span><br><span class="line">                conn.close();</span><br><span class="line">            }<span class="keyword">catch</span>(SQLException se){</span><br><span class="line">                se.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">       </span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨è®©æˆ‘ä»¬æ¥ç¼–è¯‘ä¸Šé¢çš„ Servletï¼Œå¹¶åœ¨ web.xml æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DatabaseAccess<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.DatabaseAccess<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DatabaseAccess<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/DatabaseAccess<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸç¬”è®°"><a href="#ğŸç¬”è®°" class="headerlink" title="ğŸç¬”è®°"></a>ğŸç¬”è®°</h3><p>è¿›è¡Œæ•°æ®åº“æ’å…¥æ“ä½œçš„æ—¶å€™ä½¿ç”¨ PreparedStatement æ›´å¥½ï¼Œå¥½å¤„å¦‚ä¸‹ï¼š</p>
<ul>
<li>1.PreparedStatementå¯ä»¥å†™åŠ¨æ€å‚æ•°åŒ–çš„æŸ¥è¯¢ï¼›</li>
<li>2.PreparedStatementæ¯” Statement æ›´å¿«ï¼›</li>
<li>3.PreparedStatementå¯ä»¥é˜²æ­¢SQLæ³¨å…¥å¼æ”»å‡»</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–å†™é¢„å¤„ç† SQL è¯­å¥</span></span><br><span class="line">String sql= <span class="string">"INSERT INTO websites1 VALUES(?,?,?,?,?)"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ä¾‹åŒ– PreparedStatement</span></span><br><span class="line">ps = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼ å…¥å‚æ•°ï¼Œè¿™é‡Œçš„å‚æ•°æ¥è‡ªäºä¸€ä¸ªå¸¦æœ‰è¡¨å•çš„jspæ–‡ä»¶ï¼Œå¾ˆå®¹æ˜“å®ç°</span></span><br><span class="line">ps.setString(<span class="number">1</span>, request.getParameter(<span class="string">"id"</span>));</span><br><span class="line">ps.setString(<span class="number">2</span>, request.getParameter(<span class="string">"name"</span>));</span><br><span class="line">ps.setString(<span class="number">3</span>, request.getParameter(<span class="string">"url"</span>));</span><br><span class="line">ps.setString(<span class="number">4</span>, request.getParameter(<span class="string">"alexa"</span>));</span><br><span class="line">ps.setString(<span class="number">5</span>, request.getParameter(<span class="string">"country"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œæ•°æ®åº“æ›´æ–°æ“ä½œï¼Œä¸éœ€è¦SQLè¯­å¥</span></span><br><span class="line">ps.executeUpdate();</span><br><span class="line">sql = <span class="string">"SELECT id, name, url FROM websites1"</span>;</span><br><span class="line">ps = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">ResultSet rs = ps.executeQuery();</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸæ³¨æ„"><a href="#ğŸæ³¨æ„" class="headerlink" title="ğŸæ³¨æ„"></a>ğŸæ³¨æ„</h3><p>ç”±äºæ›´æ–°çš„ MySQL8.0ï¼Œæ‰€ä»¥æœ¬ç½‘ç«™æä¾›çš„ jar åŒ…ï¼š<strong>mysql-connector-java-5.1.39-bin.jar</strong> å°±ä¸èƒ½ç”¨äº†ï¼Œè¿æ¥æ—¶ä¼šæŠ¥ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™ä¸ªå¼‚å¸¸ã€‚</p>
<p>éœ€è¦é‡æ–°ä¸‹è½½ï¼Œä¸‹è½½åœ°å€ <a href="https://dev.mysql.com/downloads/file/?id=484819ï¼Œæš‚æ—¶æˆ‘ä¸‹è½½åˆ°çš„æ˜¯" target="_blank" rel="noopener">https://dev.mysql.com/downloads/file/?id=484819ï¼Œæš‚æ—¶æˆ‘ä¸‹è½½åˆ°çš„æ˜¯</a> <strong>mysql-connector-java-8.0.15</strong> æ›¿æ¢è¿™ä¸ª jar åŒ…åï¼Œåˆå‡ºç°å¼‚å¸¸ <strong>java.sql.SQLException: The server time zone value</strong>ï¼Œåªéœ€åœ¨æ•°æ®åº“åœ°å€åè¾¹æ·»åŠ  <strong>serverTimezone=UTC</strong> å³å¯ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DB_URL = <span class="string">"jdbc:mysql://localhost:3306/servlet_db?serverTimezone=UTC"</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>è¿˜æœ‰æ³¨å†Œ jdbc çš„é©±åŠ¨ä¹Ÿæ¢äº†ã€‚</p>
<p>æ³¨å†Œ JDBC é©±åŠ¨å™¨ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ğŸŒ¸Servlet-æ–‡ä»¶ä¸Šä¼ "><a href="#ğŸŒ¸Servlet-æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="ğŸŒ¸Servlet æ–‡ä»¶ä¸Šä¼ "></a>ğŸŒ¸Servlet æ–‡ä»¶ä¸Šä¼ </h2><p>Servlet å¯ä»¥ä¸ HTML form æ ‡ç­¾ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å…è®¸ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ã€‚ä¸Šä¼ çš„æ–‡ä»¶å¯ä»¥æ˜¯æ–‡æœ¬æ–‡ä»¶æˆ–å›¾åƒæ–‡ä»¶æˆ–ä»»ä½•æ–‡æ¡£ã€‚</p>
<p>æœ¬æ–‡ä½¿ç”¨åˆ°çš„æ–‡ä»¶æœ‰ï¼š</p>
<ul>
<li>upload.jsp : æ–‡ä»¶ä¸Šä¼ è¡¨å•ã€‚</li>
<li>message.jsp : ä¸Šä¼ æˆåŠŸåè·³è½¬é¡µé¢ã€‚</li>
<li>UploadServlet.java : ä¸Šä¼ å¤„ç† Servletã€‚</li>
<li>éœ€è¦å¼•å…¥çš„ jar æ–‡ä»¶ï¼šcommons-fileupload-1.4ã€commons-io-2.8.jarã€‚</li>
<li><em>Servlet3.0 å·²ç»å†…ç½®äº†æ–‡ä»¶ä¸Šä¼ è¿™ä¸€ç‰¹æ€§ï¼Œå¼€å‘è€…ä¸å†éœ€è¦å°† Commons FileUpload ç»„ä»¶å¯¼å…¥åˆ°å·¥ç¨‹ä¸­å»ã€‚</em></li>
</ul>
<h3 id="ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•"><a href="#ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•" class="headerlink" title="ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•"></a>ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•</h3><p>ä¸‹é¢çš„ HTML ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•ã€‚ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>è¡¨å• <strong>method</strong> å±æ€§åº”è¯¥è®¾ç½®ä¸º <strong>POST</strong> æ–¹æ³•ï¼Œä¸èƒ½ä½¿ç”¨ GET æ–¹æ³•ã€‚</li>
<li>è¡¨å• <strong>enctype</strong> å±æ€§åº”è¯¥è®¾ç½®ä¸º <strong>multipart/form-data</strong>.</li>
<li>è¡¨å• <strong>action</strong> å±æ€§åº”è¯¥è®¾ç½®ä¸ºåœ¨åç«¯æœåŠ¡å™¨ä¸Šå¤„ç†æ–‡ä»¶ä¸Šä¼ çš„ Servlet æ–‡ä»¶ã€‚ä¸‹é¢çš„å®ä¾‹ä½¿ç”¨äº† <strong>UploadServlet</strong> Servlet æ¥ä¸Šä¼ æ–‡ä»¶ã€‚</li>
<li>ä¸Šä¼ å•ä¸ªæ–‡ä»¶ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨å•ä¸ªå¸¦æœ‰å±æ€§ type=â€fileâ€ çš„ &lt;input â€¦/&gt; æ ‡ç­¾ã€‚ä¸ºäº†å…è®¸å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œè¯·åŒ…å«å¤šä¸ª name å±æ€§å€¼ä¸åŒçš„ input æ ‡ç­¾ã€‚è¾“å…¥æ ‡ç­¾å…·æœ‰ä¸åŒçš„åç§°å±æ€§çš„å€¼ã€‚æµè§ˆå™¨ä¼šä¸ºæ¯ä¸ª input æ ‡ç­¾å…³è”ä¸€ä¸ªæµè§ˆæŒ‰é’®ã€‚</li>
</ul>
<p>upload.jsp æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;æ–‡ä»¶ä¸Šä¼ å®ä¾‹ - äº‘æ¾ˆ&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;æ–‡ä»¶ä¸Šä¼ å®ä¾‹ - äº‘æ¾ˆ&lt;/h1&gt;</span><br><span class="line">&lt;form method=<span class="string">"post"</span> action=<span class="string">"/TomcatTest/UploadServlet"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶:</span><br><span class="line">    &lt;input type=<span class="string">"file"</span> name=<span class="string">"uploadFile"</span> /&gt;</span><br><span class="line">    &lt;br/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"ä¸Šä¼ "</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ğŸç¼–å†™åå°-Servlet"><a href="#ğŸç¼–å†™åå°-Servlet" class="headerlink" title="ğŸç¼–å†™åå° Servlet"></a>ğŸç¼–å†™åå° Servlet</h3><p>ä»¥ä¸‹æ˜¯ UploadServlet çš„æºä»£ç ï¼ŒåŒäºå¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œåœ¨è¿™ä¹‹å‰æˆ‘ä»¬å…ˆç¡®ä¿ä¾èµ–åŒ…å·²ç»å¼•å…¥åˆ°é¡¹ç›®çš„ WEB-INF/lib ç›®å½•ä¸‹ï¼š</p>
<ul>
<li>ä¸‹é¢çš„å®ä¾‹ä¾èµ–äº FileUploadï¼Œæ‰€ä»¥ä¸€å®šè¦ç¡®ä¿åœ¨æ‚¨çš„ classpath ä¸­æœ‰æœ€æ–°ç‰ˆæœ¬çš„ <strong>commons-fileupload.x.x.jar</strong>æ–‡ä»¶ã€‚å¯ä»¥ä» <a href="http://commons.apache.org/proper/commons-fileupload/" target="_blank" rel="noopener">http://commons.apache.org/proper/commons-fileupload/</a> ä¸‹è½½ã€‚</li>
<li>FileUpload ä¾èµ–äº Commons IOï¼Œæ‰€ä»¥ä¸€å®šè¦ç¡®ä¿åœ¨æ‚¨çš„ classpath ä¸­æœ‰æœ€æ–°ç‰ˆæœ¬çš„ <strong>commons-io-x.x.jar</strong> æ–‡ä»¶ã€‚å¯ä»¥ä» <a href="http://commons.apache.org/proper/commons-io/" target="_blank" rel="noopener">http://commons.apache.org/proper/commons-io/</a> ä¸‹è½½ã€‚</li>
</ul>
<p>UploadServlet çš„æºä»£ç  å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class UploadServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/UploadServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// ä¸Šä¼ æ–‡ä»¶å­˜å‚¨ç›®å½•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String UPLOAD_DIRECTORY = <span class="string">"upload"</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// ä¸Šä¼ é…ç½®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MEMORY_THRESHOLD   = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">3</span>;  <span class="comment">// 3MB</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_FILE_SIZE      = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">40</span>; <span class="comment">// 40MB</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_REQUEST_SIZE   = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">50</span>; <span class="comment">// 50MB</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ æ•°æ®åŠä¿å­˜æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">        HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">        <span class="comment">// æ£€æµ‹æ˜¯å¦ä¸ºå¤šåª’ä½“ä¸Šä¼ </span></span><br><span class="line">        <span class="keyword">if</span> (!ServletFileUpload.isMultipartContent(request)) {</span><br><span class="line">            <span class="comment">// å¦‚æœä¸æ˜¯åˆ™åœæ­¢</span></span><br><span class="line">            PrintWriter writer = response.getWriter();</span><br><span class="line">            writer.println(<span class="string">"Error: è¡¨å•å¿…é¡»åŒ…å« enctype=multipart/form-data"</span>);</span><br><span class="line">            writer.flush();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// é…ç½®ä¸Šä¼ å‚æ•°</span></span><br><span class="line">        DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">        <span class="comment">// è®¾ç½®å†…å­˜ä¸´ç•Œå€¼ - è¶…è¿‡åå°†äº§ç”Ÿä¸´æ—¶æ–‡ä»¶å¹¶å­˜å‚¨äºä¸´æ—¶ç›®å½•ä¸­</span></span><br><span class="line">        factory.setSizeThreshold(MEMORY_THRESHOLD);</span><br><span class="line">        <span class="comment">// è®¾ç½®ä¸´æ—¶å­˜å‚¨ç›®å½•</span></span><br><span class="line">        factory.setRepository(<span class="keyword">new</span> File(System.getProperty(<span class="string">"java.io.tmpdir"</span>)));</span><br><span class="line"> </span><br><span class="line">        ServletFileUpload upload = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// è®¾ç½®æœ€å¤§æ–‡ä»¶ä¸Šä¼ å€¼</span></span><br><span class="line">        upload.setFileSizeMax(MAX_FILE_SIZE);</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// è®¾ç½®æœ€å¤§è¯·æ±‚å€¼ (åŒ…å«æ–‡ä»¶å’Œè¡¨å•æ•°æ®)</span></span><br><span class="line">        upload.setSizeMax(MAX_REQUEST_SIZE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸­æ–‡å¤„ç†</span></span><br><span class="line">        upload.setHeaderEncoding(<span class="string">"UTF-8"</span>); </span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„é€ ä¸´æ—¶è·¯å¾„æ¥å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">// è¿™ä¸ªè·¯å¾„ç›¸å¯¹å½“å‰åº”ç”¨çš„ç›®å½•</span></span><br><span class="line">        String uploadPath = request.getServletContext().getRealPath(<span class="string">"./"</span>) + File.separator + UPLOAD_DIRECTORY;</span><br><span class="line">       </span><br><span class="line">         </span><br><span class="line">        <span class="comment">// å¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">        File uploadDir = <span class="keyword">new</span> File(uploadPath);</span><br><span class="line">        <span class="keyword">if</span> (!uploadDir.exists()) {</span><br><span class="line">            uploadDir.mkdir();</span><br><span class="line">        }</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// è§£æè¯·æ±‚çš„å†…å®¹æå–æ–‡ä»¶æ•°æ®</span></span><br><span class="line">            <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">            List&lt;FileItem&gt; formItems = upload.parseRequest(request);</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span> (formItems != <span class="keyword">null</span> &amp;&amp; formItems.size() &gt; <span class="number">0</span>) {</span><br><span class="line">                <span class="comment">// è¿­ä»£è¡¨å•æ•°æ®</span></span><br><span class="line">                <span class="keyword">for</span> (FileItem item : formItems) {</span><br><span class="line">                    <span class="comment">// å¤„ç†ä¸åœ¨è¡¨å•ä¸­çš„å­—æ®µ</span></span><br><span class="line">                    <span class="keyword">if</span> (!item.isFormField()) {</span><br><span class="line">                        String fileName = <span class="keyword">new</span> File(item.getName()).getName();</span><br><span class="line">                        String filePath = uploadPath + File.separator + fileName;</span><br><span class="line">                        File storeFile = <span class="keyword">new</span> File(filePath);</span><br><span class="line">                        <span class="comment">// åœ¨æ§åˆ¶å°è¾“å‡ºæ–‡ä»¶çš„ä¸Šä¼ è·¯å¾„</span></span><br><span class="line">                        System.out.println(filePath);</span><br><span class="line">                        <span class="comment">// ä¿å­˜æ–‡ä»¶åˆ°ç¡¬ç›˜</span></span><br><span class="line">                        item.write(storeFile);</span><br><span class="line">                        request.setAttribute(<span class="string">"message"</span>,</span><br><span class="line">                            <span class="string">"æ–‡ä»¶ä¸Šä¼ æˆåŠŸ!"</span>);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception ex) {</span><br><span class="line">            request.setAttribute(<span class="string">"message"</span>,</span><br><span class="line">                    <span class="string">"é”™è¯¯ä¿¡æ¯: "</span> + ex.getMessage());</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// è·³è½¬åˆ° message.jsp</span></span><br><span class="line">        request.getServletContext().getRequestDispatcher(<span class="string">"/message.jsp"</span>).forward(</span><br><span class="line">                request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>message.jsp æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;æ–‡ä»¶ä¸Šä¼ ç»“æœ&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">        &lt;h2&gt;${message}&lt;/h2&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ğŸç¼–è¯‘å’Œè¿è¡Œ-Servlet"><a href="#ğŸç¼–è¯‘å’Œè¿è¡Œ-Servlet" class="headerlink" title="ğŸç¼–è¯‘å’Œè¿è¡Œ Servlet"></a>ğŸç¼–è¯‘å’Œè¿è¡Œ Servlet</h3><p>ç¼–è¯‘ä¸Šé¢çš„ Servlet UploadServletï¼Œå¹¶åœ¨ web.xml æ–‡ä»¶ä¸­åˆ›å»ºæ‰€éœ€çš„æ¡ç›®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">"2.5"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee   </span></span></span><br><span class="line"><span class="tag"><span class="string">    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">     <span class="comment">&lt;!-- ç±»å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- æ‰€åœ¨çš„åŒ… --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.UploadServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®çš„ç½‘å€ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/UploadServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸŒ¸Servlet-å¤„ç†æ—¥æœŸ"><a href="#ğŸŒ¸Servlet-å¤„ç†æ—¥æœŸ" class="headerlink" title="ğŸŒ¸Servlet å¤„ç†æ—¥æœŸ"></a>ğŸŒ¸Servlet å¤„ç†æ—¥æœŸ</h2><p>Date ç±»æ”¯æŒä¸¤ä¸ªæ„é€ å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°åˆå§‹åŒ–å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„å¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Date( )</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢çš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ç­‰äº 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ç»è¿‡çš„æ¯«ç§’æ•°ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Date(<span class="keyword">long</span> millisec)</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸€æ—¦æ‚¨æœ‰ä¸€ä¸ªå¯ç”¨çš„ Date å¯¹è±¡ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ä¸‹åˆ—ä»»æ„æ”¯æŒçš„æ–¹æ³•æ¥ä½¿ç”¨æ—¥æœŸï¼š</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">æ–¹æ³• &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>boolean after(Date date)</strong> å¦‚æœè°ƒç”¨çš„ Date å¯¹è±¡ä¸­åŒ…å«çš„æ—¥æœŸåœ¨ date æŒ‡å®šçš„æ—¥æœŸä¹‹åï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>boolean before(Date date)</strong> å¦‚æœè°ƒç”¨çš„ Date å¯¹è±¡ä¸­åŒ…å«çš„æ—¥æœŸåœ¨ date æŒ‡å®šçš„æ—¥æœŸä¹‹å‰ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>Object clone( )</strong> é‡å¤è°ƒç”¨ Date å¯¹è±¡ã€‚</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>int compareTo(Date date)</strong> æŠŠè°ƒç”¨å¯¹è±¡çš„å€¼ä¸ date çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªå€¼æ˜¯ç›¸ç­‰çš„ï¼Œåˆ™è¿”å› 0ã€‚å¦‚æœè°ƒç”¨å¯¹è±¡åœ¨ date ä¹‹å‰ï¼Œåˆ™è¿”å›ä¸€ä¸ªè´Ÿå€¼ã€‚å¦‚æœè°ƒç”¨å¯¹è±¡åœ¨ date ä¹‹åï¼Œåˆ™è¿”å›ä¸€ä¸ªæ­£å€¼ã€‚</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>int compareTo(Object obj)</strong> å¦‚æœ obj æ˜¯ Date ç±»ï¼Œåˆ™æ“ä½œç­‰åŒäº compareTo(Date)ã€‚å¦åˆ™ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ª ClassCastExceptionã€‚</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>boolean equals(Object date)</strong> å¦‚æœè°ƒç”¨çš„ Date å¯¹è±¡ä¸­åŒ…å«çš„æ—¶é—´å’Œæ—¥æœŸä¸ date æŒ‡å®šçš„ç›¸åŒï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>long getTime( )</strong> è¿”å› 1970 å¹´ 1 æœˆ 1 æ—¥ä»¥æ¥ç»è¿‡çš„æ¯«ç§’æ•°ã€‚</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>int hashCode( )</strong> ä¸ºè°ƒç”¨å¯¹è±¡è¿”å›å“ˆå¸Œä»£ç ã€‚</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>void setTime(long time)</strong> è®¾ç½® time æŒ‡å®šçš„æ—¶é—´å’Œæ—¥æœŸï¼Œè¿™è¡¨ç¤ºä» 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ç»è¿‡çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>String toString( )</strong> è½¬æ¢è°ƒç”¨çš„ Date å¯¹è±¡ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´"><a href="#ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´"></a>ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class CurrentDate</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/CurrentDate"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentDate</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CurrentDate</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line"></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">          String title = <span class="string">"æ˜¾ç¤ºå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´"</span>;</span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">          out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + date.toString() + <span class="string">"&lt;/h2&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CurrentDate<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.CurrentDate<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CurrentDate<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/CurrentDate<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h3 id="ğŸæ—¥æœŸæ¯”è¾ƒ"><a href="#ğŸæ—¥æœŸæ¯”è¾ƒ" class="headerlink" title="ğŸæ—¥æœŸæ¯”è¾ƒ"></a>ğŸæ—¥æœŸæ¯”è¾ƒ</h3><ul>
<li>å¯ä»¥ä½¿ç”¨ getTime() æ¥è·å–ä¸¤ä¸ªå¯¹è±¡è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ç»è¿‡çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼Œç„¶åå¯¹è¿™ä¸¤ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒã€‚</li>
<li>å¯ä»¥ä½¿ç”¨æ–¹æ³• before( )ã€after( ) å’Œ equals( )ã€‚ç”±äºä¸€ä¸ªæœˆé‡Œ 12 å·åœ¨ 18 å·ä¹‹å‰ï¼Œä¾‹å¦‚ï¼Œnew Date(99, 2, 12).before(new Date (99, 2, 18)) è¿”å› trueã€‚</li>
<li>å¯ä»¥ä½¿ç”¨ compareTo( ) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”± Comparable æ¥å£å®šä¹‰ï¼Œç”± Date å®ç°ã€‚</li>
</ul>
<h3 id="ğŸä½¿ç”¨-SimpleDateFormat-æ ¼å¼åŒ–æ—¥æœŸ"><a href="#ğŸä½¿ç”¨-SimpleDateFormat-æ ¼å¼åŒ–æ—¥æœŸ" class="headerlink" title="ğŸä½¿ç”¨ SimpleDateFormat æ ¼å¼åŒ–æ—¥æœŸ"></a>ğŸä½¿ç”¨ SimpleDateFormat æ ¼å¼åŒ–æ—¥æœŸ</h3><p>SimpleDateFormat æ˜¯ä¸€ä¸ªä»¥è¯­è¨€ç¯å¢ƒæ•æ„Ÿçš„æ–¹å¼æ¥æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±»ã€‚ SimpleDateFormat å…è®¸æ‚¨é€‰æ‹©ä»»ä½•ç”¨æˆ·å®šä¹‰çš„æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–çš„æ¨¡å¼ã€‚</p>
<p>è®©æˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„å®ä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class CurrentDate</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/CurrentDate"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentDate</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CurrentDate</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line"></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"æ˜¾ç¤ºå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´"</span>;</span><br><span class="line">        Date dNow = <span class="keyword">new</span> Date( );</span><br><span class="line">        SimpleDateFormat ft = </span><br><span class="line">                <span class="keyword">new</span> SimpleDateFormat (<span class="string">"yyyy.MM.dd  hh:mm:ss E a "</span>);</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + ft.format(dNow) + <span class="string">"&lt;/h2&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç "><a href="#ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç " class="headerlink" title="ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç "></a>ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç </h3><p>ä½¿ç”¨äº‹ä»¶æ¨¡å¼å­—ç¬¦ä¸²æ¥æŒ‡å®šæ—¶é—´æ ¼å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„ ASCII å­—æ¯è¢«ä¿ç•™ä¸ºæ¨¡å¼å­—æ¯ï¼Œè¿™äº›å­—æ¯å®šä¹‰å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th align="left">å­—ç¬¦</th>
<th align="left">æè¿°</th>
<th align="left">å®ä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">G</td>
<td align="left">Era æŒ‡ç¤ºå™¨</td>
<td align="left">AD</td>
</tr>
<tr>
<td align="left">y</td>
<td align="left">å››ä½æ•°è¡¨ç¤ºçš„å¹´</td>
<td align="left">2001</td>
</tr>
<tr>
<td align="left">M</td>
<td align="left">ä¸€å¹´ä¸­çš„æœˆ</td>
<td align="left">July æˆ– 07</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">ä¸€æœˆä¸­çš„ç¬¬å‡ å¤©</td>
<td align="left">10</td>
</tr>
<tr>
<td align="left">h</td>
<td align="left">å¸¦æœ‰ A.M./P.M. çš„å°æ—¶ï¼ˆ1~12ï¼‰</td>
<td align="left">12</td>
</tr>
<tr>
<td align="left">H</td>
<td align="left">ä¸€å¤©ä¸­çš„ç¬¬å‡ å°æ—¶ï¼ˆ0~23ï¼‰</td>
<td align="left">22</td>
</tr>
<tr>
<td align="left">m</td>
<td align="left">ä¸€å°æ—¶ä¸­çš„ç¬¬å‡ åˆ†</td>
<td align="left">30</td>
</tr>
<tr>
<td align="left">s</td>
<td align="left">ä¸€åˆ†ä¸­çš„ç¬¬å‡ ç§’</td>
<td align="left">55</td>
</tr>
<tr>
<td align="left">S</td>
<td align="left">æ¯«ç§’</td>
<td align="left">234</td>
</tr>
<tr>
<td align="left">E</td>
<td align="left">ä¸€å‘¨ä¸­çš„æ˜ŸæœŸå‡ </td>
<td align="left">Tuesday</td>
</tr>
<tr>
<td align="left">D</td>
<td align="left">ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©</td>
<td align="left">360</td>
</tr>
<tr>
<td align="left">F</td>
<td align="left">æ‰€åœ¨çš„å‘¨æ˜¯è¿™ä¸ªæœˆçš„ç¬¬å‡ å‘¨</td>
<td align="left">2 (second Wed. in July)</td>
</tr>
<tr>
<td align="left">w</td>
<td align="left">ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨</td>
<td align="left">40</td>
</tr>
<tr>
<td align="left">W</td>
<td align="left">ä¸€æœˆä¸­çš„ç¬¬å‡ å‘¨</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">A.M./P.M. æ ‡è®°</td>
<td align="left">PM</td>
</tr>
<tr>
<td align="left">k</td>
<td align="left">ä¸€å¤©ä¸­çš„ç¬¬å‡ å°æ—¶ï¼ˆ1~24ï¼‰</td>
<td align="left">24</td>
</tr>
<tr>
<td align="left">K</td>
<td align="left">å¸¦æœ‰ A.M./P.M. çš„å°æ—¶ï¼ˆ0~11ï¼‰</td>
<td align="left">10</td>
</tr>
<tr>
<td align="left">z</td>
<td align="left">æ—¶åŒº</td>
<td align="left">Eastern Standard Time</td>
</tr>
<tr>
<td align="left">â€˜</td>
<td align="left">Escape for text</td>
<td align="left">Delimiter</td>
</tr>
<tr>
<td align="left">â€œ</td>
<td align="left">å•å¼•å·</td>
<td align="left">`</td>
</tr>
</tbody></table>
<h2 id="ğŸŒ¸"><a href="#ğŸŒ¸" class="headerlink" title="ğŸŒ¸"></a>ğŸŒ¸</h2><p>å½“æ–‡æ¡£ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼Œæˆ‘ä»¬éœ€è¦å‘å®¢æˆ·ç«¯å‘é€è¿™ä¸ªæ–°ä½ç½®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ç½‘é¡µé‡å®šå‘ã€‚å½“ç„¶ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸ºäº†è´Ÿè½½å‡è¡¡ï¼Œæˆ–è€…åªæ˜¯ä¸ºäº†ç®€å•çš„éšæœºï¼Œè¿™äº›æƒ…å†µéƒ½æœ‰å¯èƒ½ç”¨åˆ°ç½‘é¡µé‡å®šå‘ã€‚</p>
<p>é‡å®šå‘è¯·æ±‚åˆ°å¦ä¸€ä¸ªç½‘é¡µçš„æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ response å¯¹è±¡çš„ sendRedirect() æ–¹æ³•ã€‚ä¸‹é¢æ˜¯è¯¥æ–¹æ³•çš„å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> HttpServletResponse.sendRedirect(String location)</span><br><span class="line"><span class="keyword">throws</span> IOException</span><br></pre></td></tr></tbody></table></figure>

<p>è¯¥æ–¹æ³•æŠŠå“åº”è¿åŒçŠ¶æ€ç å’Œæ–°çš„ç½‘é¡µä½ç½®å‘é€å›æµè§ˆå™¨ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡æŠŠ setStatus() å’Œ setHeader() æ–¹æ³•ä¸€èµ·ä½¿ç”¨æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">String site = <span class="string">"http://www.runoob.com"</span> ;</span><br><span class="line">response.setStatus(response.SC_MOVED_TEMPORARILY);</span><br><span class="line">response.setHeader(<span class="string">"Location"</span>, site); </span><br><span class="line">....</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸå®ä¾‹-1"><a href="#ğŸå®ä¾‹-1" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class PageRedirect</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/PageRedirect"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageRedirect</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="meta">@SuppressWarnings</span>(<span class="string">"static-access"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¦é‡å®šå‘çš„æ–°ä½ç½®</span></span><br><span class="line">      String site = <span class="keyword">new</span> String(<span class="string">"http://liudufu.gihub.io"</span>);</span><br><span class="line"></span><br><span class="line">      response.setStatus(response.SC_MOVED_TEMPORARILY);</span><br><span class="line">      response.setHeader(<span class="string">"Location"</span>, site);    </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>PageRedirect<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>PageRedirect<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>PageRedirect<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/PageRedirect<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨é€šè¿‡è®¿é—® URL <a href="http://localhost:8080/PageRedirect" target="_blank" rel="noopener">http://localhost:8080/PageRedirect</a> æ¥è°ƒç”¨è¿™ä¸ª Servlet</p>
<h2 id="ğŸŒ¸Servlet-ç‚¹å‡»è®¡æ•°å™¨"><a href="#ğŸŒ¸Servlet-ç‚¹å‡»è®¡æ•°å™¨" class="headerlink" title="ğŸŒ¸Servlet ç‚¹å‡»è®¡æ•°å™¨"></a>ğŸŒ¸Servlet ç‚¹å‡»è®¡æ•°å™¨</h2><p>å¾ˆå¤šæ—¶å€™ï¼Œæ‚¨å¯èƒ½æœ‰å…´è¶£çŸ¥é“ç½‘ç«™çš„æŸä¸ªç‰¹å®šé¡µé¢ä¸Šçš„æ€»ç‚¹å‡»é‡ã€‚ä½¿ç”¨ Servlet æ¥è®¡ç®—è¿™äº›ç‚¹å‡»é‡æ˜¯éå¸¸ç®€å•çš„ï¼Œå› ä¸ºä¸€ä¸ª Servlet çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±å®ƒè¿è¡Œæ‰€åœ¨çš„å®¹å™¨æ§åˆ¶çš„ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å®ç°ä¸€ä¸ªç®€å•çš„åŸºäº Servlet ç”Ÿå‘½å‘¨æœŸçš„ç½‘é¡µç‚¹å‡»è®¡æ•°å™¨éœ€è¦é‡‡å–çš„æ­¥éª¤ï¼š</p>
<ul>
<li>åœ¨ init() æ–¹æ³•ä¸­åˆå§‹åŒ–ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</li>
<li>æ¯æ¬¡è°ƒç”¨ doGet() æˆ– doPost() æ–¹æ³•æ—¶ï¼Œéƒ½å¢åŠ å…¨å±€å˜é‡ã€‚</li>
<li>å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“è¡¨æ¥å­˜å‚¨å…¨å±€å˜é‡çš„å€¼åœ¨ destroy() ä¸­ã€‚åœ¨ä¸‹æ¬¡åˆå§‹åŒ– Servlet æ—¶ï¼Œè¯¥å€¼å¯åœ¨ init() æ–¹æ³•å†…è¢«è¯»å–ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li>
<li>å¦‚æœæ‚¨åªæƒ³å¯¹ä¸€ä¸ª session ä¼šè¯è®¡æ•°ä¸€æ¬¡é¡µé¢ç‚¹å‡»ï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨ isNew() æ–¹æ³•æ¥æ£€æŸ¥è¯¥ session ä¼šè¯æ˜¯å¦å·²ç‚¹å‡»è¿‡ç›¸åŒé¡µé¢ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li>
<li>æ‚¨å¯ä»¥é€šè¿‡æ˜¾ç¤ºå…¨å±€è®¡æ•°å™¨çš„å€¼ï¼Œæ¥åœ¨ç½‘ç«™ä¸Šå±•ç¤ºé¡µé¢çš„æ€»ç‚¹å‡»é‡ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li>
</ul>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾ Web å®¹å™¨å°†æ— æ³•é‡æ–°å¯åŠ¨ã€‚å¦‚æœæ˜¯é‡æ–°å¯åŠ¨æˆ– Servlet è¢«é”€æ¯ï¼Œè®¡æ•°å™¨å°†è¢«é‡ç½®ã€‚</p>
<h3 id="ğŸå®ä¾‹-2"><a href="#ğŸå®ä¾‹-2" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class PageHitCounter</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/PageHitCounter"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageHitCounter</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hitCount; </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>{ </span><br><span class="line">        <span class="comment">// é‡ç½®ç‚¹å‡»è®¡æ•°å™¨</span></span><br><span class="line">        hitCount = <span class="number">0</span>;</span><br><span class="line">    } </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line"></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        <span class="comment">// å¢åŠ  hitCount </span></span><br><span class="line">        hitCount++; </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"æ€»ç‚¹å‡»é‡"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + hitCount + <span class="string">"&lt;/h2&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>{ </span><br><span class="line">        <span class="comment">// è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥æŠŠ hitCount çš„å€¼å†™å…¥åˆ°æ•°æ®åº“</span></span><br><span class="line">    } </span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>PageHitCounter<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.PageHitCounter<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>PageHitCounter<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/PageHitCounter<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨"><a href="#ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨" class="headerlink" title="ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨"></a>ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨</h3><p>å¾ˆå¤šæ—¶å€™ï¼Œæ‚¨å¯èƒ½æœ‰å…´è¶£çŸ¥é“æ•´ä¸ªç½‘ç«™çš„æ€»ç‚¹å‡»é‡ã€‚åœ¨ Servlet ä¸­ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å®ç°ä¸€ä¸ªç®€å•çš„åŸºäºè¿‡æ»¤å™¨ç”Ÿå‘½å‘¨æœŸçš„ç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨éœ€è¦é‡‡å–çš„æ­¥éª¤ï¼š</p>
<ul>
<li>åœ¨è¿‡æ»¤å™¨çš„ init() æ–¹æ³•ä¸­åˆå§‹åŒ–ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</li>
<li>æ¯æ¬¡è°ƒç”¨ doFilter æ–¹æ³•æ—¶ï¼Œéƒ½å¢åŠ å…¨å±€å˜é‡ã€‚</li>
<li>å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥åœ¨è¿‡æ»¤å™¨çš„ destroy() ä¸­ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“è¡¨æ¥å­˜å‚¨å…¨å±€å˜é‡çš„å€¼ã€‚åœ¨ä¸‹æ¬¡åˆå§‹åŒ–è¿‡æ»¤å™¨æ—¶ï¼Œè¯¥å€¼å¯åœ¨ init() æ–¹æ³•å†…è¢«è¯»å–, è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li>
</ul>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾ Web å®¹å™¨å°†æ— æ³•é‡æ–°å¯åŠ¨ã€‚å¦‚æœæ˜¯é‡æ–°å¯åŠ¨æˆ– Servlet è¢«é”€æ¯ï¼Œç‚¹å‡»è®¡æ•°å™¨å°†è¢«é‡ç½®ã€‚</p>
<h3 id="ğŸå®ä¾‹-3"><a href="#ğŸå®ä¾‹-3" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SiteHitCounter</span> <span class="keyword">implements</span> <span class="title">Filter</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> hitCount; </span><br><span class="line">               </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">(FilterConfig config)</span> </span></span><br><span class="line"><span class="function">                    <span class="keyword">throws</span> ServletException</span>{</span><br><span class="line">     <span class="comment">// é‡ç½®ç‚¹å‡»è®¡æ•°å™¨</span></span><br><span class="line">     hitCount = <span class="number">0</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">doFilter</span><span class="params">(ServletRequest request, </span></span></span><br><span class="line"><span class="function"><span class="params">              ServletResponse response,</span></span></span><br><span class="line"><span class="function"><span class="params">              FilterChain chain)</span> </span></span><br><span class="line"><span class="function">              <span class="keyword">throws</span> java.io.IOException, ServletException </span>{</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æŠŠè®¡æ•°å™¨çš„å€¼å¢åŠ  1</span></span><br><span class="line">      hitCount++;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¾“å‡ºè®¡æ•°å™¨</span></span><br><span class="line">      System.out.println(<span class="string">"ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š"</span>+ hitCount );</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æŠŠè¯·æ±‚ä¼ å›åˆ°è¿‡æ»¤å™¨é“¾</span></span><br><span class="line">      chain.doFilter(request,response);</span><br><span class="line">  }</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">  </span>{ </span><br><span class="line">      <span class="comment">// è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥æŠŠ hitCount çš„å€¼å†™å…¥åˆ°æ•°æ®åº“</span></span><br><span class="line">  } </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>SiteHitCounter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>SiteHitCounter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>SiteHitCounter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨è®¿é—®ç½‘ç«™çš„ä»»æ„é¡µé¢ï¼Œæ¯”å¦‚ <a href="http://localhost:8080/ã€‚è¿™å°†ä¼šåœ¨æ¯æ¬¡ä»»æ„é¡µé¢è¢«ç‚¹å‡»æ—¶ï¼ŒæŠŠè®¡æ•°å™¨çš„å€¼å¢åŠ " target="_blank" rel="noopener">http://localhost:8080/ã€‚è¿™å°†ä¼šåœ¨æ¯æ¬¡ä»»æ„é¡µé¢è¢«ç‚¹å‡»æ—¶ï¼ŒæŠŠè®¡æ•°å™¨çš„å€¼å¢åŠ </a> 1ï¼Œå®ƒä¼šåœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºä»¥ä¸‹æ¶ˆæ¯ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 1</span><br><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 2</span><br><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 3</span><br><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 4</span><br><span class="line">ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š 5</span><br><span class="line">..................</span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸŒ¸Servlet-è‡ªåŠ¨åˆ·æ–°é¡µé¢"><a href="#ğŸŒ¸Servlet-è‡ªåŠ¨åˆ·æ–°é¡µé¢" class="headerlink" title="ğŸŒ¸Servlet è‡ªåŠ¨åˆ·æ–°é¡µé¢"></a>ğŸŒ¸Servlet è‡ªåŠ¨åˆ·æ–°é¡µé¢</h2><p>å‡è®¾æœ‰ä¸€ä¸ªç½‘é¡µï¼Œå®ƒæ˜¯æ˜¾ç¤ºç°åœºæ¯”èµ›æˆç»©æˆ–è‚¡ç¥¨å¸‚åœºçŠ¶å†µæˆ–è´§å¸å…‘æ¢ç‡ã€‚å¯¹äºæ‰€æœ‰è¿™äº›ç±»å‹çš„é¡µé¢ï¼Œæ‚¨éœ€è¦å®šæœŸåˆ·æ–°ç½‘é¡µã€‚</p>
<p>Java Servlet æä¾›äº†ä¸€ä¸ªæœºåˆ¶ï¼Œä½¿å¾—ç½‘é¡µä¼šåœ¨ç»™å®šçš„æ—¶é—´é—´éš”è‡ªåŠ¨åˆ·æ–°ã€‚</p>
<p>åˆ·æ–°ç½‘é¡µçš„æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨å“åº”å¯¹è±¡çš„æ–¹æ³• <strong>setIntHeader()</strong>ã€‚ä»¥ä¸‹æ˜¯è¿™ç§æ–¹æ³•çš„å®šä¹‰ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void setIntHeader(String header, int headerValue)</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ–¹æ³•æŠŠå¤´ä¿¡æ¯ â€œRefreshâ€ è¿åŒä¸€ä¸ªè¡¨ç¤ºæ—¶é—´é—´éš”çš„æ•´æ•°å€¼ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰å‘é€å›æµè§ˆå™¨ã€‚</p>
<h3 id="ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹"><a href="#ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹" class="headerlink" title="ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹"></a>ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹</h3><p>æœ¬å®ä¾‹æ¼”ç¤ºäº† Servlet å¦‚ä½•ä½¿ç”¨ <strong>setIntHeader()</strong> æ–¹æ³•æ¥è®¾ç½® <strong>Refresh</strong> å¤´ä¿¡æ¯ï¼Œä»è€Œå®ç°è‡ªåŠ¨åˆ·æ–°é¡µé¢ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.GregorianCalendar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class Refresh</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/Refresh"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Refresh</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®åˆ·æ–°è‡ªåŠ¨åŠ è½½çš„äº‹ä»¶é—´éš”ä¸º 5 ç§’</span></span><br><span class="line">        response.setIntHeader(<span class="string">"Refresh"</span>, <span class="number">5</span>);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">// è·å–å½“å‰çš„æ—¶é—´</span></span><br><span class="line">        Calendar calendar = <span class="keyword">new</span> GregorianCalendar();</span><br><span class="line">        String am_pm;</span><br><span class="line">        <span class="keyword">int</span> hour = calendar.get(Calendar.HOUR);</span><br><span class="line">        <span class="keyword">int</span> minute = calendar.get(Calendar.MINUTE);</span><br><span class="line">        <span class="keyword">int</span> second = calendar.get(Calendar.SECOND);</span><br><span class="line">        <span class="keyword">if</span>(calendar.get(Calendar.AM_PM) == <span class="number">0</span>)</span><br><span class="line">            am_pm = <span class="string">"AM"</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            am_pm = <span class="string">"PM"</span>;</span><br><span class="line">     </span><br><span class="line">        String CT = hour+<span class="string">":"</span>+ minute +<span class="string">":"</span>+ second +<span class="string">" "</span>+ am_pm;</span><br><span class="line">        </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String title = <span class="string">"ä½¿ç”¨ Servlet è‡ªåŠ¨åˆ·æ–°é¡µé¢"</span>;</span><br><span class="line">        String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">        out.println(docType +</span><br><span class="line">            <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span>+</span><br><span class="line">            <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">            <span class="string">"&lt;p&gt;å½“å‰æ—¶é—´æ˜¯ï¼š"</span> + CT + <span class="string">"&lt;/p&gt;\n"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Refresh<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.Refresh<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Refresh<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/Refresh<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸŒ¸Servlet-å‘é€ç”µå­é‚®ä»¶"><a href="#ğŸŒ¸Servlet-å‘é€ç”µå­é‚®ä»¶" class="headerlink" title="ğŸŒ¸Servlet å‘é€ç”µå­é‚®ä»¶"></a>ğŸŒ¸Servlet å‘é€ç”µå­é‚®ä»¶</h2><p>ä½¿ç”¨ Servlet å‘é€ä¸€å°ç”µå­é‚®ä»¶æ˜¯å¾ˆç®€å•çš„ï¼Œä½†é¦–å…ˆæ‚¨å¿…é¡»åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šå®‰è£… <strong>JavaMail API</strong> å’Œ <strong>Java Activation Frameworkï¼‰JAFï¼‰</strong>ã€‚</p>
<ul>
<li>æ‚¨å¯ä»¥ä» Java ç½‘ç«™ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ <a href="http://www.oracle.com/technetwork/java/javamail/index.html" target="_blank" rel="noopener">JavaMail</a>ï¼Œæ‰“å¼€ç½‘é¡µå³ä¾§æœ‰ä¸ª <strong>Downloads</strong> é“¾æ¥ï¼Œç‚¹å‡»å®ƒä¸‹è½½ã€‚</li>
<li>æ‚¨å¯ä»¥ä» Java ç½‘ç«™ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ <a href="http://www.oracle.com/technetwork/articles/java/index-135046.html" target="_blank" rel="noopener">JAFï¼ˆï¼‰</a>ã€‚</li>
</ul>
<p>ä¸‹è½½å¹¶è§£å‹ç¼©è¿™äº›æ–‡ä»¶ï¼Œåœ¨æ–°åˆ›å»ºçš„é¡¶å±‚ç›®å½•ä¸­ï¼Œæ‚¨ä¼šå‘ç°è¿™ä¸¤ä¸ªåº”ç”¨ç¨‹åºçš„ä¸€äº› jar æ–‡ä»¶ã€‚æ‚¨éœ€è¦æŠŠ <strong>mail.jar</strong> å’Œ <strong>activation.jar</strong> æ–‡ä»¶æ·»åŠ åˆ°æ‚¨çš„ CLASSPATH ä¸­ã€‚</p>
<h3 id="ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶"><a href="#ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶" class="headerlink" title="ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶"></a>ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶</h3><p>ä¸‹é¢çš„å®ä¾‹å°†ä»æ‚¨çš„è®¡ç®—æœºä¸Šå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶ã€‚è¿™é‡Œå‡è®¾æ‚¨çš„<strong>æœ¬åœ°ä¸»æœº</strong>å·²è¿æ¥åˆ°äº’è”ç½‘ï¼Œå¹¶æ”¯æŒå‘é€ç”µå­é‚®ä»¶ã€‚åŒæ—¶ç¡®ä¿ Java Email API åŒ…å’Œ JAF åŒ…çš„æ‰€æœ‰çš„ jar æ–‡ä»¶åœ¨ CLASSPATH ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶å SendEmail.java</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.*;</span><br><span class="line"><span class="keyword">import</span> javax.activation.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendEmail</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ”¶ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String to = <span class="string">"abcd@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‘ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String from = <span class="string">"web@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‡è®¾æ‚¨æ˜¯ä»æœ¬åœ°ä¸»æœºå‘é€ç”µå­é‚®ä»¶</span></span><br><span class="line">      String host = <span class="string">"localhost"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–ç³»ç»Ÿçš„å±æ€§</span></span><br><span class="line">      Properties properties = System.getProperties();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è®¾ç½®é‚®ä»¶æœåŠ¡å™¨</span></span><br><span class="line">      properties.setProperty(<span class="string">"mail.smtp.host"</span>, host);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–é»˜è®¤çš„ Session å¯¹è±¡</span></span><br><span class="line">      Session session = Session.getDefaultInstance(properties);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span>{</span><br><span class="line">         <span class="comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ MimeMessage å¯¹è±¡</span></span><br><span class="line">         MimeMessage message = <span class="keyword">new</span> MimeMessage(session);</span><br><span class="line">         <span class="comment">// è®¾ç½® From: header field of the header.</span></span><br><span class="line">         message.setFrom(<span class="keyword">new</span> InternetAddress(from));</span><br><span class="line">         <span class="comment">// è®¾ç½® To: header field of the header.</span></span><br><span class="line">         message.addRecipient(Message.RecipientType.TO,</span><br><span class="line">                                  <span class="keyword">new</span> InternetAddress(to));</span><br><span class="line">         <span class="comment">// è®¾ç½® Subject: header field</span></span><br><span class="line">         message.setSubject(<span class="string">"This is the Subject Line!"</span>);</span><br><span class="line">         <span class="comment">// ç°åœ¨è®¾ç½®å®é™…æ¶ˆæ¯</span></span><br><span class="line">         message.setText(<span class="string">"This is actual message"</span>);</span><br><span class="line">         <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">         Transport.send(message);</span><br><span class="line">         String title = <span class="string">"å‘é€ç”µå­é‚®ä»¶"</span>;</span><br><span class="line">         String res = <span class="string">"æˆåŠŸå‘é€æ¶ˆæ¯..."</span>;</span><br><span class="line">         String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">         out.println(docType +</span><br><span class="line">         <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;p align=\"center\"&gt;"</span> + res + <span class="string">"&lt;/p&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">      }<span class="keyword">catch</span> (MessagingException mex) {</span><br><span class="line">         mex.printStackTrace();</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SendEmail<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>SendEmail<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SendEmail<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/SendEmail<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç°åœ¨é€šè¿‡è®¿é—® URL <a href="http://localhost:8080/SendEmail" target="_blank" rel="noopener">http://localhost:8080/SendEmail</a> æ¥è°ƒç”¨è¿™ä¸ª Servletã€‚è¿™å°†ä¼šå‘é€ä¸€å°ç”µå­é‚®ä»¶åˆ°ç»™å®šçš„ç”µå­é‚®ä»¶ ID <em><a href="mailto:abcd@gmail.com">abcd@gmail.com</a></em>ï¼Œå¹¶å°†æ˜¾ç¤ºä¸‹é¢æ‰€ç¤ºçš„å“åº”ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å‘é€ç”µå­é‚®ä»¶</span><br><span class="line">æˆåŠŸå‘é€æ¶ˆæ¯...</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœæ‚¨æƒ³è¦å‘é€ä¸€å°ç”µå­é‚®ä»¶ç»™å¤šä¸ªæ”¶ä»¶äººï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥æŒ‡å®šå¤šä¸ªç”µå­é‚®ä»¶ IDï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addRecipients</span><span class="params">(Message.RecipientType type, </span></span></span><br><span class="line"><span class="function"><span class="params">                   Address[] addresses)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> MessagingException</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢æ˜¯å¯¹å‚æ•°çš„æè¿°ï¼š</p>
<ul>
<li><strong>typeï¼š</strong>è¿™å°†è¢«è®¾ç½®ä¸º TOã€CC æˆ– BCCã€‚åœ¨è¿™é‡Œï¼ŒCC ä»£è¡¨æŠ„é€ï¼ŒBCC ä»£è¡¨å¯†ä»¶æŠ„é€ã€‚ä¾‹å¦‚ <em>Message.RecipientType.TO</em>ã€‚</li>
<li><strong>addressesï¼š</strong>è¿™æ˜¯ç”µå­é‚®ä»¶ ID çš„æ•°ç»„ã€‚å½“æŒ‡å®šç”µå­é‚®ä»¶ ID æ—¶ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ InternetAddress() æ–¹æ³•ã€‚</li>
</ul>
<h3 id="ğŸå‘é€ä¸€å°-HTML-ç”µå­é‚®ä»¶"><a href="#ğŸå‘é€ä¸€å°-HTML-ç”µå­é‚®ä»¶" class="headerlink" title="ğŸå‘é€ä¸€å° HTML ç”µå­é‚®ä»¶"></a>ğŸå‘é€ä¸€å° HTML ç”µå­é‚®ä»¶</h3><p>ä¸‹é¢çš„å®ä¾‹å°†ä»æ‚¨çš„è®¡ç®—æœºä¸Šå‘é€ä¸€å° HTML æ ¼å¼çš„ç”µå­é‚®ä»¶ã€‚è¿™é‡Œå‡è®¾æ‚¨çš„<strong>æœ¬åœ°ä¸»æœº</strong>å·²è¿æ¥åˆ°äº’è”ç½‘ï¼Œå¹¶æ”¯æŒå‘é€ç”µå­é‚®ä»¶ã€‚åŒæ—¶ç¡®ä¿ Java Email API åŒ…å’Œ JAF åŒ…çš„æ‰€æœ‰çš„ jar æ–‡ä»¶åœ¨ CLASSPATH ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚</p>
<p>æœ¬å®ä¾‹ä¸ä¸Šä¸€ä¸ªå®ä¾‹å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ setContent() æ–¹æ³•æ¥è®¾ç½®ç¬¬äºŒä¸ªå‚æ•°ä¸º â€œtext/htmlâ€ çš„å†…å®¹ï¼Œè¯¥å‚æ•°ç”¨æ¥æŒ‡å®š HTML å†…å®¹æ˜¯åŒ…å«åœ¨æ¶ˆæ¯ä¸­çš„ã€‚</p>
<p>ä½¿ç”¨è¿™ä¸ªå®ä¾‹ï¼Œæ‚¨å¯ä»¥å‘é€å†…å®¹å¤§å°ä¸é™çš„ HTML å†…å®¹ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶å SendEmail.java</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.*;</span><br><span class="line"><span class="keyword">import</span> javax.activation.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendEmail</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ”¶ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String to = <span class="string">"abcd@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‘ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String from = <span class="string">"web@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‡è®¾æ‚¨æ˜¯ä»æœ¬åœ°ä¸»æœºå‘é€ç”µå­é‚®ä»¶</span></span><br><span class="line">      String host = <span class="string">"localhost"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–ç³»ç»Ÿçš„å±æ€§</span></span><br><span class="line">      Properties properties = System.getProperties();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è®¾ç½®é‚®ä»¶æœåŠ¡å™¨</span></span><br><span class="line">      properties.setProperty(<span class="string">"mail.smtp.host"</span>, host);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–é»˜è®¤çš„ Session å¯¹è±¡</span></span><br><span class="line">      Session session = Session.getDefaultInstance(properties);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span>{</span><br><span class="line">         <span class="comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ MimeMessage å¯¹è±¡</span></span><br><span class="line">         MimeMessage message = <span class="keyword">new</span> MimeMessage(session);</span><br><span class="line">         <span class="comment">// è®¾ç½® From: header field of the header.</span></span><br><span class="line">         message.setFrom(<span class="keyword">new</span> InternetAddress(from));</span><br><span class="line">         <span class="comment">// è®¾ç½® To: header field of the header.</span></span><br><span class="line">         message.addRecipient(Message.RecipientType.TO,</span><br><span class="line">                                  <span class="keyword">new</span> InternetAddress(to));</span><br><span class="line">         <span class="comment">// è®¾ç½® Subject: header field</span></span><br><span class="line">         message.setSubject(<span class="string">"This is the Subject Line!"</span>);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// è®¾ç½®å®é™…çš„ HTML æ¶ˆæ¯ï¼Œå†…å®¹å¤§å°ä¸é™</span></span><br><span class="line">         message.setContent(<span class="string">"&lt;h1&gt;This is actual message&lt;/h1&gt;"</span>,</span><br><span class="line">                            <span class="string">"text/html"</span> );</span><br><span class="line">         <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">         Transport.send(message);</span><br><span class="line">         String title = <span class="string">"å‘é€ç”µå­é‚®ä»¶"</span>;</span><br><span class="line">         String res = <span class="string">"æˆåŠŸå‘é€æ¶ˆæ¯..."</span>;</span><br><span class="line">         String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">         out.println(docType +</span><br><span class="line">         <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;p align=\"center\"&gt;"</span> + res + <span class="string">"&lt;/p&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">      }<span class="keyword">catch</span> (MessagingException mex) {</span><br><span class="line">         mex.printStackTrace();</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç¼–è¯‘å¹¶è¿è¡Œä¸Šé¢çš„ Servlet ï¼Œåœ¨ç»™å®šçš„ç”µå­é‚®ä»¶ ID ä¸Šå‘é€ HTML æ¶ˆæ¯ã€‚</p>
<h3 id="ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶"><a href="#ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶" class="headerlink" title="ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶"></a>ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶</h3><p>ä¸‹é¢çš„å®ä¾‹å°†ä»æ‚¨çš„è®¡ç®—æœºä¸Šå‘é€ä¸€å°å¸¦æœ‰é™„ä»¶çš„ç”µå­é‚®ä»¶ã€‚è¿™é‡Œå‡è®¾æ‚¨çš„<strong>æœ¬åœ°ä¸»æœº</strong>å·²è¿æ¥åˆ°äº’è”ç½‘ï¼Œå¹¶æ”¯æŒå‘é€ç”µå­é‚®ä»¶ã€‚åŒæ—¶ç¡®ä¿ Java Email API åŒ…å’Œ JAF åŒ…çš„æ‰€æœ‰çš„ jar æ–‡ä»¶åœ¨ CLASSPATH ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶å SendEmail.java</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.*;</span><br><span class="line"><span class="keyword">import</span> javax.activation.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendEmail</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ”¶ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String to = <span class="string">"abcd@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‘ä»¶äººçš„ç”µå­é‚®ä»¶ ID</span></span><br><span class="line">      String from = <span class="string">"web@gmail.com"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‡è®¾æ‚¨æ˜¯ä»æœ¬åœ°ä¸»æœºå‘é€ç”µå­é‚®ä»¶</span></span><br><span class="line">      String host = <span class="string">"localhost"</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–ç³»ç»Ÿçš„å±æ€§</span></span><br><span class="line">      Properties properties = System.getProperties();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è®¾ç½®é‚®ä»¶æœåŠ¡å™¨</span></span><br><span class="line">      properties.setProperty(<span class="string">"mail.smtp.host"</span>, host);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// è·å–é»˜è®¤çš„ Session å¯¹è±¡</span></span><br><span class="line">      Session session = Session.getDefaultInstance(properties);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">       <span class="keyword">try</span>{</span><br><span class="line">         <span class="comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ MimeMessage å¯¹è±¡</span></span><br><span class="line">         MimeMessage message = <span class="keyword">new</span> MimeMessage(session);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// è®¾ç½® From: header field of the header.</span></span><br><span class="line">         message.setFrom(<span class="keyword">new</span> InternetAddress(from));</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// è®¾ç½® To: header field of the header.</span></span><br><span class="line">         message.addRecipient(Message.RecipientType.TO,</span><br><span class="line">                                  <span class="keyword">new</span> InternetAddress(to));</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// è®¾ç½® Subject: header field</span></span><br><span class="line">         message.setSubject(<span class="string">"This is the Subject Line!"</span>);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// åˆ›å»ºæ¶ˆæ¯éƒ¨åˆ† </span></span><br><span class="line">         BodyPart messageBodyPart = <span class="keyword">new</span> MimeBodyPart();</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// å¡«å†™æ¶ˆæ¯</span></span><br><span class="line">         messageBodyPart.setText(<span class="string">"This is message body"</span>);</span><br><span class="line">         </span><br><span class="line">         <span class="comment">// åˆ›å»ºä¸€ä¸ªå¤šéƒ¨åˆ†æ¶ˆæ¯</span></span><br><span class="line">         Multipart multipart = <span class="keyword">new</span> MimeMultipart();</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// è®¾ç½®æ–‡æœ¬æ¶ˆæ¯éƒ¨åˆ†</span></span><br><span class="line">         multipart.addBodyPart(messageBodyPart);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// ç¬¬äºŒéƒ¨åˆ†æ˜¯é™„ä»¶</span></span><br><span class="line">         messageBodyPart = <span class="keyword">new</span> MimeBodyPart();</span><br><span class="line">         String filename = <span class="string">"file.txt"</span>;</span><br><span class="line">         DataSource source = <span class="keyword">new</span> FileDataSource(filename);</span><br><span class="line">         messageBodyPart.setDataHandler(<span class="keyword">new</span> DataHandler(source));</span><br><span class="line">         messageBodyPart.setFileName(filename);</span><br><span class="line">         multipart.addBodyPart(messageBodyPart);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// å‘é€å®Œæ•´çš„æ¶ˆæ¯éƒ¨åˆ†</span></span><br><span class="line">         message.setContent(multipart );</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">         Transport.send(message);</span><br><span class="line">         String title = <span class="string">"å‘é€ç”µå­é‚®ä»¶"</span>;</span><br><span class="line">         String res = <span class="string">"æˆåŠŸå‘é€ç”µå­é‚®ä»¶..."</span>;</span><br><span class="line">         String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">         out.println(docType +</span><br><span class="line">         <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;p align=\"center\"&gt;"</span> + res + <span class="string">"&lt;/p&gt;\n"</span> +</span><br><span class="line">         <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">      }<span class="keyword">catch</span> (MessagingException mex) {</span><br><span class="line">         mex.printStackTrace();</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç¼–è¯‘å¹¶è¿è¡Œä¸Šé¢çš„ Servlet ï¼Œåœ¨ç»™å®šçš„ç”µå­é‚®ä»¶ ID ä¸Šå‘é€å¸¦æœ‰æ–‡ä»¶é™„ä»¶çš„æ¶ˆæ¯ã€‚</p>
<h3 id="ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†"><a href="#ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†" class="headerlink" title="ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†"></a>ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†</h3><p>å¦‚æœéœ€è¦å‘ç”µå­é‚®ä»¶æœåŠ¡å™¨æä¾›ç”¨æˆ· ID å’Œå¯†ç è¿›è¡Œèº«ä»½è®¤è¯ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è®¾ç½®å¦‚ä¸‹å±æ€§ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">props.setProperty(<span class="string">"mail.user"</span>, <span class="string">"myuser"</span>);</span><br><span class="line">props.setProperty(<span class="string">"mail.password"</span>, <span class="string">"mypwd"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>ç”µå­é‚®ä»¶å‘é€æœºåˆ¶çš„å…¶ä½™éƒ¨åˆ†ä¸ä¸Šé¢è®²è§£çš„ä¿æŒä¸€è‡´ã€‚</p>
<h2 id="ğŸŒ¸ServletåŒ…"><a href="#ğŸŒ¸ServletåŒ…" class="headerlink" title="ğŸŒ¸ServletåŒ…"></a>ğŸŒ¸ServletåŒ…</h2><p>æ¶‰åŠåˆ° WEB-INF å­ç›®å½•çš„ Web åº”ç”¨ç¨‹åºç»“æ„æ˜¯æ‰€æœ‰çš„ Java web åº”ç”¨ç¨‹åºçš„æ ‡å‡†ï¼Œå¹¶ç”± Servlet API è§„èŒƒæŒ‡å®šã€‚ç»™å®šä¸€ä¸ªé¡¶çº§ç›®å½•å myappï¼Œç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/myapp</span><br><span class="line">    /images</span><br><span class="line">    /WEB-INF</span><br><span class="line">        /classes</span><br><span class="line">        /lib</span><br></pre></td></tr></tbody></table></figure>

<p>WEB-INF å­ç›®å½•ä¸­åŒ…å«åº”ç”¨ç¨‹åºçš„éƒ¨ç½²æè¿°ç¬¦ï¼Œåä¸º web.xmlã€‚æ‰€æœ‰çš„ HTML æ–‡ä»¶éƒ½ä½äºé¡¶çº§ç›®å½• <em>myapp</em> ä¸‹ã€‚å¯¹äº admin ç”¨æˆ·ï¼Œæ‚¨ä¼šå‘ç° ROOT ç›®å½•æ˜¯ myApp çš„çˆ¶ç›®å½•ã€‚</p>
<h3 id="ğŸåˆ›å»ºåŒ…ä¸­çš„-Servlet"><a href="#ğŸåˆ›å»ºåŒ…ä¸­çš„-Servlet" class="headerlink" title="ğŸåˆ›å»ºåŒ…ä¸­çš„ Servlet"></a>ğŸåˆ›å»ºåŒ…ä¸­çš„ Servlet</h3><p>WEB-INF/classes ç›®å½•åŒ…å«äº†æ‰€æœ‰çš„ Servlet ç±»å’Œå…¶ä»–ç±»æ–‡ä»¶ï¼Œç±»æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ç»“æ„ä¸ä»–ä»¬çš„åŒ…åç§°åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„ç±»åç§° <strong>com.myorg.MyServlet</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ª Servlet ç±»å¿…é¡»ä½äºä»¥ä¸‹ç›®å½•ä¸­ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/myapp/WEB-INF/classes/com/myorg/MyServlet.class</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢çš„ä¾‹å­åˆ›å»ºåŒ…åä¸º <em>com.myorg</em> çš„ MyServlet ç±»ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ºåŒ…å‘½å</span></span><br><span class="line"><span class="keyword">package</span> com.myorg;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/MyServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">private</span> String message;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// æ‰§è¡Œå¿…éœ€çš„çš„åˆå§‹åŒ–</span></span><br><span class="line">      message = <span class="string">"Hello World"</span>;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å®é™…çš„é€»è¾‘æ˜¯åœ¨è¿™é‡Œ</span></span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line">      out.println(<span class="string">"&lt;h1&gt;"</span> + message + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// ä»€ä¹ˆä¹Ÿä¸åš</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸç¼–è¯‘åŒ…ä¸­çš„-Servlet"><a href="#ğŸç¼–è¯‘åŒ…ä¸­çš„-Servlet" class="headerlink" title="ğŸç¼–è¯‘åŒ…ä¸­çš„ Servlet"></a>ğŸç¼–è¯‘åŒ…ä¸­çš„ Servlet</h3><p>ç¼–è¯‘åŒ…ä¸­çš„ç±»ä¸ç¼–è¯‘å…¶ä»–çš„ç±»æ²¡æœ‰ä»€ä¹ˆå¤§çš„ä¸åŒã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯è®©æ‚¨çš„ java æ–‡ä»¶ä¿ç•™å®Œå…¨é™å®šè·¯å¾„ï¼Œå¦‚ä¸Šé¢æåˆ°çš„ç±»ï¼Œå°†è¢«ä¿ç•™åœ¨ com.myorg ä¸­ã€‚æ‚¨è¿˜éœ€è¦åœ¨ CLASSPATH ä¸­æ·»åŠ è¯¥ç›®å½•ã€‚</p>
<p>å‡è®¾æ‚¨çš„ç¯å¢ƒå·²æ­£ç¡®è®¾ç½®ï¼Œè¿›å…¥ <strong><tomcat-installation-directory>/webapps/ROOT/WEB-INF/classes</tomcat-installation-directory></strong> ç›®å½•ï¼Œå¹¶ç¼–è¯‘ MyServlet.javaï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ javac MyServlet.java</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœ Servlet ä¾èµ–äºå…¶ä»–åº“ï¼Œé‚£ä¹ˆæ‚¨å¿…é¡»åœ¨ CLASSPATH ä¸­ä¹Ÿè¦å¼•ç”¨é‚£äº› JAR æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘åªå¼•ç”¨äº† servlet-api.jar JAR æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘åœ¨ Hello World ç¨‹åºä¸­å¹¶æ²¡æœ‰ä½¿ç”¨ä»»ä½•å…¶ä»–åº“ã€‚</p>
<p>è¯¥å‘½ä»¤è¡Œä½¿ç”¨å†…ç½®çš„ javac ç¼–è¯‘å™¨ï¼Œå®ƒæ˜¯ Sun Microsystems Java è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼Œå…¨ç§° Java Software Development Kitï¼‰é™„å¸¦çš„ã€‚ Microsystemsçš„Javaè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰ã€‚ä¸ºäº†è®©è¯¥å‘½ä»¤æ­£å¸¸å·¥ä½œï¼Œå¿…é¡»åŒ…æ‹¬æ‚¨åœ¨ PATH ç¯å¢ƒå˜é‡ä¸­æ‰€ä½¿ç”¨çš„ Java SDK çš„ä½ç½®ã€‚</p>
<p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä¸Šè¿°ç¼–è¯‘ä¼šåœ¨åŒä¸€ç›®å½•ä¸‹ç”Ÿæˆ <strong>MyServlet.class</strong> æ–‡ä»¶ã€‚ä¸‹ä¸€èŠ‚å°†è§£é‡Šå¦‚ä½•æŠŠä¸€ä¸ªå·²ç¼–è¯‘çš„ Servlet éƒ¨ç½²åˆ°ç”Ÿäº§ä¸­ã€‚</p>
<h3 id="ğŸServlet-æ‰“åŒ…éƒ¨ç½²"><a href="#ğŸServlet-æ‰“åŒ…éƒ¨ç½²" class="headerlink" title="ğŸServlet æ‰“åŒ…éƒ¨ç½²"></a>ğŸServlet æ‰“åŒ…éƒ¨ç½²</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒServlet åº”ç”¨ç¨‹åºä½äºè·¯å¾„ <tomcat-installation-directory>/webapps/ROOT ä¸‹ï¼Œä¸”ç±»æ–‡ä»¶æ”¾åœ¨ <tomcat-installation-directory>/webapps/ROOT/WEB-INF/classes ä¸­ã€‚</tomcat-installation-directory></tomcat-installation-directory></p>
<p>å¦‚æœæ‚¨æœ‰ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„ç±»åç§° <strong>com.myorg.MyServlet</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ª Servlet ç±»å¿…é¡»ä½äº WEB-INF/classes/com/myorg/MyServlet.class ä¸­ï¼Œæ‚¨éœ€è¦åœ¨ä½äº <tomcat-installation-directory>/webapps/ROOT/WEB-INF/ çš„ web.xml æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®ï¼š</tomcat-installation-directory></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.myorg.MyServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/MyServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢çš„æ¡ç›®è¦è¢«åˆ›å»ºåœ¨ web.xml æ–‡ä»¶ä¸­çš„ <web-app>â€¦</web-app> æ ‡ç­¾å†…ã€‚åœ¨è¯¥æ–‡ä»¶ä¸­å¯èƒ½å·²ç»æœ‰å„ç§å¯ç”¨çš„æ¡ç›®ï¼Œä½†ä¸è¦åœ¨æ„ã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œæ‚¨åŸºæœ¬ä¸Šå·²ç»å®Œæˆäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨ <tomcat-installation-directory>\bin\startup.batï¼ˆåœ¨ Windows ä¸Šï¼‰æˆ– <tomcat-installation-directory>/bin/startup.shï¼ˆåœ¨ Linux/Solaris ç­‰ä¸Šï¼‰å¯åŠ¨ tomcat æœåŠ¡å™¨ï¼Œæœ€ååœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥ <strong><a href="http://localhost:8080/MyServlet" target="_blank" rel="noopener">http://localhost:8080/MyServlet</a></strong>ã€‚</tomcat-installation-directory></tomcat-installation-directory></p>
<h2 id="ğŸŒ¸Servlet-è°ƒè¯•"><a href="#ğŸŒ¸Servlet-è°ƒè¯•" class="headerlink" title="ğŸŒ¸Servlet è°ƒè¯•"></a>ğŸŒ¸Servlet è°ƒè¯•</h2><p>æµ‹è¯•/è°ƒè¯• Servlet å§‹ç»ˆæ˜¯å¼€å‘ä½¿ç”¨è¿‡ç¨‹ä¸­çš„éš¾ç‚¹ã€‚Servlet å¾€å¾€æ¶‰åŠå¤§é‡çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨äº¤äº’ï¼Œå¯èƒ½ä¼šå‡ºç°é”™è¯¯ä½†åˆéš¾ä»¥é‡ç°ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€äº›æç¤ºå’Œå»ºè®®ï¼Œå¯ä»¥å¸®åŠ©æ‚¨è°ƒè¯•ã€‚</p>
<h3 id="ğŸSystem-out-println"><a href="#ğŸSystem-out-println" class="headerlink" title="ğŸSystem.out.println()"></a>ğŸSystem.out.println()</h3><p>System.out.println() æ˜¯ä½œä¸ºä¸€ä¸ªæ ‡è®°æ¥ä½¿ç”¨çš„ï¼Œç”¨æ¥æµ‹è¯•ä¸€æ®µç‰¹å®šçš„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰“å°å‡ºå˜é‡çš„å€¼ã€‚æ­¤å¤–ï¼š</p>
<ul>
<li>ç”±äº System å¯¹è±¡æ˜¯æ ¸å¿ƒ Java å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯ä»¥åœ¨ä¸éœ€è¦å®‰è£…ä»»ä½•é¢å¤–ç±»çš„æƒ…å†µä¸‹è¢«ç”¨äºä»»ä½•åœ°æ–¹ã€‚è¿™åŒ…æ‹¬ Servletã€JSPã€RMIã€EJBâ€™sã€æ™®é€šçš„ Beans å’Œç±»ï¼Œä»¥åŠç‹¬ç«‹çš„åº”ç”¨ç¨‹åºã€‚</li>
<li>ä¸åœ¨æ–­ç‚¹å¤„åœæ­¢ä¸åŒï¼Œå†™å…¥åˆ° System.out ä¸ä¼šå¹²æ‰°åˆ°åº”ç”¨ç¨‹åºçš„æ­£å¸¸æ‰§è¡Œæµç¨‹ï¼Œè¿™ä½¿å¾—å®ƒåœ¨æ—¶åºæ˜¯è‡³å…³é‡è¦çš„æ—¶å€™æ˜¾å¾—å°¤ä¸ºæœ‰ä»·å€¼ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨ System.out.println() çš„è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println("Debugging message");</span><br></pre></td></tr></tbody></table></figure>

<p>é€šè¿‡ä¸Šé¢çš„è¯­æ³•ç”Ÿæˆçš„æ‰€æœ‰æ¶ˆæ¯å°†è¢«è®°å½•åœ¨ Web æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p>
<h3 id="ğŸæ¶ˆæ¯æ—¥å¿—"><a href="#ğŸæ¶ˆæ¯æ—¥å¿—" class="headerlink" title="ğŸæ¶ˆæ¯æ—¥å¿—"></a>ğŸæ¶ˆæ¯æ—¥å¿—</h3><p>ä½¿ç”¨é€‚å½“çš„æ—¥å¿—è®°å½•æ–¹æ³•æ¥è®°å½•æ‰€æœ‰è°ƒè¯•ã€è­¦å‘Šå’Œé”™è¯¯æ¶ˆæ¯ï¼Œè¿™æ˜¯éå¸¸å¥½çš„æƒ³æ³•ï¼Œæ¨èä½¿ç”¨ <a href="https://logging.apache.org/log4j/2.0/download.html" target="_blank" rel="noopener">log4J</a> æ¥è®°å½•æ‰€æœ‰çš„æ¶ˆæ¯ã€‚</p>
<p>Servlet API è¿˜æä¾›äº†ä¸€ä¸ªç®€å•çš„è¾“å‡ºä¿¡æ¯çš„æ–¹å¼ï¼Œä½¿ç”¨ log() æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¿…éœ€çš„ java åº“</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextLog</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, </span></span></span><br><span class="line"><span class="function"><span class="params">      HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException,</span></span><br><span class="line"><span class="function">         java.io.IOException </span>{</span><br><span class="line">    </span><br><span class="line">      String par = request.getParameter(<span class="string">"par1"</span>);</span><br><span class="line">      <span class="comment">// è°ƒç”¨ä¸¤ä¸ª ServletContext.log æ–¹æ³•</span></span><br><span class="line">      ServletContext context = getServletContext( );</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (par == <span class="keyword">null</span> || par.equals(<span class="string">""</span>))</span><br><span class="line">      <span class="comment">// é€šè¿‡ Throwable å‚æ•°è®°å½•ç‰ˆæœ¬</span></span><br><span class="line">      context.log(<span class="string">"No message received:"</span>,</span><br><span class="line">          <span class="keyword">new</span> IllegalStateException(<span class="string">"Missing parameter"</span>));</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">          context.log(<span class="string">"Here is the visitor's message: "</span> + par);</span><br><span class="line">      </span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      java.io.PrintWriter out = response.getWriter( );</span><br><span class="line">      String title = <span class="string">"Context Log"</span>;</span><br><span class="line">      String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">        <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + title + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h2 align=\"center\"&gt;Messages sent&lt;/h2&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    } <span class="comment">//doGet</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ServletContext æŠŠå®ƒçš„æ–‡æœ¬æ¶ˆæ¯è®°å½•åˆ° Servlet å®¹å™¨çš„æ—¥å¿—æ–‡ä»¶ä¸­ã€‚å¯¹äº Tomcatï¼Œè¿™äº›æ—¥å¿—å¯ä»¥åœ¨ <tomcat-installation-directory>/logs ç›®å½•ä¸­æ‰¾åˆ°ã€‚</tomcat-installation-directory></p>
<p>è¿™äº›æ—¥å¿—æ–‡ä»¶ç¡®å®å¯¹æ–°å‡ºç°çš„é”™è¯¯æˆ–é—®é¢˜çš„é¢‘ç‡ç»™å‡ºæŒ‡ç¤ºã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œå»ºè®®åœ¨é€šå¸¸ä¸ä¼šå‘ç”Ÿçš„å¼‚å¸¸çš„ catch å­å¥ä¸­ä½¿ç”¨ log() å‡½æ•°ã€‚</p>
<h3 id="ğŸä½¿ç”¨-JDB-è°ƒè¯•å™¨"><a href="#ğŸä½¿ç”¨-JDB-è°ƒè¯•å™¨" class="headerlink" title="ğŸä½¿ç”¨ JDB è°ƒè¯•å™¨"></a>ğŸä½¿ç”¨ JDB è°ƒè¯•å™¨</h3><p>å¯ä»¥ä½¿ç”¨è°ƒè¯• applet æˆ–åº”ç”¨ç¨‹åºçš„ jdb å‘½ä»¤æ¥è°ƒè¯• Servletã€‚</p>
<p>ä¸ºäº†è°ƒè¯•ä¸€ä¸ª Servletï¼Œæˆ‘ä»¬å¯ä»¥è°ƒè¯• sun.servlet.http.HttpServerï¼Œç„¶åæŠŠå®ƒçœ‹æˆæ˜¯ HttpServer æ‰§è¡Œ Servlet æ¥å“åº”æµè§ˆå™¨ç«¯çš„ HTTP è¯·æ±‚ã€‚è¿™ä¸è°ƒè¯• applet å°ç¨‹åºéå¸¸ç›¸ä¼¼ã€‚ä¸è°ƒè¯• applet ä¸åŒçš„æ˜¯ï¼Œå®é™…è¢«è°ƒè¯•çš„ç¨‹åºæ˜¯ sun.applet.AppletViewerã€‚</p>
<p>å¤§å¤šæ•°è°ƒè¯•å™¨ä¼šè‡ªåŠ¨éšè—å¦‚ä½•è°ƒè¯• applet çš„ç»†èŠ‚ã€‚åŒæ ·çš„ï¼Œå¯¹äº servletï¼Œæ‚¨å¿…é¡»å¸®è°ƒè¯•å™¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>è®¾ç½®æ‚¨çš„è°ƒè¯•å™¨çš„ç±»è·¯å¾„ classpathï¼Œä»¥ä¾¿å®ƒå¯ä»¥æ‰¾åˆ° sun.servlet.http.Http-Server å’Œç›¸å…³çš„ç±»ã€‚</li>
<li>è®¾ç½®æ‚¨çš„è°ƒè¯•å™¨çš„ç±»è·¯å¾„ classpathï¼Œä»¥ä¾¿å®ƒå¯ä»¥æ‰¾åˆ°æ‚¨çš„ servlet å’Œæ”¯æŒçš„ç±»ï¼Œé€šå¸¸æ˜¯åœ¨ server_root/servlets å’Œ server_root/classes ä¸­ã€‚</li>
</ul>
<p>æ‚¨é€šå¸¸ä¸ä¼šå¸Œæœ› server_root/servlets åœ¨æ‚¨çš„ classpath ä¸­ï¼Œå› ä¸ºå®ƒä¼šç¦ç”¨ servlet çš„é‡æ–°åŠ è½½ã€‚ä½†æ˜¯è¿™ç§åŒ…å«è§„åˆ™å¯¹äºè°ƒè¯•æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚å®ƒå…è®¸æ‚¨çš„è°ƒè¯•å™¨åœ¨ HttpServer ä¸­çš„è‡ªå®šä¹‰ Servlet åŠ è½½å™¨åŠ è½½ Servlet ä¹‹å‰åœ¨ Servlet ä¸­è®¾ç½®æ–­ç‚¹ã€‚</p>
<p>å¦‚æœæ‚¨å·²ç»è®¾ç½®äº†æ­£ç¡®çš„ç±»è·¯å¾„ classpathï¼Œå°±å¯ä»¥å¼€å§‹è°ƒè¯• sun.servlet.http.HttpServerã€‚å¯ä»¥åœ¨æ‚¨æƒ³è¦è°ƒè¯•çš„ Servlet ä»£ç ä¸­è®¾ç½®æ–­ç‚¹ï¼Œç„¶åé€šè¿‡ Web æµè§ˆå™¨ä½¿ç”¨ç»™å®šçš„ Servletï¼ˆ<a href="http://localhost:8080/servlet/ServletToDebugï¼‰å‘" target="_blank" rel="noopener">http://localhost:8080/servlet/ServletToDebugï¼‰å‘</a> HttpServer å‘å‡ºè¯·æ±‚ã€‚æ‚¨ä¼šçœ‹åˆ°ç¨‹åºæ‰§è¡Œåˆ°æ–­ç‚¹å¤„ä¼šåœæ­¢ã€‚</p>
<h3 id="ğŸä½¿ç”¨æ³¨é‡Š"><a href="#ğŸä½¿ç”¨æ³¨é‡Š" class="headerlink" title="ğŸä½¿ç”¨æ³¨é‡Š"></a>ğŸä½¿ç”¨æ³¨é‡Š</h3><p>ä»£ç ä¸­çš„æ³¨é‡Šæœ‰åŠ©äºä»¥å„ç§æ–¹å¼è¿›è¡Œè°ƒè¯•ã€‚æ³¨é‡Šå¯ç”¨äºè°ƒè¯•è¿‡ç¨‹çš„å¾ˆå¤šå…¶ä»–æ–¹å¼ä¸­ã€‚</p>
<p>è¯¥ Servlet ä½¿ç”¨ Java æ³¨é‡Šå’Œå•è¡Œæ³¨é‡Šï¼ˆ//â€¦ï¼‰ï¼Œå¤šè¡Œæ³¨é‡Šï¼ˆ/* â€¦*/ï¼‰å¯ç”¨äºæš‚æ—¶ç§»é™¤éƒ¨åˆ† Java ä»£ç ã€‚å¦‚æœ bug æ¶ˆå¤±ï¼Œä»”ç»†çœ‹çœ‹æ‚¨åˆšæ‰æ³¨é‡Šçš„ä»£ç å¹¶æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚</p>
<h3 id="ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯"><a href="#ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯" class="headerlink" title="ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯"></a>ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯</h3><p>æœ‰æ—¶ï¼Œå½“ä¸€ä¸ª Servlet å¹¶æ²¡æœ‰åƒé¢„æœŸé‚£æ ·æ—¶ï¼ŒæŸ¥çœ‹åŸå§‹çš„ HTTP è¯·æ±‚å’Œå“åº”æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚å¦‚æœæ‚¨ç†Ÿæ‚‰ HTTP ç»“æ„ï¼Œæ‚¨å¯ä»¥é˜…è¯»è¯·æ±‚å’Œå“åº”ï¼Œçœ‹çœ‹è¿™äº›å¤´ä¿¡æ¯ç©¶ç«Ÿæ˜¯ä»€ä¹ˆã€‚</p>
<h3 id="ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§"><a href="#ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§" class="headerlink" title="ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§"></a>ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§</h3><p>ä¸‹é¢åˆ—å‡ºäº†ä¸€äº› Servlet è°ƒè¯•çš„æŠ€å·§ï¼š</p>
<ul>
<li>è¯·æ³¨æ„ï¼Œserver_root/classes ä¸ä¼šé‡è½½ï¼Œè€Œ server_root/servlets å¯èƒ½ä¼šã€‚</li>
<li>è¦æ±‚æµè§ˆå™¨æ˜¾ç¤ºå®ƒæ‰€æ˜¾ç¤ºçš„é¡µé¢çš„åŸå§‹å†…å®¹ã€‚è¿™æœ‰åŠ©äºè¯†åˆ«æ ¼å¼çš„é—®é¢˜ã€‚å®ƒé€šå¸¸æ˜¯â€è§†å›¾â€èœå•ä¸‹çš„ä¸€ä¸ªé€‰é¡¹ã€‚</li>
<li>é€šè¿‡å¼ºåˆ¶æ‰§è¡Œå®Œå…¨é‡æ–°åŠ è½½é¡µé¢æ¥ç¡®ä¿æµè§ˆå™¨è¿˜æ²¡æœ‰ç¼“å­˜å‰ä¸€ä¸ªè¯·æ±‚çš„è¾“å‡ºã€‚åœ¨ Netscape Navigator ä¸­ï¼Œè¯·ä½¿ç”¨ Shift-Reloadï¼Œåœ¨ Internet Explorer ä¸­ï¼Œè¯·ä½¿ç”¨ Shift-Refreshã€‚</li>
<li>è¯·ç¡®è®¤ servlet çš„ init() æ–¹æ³•æ¥å—ä¸€ä¸ª ServletConfig å‚æ•°ï¼Œå¹¶è°ƒç”¨ super.init(config)ã€‚</li>
</ul>
<h2 id="ğŸŒ¸servletå›½é™…åŒ–"><a href="#ğŸŒ¸servletå›½é™…åŒ–" class="headerlink" title="ğŸŒ¸servletå›½é™…åŒ–"></a>ğŸŒ¸servletå›½é™…åŒ–</h2><p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ä¸‰ä¸ªé‡è¦æœ¯è¯­ï¼š</p>
<ul>
<li><strong>å›½é™…åŒ–ï¼ˆi18nï¼‰ï¼š</strong>è¿™æ„å‘³ç€ä¸€ä¸ªç½‘ç«™æä¾›äº†ä¸åŒç‰ˆæœ¬çš„ç¿»è¯‘æˆè®¿é—®è€…çš„è¯­è¨€æˆ–å›½ç±çš„å†…å®¹ã€‚</li>
<li><strong>æœ¬åœ°åŒ–ï¼ˆl10nï¼‰ï¼š</strong>è¿™æ„å‘³ç€å‘ç½‘ç«™æ·»åŠ èµ„æºï¼Œä»¥ä½¿å…¶é€‚åº”ç‰¹å®šçš„åœ°ç†æˆ–æ–‡åŒ–åŒºåŸŸï¼Œä¾‹å¦‚ç½‘ç«™ç¿»è¯‘æˆå°åœ°æ–‡ï¼ˆHindiï¼‰ã€‚</li>
<li><strong>åŒºåŸŸè®¾ç½®ï¼ˆlocaleï¼‰ï¼š</strong>è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡åŒ–æˆ–åœ°ç†åŒºåŸŸã€‚å®ƒé€šå¸¸æŒ‡è¯­è¨€ç¬¦å·åè·Ÿä¸€ä¸ªä¸‹åˆ’çº¿å’Œä¸€ä¸ªå›½å®¶ç¬¦å·ã€‚ä¾‹å¦‚ â€œen_USâ€ è¡¨ç¤ºé’ˆå¯¹ US çš„è‹±è¯­åŒºåŸŸè®¾ç½®ã€‚</li>
</ul>
<p>å½“å»ºç«‹ä¸€ä¸ªå…¨çƒæ€§çš„ç½‘ç«™æ—¶æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚æœ¬æ•™ç¨‹ä¸ä¼šè®²è§£è¿™äº›æ³¨æ„äº‹é¡¹çš„å®Œæ•´ç»†èŠ‚ï¼Œä½†å®ƒä¼šé€šè¿‡ä¸€ä¸ªå¾ˆå¥½çš„å®ä¾‹å‘æ‚¨æ¼”ç¤ºå¦‚ä½•é€šè¿‡å·®å¼‚åŒ–å®šä½ï¼ˆå³åŒºåŸŸè®¾ç½®ï¼‰æ¥è®©ç½‘é¡µä»¥ä¸åŒè¯­è¨€å‘ˆç°ã€‚</p>
<p>Servlet å¯ä»¥æ ¹æ®è¯·æ±‚è€…çš„åŒºåŸŸè®¾ç½®æ‹¾å–ç›¸åº”ç‰ˆæœ¬çš„ç½‘ç«™ï¼Œå¹¶æ ¹æ®å½“åœ°çš„è¯­è¨€ã€æ–‡åŒ–å’Œéœ€æ±‚æä¾›ç›¸åº”çš„ç½‘ç«™ç‰ˆæœ¬ã€‚ä»¥ä¸‹æ˜¯ request å¯¹è±¡ä¸­è¿”å› Locale å¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.Locale request.getLocale()</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®"><a href="#ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®" class="headerlink" title="ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®"></a>ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®</h3><p>ä¸‹é¢åˆ—å‡ºäº†é‡è¦çš„åŒºåŸŸè®¾ç½®æ–¹æ³•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æ£€æµ‹è¯·æ±‚è€…çš„åœ°ç†ä½ç½®ã€è¯­è¨€å’ŒåŒºåŸŸè®¾ç½®ã€‚ä¸‹é¢æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¾ç¤ºäº†è¯·æ±‚è€…æµè§ˆå™¨ä¸­è®¾ç½®çš„å›½å®¶åç§°å’Œè¯­è¨€åç§°ã€‚</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">æ–¹æ³• &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>String getCountry()</strong> è¯¥æ–¹æ³•ä»¥ 2 ä¸ªå¤§å†™å­—æ¯å½¢å¼çš„ ISO 3166 æ ¼å¼è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„å›½å®¶/åœ°åŒºä»£ç ã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>String getDisplayCountry()</strong> è¯¥æ–¹æ³•è¿”å›é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„åŒºåŸŸè®¾ç½®çš„å›½å®¶çš„åç§°ã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>String getLanguage()</strong> è¯¥æ–¹æ³•ä»¥å°å†™å­—æ¯å½¢å¼çš„ ISO 639 æ ¼å¼è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„è¯­è¨€ä»£ç ã€‚</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>String getDisplayLanguage()</strong> è¯¥æ–¹æ³•è¿”å›é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„åŒºåŸŸè®¾ç½®çš„è¯­è¨€çš„åç§°ã€‚</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>String getISO3Country()</strong> è¯¥æ–¹æ³•è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„å›½å®¶çš„ä¸‰ä¸ªå­—æ¯ç¼©å†™ã€‚</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>String getISO3Language()</strong> è¯¥æ–¹æ³•è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„è¯­è¨€çš„ä¸‰ä¸ªå­—æ¯çš„ç¼©å†™ã€‚</td>
</tr>
</tbody></table>
<h3 id="ğŸå®ä¾‹-4"><a href="#ğŸå®ä¾‹-4" class="headerlink" title="ğŸå®ä¾‹"></a>ğŸå®ä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetLocale</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">      <span class="comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span></span><br><span class="line">      Locale locale = request.getLocale();</span><br><span class="line">      String language = locale.getLanguage();</span><br><span class="line">      String country = locale.getCountry();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">      response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">      String title = <span class="string">"æ£€æµ‹åŒºåŸŸè®¾ç½®"</span>;</span><br><span class="line">      String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">        <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + language + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + country + <span class="string">"&lt;/h2&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸè¯­è¨€è®¾ç½®"><a href="#ğŸè¯­è¨€è®¾ç½®" class="headerlink" title="ğŸè¯­è¨€è®¾ç½®"></a>ğŸè¯­è¨€è®¾ç½®</h3><p>Servlet å¯ä»¥è¾“å‡ºä»¥è¥¿æ¬§è¯­è¨€ï¼ˆå¦‚è‹±è¯­ã€è¥¿ç­ç‰™è¯­ã€å¾·è¯­ã€æ³•è¯­ã€æ„å¤§åˆ©è¯­ã€è·å…°è¯­ç­‰ï¼‰ç¼–å†™çš„é¡µé¢ã€‚åœ¨è¿™é‡Œï¼Œä¸ºäº†èƒ½æ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰çš„å­—ç¬¦ï¼Œè®¾ç½® Content-Language å¤´æ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<p>ç¬¬äºŒç‚¹æ˜¯ä½¿ç”¨ HTML å®ä½“æ˜¾ç¤ºæ‰€æœ‰çš„ç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚ï¼Œâ€Ã±â€ è¡¨ç¤º â€œÃ±â€ï¼Œâ€Â¡â€ è¡¨ç¤º â€œÂ¡â€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DisplaySpanish</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">// è®¾ç½®è¥¿ç­ç‰™è¯­è¨€ä»£ç </span></span><br><span class="line">    response.setHeader(<span class="string">"Content-Language"</span>, <span class="string">"es"</span>);</span><br><span class="line"></span><br><span class="line">    String title = <span class="string">"En Espa&amp;ntilde;ol"</span>;</span><br><span class="line">    String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">     out.println(docType +</span><br><span class="line">     <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;h1&gt;"</span> + <span class="string">"En Espa&amp;ntilde;ol:"</span> + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;h1&gt;"</span> + <span class="string">"&amp;iexcl;Hola Mundo!"</span> + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">     <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ"><a href="#ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ" class="headerlink" title="ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ"></a>ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ</h3><p>å¯ä»¥ä½¿ç”¨ java.text.DateFormat ç±»åŠå…¶é™æ€æ–¹æ³• getDateTimeInstance() æ¥æ ¼å¼åŒ–ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸå’Œæ—¶é—´ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ ¼å¼åŒ–ç‰¹å®šäºæŸä¸ªç»™å®šçš„åŒºåŸŸè®¾ç½®çš„æ—¥æœŸï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.text.DateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateLocale</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span></span><br><span class="line">    Locale locale = request.getLocale( );</span><br><span class="line">    String date = DateFormat.getDateTimeInstance(</span><br><span class="line">                                  DateFormat.FULL, </span><br><span class="line">                                  DateFormat.SHORT, </span><br><span class="line">                                  locale).format(<span class="keyword">new</span> Date( ));</span><br><span class="line"></span><br><span class="line">    String title = <span class="string">"ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ"</span>;</span><br><span class="line">    String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">      <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + date + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸"><a href="#ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸" class="headerlink" title="ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸"></a>ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸</h3><p>å¯ä»¥ä½¿ç”¨ java.text.NumberFormat ç±»åŠå…¶é™æ€æ–¹æ³• getCurrencyInstance() æ¥æ ¼å¼åŒ–æ•°å­—ï¼ˆæ¯”å¦‚ long ç±»å‹æˆ– double ç±»å‹ï¼‰ä¸ºç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ ¼å¼åŒ–ç‰¹å®šäºæŸä¸ªç»™å®šçš„åŒºåŸŸè®¾ç½®çš„è´§å¸ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">javaimport java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrencyLocale</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span></span><br><span class="line">    Locale locale = request.getLocale( );</span><br><span class="line">    NumberFormat nft = NumberFormat.getCurrencyInstance(locale);</span><br><span class="line">    String formattedCurr = nft.format(<span class="number">1000000</span>);</span><br><span class="line"></span><br><span class="line">    String title = <span class="string">"ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸"</span>;</span><br><span class="line">    String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">      <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + formattedCurr + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”"><a href="#ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”" class="headerlink" title="ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”"></a>ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”</h3><p>å¯ä»¥ä½¿ç”¨ java.text.NumberFormat ç±»åŠå…¶é™æ€æ–¹æ³• getPercentInstance() æ¥æ ¼å¼åŒ–ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ ¼å¼åŒ–ç‰¹å®šäºæŸä¸ªç»™å®šçš„åŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PercentageLocale</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>{</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                    HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span></span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span></span><br><span class="line">    Locale locale = request.getLocale( );</span><br><span class="line">    NumberFormat nft = NumberFormat.getPercentInstance(locale);</span><br><span class="line">    String formattedPerc = nft.format(<span class="number">0.51</span>);</span><br><span class="line"></span><br><span class="line">    String title = <span class="string">"ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”"</span>;</span><br><span class="line">    String docType = <span class="string">"&lt;!DOCTYPE html&gt; \n"</span>;</span><br><span class="line">      out.println(docType +</span><br><span class="line">      <span class="string">"&lt;html&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;body bgcolor=\"#f0f0f0\"&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;h1 align=\"center\"&gt;"</span> + formattedPerc + <span class="string">"&lt;/h1&gt;\n"</span> +</span><br><span class="line">      <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>





<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>
    
    
    
	
	<div>
		
			<div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------æœ¬æ–‡ç»“æŸ<i class="fa fa-paw"></i>æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------</div>
    
</div>
		
	</div>
	  
		<div>
		  <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/bolg_mask.png" alt="äº‘æ¾ˆ wechat" style="width: 200px; max-width: 100%;"/>
    <div>æ‰«ä¸€æ‰«ï¼Œç”¨æ‰‹æœºè®¿é—®å“¦</div>
</div>

		</div>
	  

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>æ‰“èµ</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="https://i.loli.net/2020/06/10/PNbxe7H5KXJgcoh.jpg" alt="äº‘æ¾ˆ å¾®ä¿¡æ”¯ä»˜"/>
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="https://i.loli.net/2020/06/10/FQkTKeyYndB5WhP.jpg" alt="äº‘æ¾ˆ æ”¯ä»˜å®"/>
        <p>æ”¯ä»˜å®</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>
    äº‘æ¾ˆ
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://liudufu.github.io/Servlet_Basics/" title="servletåŸºç¡€">https://liudufu.github.io/Servlet_Basics/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>
    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"><i class="fa fa-tag"></i> java</a>
          
            <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-tag"></i> å­¦ä¹ ç¬”è®°</a>
          
            <a href="/tags/Servlet/" rel="tag"><i class="fa fa-tag"></i> Servlet</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div id="needsharebutton-postbottom">
            <span class="btn">
              <i class="fa fa-share-alt" aria-hidden="true"></i>
            </span>
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/knowledge_C_language/" rel="prev" title="Easy to mix knowledge points of C language">
                <i class="fa fa-chevron-left"></i> Easy to mix knowledge points of C language
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/The_difference_and_basic_usage_of_JPA_and_JDBC/" rel="next" title="JPAä¸JDBCçš„åŒºåˆ«å’ŒåŸºæœ¬ç”¨æ³•">
                JPAä¸JDBCçš„åŒºåˆ«å’ŒåŸºæœ¬ç”¨æ³• <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC81MDQzNi8yNjkyMw"></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
			  <a href="/">
                <img class="site-author-image" itemprop="image"
                  src="https://s1.ax1x.com/2020/07/20/UfbOPJ.jpg"
                  alt="äº‘æ¾ˆ" />
			  </a>
            
              <p class="site-author-name" itemprop="name">äº‘æ¾ˆ</p>
              <p class="site-description motion-element" itemprop="description">Time would heal almost all wounds,if your wounds have not been healed up.please wait for a short while</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">75</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">106</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/liudufu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:2649176532@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/liudufu" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-weibo"></i>Weibo</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://me.csdn.net/weixin_45333934" target="_blank" title="csdn">
                      
                        <i class="fa fa-fw fa-heartbeat"></i>csdn</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/yourname" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.cnblogs.com/dufu-csdn/" target="_blank" title="åšå®¢å›­">
                      
                        <i class="fa fa-fw fa-instagram"></i>åšå®¢å›­</a>
                  </span>
                
            </div>
          
		  
		  
		  
		    <div class="links-of-blogroll motion-element links-of-blogroll-block">
			  <div class="links-of-blogroll-title">
			    <!-- modify icon to fire by szw -->
			    <i class="fa fa-history fa-" aria-hidden="true"></i>
			    è¿‘æœŸæ–‡ç« 
			  </div>
			  <ul class="links-of-blogroll-list">
			    
			    
				  <li class="recent_posts_li">
				    <a href="/Getting_Started_with_Request_Crawler/" title="requestçˆ¬è™«å…¥é—¨" target="_blank">requestçˆ¬è™«å…¥é—¨</a>
				  </li>
			    
				  <li class="recent_posts_li">
				    <a href="/Introduction_to_RE_Regularization/" title="reæ­£åˆ™å…¥é—¨" target="_blank">reæ­£åˆ™å…¥é—¨</a>
				  </li>
			    
				  <li class="recent_posts_li">
				    <a href="/knowledge_C_language/" title="Easy to mix knowledge points of C language" target="_blank">Easy to mix knowledge points of C language</a>
				  </li>
			    
				  <li class="recent_posts_li">
				    <a href="/Servlet_Basics/" title="servletåŸºç¡€" target="_blank">servletåŸºç¡€</a>
				  </li>
			    
				  <li class="recent_posts_li">
				    <a href="/The_difference_and_basic_usage_of_JPA_and_JDBC/" title="JPAä¸JDBCçš„åŒºåˆ«å’ŒåŸºæœ¬ç”¨æ³•" target="_blank">JPAä¸JDBCçš„åŒºåˆ«å’ŒåŸºæœ¬ç”¨æ³•</a>
				  </li>
			    
			  </ul>
		    </div>
		  
		  
		  <div id="music163player">
			<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1428784488&auto=1&height=66"></iframe>
		  </div>
		  
          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                å‹æƒ…é“¾æ¥
              </div>
        
			  
                <span class="links-of-author-item" style="text-align: left">
                  <a href="https://leetcode-cn.com/" title="leetcode" target="_blank" rel="external nofollow">leetcode</a>
                </span>
              
                <span class="links-of-author-item" style="text-align: left">
                  <a href="https://gitee.com/dufu-03-13/" title="ç äº‘" target="_blank" rel="external nofollow">ç äº‘</a>
                </span>
              
                <span class="links-of-author-item" style="text-align: left">
                  <a href="http://www.alloyteam.com/nav/" title="Webå‰ç«¯å¯¼èˆª" target="_blank" rel="external nofollow">Webå‰ç«¯å¯¼èˆª</a>
                </span>
              
                <span class="links-of-author-item" style="text-align: left">
                  <a href="http://www.36zhen.com/t?id=3448" title="å‰ç«¯ä¹¦ç±èµ„æ–™" target="_blank" rel="external nofollow">å‰ç«¯ä¹¦ç±èµ„æ–™</a>
                </span>
              
                <span class="links-of-author-item" style="text-align: left">
                  <a href="http://ife.baidu.com/" title="ç™¾åº¦å‰ç«¯æŠ€æœ¯å­¦é™¢" target="_blank" rel="external nofollow">ç™¾åº¦å‰ç«¯æŠ€æœ¯å­¦é™¢</a>
                </span>
              
                <span class="links-of-author-item" style="text-align: left">
                  <a href="http://wf.uisdc.com/cn/" title="googleå‰ç«¯å¼€å‘åŸºç¡€" target="_blank" rel="external nofollow">googleå‰ç«¯å¼€å‘åŸºç¡€</a>
                </span>
              
		  <div id="days"></div>
<script>
function show_date_time(){
window.setTimeout("show_date_time()",1000);
BirthDay=new Date("06/01/2020 15:13:14");
today=new Date();
timeold=(today.getTime()-BirthDay.getTime());
sectimeold=timeold/1000
secondsold=Math.floor(sectimeold);
msPerDay=24*60*60*1000
e_daysold=timeold/msPerDay
daysold=Math.floor(e_daysold);
e_hrsold=(e_daysold-daysold)*24;
hrsold=setzero(Math.floor(e_hrsold));
e_minsold=(e_hrsold-hrsold)*60;
minsold=setzero(Math.floor((e_hrsold-hrsold)*60));
seconds=setzero(Math.floor((e_minsold-minsold)*60));
document.getElementById('days').innerHTML="å·²è¿è¡Œ"+daysold+"å¤©"+hrsold+"å°æ—¶"+minsold+"åˆ†"+seconds+"ç§’";
}
function setzero(i){
if (i<10)
{i="0" + i};
return i;
}
show_date_time();
</script>


            </div>
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-ç®€ä»‹"><span class="nav-number">1.</span> <span class="nav-text">ğŸŒ¸Servlet ç®€ä»‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServlet-æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="nav-number">1.1.</span> <span class="nav-text">ğŸServlet æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServlet-æ¶æ„"><span class="nav-number">1.2.</span> <span class="nav-text">ğŸServlet æ¶æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServletåœ¨åšä»€ä¹ˆ"><span class="nav-number">1.3.</span> <span class="nav-text">ğŸServletåœ¨åšä»€ä¹ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-åˆ›å»ºçš„ä¸‰ç§æ–¹å¼"><span class="nav-number">2.</span> <span class="nav-text">ğŸŒ¸Servlet åˆ›å»ºçš„ä¸‰ç§æ–¹å¼</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå®ç°-Servlet-æ¥å£"><span class="nav-number">2.1.</span> <span class="nav-text">ğŸå®ç° Servlet æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç»§æ‰¿-GenericServlet-ç±»"><span class="nav-number">2.2.</span> <span class="nav-text">ğŸç»§æ‰¿ GenericServlet ç±»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç»§æ‰¿-HttpServlet-æ–¹æ³•"><span class="nav-number">2.3.</span> <span class="nav-text">ğŸç»§æ‰¿ HttpServlet æ–¹æ³•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸HttpServletã€GenericServlet-å’Œ-Servlet-çš„å…³ç³»"><span class="nav-number">3.</span> <span class="nav-text">ğŸŒ¸HttpServletã€GenericServlet å’Œ Servlet çš„å…³ç³»</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServlet"><span class="nav-number">3.1.</span> <span class="nav-text">ğŸServlet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸGenericServlet"><span class="nav-number">3.2.</span> <span class="nav-text">ğŸGenericServlet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸHttpServlet"><span class="nav-number">3.3.</span> <span class="nav-text">ğŸHttpServlet</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰"><span class="nav-number">4.</span> <span class="nav-text">ğŸŒ¸Servletç¯å¢ƒé…ç½®ï¼ˆEclipseï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸTomcat-ä¸‹è½½å®‰è£…"><span class="nav-number">4.1.</span> <span class="nav-text">ğŸTomcat ä¸‹è½½å®‰è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸTomcat-å’Œ-Eclipse-ç›¸å…³è”"><span class="nav-number">4.2.</span> <span class="nav-text">ğŸTomcat å’Œ Eclipse ç›¸å…³è”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸåˆ›å»ºå®ä¾‹"><span class="nav-number">4.3.</span> <span class="nav-text">ğŸåˆ›å»ºå®ä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServlet-å®ä¾‹åˆ›å»º"><span class="nav-number">4.4.</span> <span class="nav-text">ğŸServlet å®ä¾‹åˆ›å»º</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-ç”Ÿå‘½å‘¨æœŸ"><span class="nav-number">5.</span> <span class="nav-text">ğŸŒ¸Servlet ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸinit-æ–¹æ³•"><span class="nav-number">5.1.</span> <span class="nav-text">ğŸinit() æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸservice-æ–¹æ³•"><span class="nav-number">5.2.</span> <span class="nav-text">ğŸservice() æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸdoGet-æ–¹æ³•"><span class="nav-number">5.3.</span> <span class="nav-text">ğŸdoGet() æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸdoPost-æ–¹æ³•"><span class="nav-number">5.4.</span> <span class="nav-text">ğŸdoPost() æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸdestroy-æ–¹æ³•"><span class="nav-number">5.5.</span> <span class="nav-text">ğŸdestroy() æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸæ¶æ„å›¾"><span class="nav-number">5.6.</span> <span class="nav-text">ğŸæ¶æ„å›¾</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-å®ä¾‹"><span class="nav-number">6.</span> <span class="nav-text">ğŸŒ¸Servlet å®ä¾‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸHello-World-ç¤ºä¾‹ä»£ç "><span class="nav-number">6.1.</span> <span class="nav-text">ğŸHello World ç¤ºä¾‹ä»£ç </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServletéƒ¨ç½²"><span class="nav-number">6.2.</span> <span class="nav-text">ğŸServletéƒ¨ç½²</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸåè®°"><span class="nav-number">6.3.</span> <span class="nav-text">ğŸåè®°</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-è¡¨å•æ•°æ®"><span class="nav-number">7.</span> <span class="nav-text">ğŸŒ¸Servlet è¡¨å•æ•°æ®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸGET-æ–¹æ³•"><span class="nav-number">7.1.</span> <span class="nav-text">ğŸGET æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸPOST-æ–¹æ³•"><span class="nav-number">7.2.</span> <span class="nav-text">ğŸPOST æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸä½¿ç”¨-Servlet-è¯»å–è¡¨å•æ•°æ®"><span class="nav-number">7.3.</span> <span class="nav-text">ğŸä½¿ç”¨ Servlet è¯»å–è¡¨å•æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸä½¿ç”¨-URL-çš„-GET-æ–¹æ³•å®ä¾‹"><span class="nav-number">7.4.</span> <span class="nav-text">ğŸä½¿ç”¨ URL çš„ GET æ–¹æ³•å®ä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸä½¿ç”¨è¡¨å•çš„-GET-æ–¹æ³•å®ä¾‹"><span class="nav-number">7.5.</span> <span class="nav-text">ğŸä½¿ç”¨è¡¨å•çš„ GET æ–¹æ³•å®ä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸä½¿ç”¨è¡¨å•çš„-POST-æ–¹æ³•å®ä¾‹"><span class="nav-number">7.6.</span> <span class="nav-text">ğŸä½¿ç”¨è¡¨å•çš„ POST æ–¹æ³•å®ä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ°-Servlet-ç¨‹åº"><span class="nav-number">7.7.</span> <span class="nav-text">ğŸå°†å¤é€‰æ¡†æ•°æ®ä¼ é€’åˆ° Servlet ç¨‹åº</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°"><span class="nav-number">7.8.</span> <span class="nav-text">ğŸè¯»å–æ‰€æœ‰çš„è¡¨å•å‚æ•°</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-å®¢æˆ·ç«¯-HTTP-è¯·æ±‚"><span class="nav-number">8.</span> <span class="nav-text">ğŸŒ¸Servlet å®¢æˆ·ç«¯ HTTP è¯·æ±‚</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè¯»å–-HTTP-å¤´çš„æ–¹æ³•"><span class="nav-number">8.1.</span> <span class="nav-text">ğŸè¯»å– HTTP å¤´çš„æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸHTTP-Header-è¯·æ±‚å®ä¾‹"><span class="nav-number">8.2.</span> <span class="nav-text">ğŸHTTP Header è¯·æ±‚å®ä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-æœåŠ¡å™¨-HTTP-å“åº”"><span class="nav-number">9.</span> <span class="nav-text">ğŸŒ¸Servlet æœåŠ¡å™¨ HTTP å“åº”</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè®¾ç½®-HTTP-å“åº”æŠ¥å¤´çš„æ–¹æ³•"><span class="nav-number">9.1.</span> <span class="nav-text">ğŸè®¾ç½® HTTP å“åº”æŠ¥å¤´çš„æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸHTTP-Header-å“åº”å®ä¾‹"><span class="nav-number">9.2.</span> <span class="nav-text">ğŸHTTP Header å“åº”å®ä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-HTTP-çŠ¶æ€ç "><span class="nav-number">10.</span> <span class="nav-text">ğŸŒ¸Servlet HTTP çŠ¶æ€ç </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè®¾ç½®-HTTP-çŠ¶æ€ä»£ç çš„æ–¹æ³•"><span class="nav-number">10.1.</span> <span class="nav-text">ğŸè®¾ç½® HTTP çŠ¶æ€ä»£ç çš„æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸHTTP-çŠ¶æ€ç å®ä¾‹"><span class="nav-number">10.2.</span> <span class="nav-text">ğŸHTTP çŠ¶æ€ç å®ä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-ç¼–å†™è¿‡æ»¤å™¨"><span class="nav-number">11.</span> <span class="nav-text">ğŸŒ¸Servlet ç¼–å†™è¿‡æ»¤å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServlet-è¿‡æ»¤å™¨æ–¹æ³•"><span class="nav-number">11.1.</span> <span class="nav-text">ğŸServlet è¿‡æ»¤å™¨æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸFilterConfig-ä½¿ç”¨"><span class="nav-number">11.2.</span> <span class="nav-text">ğŸFilterConfig ä½¿ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServlet-è¿‡æ»¤å™¨å®ä¾‹"><span class="nav-number">11.3.</span> <span class="nav-text">ğŸServlet è¿‡æ»¤å™¨å®ä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸWeb-xml-ä¸­çš„-Servlet-è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet-Filter-Mappingï¼‰"><span class="nav-number">11.4.</span> <span class="nav-text">ğŸWeb.xml ä¸­çš„ Servlet è¿‡æ»¤å™¨æ˜ å°„ï¼ˆServlet Filter Mappingï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨"><span class="nav-number">11.5.</span> <span class="nav-text">ğŸä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº"><span class="nav-number">11.6.</span> <span class="nav-text">ğŸè¿‡æ»¤å™¨çš„åº”ç”¨é¡ºåº</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸweb-xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜"><span class="nav-number">11.7.</span> <span class="nav-text">ğŸweb.xmlé…ç½®å„èŠ‚ç‚¹è¯´æ˜</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-å¼‚å¸¸å¤„ç†"><span class="nav-number">12.</span> <span class="nav-text">ğŸŒ¸Servlet å¼‚å¸¸å¤„ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸweb-xml-é…ç½®"><span class="nav-number">12.1.</span> <span class="nav-text">ğŸweb.xml é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè¯·æ±‚å±æ€§-é”™è¯¯-å¼‚å¸¸"><span class="nav-number">12.2.</span> <span class="nav-text">ğŸè¯·æ±‚å±æ€§ - é”™è¯¯&#x2F;å¼‚å¸¸</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServlet-é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹"><span class="nav-number">12.3.</span> <span class="nav-text">ğŸServlet é”™è¯¯å¤„ç†ç¨‹åºå®ä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-Cookie-å¤„ç†"><span class="nav-number">13.</span> <span class="nav-text">ğŸŒ¸Servlet  Cookie å¤„ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸCookie-å‰–æ"><span class="nav-number">13.1.</span> <span class="nav-text">ğŸCookie å‰–æ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServlet-Cookie-æ–¹æ³•"><span class="nav-number">13.2.</span> <span class="nav-text">ğŸServlet Cookie æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸé€šè¿‡-Servlet-è®¾ç½®-Cookie"><span class="nav-number">13.3.</span> <span class="nav-text">ğŸé€šè¿‡ Servlet è®¾ç½® Cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå®ä¾‹"><span class="nav-number">13.4.</span> <span class="nav-text">ğŸå®ä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸé€šè¿‡-Servlet-è¯»å–-Cookie"><span class="nav-number">13.5.</span> <span class="nav-text">ğŸé€šè¿‡ Servlet è¯»å– Cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ğŸ‚-å®ä¾‹"><span class="nav-number">13.5.1.</span> <span class="nav-text">ğŸ‚ å®ä¾‹</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸé€šè¿‡-Servlet-åˆ é™¤-Cookie"><span class="nav-number">13.6.</span> <span class="nav-text">ğŸé€šè¿‡ Servlet åˆ é™¤ Cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ğŸ‚å®ä¾‹"><span class="nav-number">13.6.1.</span> <span class="nav-text">ğŸ‚å®ä¾‹</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-Session-è·Ÿè¸ª"><span class="nav-number">14.</span> <span class="nav-text">ğŸŒ¸Servlet Session è·Ÿè¸ª</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸCookies"><span class="nav-number">14.1.</span> <span class="nav-text">ğŸCookies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸéšè—çš„è¡¨å•å­—æ®µ"><span class="nav-number">14.2.</span> <span class="nav-text">ğŸéšè—çš„è¡¨å•å­—æ®µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServletä¸€ä¸ª-Web-æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„-HTML-è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„-session-ä¼šè¯-IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"><span class="nav-number">14.3.</span> <span class="nav-text">ğŸServletä¸€ä¸ª Web æœåŠ¡å™¨å¯ä»¥å‘é€ä¸€ä¸ªéšè—çš„ HTML è¡¨å•å­—æ®µï¼Œä»¥åŠä¸€ä¸ªå”¯ä¸€çš„ session ä¼šè¯ IDï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸURL-é‡å†™"><span class="nav-number">14.4.</span> <span class="nav-text">ğŸURL é‡å†™</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸHttpSession-å¯¹è±¡"><span class="nav-number">14.5.</span> <span class="nav-text">ğŸHttpSession å¯¹è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸSession-è·Ÿè¸ªå®ä¾‹"><span class="nav-number">14.6.</span> <span class="nav-text">ğŸSession è·Ÿè¸ªå®ä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸåˆ é™¤-Session-ä¼šè¯æ•°æ®"><span class="nav-number">14.7.</span> <span class="nav-text">ğŸåˆ é™¤ Session ä¼šè¯æ•°æ®</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servletæ•°æ®åº“è®¿é—®"><span class="nav-number">15.</span> <span class="nav-text">ğŸŒ¸Servletæ•°æ®åº“è®¿é—®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸåˆ›å»ºæµ‹è¯•æ•°æ®"><span class="nav-number">15.1.</span> <span class="nav-text">ğŸåˆ›å»ºæµ‹è¯•æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè®¿é—®æ•°æ®åº“"><span class="nav-number">15.2.</span> <span class="nav-text">ğŸè®¿é—®æ•°æ®åº“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç¬”è®°"><span class="nav-number">15.3.</span> <span class="nav-text">ğŸç¬”è®°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸæ³¨æ„"><span class="nav-number">15.4.</span> <span class="nav-text">ğŸæ³¨æ„</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-æ–‡ä»¶ä¸Šä¼ "><span class="nav-number">16.</span> <span class="nav-text">ğŸŒ¸Servlet æ–‡ä»¶ä¸Šä¼ </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•"><span class="nav-number">16.1.</span> <span class="nav-text">ğŸåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç¼–å†™åå°-Servlet"><span class="nav-number">16.2.</span> <span class="nav-text">ğŸç¼–å†™åå° Servlet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç¼–è¯‘å’Œè¿è¡Œ-Servlet"><span class="nav-number">16.3.</span> <span class="nav-text">ğŸç¼–è¯‘å’Œè¿è¡Œ Servlet</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-å¤„ç†æ—¥æœŸ"><span class="nav-number">17.</span> <span class="nav-text">ğŸŒ¸Servlet å¤„ç†æ—¥æœŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´"><span class="nav-number">17.1.</span> <span class="nav-text">ğŸè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸæ—¥æœŸæ¯”è¾ƒ"><span class="nav-number">17.2.</span> <span class="nav-text">ğŸæ—¥æœŸæ¯”è¾ƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸä½¿ç”¨-SimpleDateFormat-æ ¼å¼åŒ–æ—¥æœŸ"><span class="nav-number">17.3.</span> <span class="nav-text">ğŸä½¿ç”¨ SimpleDateFormat æ ¼å¼åŒ–æ—¥æœŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç "><span class="nav-number">17.4.</span> <span class="nav-text">ğŸç®€å•çš„æ—¥æœŸæ ¼å¼çš„æ ¼å¼ä»£ç </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸"><span class="nav-number">18.</span> <span class="nav-text">ğŸŒ¸</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå®ä¾‹-1"><span class="nav-number">18.1.</span> <span class="nav-text">ğŸå®ä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-ç‚¹å‡»è®¡æ•°å™¨"><span class="nav-number">19.</span> <span class="nav-text">ğŸŒ¸Servlet ç‚¹å‡»è®¡æ•°å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå®ä¾‹-2"><span class="nav-number">19.1.</span> <span class="nav-text">ğŸå®ä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨"><span class="nav-number">19.2.</span> <span class="nav-text">ğŸç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå®ä¾‹-3"><span class="nav-number">19.3.</span> <span class="nav-text">ğŸå®ä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-è‡ªåŠ¨åˆ·æ–°é¡µé¢"><span class="nav-number">20.</span> <span class="nav-text">ğŸŒ¸Servlet è‡ªåŠ¨åˆ·æ–°é¡µé¢</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹"><span class="nav-number">20.1.</span> <span class="nav-text">ğŸè‡ªåŠ¨åˆ·æ–°é¡µé¢å®ä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-å‘é€ç”µå­é‚®ä»¶"><span class="nav-number">21.</span> <span class="nav-text">ğŸŒ¸Servlet å‘é€ç”µå­é‚®ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶"><span class="nav-number">21.1.</span> <span class="nav-text">ğŸå‘é€ä¸€å°ç®€å•çš„ç”µå­é‚®ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå‘é€ä¸€å°-HTML-ç”µå­é‚®ä»¶"><span class="nav-number">21.2.</span> <span class="nav-text">ğŸå‘é€ä¸€å° HTML ç”µå­é‚®ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶"><span class="nav-number">21.3.</span> <span class="nav-text">ğŸåœ¨ç”µå­é‚®ä»¶ä¸­å‘é€é™„ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†"><span class="nav-number">21.4.</span> <span class="nav-text">ğŸç”¨æˆ·èº«ä»½è®¤è¯éƒ¨åˆ†</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸ServletåŒ…"><span class="nav-number">22.</span> <span class="nav-text">ğŸŒ¸ServletåŒ…</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸåˆ›å»ºåŒ…ä¸­çš„-Servlet"><span class="nav-number">22.1.</span> <span class="nav-text">ğŸåˆ›å»ºåŒ…ä¸­çš„ Servlet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç¼–è¯‘åŒ…ä¸­çš„-Servlet"><span class="nav-number">22.2.</span> <span class="nav-text">ğŸç¼–è¯‘åŒ…ä¸­çš„ Servlet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸServlet-æ‰“åŒ…éƒ¨ç½²"><span class="nav-number">22.3.</span> <span class="nav-text">ğŸServlet æ‰“åŒ…éƒ¨ç½²</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸Servlet-è°ƒè¯•"><span class="nav-number">23.</span> <span class="nav-text">ğŸŒ¸Servlet è°ƒè¯•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸSystem-out-println"><span class="nav-number">23.1.</span> <span class="nav-text">ğŸSystem.out.println()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸæ¶ˆæ¯æ—¥å¿—"><span class="nav-number">23.2.</span> <span class="nav-text">ğŸæ¶ˆæ¯æ—¥å¿—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸä½¿ç”¨-JDB-è°ƒè¯•å™¨"><span class="nav-number">23.3.</span> <span class="nav-text">ğŸä½¿ç”¨ JDB è°ƒè¯•å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸä½¿ç”¨æ³¨é‡Š"><span class="nav-number">23.4.</span> <span class="nav-text">ğŸä½¿ç”¨æ³¨é‡Š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯"><span class="nav-number">23.5.</span> <span class="nav-text">ğŸå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§"><span class="nav-number">23.6.</span> <span class="nav-text">ğŸé‡è¦çš„è°ƒè¯•æŠ€å·§</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸŒ¸servletå›½é™…åŒ–"><span class="nav-number">24.</span> <span class="nav-text">ğŸŒ¸servletå›½é™…åŒ–</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®"><span class="nav-number">24.1.</span> <span class="nav-text">ğŸæ£€æµ‹åŒºåŸŸè®¾ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸå®ä¾‹-4"><span class="nav-number">24.2.</span> <span class="nav-text">ğŸå®ä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸè¯­è¨€è®¾ç½®"><span class="nav-number">24.3.</span> <span class="nav-text">ğŸè¯­è¨€è®¾ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ"><span class="nav-number">24.4.</span> <span class="nav-text">ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸"><span class="nav-number">24.5.</span> <span class="nav-text">ğŸç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”"><span class="nav-number">24.6.</span> <span class="nav-text">ğŸç‰¹ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; 2020 &mdash; <span itemprop="copyrightYear">2023</span>
  <span class="with-love" id="heart">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">äº‘æ¾ˆ</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">226.5k</span>
  
  
   <span style="margin-left:8px;">
   <script src="http://s6.cnzz.com/stat.php?id=1278978367&web_id=1278978367" type="text/javascript"></script>
   </span>

</div>










<div class="weixin-box">
  <div class="weixin-menu">
    <div class="weixin-hover">
      <div class="weixin-description">å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œè®¢é˜…æœ¬åšå®¢</div>
    </div>
  </div>
</div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">åšå®¢å…¨ç«™å…±226.5kå­—</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      æ¬¡
    </span>
  
</div>








  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1278978367&web_id=1278978367" language="JavaScript"></script>
  </div>



        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
      <div id="needsharebutton-float">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("ToKAq6EqsKrh3oh1kL7AwHkb-9Nh9j0Va", "Jjb4SKFne0eAr0pwOARr8X21");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">

  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "default";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
      flOptions = {};
      
          flOptions.iconStyle = "default";
      
          flOptions.boxForm = "horizontal";
      
          flOptions.position = "topRight";
      
          flOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-float', flOptions);
    
  </script>

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

  

  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1278978367&web_id=1278978367" language="JavaScript"></script>
  </div>



  
  
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>
  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":150,"height":300,"left":120},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>
</html>
<!-- Ò³ï¿½ï¿½ï¿½ï¿½Ğ¡ï¿½ï¿½ï¿½ï¿½ -->
<script type="text/javascript" src="/js/src/love.js"></script>
